var cW=Object.defineProperty;var fW=(n,e,t)=>e in n?cW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var LT=(n,e,t)=>fW(n,typeof e!="symbol"?e+"":e,t);function hW(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Pu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var UT={exports:{}},jy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL;function dW(){if(mL)return jy;mL=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:a}}return jy.Fragment=e,jy.jsx=t,jy.jsxs=t,jy}var gL;function pW(){return gL||(gL=1,UT.exports=dW()),UT.exports}var U=pW(),kT={exports:{}},_n={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vL;function mW(){if(vL)return _n;vL=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function b(Q){return Q===null||typeof Q!="object"?null:(Q=v&&Q[v]||Q["@@iterator"],typeof Q=="function"?Q:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,S={};function w(Q,de,Ae){this.props=Q,this.context=de,this.refs=S,this.updater=Ae||_}w.prototype.isReactComponent={},w.prototype.setState=function(Q,de){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,de,"setState")},w.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function R(){}R.prototype=w.prototype;function P(Q,de,Ae){this.props=Q,this.context=de,this.refs=S,this.updater=Ae||_}var O=P.prototype=new R;O.constructor=P,M(O,w.prototype),O.isPureReactComponent=!0;var k=Array.isArray;function B(){}var D={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function I(Q,de,Ae){var We=Ae.ref;return{$$typeof:n,type:Q,key:de,ref:We!==void 0?We:null,props:Ae}}function L(Q,de){return I(Q.type,de,Q.props)}function H(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===n}function q(Q){var de={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Ae){return de[Ae]})}var W=/\/+/g;function oe(Q,de){return typeof Q=="object"&&Q!==null&&Q.key!=null?q(""+Q.key):de.toString(36)}function fe(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(B,B):(Q.status="pending",Q.then(function(de){Q.status==="pending"&&(Q.status="fulfilled",Q.value=de)},function(de){Q.status==="pending"&&(Q.status="rejected",Q.reason=de)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function te(Q,de,Ae,We,bt){var _e=typeof Q;(_e==="undefined"||_e==="boolean")&&(Q=null);var Te=!1;if(Q===null)Te=!0;else switch(_e){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(Q.$$typeof){case n:case e:Te=!0;break;case p:return Te=Q._init,te(Te(Q._payload),de,Ae,We,bt)}}if(Te)return bt=bt(Q),Te=We===""?"."+oe(Q,0):We,k(bt)?(Ae="",Te!=null&&(Ae=Te.replace(W,"$&/")+"/"),te(bt,de,Ae,"",function(et){return et})):bt!=null&&(H(bt)&&(bt=L(bt,Ae+(bt.key==null||Q&&Q.key===bt.key?"":(""+bt.key).replace(W,"$&/")+"/")+Te)),de.push(bt)),1;Te=0;var ut=We===""?".":We+":";if(k(Q))for(var ve=0;ve<Q.length;ve++)We=Q[ve],_e=ut+oe(We,ve),Te+=te(We,de,Ae,_e,bt);else if(ve=b(Q),typeof ve=="function")for(Q=ve.call(Q),ve=0;!(We=Q.next()).done;)We=We.value,_e=ut+oe(We,ve++),Te+=te(We,de,Ae,_e,bt);else if(_e==="object"){if(typeof Q.then=="function")return te(fe(Q),de,Ae,We,bt);throw de=String(Q),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return Te}function re(Q,de,Ae){if(Q==null)return Q;var We=[],bt=0;return te(Q,We,"","",function(_e){return de.call(Ae,_e,bt++)}),We}function he(Q){if(Q._status===-1){var de=Q._result;de=de(),de.then(function(Ae){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Ae)},function(Ae){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Ae)}),Q._status===-1&&(Q._status=0,Q._result=de)}if(Q._status===1)return Q._result.default;throw Q._result}var Me=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},Ne={map:re,forEach:function(Q,de,Ae){re(Q,function(){de.apply(this,arguments)},Ae)},count:function(Q){var de=0;return re(Q,function(){de++}),de},toArray:function(Q){return re(Q,function(de){return de})||[]},only:function(Q){if(!H(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return _n.Activity=g,_n.Children=Ne,_n.Component=w,_n.Fragment=t,_n.Profiler=r,_n.PureComponent=P,_n.StrictMode=i,_n.Suspense=c,_n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,_n.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return D.H.useMemoCache(Q)}},_n.cache=function(Q){return function(){return Q.apply(null,arguments)}},_n.cacheSignal=function(){return null},_n.cloneElement=function(Q,de,Ae){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var We=M({},Q.props),bt=Q.key;if(de!=null)for(_e in de.key!==void 0&&(bt=""+de.key),de)!F.call(de,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&de.ref===void 0||(We[_e]=de[_e]);var _e=arguments.length-2;if(_e===1)We.children=Ae;else if(1<_e){for(var Te=Array(_e),ut=0;ut<_e;ut++)Te[ut]=arguments[ut+2];We.children=Te}return I(Q.type,bt,We)},_n.createContext=function(Q){return Q={$$typeof:s,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:a,_context:Q},Q},_n.createElement=function(Q,de,Ae){var We,bt={},_e=null;if(de!=null)for(We in de.key!==void 0&&(_e=""+de.key),de)F.call(de,We)&&We!=="key"&&We!=="__self"&&We!=="__source"&&(bt[We]=de[We]);var Te=arguments.length-2;if(Te===1)bt.children=Ae;else if(1<Te){for(var ut=Array(Te),ve=0;ve<Te;ve++)ut[ve]=arguments[ve+2];bt.children=ut}if(Q&&Q.defaultProps)for(We in Te=Q.defaultProps,Te)bt[We]===void 0&&(bt[We]=Te[We]);return I(Q,_e,bt)},_n.createRef=function(){return{current:null}},_n.forwardRef=function(Q){return{$$typeof:l,render:Q}},_n.isValidElement=H,_n.lazy=function(Q){return{$$typeof:p,_payload:{_status:-1,_result:Q},_init:he}},_n.memo=function(Q,de){return{$$typeof:h,type:Q,compare:de===void 0?null:de}},_n.startTransition=function(Q){var de=D.T,Ae={};D.T=Ae;try{var We=Q(),bt=D.S;bt!==null&&bt(Ae,We),typeof We=="object"&&We!==null&&typeof We.then=="function"&&We.then(B,Me)}catch(_e){Me(_e)}finally{de!==null&&Ae.types!==null&&(de.types=Ae.types),D.T=de}},_n.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},_n.use=function(Q){return D.H.use(Q)},_n.useActionState=function(Q,de,Ae){return D.H.useActionState(Q,de,Ae)},_n.useCallback=function(Q,de){return D.H.useCallback(Q,de)},_n.useContext=function(Q){return D.H.useContext(Q)},_n.useDebugValue=function(){},_n.useDeferredValue=function(Q,de){return D.H.useDeferredValue(Q,de)},_n.useEffect=function(Q,de){return D.H.useEffect(Q,de)},_n.useEffectEvent=function(Q){return D.H.useEffectEvent(Q)},_n.useId=function(){return D.H.useId()},_n.useImperativeHandle=function(Q,de,Ae){return D.H.useImperativeHandle(Q,de,Ae)},_n.useInsertionEffect=function(Q,de){return D.H.useInsertionEffect(Q,de)},_n.useLayoutEffect=function(Q,de){return D.H.useLayoutEffect(Q,de)},_n.useMemo=function(Q,de){return D.H.useMemo(Q,de)},_n.useOptimistic=function(Q,de){return D.H.useOptimistic(Q,de)},_n.useReducer=function(Q,de,Ae){return D.H.useReducer(Q,de,Ae)},_n.useRef=function(Q){return D.H.useRef(Q)},_n.useState=function(Q){return D.H.useState(Q)},_n.useSyncExternalStore=function(Q,de,Ae){return D.H.useSyncExternalStore(Q,de,Ae)},_n.useTransition=function(){return D.H.useTransition()},_n.version="19.2.4",_n}var yL;function s0(){return yL||(yL=1,kT.exports=mW()),kT.exports}var j=s0();const Dm=Pu(j),y5=hW({__proto__:null,default:Dm},[j]);var zT={exports:{}},Hy={},FT={exports:{}},BT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bL;function gW(){return bL||(bL=1,(function(n){function e(te,re){var he=te.length;te.push(re);e:for(;0<he;){var Me=he-1>>>1,Ne=te[Me];if(0<r(Ne,re))te[Me]=re,te[he]=Ne,he=Me;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var re=te[0],he=te.pop();if(he!==re){te[0]=he;e:for(var Me=0,Ne=te.length,Q=Ne>>>1;Me<Q;){var de=2*(Me+1)-1,Ae=te[de],We=de+1,bt=te[We];if(0>r(Ae,he))We<Ne&&0>r(bt,Ae)?(te[Me]=bt,te[We]=he,Me=We):(te[Me]=Ae,te[de]=he,Me=de);else if(We<Ne&&0>r(bt,he))te[Me]=bt,te[We]=he,Me=We;else break e}}return re}function r(te,re){var he=te.sortIndex-re.sortIndex;return he!==0?he:te.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],h=[],p=1,g=null,v=3,b=!1,_=!1,M=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function O(te){for(var re=t(h);re!==null;){if(re.callback===null)i(h);else if(re.startTime<=te)i(h),re.sortIndex=re.expirationTime,e(c,re);else break;re=t(h)}}function k(te){if(M=!1,O(te),!_)if(t(c)!==null)_=!0,B||(B=!0,q());else{var re=t(h);re!==null&&fe(k,re.startTime-te)}}var B=!1,D=-1,F=5,I=-1;function L(){return S?!0:!(n.unstable_now()-I<F)}function H(){if(S=!1,B){var te=n.unstable_now();I=te;var re=!0;try{e:{_=!1,M&&(M=!1,R(D),D=-1),b=!0;var he=v;try{t:{for(O(te),g=t(c);g!==null&&!(g.expirationTime>te&&L());){var Me=g.callback;if(typeof Me=="function"){g.callback=null,v=g.priorityLevel;var Ne=Me(g.expirationTime<=te);if(te=n.unstable_now(),typeof Ne=="function"){g.callback=Ne,O(te),re=!0;break t}g===t(c)&&i(c),O(te)}else i(c);g=t(c)}if(g!==null)re=!0;else{var Q=t(h);Q!==null&&fe(k,Q.startTime-te),re=!1}}break e}finally{g=null,v=he,b=!1}re=void 0}}finally{re?q():B=!1}}}var q;if(typeof P=="function")q=function(){P(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,oe=W.port2;W.port1.onmessage=H,q=function(){oe.postMessage(null)}}else q=function(){w(H,0)};function fe(te,re){D=w(function(){te(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(te){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var he=v;v=re;try{return te()}finally{v=he}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(te,re){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var he=v;v=te;try{return re()}finally{v=he}},n.unstable_scheduleCallback=function(te,re,he){var Me=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Me+he:Me):he=Me,te){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=he+Ne,te={id:p++,callback:re,priorityLevel:te,startTime:he,expirationTime:Ne,sortIndex:-1},he>Me?(te.sortIndex=he,e(h,te),t(c)===null&&te===t(h)&&(M?(R(D),D=-1):M=!0,fe(k,he-Me))):(te.sortIndex=Ne,e(c,te),_||b||(_=!0,B||(B=!0,q()))),te},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(te){var re=v;return function(){var he=v;v=re;try{return te.apply(this,arguments)}finally{v=he}}}})(BT)),BT}var xL;function b5(){return xL||(xL=1,FT.exports=gW()),FT.exports}var VT={exports:{}},cs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _L;function vW(){if(_L)return cs;_L=1;var n=s0();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:h,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return cs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cs.createPortal=function(c,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(c,h,null,p)},cs.flushSync=function(c){var h=s.T,p=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=h,i.p=p,i.d.f()}},cs.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(c,h))},cs.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},cs.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var p=h.as,g=l(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:b}):p==="script"&&i.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},cs.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);i.d.M(c,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(c)},cs.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=l(p,h.crossOrigin);i.d.L(c,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},cs.preloadModule=function(c,h){if(typeof c=="string")if(h){var p=l(h.as,h.crossOrigin);i.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(c)},cs.requestFormReset=function(c){i.d.r(c)},cs.unstable_batchedUpdates=function(c,h){return c(h)},cs.useFormState=function(c,h,p){return s.H.useFormState(c,h,p)},cs.useFormStatus=function(){return s.H.useHostTransitionStatus()},cs.version="19.2.4",cs}var SL;function x5(){if(SL)return VT.exports;SL=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),VT.exports=vW(),VT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wL;function yW(){if(wL)return Hy;wL=1;var n=b5(),e=s0(),t=x5();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(i(188))}function h(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(i(188));return u!==o?null:o}for(var m=o,y=u;;){var T=m.return;if(T===null)break;var C=T.alternate;if(C===null){if(y=T.return,y!==null){m=y;continue}break}if(T.child===C.child){for(C=T.child;C;){if(C===m)return c(T),o;if(C===y)return c(T),u;C=C.sibling}throw Error(i(188))}if(m.return!==y.return)m=T,y=C;else{for(var G=!1,Z=T.child;Z;){if(Z===m){G=!0,m=T,y=C;break}if(Z===y){G=!0,y=T,m=C;break}Z=Z.sibling}if(!G){for(Z=C.child;Z;){if(Z===m){G=!0,m=C,y=T;break}if(Z===y){G=!0,y=C,m=T;break}Z=Z.sibling}if(!G)throw Error(i(189))}}if(m.alternate!==y)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),P=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=H&&o[H]||o["@@iterator"],typeof o=="function"?o:null)}var W=Symbol.for("react.client.reference");function oe(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===W?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case I:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case P:return o.displayName||"Context";case R:return(o._context.displayName||"Context")+".Consumer";case O:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return u=o.displayName||null,u!==null?u:oe(o.type)||"Memo";case F:u=o._payload,o=o._init;try{return oe(o(u))}catch{}}return null}var fe=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Me=[],Ne=-1;function Q(o){return{current:o}}function de(o){0>Ne||(o.current=Me[Ne],Me[Ne]=null,Ne--)}function Ae(o,u){Ne++,Me[Ne]=o.current,o.current=u}var We=Q(null),bt=Q(null),_e=Q(null),Te=Q(null);function ut(o,u){switch(Ae(_e,u),Ae(bt,o),Ae(We,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?z3(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=z3(u),o=F3(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}de(We),Ae(We,o)}function ve(){de(We),de(bt),de(_e)}function et(o){o.memoizedState!==null&&Ae(Te,o);var u=We.current,m=F3(u,o.type);u!==m&&(Ae(bt,o),Ae(We,m))}function At(o){bt.current===o&&(de(We),de(bt)),Te.current===o&&(de(Te),zy._currentValue=he)}var He,Ct;function Oe(o){if(He===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);He=u&&u[1]||"",Ct=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+He+o+Ct}var Ze=!1;function je(o,u){if(!o||Ze)return"";Ze=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Ve){var De=Ve}Reflect.construct(o,[],tt)}else{try{tt.call()}catch(Ve){De=Ve}o.call(tt.prototype)}}else{try{throw Error()}catch(Ve){De=Ve}(tt=o())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Ve){if(Ve&&De&&typeof Ve.stack=="string")return[Ve.stack,De.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),G=C[0],Z=C[1];if(G&&Z){var ue=G.split(`
`),Pe=Z.split(`
`);for(T=y=0;y<ue.length&&!ue[y].includes("DetermineComponentFrameRoot");)y++;for(;T<Pe.length&&!Pe[T].includes("DetermineComponentFrameRoot");)T++;if(y===ue.length||T===Pe.length)for(y=ue.length-1,T=Pe.length-1;1<=y&&0<=T&&ue[y]!==Pe[T];)T--;for(;1<=y&&0<=T;y--,T--)if(ue[y]!==Pe[T]){if(y!==1||T!==1)do if(y--,T--,0>T||ue[y]!==Pe[T]){var Ke=`
`+ue[y].replace(" at new "," at ");return o.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",o.displayName)),Ke}while(1<=y&&0<=T);break}}}finally{Ze=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?Oe(m):""}function ht(o,u){switch(o.tag){case 26:case 27:case 5:return Oe(o.type);case 16:return Oe("Lazy");case 13:return o.child!==u&&u!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return je(o.type,!1);case 11:return je(o.type.render,!1);case 1:return je(o.type,!0);case 31:return Oe("Activity");default:return""}}function ie(o){try{var u="",m=null;do u+=ht(o,m),m=o,o=o.return;while(o);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Mt=Object.prototype.hasOwnProperty,gt=n.unstable_scheduleCallback,Ut=n.unstable_cancelCallback,vt=n.unstable_shouldYield,J=n.unstable_requestPaint,X=n.unstable_now,pe=n.unstable_getCurrentPriorityLevel,ke=n.unstable_ImmediatePriority,Ye=n.unstable_UserBlockingPriority,Le=n.unstable_NormalPriority,Tt=n.unstable_LowPriority,le=n.unstable_IdlePriority,Ee=n.log,st=n.unstable_setDisableYieldValue,Ge=null,Xe=null;function ft(o){if(typeof Ee=="function"&&st(o),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Ge,o)}catch{}}var ae=Math.clz32?Math.clz32:se,ye=Math.log,dt=Math.LN2;function se(o){return o>>>=0,o===0?32:31-(ye(o)/dt|0)|0}var rt=256,nt=262144,ot=4194304;function it(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function $e(o,u,m){var y=o.pendingLanes;if(y===0)return 0;var T=0,C=o.suspendedLanes,G=o.pingedLanes;o=o.warmLanes;var Z=y&134217727;return Z!==0?(y=Z&~C,y!==0?T=it(y):(G&=Z,G!==0?T=it(G):m||(m=Z&~o,m!==0&&(T=it(m))))):(Z=y&~C,Z!==0?T=it(Z):G!==0?T=it(G):m||(m=y&~o,m!==0&&(T=it(m)))),T===0?0:u!==0&&u!==T&&(u&C)===0&&(C=T&-T,m=u&-u,C>=m||C===32&&(m&4194048)!==0)?u:T}function lt(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Ht(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cn(){var o=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),o}function Jt(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function si(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ar(o,u,m,y,T,C){var G=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var Z=o.entanglements,ue=o.expirationTimes,Pe=o.hiddenUpdates;for(m=G&~m;0<m;){var Ke=31-ae(m),tt=1<<Ke;Z[Ke]=0,ue[Ke]=-1;var De=Pe[Ke];if(De!==null)for(Pe[Ke]=null,Ke=0;Ke<De.length;Ke++){var Ve=De[Ke];Ve!==null&&(Ve.lane&=-536870913)}m&=~tt}y!==0&&ws(o,y,0),C!==0&&T===0&&o.tag!==0&&(o.suspendedLanes|=C&~(G&~u))}function ws(o,u,m){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-ae(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|m&261930}function Po(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var y=31-ae(m),T=1<<y;T&u|o[y]&u&&(o[y]|=u),m&=~T}}function nl(o,u){var m=u&-u;return m=(m&42)!==0?1:Ks(m),(m&(o.suspendedLanes|u))!==0?0:m}function Ks(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Aa(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Wl(){var o=re.p;return o!==0?o:(o=window.event,o===void 0?32:lL(o.type))}function Ai(o,u){var m=re.p;try{return re.p=o,u()}finally{re.p=m}}var oa=Math.random().toString(36).slice(2),xi="__reactFiber$"+oa,Ui="__reactProps$"+oa,$r="__reactContainer$"+oa,la="__reactEvents$"+oa,Ta="__reactListeners$"+oa,Io="__reactHandles$"+oa,$l="__reactResources$"+oa,ua="__reactMarker$"+oa;function Zs(o){delete o[xi],delete o[Ui],delete o[la],delete o[Ta],delete o[Io]}function Es(o){var u=o[xi];if(u)return u;for(var m=o.parentNode;m;){if(u=m[$r]||m[xi]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=W3(o);o!==null;){if(m=o[xi])return m;o=W3(o)}return u}o=m,m=o.parentNode}return null}function Ca(o){if(o=o[xi]||o[$r]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function ca(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function Qa(o){var u=o[$l];return u||(u=o[$l]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function K(o){o[ua]=!0}var ge=new Set,Ue={};function Re(o,u){xe(o,u),xe(o+"Capture",u)}function xe(o,u){for(Ue[o]=u,o=0;o<u.length;o++)ge.add(u[o])}var xt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pt={},mt={};function Dt(o){return Mt.call(mt,o)?!0:Mt.call(Pt,o)?!1:xt.test(o)?mt[o]=!0:(Pt[o]=!0,!1)}function kt(o,u,m){if(Dt(u))if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+m)}}function Vt(o,u,m){if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+m)}}function It(o,u,m,y){if(y===null)o.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(u,m,""+y)}}function $t(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Pn(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ni(o,u,m){var y=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var T=y.get,C=y.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return T.call(this)},set:function(G){m=""+G,C.call(this,G)}}),Object.defineProperty(o,u,{enumerable:y.enumerable}),{getValue:function(){return m},setValue:function(G){m=""+G},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Kt(o){if(!o._valueTracker){var u=Pn(o)?"checked":"value";o._valueTracker=ni(o,u,""+o[u])}}function on(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),y="";return o&&(y=Pn(o)?o.checked?"true":"false":o.value),o=y,o!==m?(u.setValue(o),!0):!1}function Et(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Mn=/[\n"\\]/g;function tn(o){return o.replace(Mn,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ki(o,u,m,y,T,C,G,Z){o.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?o.type=G:o.removeAttribute("type"),u!=null?G==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+$t(u)):o.value!==""+$t(u)&&(o.value=""+$t(u)):G!=="submit"&&G!=="reset"||o.removeAttribute("value"),u!=null?vi(o,G,$t(u)):m!=null?vi(o,G,$t(m)):y!=null&&o.removeAttribute("value"),T==null&&C!=null&&(o.defaultChecked=!!C),T!=null&&(o.checked=T&&typeof T!="function"&&typeof T!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?o.name=""+$t(Z):o.removeAttribute("name")}function Ms(o,u,m,y,T,C,G,Z){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.type=C),u!=null||m!=null){if(!(C!=="submit"&&C!=="reset"||u!=null)){Kt(o);return}m=m!=null?""+$t(m):"",u=u!=null?""+$t(u):m,Z||u===o.value||(o.value=u),o.defaultValue=u}y=y??T,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=Z?o.checked:!!y,o.defaultChecked=!!y,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(o.name=G),Kt(o)}function vi(o,u,m){u==="number"&&Et(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function Xr(o,u,m,y){if(o=o.options,u){u={};for(var T=0;T<m.length;T++)u["$"+m[T]]=!0;for(m=0;m<o.length;m++)T=u.hasOwnProperty("$"+o[m].value),o[m].selected!==T&&(o[m].selected=T),T&&y&&(o[m].defaultSelected=!0)}else{for(m=""+$t(m),u=null,T=0;T<o.length;T++){if(o[T].value===m){o[T].selected=!0,y&&(o[T].defaultSelected=!0);return}u!==null||o[T].disabled||(u=o[T])}u!==null&&(u.selected=!0)}}function Yn(o,u,m){if(u!=null&&(u=""+$t(u),u!==o.value&&(o.value=u),m==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=m!=null?""+$t(m):""}function Ti(o,u,m,y){if(u==null){if(y!=null){if(m!=null)throw Error(i(92));if(fe(y)){if(1<y.length)throw Error(i(93));y=y[0]}m=y}m==null&&(m=""),u=m}m=$t(u),o.defaultValue=m,y=o.textContent,y===m&&y!==""&&y!==null&&(o.value=y),Kt(o)}function hi(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var sr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function or(o,u,m){var y=u.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":y?o.setProperty(u,m):typeof m!="number"||m===0||sr.has(u)?u==="float"?o.cssFloat=m:o[u]=(""+m).trim():o[u]=m+"px"}function il(o,u,m){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var T in u)y=u[T],u.hasOwnProperty(T)&&m[T]!==y&&or(o,T,y)}else for(var C in u)u.hasOwnProperty(C)&&or(o,C,u[C])}function Ra(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $d=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $c(o){return rl.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function No(){}var lh=null;function As(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Xl=null,Qs=null;function Ou(o){var u=Ca(o);if(u&&(o=u.stateNode)){var m=o[Ui]||null;e:switch(o=u.stateNode,u.type){case"input":if(ki(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+tn(""+u)+'"][type="radio"]'),u=0;u<m.length;u++){var y=m[u];if(y!==o&&y.form===o.form){var T=y[Ui]||null;if(!T)throw Error(i(90));ki(y,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(u=0;u<m.length;u++)y=m[u],y.form===o.form&&on(y)}break e;case"textarea":Yn(o,m.value,m.defaultValue);break e;case"select":u=m.value,u!=null&&Xr(o,!!m.multiple,u,!1)}}}var Xc=!1;function Yl(o,u,m){if(Xc)return o(u,m);Xc=!0;try{var y=o(u);return y}finally{if(Xc=!1,(Xl!==null||Qs!==null)&&(Ho(),Xl&&(u=Xl,o=Qs,Qs=Xl=null,Ou(u),o)))for(u=0;u<o.length;u++)Ou(o[u])}}function Js(o,u){var m=o.stateNode;if(m===null)return null;var y=m[Ui]||null;if(y===null)return null;m=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(i(231,u,typeof m));return m}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yc=!1;if(Ts)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Yc=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Yc=!1}var Pa=null,uh=null,al=null;function Du(){if(al)return al;var o,u=uh,m=u.length,y,T="value"in Pa?Pa.value:Pa.textContent,C=T.length;for(o=0;o<m&&u[o]===T[o];o++);var G=m-o;for(y=1;y<=G&&u[m-y]===T[C-y];y++);return al=T.slice(o,1<y?1-y:void 0)}function Lu(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Oo(){return!0}function Do(){return!1}function Dr(o){function u(m,y,T,C,G){this._reactName=m,this._targetInst=T,this.type=y,this.nativeEvent=C,this.target=G,this.currentTarget=null;for(var Z in o)o.hasOwnProperty(Z)&&(m=o[Z],this[Z]=m?m(C):C[Z]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Oo:Do,this.isPropagationStopped=Do,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),u}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=Dr(sl),Kl=g({},sl,{view:0,detail:0}),ch=Dr(Kl),ol,Kc,Uo,Uu=g({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Uo&&(Uo&&o.type==="mousemove"?(ol=o.screenX-Uo.screenX,Kc=o.screenY-Uo.screenY):Kc=ol=0,Uo=o),ol)},movementY:function(o){return"movementY"in o?o.movementY:Kc}}),fh=Dr(Uu),ku=g({},Uu,{dataTransfer:0}),Xd=Dr(ku),hh=g({},Kl,{relatedTarget:0}),zu=Dr(hh),dh=g({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),qm=Dr(dh),ph=g({},sl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Yd=Dr(ph),Fu=g({},sl,{data:0}),eo=Dr(Fu),Zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mh(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Zd[o])?!!u[o]:!1}function Zl(){return mh}var fa=g({},Kl,{key:function(o){if(o.key){var u=Zc[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Lu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Kd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(o){return o.type==="keypress"?Lu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Lu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ll=Dr(fa),Qc=g({},Uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=Dr(Qc),E=g({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),V=Dr(E),$=g({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),ee=Dr($),be=g({},Uu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Dr(be),wt=g({},sl,{newState:0,oldState:0}),gn=Dr(wt),Ki=[9,13,27,32],Bn=Ts&&"CompositionEvent"in window,Ci=null;Ts&&"documentMode"in document&&(Ci=document.documentMode);var Ia=Ts&&"TextEvent"in window&&!Ci,ko=Ts&&(!Bn||Ci&&8<Ci&&11>=Ci),zo=" ",Ja=!1;function Ql(o,u){switch(o){case"keyup":return Ki.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ef=!1;function u_(o,u){switch(o){case"compositionend":return Jc(u);case"keypress":return u.which!==32?null:(Ja=!0,zo);case"textInput":return o=u.data,o===zo&&Ja?null:o;default:return null}}function R0(o,u){if(ef)return o==="compositionend"||!Bn&&Ql(o,u)?(o=Du(),al=uh=Pa=null,ef=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ko&&u.locale!=="ko"?null:u.data;default:return null}}var P0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!P0[o.type]:u==="textarea"}function Wm(o,u,m,y){Xl?Qs?Qs.push(y):Qs=[y]:Xl=y,u=pS(u,"onChange"),0<u.length&&(m=new Lo("onChange","change",null,m,y),o.push({event:m,listeners:u}))}var Bu=null,tf=null;function c_(o){N3(o,0)}function gh(o){var u=ca(o);if(on(u))return o}function N0(o,u){if(o==="change")return u}var cl=!1;if(Ts){var Qd;if(Ts){var O0="oninput"in document;if(!O0){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),O0=typeof D0.oninput=="function"}Qd=O0}else Qd=!1;cl=Qd&&(!document.documentMode||9<document.documentMode)}function to(){Bu&&(Bu.detachEvent("onpropertychange",Jd),tf=Bu=null)}function Jd(o){if(o.propertyName==="value"&&gh(tf)){var u=[];Wm(u,tf,o,As(o)),Yl(c_,u)}}function f_(o,u,m){o==="focusin"?(to(),Bu=u,tf=m,Bu.attachEvent("onpropertychange",Jd)):o==="focusout"&&to()}function L0(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return gh(tf)}function h_(o,u){if(o==="click")return gh(u)}function d_(o,u){if(o==="input"||o==="change")return gh(u)}function U0(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Na=typeof Object.is=="function"?Object.is:U0;function vh(o,u){if(Na(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),y=Object.keys(u);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var T=m[y];if(!Mt.call(u,T)||!Na(o[T],u[T]))return!1}return!0}function ep(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function yh(o,u){var m=ep(o);o=0;for(var y;m;){if(m.nodeType===3){if(y=o+m.textContent.length,o<=u&&y>=u)return{node:m,offset:u-o};o=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=ep(m)}}function _i(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?_i(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function p_(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Et(o.document);u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=Et(o.document)}return u}function k0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var m_=Ts&&"documentMode"in document&&11>=document.documentMode,fl=null,hl=null,bh=null,$m=!1;function xh(o,u,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;$m||fl==null||fl!==Et(y)||(y=fl,"selectionStart"in y&&k0(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),bh&&vh(bh,y)||(bh=y,y=pS(hl,"onSelect"),0<y.length&&(u=new Lo("onSelect","select",null,u,m),o.push({event:u,listeners:y}),u.target=fl)))}function ha(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var nf={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},tp={},z0={};Ts&&(z0=document.createElement("div").style,"AnimationEvent"in window||(delete nf.animationend.animation,delete nf.animationiteration.animation,delete nf.animationstart.animation),"TransitionEvent"in window||delete nf.transitionend.transition);function Jl(o){if(tp[o])return tp[o];if(!nf[o])return o;var u=nf[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in z0)return tp[o]=u[m];return o}var Xm=Jl("animationend"),np=Jl("animationiteration"),F0=Jl("animationstart"),g_=Jl("transitionrun"),rT=Jl("transitionstart"),v_=Jl("transitioncancel"),B0=Jl("transitionend"),no=new Map,ip="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ip.push("scrollEnd");function io(o,u){no.set(o,u),Re(u,[o])}var rp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ro=[],eu=0,Lr=0;function ap(){for(var o=eu,u=Lr=eu=0;u<o;){var m=ro[u];ro[u++]=null;var y=ro[u];ro[u++]=null;var T=ro[u];ro[u++]=null;var C=ro[u];if(ro[u++]=null,y!==null&&T!==null){var G=y.pending;G===null?T.next=T:(T.next=G.next,G.next=T),y.pending=T}C!==0&&Vu(m,T,C)}}function Ur(o,u,m,y){ro[eu++]=o,ro[eu++]=u,ro[eu++]=m,ro[eu++]=y,Lr|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Ym(o,u,m,y){return Ur(o,u,m,y),ao(o)}function Oa(o,u){return Ur(o,null,null,u),ao(o)}function Vu(o,u,m){o.lanes|=m;var y=o.alternate;y!==null&&(y.lanes|=m);for(var T=!1,C=o.return;C!==null;)C.childLanes|=m,y=C.alternate,y!==null&&(y.childLanes|=m),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(T=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,T&&u!==null&&(T=31-ae(m),o=C.hiddenUpdates,y=o[T],y===null?o[T]=[u]:y.push(u),u.lane=m|536870912),C):null}function ao(o){if(50<sc)throw sc=0,Sf=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var ju={};function V0(o,u,m,y){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(o,u,m,y){return new V0(o,u,m,y)}function Km(o){return o=o.prototype,!(!o||!o.isReactComponent)}function es(o,u){var m=o.alternate;return m===null?(m=zi(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function _h(o,u){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,u=m.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function dl(o,u,m,y,T,C){var G=0;if(y=o,typeof o=="function")Km(o)&&(G=1);else if(typeof o=="string")G=Qq(o,m,We.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case I:return o=zi(31,m,u,T),o.elementType=I,o.lanes=C,o;case M:return Hu(m.children,T,C,u);case S:G=8,T|=24;break;case w:return o=zi(12,m,u,T|2),o.elementType=w,o.lanes=C,o;case k:return o=zi(13,m,u,T),o.elementType=k,o.lanes=C,o;case B:return o=zi(19,m,u,T),o.elementType=B,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case P:G=10;break e;case R:G=9;break e;case O:G=11;break e;case D:G=14;break e;case F:G=16,y=null;break e}G=29,m=Error(i(130,o===null?"null":typeof o,"")),y=null}return u=zi(G,m,u,T),u.elementType=o,u.type=y,u.lanes=C,u}function Hu(o,u,m,y){return o=zi(7,o,y,u),o.lanes=m,o}function Zm(o,u,m){return o=zi(6,o,null,u),o.lanes=m,o}function Sh(o){var u=zi(18,null,null,0);return u.stateNode=o,u}function Qm(o,u,m){return u=zi(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var sp=new WeakMap;function Cs(o,u){if(typeof o=="object"&&o!==null){var m=sp.get(o);return m!==void 0?m:(u={value:o,source:u,stack:ie(u)},sp.set(o,u),u)}return{value:o,source:u,stack:ie(u)}}var Gu=[],qu=0,wh=null,Eh=0,ts=[],Ni=0,tu=null,Fi=1,Fo="";function pl(o,u){Gu[qu++]=Eh,Gu[qu++]=wh,wh=o,Eh=u}function y_(o,u,m){ts[Ni++]=Fi,ts[Ni++]=Fo,ts[Ni++]=tu,tu=o;var y=Fi;o=Fo;var T=32-ae(y)-1;y&=~(1<<T),m+=1;var C=32-ae(u)+T;if(30<C){var G=T-T%5;C=(y&(1<<G)-1).toString(32),y>>=G,T-=G,Fi=1<<32-ae(u)+T|m<<T|y,Fo=C+o}else Fi=1<<C|m<<T|y,Fo=o}function ml(o){o.return!==null&&(pl(o,1),y_(o,1,0))}function Jm(o){for(;o===wh;)wh=Gu[--qu],Gu[qu]=null,Eh=Gu[--qu],Gu[qu]=null;for(;o===tu;)tu=ts[--Ni],ts[Ni]=null,Fo=ts[--Ni],ts[Ni]=null,Fi=ts[--Ni],ts[Ni]=null}function eg(o,u){ts[Ni++]=Fi,ts[Ni++]=Fo,ts[Ni++]=tu,Fi=u.id,Fo=u.overflow,tu=o}var Zi=null,Si=null,zn=!1,nu=null,Rs=!1,Mh=Error(i(519));function gl(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(Cs(u,o)),Mh}function b_(o){var u=o.stateNode,m=o.type,y=o.memoizedProps;switch(u[xi]=o,u[Ui]=y,m){case"dialog":jn("cancel",u),jn("close",u);break;case"iframe":case"object":case"embed":jn("load",u);break;case"video":case"audio":for(m=0;m<bo.length;m++)jn(bo[m],u);break;case"source":jn("error",u);break;case"img":case"image":case"link":jn("error",u),jn("load",u);break;case"details":jn("toggle",u);break;case"input":jn("invalid",u),Ms(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":jn("invalid",u);break;case"textarea":jn("invalid",u),Ti(u,y.value,y.defaultValue,y.children)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||u.textContent===""+m||y.suppressHydrationWarning===!0||U3(u.textContent,m)?(y.popover!=null&&(jn("beforetoggle",u),jn("toggle",u)),y.onScroll!=null&&jn("scroll",u),y.onScrollEnd!=null&&jn("scrollend",u),y.onClick!=null&&(u.onclick=No),u=!0):u=!1,u||gl(o,!0)}function x_(o){for(Zi=o.return;Zi;)switch(Zi.tag){case 5:case 31:case 13:Rs=!1;return;case 27:case 3:Rs=!0;return;default:Zi=Zi.return}}function Ah(o){if(o!==Zi)return!1;if(!zn)return x_(o),zn=!0,!1;var u=o.tag,m;if((m=u!==3&&u!==27)&&((m=u===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||xT(o.type,o.memoizedProps)),m=!m),m&&Si&&gl(o),x_(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Si=q3(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Si=q3(o)}else u===27?(u=Si,Wh(o.type)?(o=MT,MT=null,Si=o):Si=u):Si=Zi?Il(o.stateNode.nextSibling):null;return!0}function Wu(){Si=Zi=null,zn=!1}function tg(){var o=nu;return o!==null&&(Ji===null?Ji=o:Ji.push.apply(Ji,o),nu=null),o}function vl(o){nu===null?nu=[o]:nu.push(o)}var Th=Q(null),$u=null,yl=null;function iu(o,u,m){Ae(Th,u._currentValue),u._currentValue=m}function bl(o){o._currentValue=Th.current,de(Th)}function ng(o,u,m){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===m)break;o=o.return}}function ig(o,u,m,y){var T=o.child;for(T!==null&&(T.return=o);T!==null;){var C=T.dependencies;if(C!==null){var G=T.child;C=C.firstContext;e:for(;C!==null;){var Z=C;C=T;for(var ue=0;ue<u.length;ue++)if(Z.context===u[ue]){C.lanes|=m,Z=C.alternate,Z!==null&&(Z.lanes|=m),ng(C.return,m,o),y||(G=null);break e}C=Z.next}}else if(T.tag===18){if(G=T.return,G===null)throw Error(i(341));G.lanes|=m,C=G.alternate,C!==null&&(C.lanes|=m),ng(G,m,o),G=null}else G=T.child;if(G!==null)G.return=T;else for(G=T;G!==null;){if(G===o){G=null;break}if(T=G.sibling,T!==null){T.return=G.return,G=T;break}G=G.return}T=G}}function xl(o,u,m,y){o=null;for(var T=u,C=!1;T!==null;){if(!C){if((T.flags&524288)!==0)C=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var G=T.alternate;if(G===null)throw Error(i(387));if(G=G.memoizedProps,G!==null){var Z=T.type;Na(T.pendingProps.value,G.value)||(o!==null?o.push(Z):o=[Z])}}else if(T===Te.current){if(G=T.alternate,G===null)throw Error(i(387));G.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(o!==null?o.push(zy):o=[zy])}T=T.return}o!==null&&ig(u,o,m,y),u.flags|=262144}function op(o){for(o=o.firstContext;o!==null;){if(!Na(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Xu(o){$u=o,yl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function un(o){return __($u,o)}function Ch(o,u){return $u===null&&Xu(o),__(o,u)}function __(o,u){var m=u._currentValue;if(u={context:u,memoizedValue:m,next:null},yl===null){if(o===null)throw Error(i(308));yl=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else yl=yl.next=u;return m}var S_=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(m,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(m){return m()})}},aT=n.unstable_scheduleCallback,sT=n.unstable_NormalPriority,gr={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function j0(){return{controller:new S_,data:new Map,refCount:0}}function rf(o){o.refCount--,o.refCount===0&&aT(sT,function(){o.controller.abort()})}var Ps=null,rg=0,ru=0,so=null;function H0(o,u){if(Ps===null){var m=Ps=[];rg=0,ru=Fe(),so={status:"pending",value:void 0,then:function(y){m.push(y)}}}return rg++,u.then(G0,G0),u}function G0(){if(--rg===0&&Ps!==null){so!==null&&(so.status="fulfilled");var o=Ps;Ps=null,ru=0,so=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function q0(o,u){var m=[],y={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var T=0;T<m.length;T++)(0,m[T])(u)},function(T){for(y.status="rejected",y.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),y}var w_=te.S;te.S=function(o,u){Ny=X(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&H0(o,u),w_!==null&&w_(o,u)};var Yu=Q(null);function ag(){var o=Yu.current;return o!==null?o:dn.pooledCache}function lp(o,u){u===null?Ae(Yu,Yu.current):Ae(Yu,u.pool)}function W0(){var o=ag();return o===null?null:{parent:gr._currentValue,pool:o}}var af=Error(i(460)),up=Error(i(474)),An=Error(i(542)),sg={then:function(){}};function ns(o){return o=o.status,o==="fulfilled"||o==="rejected"}function og(o,u,m){switch(m=o[m],m===void 0?o.push(u):m!==u&&(u.then(No,No),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,lf(o),o;default:if(typeof u.status=="string")u.then(No,No);else{if(o=dn,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var T=u;T.status="fulfilled",T.value=y}},function(y){if(u.status==="pending"){var T=u;T.status="rejected",T.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,lf(o),o}throw _l=u,af}}function sf(o){try{var u=o._init;return u(o._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(_l=m,af):m}}var _l=null;function of(){if(_l===null)throw Error(i(459));var o=_l;return _l=null,o}function lf(o){if(o===af||o===An)throw Error(i(483))}var uf=null,cf=0;function cp(o){var u=cf;return cf+=1,uf===null&&(uf=[]),og(uf,o,u)}function oo(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Rh(o,u){throw u.$$typeof===v?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function lg(o){function u(Se,me){if(o){var Ce=Se.deletions;Ce===null?(Se.deletions=[me],Se.flags|=16):Ce.push(me)}}function m(Se,me){if(!o)return null;for(;me!==null;)u(Se,me),me=me.sibling;return null}function y(Se){for(var me=new Map;Se!==null;)Se.key!==null?me.set(Se.key,Se):me.set(Se.index,Se),Se=Se.sibling;return me}function T(Se,me){return Se=es(Se,me),Se.index=0,Se.sibling=null,Se}function C(Se,me,Ce){return Se.index=Ce,o?(Ce=Se.alternate,Ce!==null?(Ce=Ce.index,Ce<me?(Se.flags|=67108866,me):Ce):(Se.flags|=67108866,me)):(Se.flags|=1048576,me)}function G(Se){return o&&Se.alternate===null&&(Se.flags|=67108866),Se}function Z(Se,me,Ce,Qe){return me===null||me.tag!==6?(me=Zm(Ce,Se.mode,Qe),me.return=Se,me):(me=T(me,Ce),me.return=Se,me)}function ue(Se,me,Ce,Qe){var Qt=Ce.type;return Qt===M?Ke(Se,me,Ce.props.children,Qe,Ce.key):me!==null&&(me.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===F&&sf(Qt)===me.type)?(me=T(me,Ce.props),oo(me,Ce),me.return=Se,me):(me=dl(Ce.type,Ce.key,Ce.props,null,Se.mode,Qe),oo(me,Ce),me.return=Se,me)}function Pe(Se,me,Ce,Qe){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ce.containerInfo||me.stateNode.implementation!==Ce.implementation?(me=Qm(Ce,Se.mode,Qe),me.return=Se,me):(me=T(me,Ce.children||[]),me.return=Se,me)}function Ke(Se,me,Ce,Qe,Qt){return me===null||me.tag!==7?(me=Hu(Ce,Se.mode,Qe,Qt),me.return=Se,me):(me=T(me,Ce),me.return=Se,me)}function tt(Se,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=Zm(""+me,Se.mode,Ce),me.return=Se,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case b:return Ce=dl(me.type,me.key,me.props,null,Se.mode,Ce),oo(Ce,me),Ce.return=Se,Ce;case _:return me=Qm(me,Se.mode,Ce),me.return=Se,me;case F:return me=sf(me),tt(Se,me,Ce)}if(fe(me)||q(me))return me=Hu(me,Se.mode,Ce,null),me.return=Se,me;if(typeof me.then=="function")return tt(Se,cp(me),Ce);if(me.$$typeof===P)return tt(Se,Ch(Se,me),Ce);Rh(Se,me)}return null}function De(Se,me,Ce,Qe){var Qt=me!==null?me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Qt!==null?null:Z(Se,me,""+Ce,Qe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case b:return Ce.key===Qt?ue(Se,me,Ce,Qe):null;case _:return Ce.key===Qt?Pe(Se,me,Ce,Qe):null;case F:return Ce=sf(Ce),De(Se,me,Ce,Qe)}if(fe(Ce)||q(Ce))return Qt!==null?null:Ke(Se,me,Ce,Qe,null);if(typeof Ce.then=="function")return De(Se,me,cp(Ce),Qe);if(Ce.$$typeof===P)return De(Se,me,Ch(Se,Ce),Qe);Rh(Se,Ce)}return null}function Ve(Se,me,Ce,Qe,Qt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Se=Se.get(Ce)||null,Z(me,Se,""+Qe,Qt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case b:return Se=Se.get(Qe.key===null?Ce:Qe.key)||null,ue(me,Se,Qe,Qt);case _:return Se=Se.get(Qe.key===null?Ce:Qe.key)||null,Pe(me,Se,Qe,Qt);case F:return Qe=sf(Qe),Ve(Se,me,Ce,Qe,Qt)}if(fe(Qe)||q(Qe))return Se=Se.get(Ce)||null,Ke(me,Se,Qe,Qt,null);if(typeof Qe.then=="function")return Ve(Se,me,Ce,cp(Qe),Qt);if(Qe.$$typeof===P)return Ve(Se,me,Ce,Ch(me,Qe),Qt);Rh(me,Qe)}return null}function jt(Se,me,Ce,Qe){for(var Qt=null,ii=null,Gt=me,In=me=0,Gn=null;Gt!==null&&In<Ce.length;In++){Gt.index>In?(Gn=Gt,Gt=null):Gn=Gt.sibling;var ri=De(Se,Gt,Ce[In],Qe);if(ri===null){Gt===null&&(Gt=Gn);break}o&&Gt&&ri.alternate===null&&u(Se,Gt),me=C(ri,me,In),ii===null?Qt=ri:ii.sibling=ri,ii=ri,Gt=Gn}if(In===Ce.length)return m(Se,Gt),zn&&pl(Se,In),Qt;if(Gt===null){for(;In<Ce.length;In++)Gt=tt(Se,Ce[In],Qe),Gt!==null&&(me=C(Gt,me,In),ii===null?Qt=Gt:ii.sibling=Gt,ii=Gt);return zn&&pl(Se,In),Qt}for(Gt=y(Gt);In<Ce.length;In++)Gn=Ve(Gt,Se,In,Ce[In],Qe),Gn!==null&&(o&&Gn.alternate!==null&&Gt.delete(Gn.key===null?In:Gn.key),me=C(Gn,me,In),ii===null?Qt=Gn:ii.sibling=Gn,ii=Gn);return o&&Gt.forEach(function(Zh){return u(Se,Zh)}),zn&&pl(Se,In),Qt}function ln(Se,me,Ce,Qe){if(Ce==null)throw Error(i(151));for(var Qt=null,ii=null,Gt=me,In=me=0,Gn=null,ri=Ce.next();Gt!==null&&!ri.done;In++,ri=Ce.next()){Gt.index>In?(Gn=Gt,Gt=null):Gn=Gt.sibling;var Zh=De(Se,Gt,ri.value,Qe);if(Zh===null){Gt===null&&(Gt=Gn);break}o&&Gt&&Zh.alternate===null&&u(Se,Gt),me=C(Zh,me,In),ii===null?Qt=Zh:ii.sibling=Zh,ii=Zh,Gt=Gn}if(ri.done)return m(Se,Gt),zn&&pl(Se,In),Qt;if(Gt===null){for(;!ri.done;In++,ri=Ce.next())ri=tt(Se,ri.value,Qe),ri!==null&&(me=C(ri,me,In),ii===null?Qt=ri:ii.sibling=ri,ii=ri);return zn&&pl(Se,In),Qt}for(Gt=y(Gt);!ri.done;In++,ri=Ce.next())ri=Ve(Gt,Se,In,ri.value,Qe),ri!==null&&(o&&ri.alternate!==null&&Gt.delete(ri.key===null?In:ri.key),me=C(ri,me,In),ii===null?Qt=ri:ii.sibling=ri,ii=ri);return o&&Gt.forEach(function(uW){return u(Se,uW)}),zn&&pl(Se,In),Qt}function Mi(Se,me,Ce,Qe){if(typeof Ce=="object"&&Ce!==null&&Ce.type===M&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case b:e:{for(var Qt=Ce.key;me!==null;){if(me.key===Qt){if(Qt=Ce.type,Qt===M){if(me.tag===7){m(Se,me.sibling),Qe=T(me,Ce.props.children),Qe.return=Se,Se=Qe;break e}}else if(me.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===F&&sf(Qt)===me.type){m(Se,me.sibling),Qe=T(me,Ce.props),oo(Qe,Ce),Qe.return=Se,Se=Qe;break e}m(Se,me);break}else u(Se,me);me=me.sibling}Ce.type===M?(Qe=Hu(Ce.props.children,Se.mode,Qe,Ce.key),Qe.return=Se,Se=Qe):(Qe=dl(Ce.type,Ce.key,Ce.props,null,Se.mode,Qe),oo(Qe,Ce),Qe.return=Se,Se=Qe)}return G(Se);case _:e:{for(Qt=Ce.key;me!==null;){if(me.key===Qt)if(me.tag===4&&me.stateNode.containerInfo===Ce.containerInfo&&me.stateNode.implementation===Ce.implementation){m(Se,me.sibling),Qe=T(me,Ce.children||[]),Qe.return=Se,Se=Qe;break e}else{m(Se,me);break}else u(Se,me);me=me.sibling}Qe=Qm(Ce,Se.mode,Qe),Qe.return=Se,Se=Qe}return G(Se);case F:return Ce=sf(Ce),Mi(Se,me,Ce,Qe)}if(fe(Ce))return jt(Se,me,Ce,Qe);if(q(Ce)){if(Qt=q(Ce),typeof Qt!="function")throw Error(i(150));return Ce=Qt.call(Ce),ln(Se,me,Ce,Qe)}if(typeof Ce.then=="function")return Mi(Se,me,cp(Ce),Qe);if(Ce.$$typeof===P)return Mi(Se,me,Ch(Se,Ce),Qe);Rh(Se,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,me!==null&&me.tag===6?(m(Se,me.sibling),Qe=T(me,Ce),Qe.return=Se,Se=Qe):(m(Se,me),Qe=Zm(Ce,Se.mode,Qe),Qe.return=Se,Se=Qe),G(Se)):m(Se,me)}return function(Se,me,Ce,Qe){try{cf=0;var Qt=Mi(Se,me,Ce,Qe);return uf=null,Qt}catch(Gt){if(Gt===af||Gt===An)throw Gt;var ii=zi(29,Gt,null,Se.mode);return ii.lanes=Qe,ii.return=Se,ii}finally{}}}var au=lg(!0),ug=lg(!1),Da=!1;function fp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $0(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function su(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ku(o,u,m){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(qt&2)!==0){var T=y.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),y.pending=u,u=ao(o),Vu(o,null,m),u}return Ur(o,y,u,m),ao(o)}function Zu(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,Po(o,m)}}function Zt(o,u){var m=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var T=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var G={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};C===null?T=C=G:C=C.next=G,m=m.next}while(m!==null);C===null?T=C=u:C=C.next=u}else T=C=u;m={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}var X0=!1;function hp(){if(X0){var o=so;if(o!==null)throw o}}function Ph(o,u,m,y){X0=!1;var T=o.updateQueue;Da=!1;var C=T.firstBaseUpdate,G=T.lastBaseUpdate,Z=T.shared.pending;if(Z!==null){T.shared.pending=null;var ue=Z,Pe=ue.next;ue.next=null,G===null?C=Pe:G.next=Pe,G=ue;var Ke=o.alternate;Ke!==null&&(Ke=Ke.updateQueue,Z=Ke.lastBaseUpdate,Z!==G&&(Z===null?Ke.firstBaseUpdate=Pe:Z.next=Pe,Ke.lastBaseUpdate=ue))}if(C!==null){var tt=T.baseState;G=0,Ke=Pe=ue=null,Z=C;do{var De=Z.lane&-536870913,Ve=De!==Z.lane;if(Ve?(wn&De)===De:(y&De)===De){De!==0&&De===ru&&(X0=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var jt=o,ln=Z;De=u;var Mi=m;switch(ln.tag){case 1:if(jt=ln.payload,typeof jt=="function"){tt=jt.call(Mi,tt,De);break e}tt=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=ln.payload,De=typeof jt=="function"?jt.call(Mi,tt,De):jt,De==null)break e;tt=g({},tt,De);break e;case 2:Da=!0}}De=Z.callback,De!==null&&(o.flags|=64,Ve&&(o.flags|=8192),Ve=T.callbacks,Ve===null?T.callbacks=[De]:Ve.push(De))}else Ve={lane:De,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ke===null?(Pe=Ke=Ve,ue=tt):Ke=Ke.next=Ve,G|=De;if(Z=Z.next,Z===null){if(Z=T.shared.pending,Z===null)break;Ve=Z,Z=Ve.next,Ve.next=null,T.lastBaseUpdate=Ve,T.shared.pending=null}}while(!0);Ke===null&&(ue=tt),T.baseState=ue,T.firstBaseUpdate=Pe,T.lastBaseUpdate=Ke,C===null&&(T.shared.lanes=0),Cl|=G,o.lanes=G,o.memoizedState=tt}}function Ih(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function E_(o,u){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Ih(m[o],u)}var Nh=Q(null),cg=Q(0);function M_(o,u){o=Ds,Ae(cg,o),Ae(Nh,u),Ds=o|u.baseLanes}function Y0(){Ae(cg,Ds),Ae(Nh,Nh.current)}function dp(){Ds=cg.current,de(Nh),de(cg)}var is=Q(null),La=null;function ou(o){var u=o.alternate;Ae(Fn,Fn.current&1),Ae(is,o),La===null&&(u===null||Nh.current!==null||u.memoizedState!==null)&&(La=o)}function K0(o){Ae(Fn,Fn.current),Ae(is,o),La===null&&(La=o)}function A_(o){o.tag===22?(Ae(Fn,Fn.current),Ae(is,o),La===null&&(La=o)):rs()}function rs(){Ae(Fn,Fn.current),Ae(is,is.current)}function lr(o){de(is),La===o&&(La=null),de(Fn)}var Fn=Q(0);function Is(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||wT(m)||ET(m)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Oi=0,bn=null,di=null,Ln=null,lo=!1,Oh=!1,ff=!1,fg=0,pp=0,Dh=null,Z0=0;function Bi(){throw Error(i(321))}function Q0(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!Na(o[m],u[m]))return!1;return!0}function hg(o,u,m,y,T,C){return Oi=C,bn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,te.H=o===null||o.memoizedState===null?rS:yy,ff=!1,C=m(y,T),ff=!1,Oh&&(C=hf(u,m,y,T)),T_(o),C}function T_(o){te.H=Lh;var u=di!==null&&di.next!==null;if(Oi=0,Ln=di=bn=null,lo=!1,pp=0,Dh=null,u)throw Error(i(300));o===null||vr||(o=o.dependencies,o!==null&&op(o)&&(vr=!0))}function hf(o,u,m,y){bn=o;var T=0;do{if(Oh&&(Dh=null),pp=0,Oh=!1,25<=T)throw Error(i(301));if(T+=1,Ln=di=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}te.H=uo,C=u(m,y)}while(Oh);return C}function df(){var o=te.H,u=o.useState()[0];return u=typeof u.then=="function"?mp(u):u,o=o.useState()[0],(di!==null?di.memoizedState:null)!==o&&(bn.flags|=1024),u}function J0(){var o=fg!==0;return fg=0,o}function ey(o,u,m){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m}function ty(o){if(lo){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}lo=!1}Oi=0,Ln=di=bn=null,Oh=!1,pp=fg=0,Dh=null}function Mr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?bn.memoizedState=Ln=o:Ln=Ln.next=o,Ln}function ur(){if(di===null){var o=bn.alternate;o=o!==null?o.memoizedState:null}else o=di.next;var u=Ln===null?bn.memoizedState:Ln.next;if(u!==null)Ln=u,di=o;else{if(o===null)throw bn.alternate===null?Error(i(467)):Error(i(310));di=o,o={memoizedState:di.memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},Ln===null?bn.memoizedState=Ln=o:Ln=Ln.next=o}return Ln}function dg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mp(o){var u=pp;return pp+=1,Dh===null&&(Dh=[]),o=og(Dh,o,u),u=bn,(Ln===null?u.memoizedState:Ln.next)===null&&(u=u.alternate,te.H=u===null||u.memoizedState===null?rS:yy),o}function Qu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return mp(o);if(o.$$typeof===P)return un(o)}throw Error(i(438,String(o)))}function ny(o){var u=null,m=bn.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var y=bn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(T){return T.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=dg(),bn.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(o),y=0;y<o;y++)m[y]=L;return u.index++,m}function lu(o,u){return typeof u=="function"?u(o):u}function pg(o){var u=ur();return iy(u,di,o)}function iy(o,u,m){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=m;var T=o.baseQueue,C=y.pending;if(C!==null){if(T!==null){var G=T.next;T.next=C.next,C.next=G}u.baseQueue=T=C,y.pending=null}if(C=o.baseState,T===null)o.memoizedState=C;else{u=T.next;var Z=G=null,ue=null,Pe=u,Ke=!1;do{var tt=Pe.lane&-536870913;if(tt!==Pe.lane?(wn&tt)===tt:(Oi&tt)===tt){var De=Pe.revertLane;if(De===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),tt===ru&&(Ke=!0);else if((Oi&De)===De){Pe=Pe.next,De===ru&&(Ke=!0);continue}else tt={lane:0,revertLane:Pe.revertLane,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ue===null?(Z=ue=tt,G=C):ue=ue.next=tt,bn.lanes|=De,Cl|=De;tt=Pe.action,ff&&m(C,tt),C=Pe.hasEagerState?Pe.eagerState:m(C,tt)}else De={lane:tt,revertLane:Pe.revertLane,gesture:Pe.gesture,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ue===null?(Z=ue=De,G=C):ue=ue.next=De,bn.lanes|=tt,Cl|=tt;Pe=Pe.next}while(Pe!==null&&Pe!==u);if(ue===null?G=C:ue.next=Z,!Na(C,o.memoizedState)&&(vr=!0,Ke&&(m=so,m!==null)))throw m;o.memoizedState=C,o.baseState=G,o.baseQueue=ue,y.lastRenderedState=C}return T===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function ry(o){var u=ur(),m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=o;var y=m.dispatch,T=m.pending,C=u.memoizedState;if(T!==null){m.pending=null;var G=T=T.next;do C=o(C,G.action),G=G.next;while(G!==T);Na(C,u.memoizedState)||(vr=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),m.lastRenderedState=C}return[C,y]}function C_(o,u,m){var y=bn,T=ur(),C=zn;if(C){if(m===void 0)throw Error(i(407));m=m()}else m=u();var G=!Na((di||T).memoizedState,m);if(G&&(T.memoizedState=m,vr=!0),T=T.queue,hy(I_.bind(null,y,T,o),[o]),T.getSnapshot!==u||G||Ln!==null&&Ln.memoizedState.tag&1){if(y.flags|=2048,Ju(9,{destroy:void 0},P_.bind(null,y,T,m,u),null),dn===null)throw Error(i(349));C||(Oi&127)!==0||R_(y,u,m)}return m}function R_(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=bn.updateQueue,u===null?(u=dg(),bn.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function P_(o,u,m,y){u.value=m,u.getSnapshot=y,N_(u)&&O_(o)}function I_(o,u,m){return m(function(){N_(u)&&O_(o)})}function N_(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!Na(o,m)}catch{return!0}}function O_(o){var u=Oa(o,2);u!==null&&Cn(u,o,2)}function ay(o){var u=Mr();if(typeof o=="function"){var m=o;if(o=m(),ff){ft(!0);try{m()}finally{ft(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:o},u}function sy(o,u,m,y){return o.baseState=m,iy(o,di,typeof y=="function"?y:lu)}function oT(o,u,m,y,T){if(yg(o))throw Error(i(485));if(o=u.action,o!==null){var C={payload:T,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){C.listeners.push(G)}};te.T!==null?m(!0):C.isTransition=!1,y(C),m=u.pending,m===null?(C.next=u.pending=C,D_(u,C)):(C.next=m.next,u.pending=m.next=C)}}function D_(o,u){var m=u.action,y=u.payload,T=o.state;if(u.isTransition){var C=te.T,G={};te.T=G;try{var Z=m(T,y),ue=te.S;ue!==null&&ue(G,Z),L_(o,u,Z)}catch(Pe){oy(o,u,Pe)}finally{C!==null&&G.types!==null&&(C.types=G.types),te.T=C}}else try{C=m(T,y),L_(o,u,C)}catch(Pe){oy(o,u,Pe)}}function L_(o,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){U_(o,u,y)},function(y){return oy(o,u,y)}):U_(o,u,m)}function U_(o,u,m){u.status="fulfilled",u.value=m,k_(u),o.state=m,u=o.pending,u!==null&&(m=u.next,m===u?o.pending=null:(m=m.next,u.next=m,D_(o,m)))}function oy(o,u,m){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=m,k_(u),u=u.next;while(u!==y)}o.action=null}function k_(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function ly(o,u){return u}function uy(o,u){if(zn){var m=dn.formState;if(m!==null){e:{var y=bn;if(zn){if(Si){t:{for(var T=Si,C=Rs;T.nodeType!==8;){if(!C){T=null;break t}if(T=Il(T.nextSibling),T===null){T=null;break t}}C=T.data,T=C==="F!"||C==="F"?T:null}if(T){Si=Il(T.nextSibling),y=T.data==="F!";break e}}gl(y)}y=!1}y&&(u=m[0])}}return m=Mr(),m.memoizedState=m.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ly,lastRenderedState:u},m.queue=y,m=tS.bind(null,bn,y),y.dispatch=m,y=ay(!1),C=vy.bind(null,bn,!1,y.queue),y=Mr(),T={state:u,dispatch:null,action:o,pending:null},y.queue=T,m=oT.bind(null,bn,T,C,m),T.dispatch=m,y.memoizedState=o,[u,m,!1]}function z_(o){var u=ur();return cy(u,di,o)}function cy(o,u,m){if(u=iy(o,u,ly)[0],o=pg(lu)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=mp(u)}catch(G){throw G===af?An:G}else y=u;u=ur();var T=u.queue,C=T.dispatch;return m!==u.memoizedState&&(bn.flags|=2048,Ju(9,{destroy:void 0},F_.bind(null,T,m),null)),[y,C,o]}function F_(o,u){o.action=u}function fy(o){var u=ur(),m=di;if(m!==null)return cy(u,m,o);ur(),u=u.memoizedState,m=ur();var y=m.queue.dispatch;return m.memoizedState=o,[u,y,!1]}function Ju(o,u,m,y){return o={tag:o,create:m,deps:y,inst:u,next:null},u=bn.updateQueue,u===null&&(u=dg(),bn.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=o.next=o:(y=m.next,m.next=o,o.next=y,u.lastEffect=o),o}function mg(){return ur().memoizedState}function gg(o,u,m,y){var T=Mr();bn.flags|=o,T.memoizedState=Ju(1|u,{destroy:void 0},m,y===void 0?null:y)}function vg(o,u,m,y){var T=ur();y=y===void 0?null:y;var C=T.memoizedState.inst;di!==null&&y!==null&&Q0(y,di.memoizedState.deps)?T.memoizedState=Ju(u,C,m,y):(bn.flags|=o,T.memoizedState=Ju(1|u,C,m,y))}function B_(o,u){gg(8390656,8,o,u)}function hy(o,u){vg(2048,8,o,u)}function V_(o){bn.flags|=4;var u=bn.updateQueue;if(u===null)u=dg(),bn.updateQueue=u,u.events=[o];else{var m=u.events;m===null?u.events=[o]:m.push(o)}}function j_(o){var u=ur().memoizedState;return V_({ref:u,nextImpl:o}),function(){if((qt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function H_(o,u){return vg(4,2,o,u)}function G_(o,u){return vg(4,4,o,u)}function q_(o,u){if(typeof u=="function"){o=o();var m=u(o);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function W_(o,u,m){m=m!=null?m.concat([o]):null,vg(4,4,q_.bind(null,u,o),m)}function dy(){}function $_(o,u){var m=ur();u=u===void 0?null:u;var y=m.memoizedState;return u!==null&&Q0(u,y[1])?y[0]:(m.memoizedState=[o,u],o)}function X_(o,u){var m=ur();u=u===void 0?null:u;var y=m.memoizedState;if(u!==null&&Q0(u,y[1]))return y[0];if(y=o(),ff){ft(!0);try{o()}finally{ft(!1)}}return m.memoizedState=[y,u],y}function py(o,u,m){return m===void 0||(Oi&1073741824)!==0&&(wn&261930)===0?o.memoizedState=u:(o.memoizedState=m,o=On(),bn.lanes|=o,Cl|=o,m)}function Y_(o,u,m,y){return Na(m,u)?m:Nh.current!==null?(o=py(o,m,y),Na(o,u)||(vr=!0),o):(Oi&42)===0||(Oi&1073741824)!==0&&(wn&261930)===0?(vr=!0,o.memoizedState=m):(o=On(),bn.lanes|=o,Cl|=o,u)}function K_(o,u,m,y,T){var C=re.p;re.p=C!==0&&8>C?C:8;var G=te.T,Z={};te.T=Z,vy(o,!1,u,m);try{var ue=T(),Pe=te.S;if(Pe!==null&&Pe(Z,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Ke=q0(ue,y);gp(o,u,Ke,Us(o))}else gp(o,u,y,Us(o))}catch(tt){gp(o,u,{then:function(){},status:"rejected",reason:tt},Us())}finally{re.p=C,G!==null&&Z.types!==null&&(G.types=Z.types),te.T=G}}function lT(){}function my(o,u,m,y){if(o.tag!==5)throw Error(i(476));var T=Z_(o).queue;K_(o,T,u,he,m===null?lT:function(){return Q_(o),m(y)})}function Z_(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:he},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:m},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Q_(o){var u=Z_(o);u.next===null&&(u=o.alternate.memoizedState),gp(o,u.next.queue,{},Us())}function gy(){return un(zy)}function J_(){return ur().memoizedState}function eS(){return ur().memoizedState}function uT(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var m=Us();o=su(m);var y=Ku(u,o,m);y!==null&&(Cn(y,u,m),Zu(y,u,m)),u={cache:j0()},o.payload=u;return}u=u.return}}function cT(o,u,m){var y=Us();m={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},yg(o)?nS(u,m):(m=Ym(o,u,m,y),m!==null&&(Cn(m,o,y),iS(m,u,y)))}function tS(o,u,m){var y=Us();gp(o,u,m,y)}function gp(o,u,m,y){var T={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(yg(o))nS(u,T);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var G=u.lastRenderedState,Z=C(G,m);if(T.hasEagerState=!0,T.eagerState=Z,Na(Z,G))return Ur(o,u,T,0),dn===null&&ap(),!1}catch{}finally{}if(m=Ym(o,u,T,y),m!==null)return Cn(m,o,y),iS(m,u,y),!0}return!1}function vy(o,u,m,y){if(y={lane:2,revertLane:Fe(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},yg(o)){if(u)throw Error(i(479))}else u=Ym(o,m,y,2),u!==null&&Cn(u,o,2)}function yg(o){var u=o.alternate;return o===bn||u!==null&&u===bn}function nS(o,u){Oh=lo=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function iS(o,u,m){if((m&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,Po(o,m)}}var Lh={readContext:un,use:Qu,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useLayoutEffect:Bi,useInsertionEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useSyncExternalStore:Bi,useId:Bi,useHostTransitionStatus:Bi,useFormState:Bi,useActionState:Bi,useOptimistic:Bi,useMemoCache:Bi,useCacheRefresh:Bi};Lh.useEffectEvent=Bi;var rS={readContext:un,use:Qu,useCallback:function(o,u){return Mr().memoizedState=[o,u===void 0?null:u],o},useContext:un,useEffect:B_,useImperativeHandle:function(o,u,m){m=m!=null?m.concat([o]):null,gg(4194308,4,q_.bind(null,u,o),m)},useLayoutEffect:function(o,u){return gg(4194308,4,o,u)},useInsertionEffect:function(o,u){gg(4,2,o,u)},useMemo:function(o,u){var m=Mr();u=u===void 0?null:u;var y=o();if(ff){ft(!0);try{o()}finally{ft(!1)}}return m.memoizedState=[y,u],y},useReducer:function(o,u,m){var y=Mr();if(m!==void 0){var T=m(u);if(ff){ft(!0);try{m(u)}finally{ft(!1)}}}else T=u;return y.memoizedState=y.baseState=T,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:T},y.queue=o,o=o.dispatch=cT.bind(null,bn,o),[y.memoizedState,o]},useRef:function(o){var u=Mr();return o={current:o},u.memoizedState=o},useState:function(o){o=ay(o);var u=o.queue,m=tS.bind(null,bn,u);return u.dispatch=m,[o.memoizedState,m]},useDebugValue:dy,useDeferredValue:function(o,u){var m=Mr();return py(m,o,u)},useTransition:function(){var o=ay(!1);return o=K_.bind(null,bn,o.queue,!0,!1),Mr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,m){var y=bn,T=Mr();if(zn){if(m===void 0)throw Error(i(407));m=m()}else{if(m=u(),dn===null)throw Error(i(349));(wn&127)!==0||R_(y,u,m)}T.memoizedState=m;var C={value:m,getSnapshot:u};return T.queue=C,B_(I_.bind(null,y,C,o),[o]),y.flags|=2048,Ju(9,{destroy:void 0},P_.bind(null,y,C,m,u),null),m},useId:function(){var o=Mr(),u=dn.identifierPrefix;if(zn){var m=Fo,y=Fi;m=(y&~(1<<32-ae(y)-1)).toString(32)+m,u="_"+u+"R_"+m,m=fg++,0<m&&(u+="H"+m.toString(32)),u+="_"}else m=Z0++,u="_"+u+"r_"+m.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:gy,useFormState:uy,useActionState:uy,useOptimistic:function(o){var u=Mr();u.memoizedState=u.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=vy.bind(null,bn,!0,m),m.dispatch=u,[o,u]},useMemoCache:ny,useCacheRefresh:function(){return Mr().memoizedState=uT.bind(null,bn)},useEffectEvent:function(o){var u=Mr(),m={impl:o};return u.memoizedState=m,function(){if((qt&2)!==0)throw Error(i(440));return m.impl.apply(void 0,arguments)}}},yy={readContext:un,use:Qu,useCallback:$_,useContext:un,useEffect:hy,useImperativeHandle:W_,useInsertionEffect:H_,useLayoutEffect:G_,useMemo:X_,useReducer:pg,useRef:mg,useState:function(){return pg(lu)},useDebugValue:dy,useDeferredValue:function(o,u){var m=ur();return Y_(m,di.memoizedState,o,u)},useTransition:function(){var o=pg(lu)[0],u=ur().memoizedState;return[typeof o=="boolean"?o:mp(o),u]},useSyncExternalStore:C_,useId:J_,useHostTransitionStatus:gy,useFormState:z_,useActionState:z_,useOptimistic:function(o,u){var m=ur();return sy(m,di,o,u)},useMemoCache:ny,useCacheRefresh:eS};yy.useEffectEvent=j_;var uo={readContext:un,use:Qu,useCallback:$_,useContext:un,useEffect:hy,useImperativeHandle:W_,useInsertionEffect:H_,useLayoutEffect:G_,useMemo:X_,useReducer:ry,useRef:mg,useState:function(){return ry(lu)},useDebugValue:dy,useDeferredValue:function(o,u){var m=ur();return di===null?py(m,o,u):Y_(m,di.memoizedState,o,u)},useTransition:function(){var o=ry(lu)[0],u=ur().memoizedState;return[typeof o=="boolean"?o:mp(o),u]},useSyncExternalStore:C_,useId:J_,useHostTransitionStatus:gy,useFormState:fy,useActionState:fy,useOptimistic:function(o,u){var m=ur();return di!==null?sy(m,di,o,u):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:ny,useCacheRefresh:eS};uo.useEffectEvent=j_;function bg(o,u,m,y){u=o.memoizedState,m=m(y,u),m=m==null?u:g({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var vp={enqueueSetState:function(o,u,m){o=o._reactInternals;var y=Us(),T=su(y);T.payload=u,m!=null&&(T.callback=m),u=Ku(o,T,y),u!==null&&(Cn(u,o,y),Zu(u,o,y))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var y=Us(),T=su(y);T.tag=1,T.payload=u,m!=null&&(T.callback=m),u=Ku(o,T,y),u!==null&&(Cn(u,o,y),Zu(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=Us(),y=su(m);y.tag=2,u!=null&&(y.callback=u),u=Ku(o,y,m),u!==null&&(Cn(u,o,m),Zu(u,o,m))}};function by(o,u,m,y,T,C,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,C,G):u.prototype&&u.prototype.isPureReactComponent?!vh(m,y)||!vh(T,C):!0}function xy(o,u,m,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,y),u.state!==o&&vp.enqueueReplaceState(u,u.state,null)}function ec(o,u){var m=u;if("ref"in u){m={};for(var y in u)y!=="ref"&&(m[y]=u[y])}if(o=o.defaultProps){m===u&&(m=g({},m));for(var T in o)m[T]===void 0&&(m[T]=o[T])}return m}function aS(o){rp(o)}function _y(o){console.error(o)}function Sy(o){rp(o)}function xg(o,u){try{var m=o.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function sS(o,u,m){try{var y=o.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function wy(o,u,m){return m=su(m),m.tag=3,m.payload={element:null},m.callback=function(){xg(o,u)},m}function Ey(o){return o=su(o),o.tag=3,o}function oS(o,u,m,y){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var C=y.value;o.payload=function(){return T(C)},o.callback=function(){sS(u,m,y)}}var G=m.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(o.callback=function(){sS(u,m,y),typeof T!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var Z=y.stack;this.componentDidCatch(y.value,{componentStack:Z!==null?Z:""})})}function Ar(o,u,m,y,T){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=m.alternate,u!==null&&xl(u,m,T,!0),m=is.current,m!==null){switch(m.tag){case 31:case 13:return La===null?jh():m.alternate===null&&Vi===0&&(Vi=3),m.flags&=-257,m.flags|=65536,m.lanes=T,y===sg?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([y]):u.add(y),Rp(o,y,T)),!1;case 22:return m.flags|=65536,y===sg?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([y]):m.add(y)),Rp(o,y,T)),!1}throw Error(i(435,m.tag))}return Rp(o,y,T),jh(),!1}if(zn)return u=is.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=T,y!==Mh&&(o=Error(i(422),{cause:y}),vl(Cs(o,m)))):(y!==Mh&&(u=Error(i(423),{cause:y}),vl(Cs(u,m))),o=o.current.alternate,o.flags|=65536,T&=-T,o.lanes|=T,y=Cs(y,m),T=wy(o.stateNode,y,T),Zt(o,T),Vi!==4&&(Vi=2)),!1;var C=Error(i(520),{cause:y});if(C=Cs(C,m),_f===null?_f=[C]:_f.push(C),Vi!==4&&(Vi=2),u===null)return!0;y=Cs(y,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,o=T&-T,m.lanes|=o,o=wy(m.stateNode,y,o),Zt(m,o),!1;case 1:if(u=m.type,C=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(hr===null||!hr.has(C))))return m.flags|=65536,T&=-T,m.lanes|=T,T=Ey(T),oS(T,o,m,y),Zt(m,T),!1}m=m.return}while(m!==null);return!1}var _g=Error(i(461)),vr=!1;function kr(o,u,m,y){u.child=o===null?ug(u,null,m,y):au(u,o.child,m,y)}function My(o,u,m,y,T){m=m.render;var C=u.ref;if("ref"in y){var G={};for(var Z in y)Z!=="ref"&&(G[Z]=y[Z])}else G=y;return Xu(u),y=hg(o,u,m,G,C,T),Z=J0(),o!==null&&!vr?(ey(o,u,T),cr(o,u,T)):(zn&&Z&&ml(u),u.flags|=1,kr(o,u,y,T),u.child)}function pf(o,u,m,y,T){if(o===null){var C=m.type;return typeof C=="function"&&!Km(C)&&C.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=C,Sg(o,u,C,y,T)):(o=dl(m.type,null,y,u,u.mode,T),o.ref=u.ref,o.return=u,u.child=o)}if(C=o.child,!Cg(o,T)){var G=C.memoizedProps;if(m=m.compare,m=m!==null?m:vh,m(G,y)&&o.ref===u.ref)return cr(o,u,T)}return u.flags|=1,o=es(C,y),o.ref=u.ref,o.return=u,u.child=o}function Sg(o,u,m,y,T){if(o!==null){var C=o.memoizedProps;if(vh(C,y)&&o.ref===u.ref)if(vr=!1,u.pendingProps=y=C,Cg(o,T))(o.flags&131072)!==0&&(vr=!0);else return u.lanes=o.lanes,cr(o,u,T)}return Uh(o,u,m,y,T)}function mf(o,u,m,y){var T=y.children,C=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(C=C!==null?C.baseLanes|m:m,o!==null){for(y=u.child=o.child,T=0;y!==null;)T=T|y.lanes|y.childLanes,y=y.sibling;y=T&~C}else y=0,u.child=null;return as(o,u,C,m,y)}if((m&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&lp(u,C!==null?C.cachePool:null),C!==null?M_(u,C):Y0(),A_(u);else return y=u.lanes=536870912,as(o,u,C!==null?C.baseLanes|m:m,m,y)}else C!==null?(lp(u,C.cachePool),M_(u,C),rs(),u.memoizedState=null):(o!==null&&lp(u,null),Y0(),rs());return kr(o,u,T,m),u.child}function Sl(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function as(o,u,m,y,T){var C=ag();return C=C===null?null:{parent:gr._currentValue,pool:C},u.memoizedState={baseLanes:m,cachePool:C},o!==null&&lp(u,null),Y0(),A_(u),o!==null&&xl(o,u,y,!0),u.childLanes=T,null}function wg(o,u){return u=Tg({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function lS(o,u,m){return au(u,o.child,null,m),o=wg(u,u.pendingProps),o.flags|=2,lr(u),u.memoizedState=null,o}function Eg(o,u,m){var y=u.pendingProps,T=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(zn){if(y.mode==="hidden")return o=wg(u,y),u.lanes=536870912,Sl(null,o);if(K0(u),(o=Si)?(o=G3(o,Rs),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:tu!==null?{id:Fi,overflow:Fo}:null,retryLane:536870912,hydrationErrors:null},m=Sh(o),m.return=u,u.child=m,Zi=u,Si=null)):o=null,o===null)throw gl(u);return u.lanes=536870912,null}return wg(u,y)}var C=o.memoizedState;if(C!==null){var G=C.dehydrated;if(K0(u),T)if(u.flags&256)u.flags&=-257,u=lS(o,u,m);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(vr||xl(o,u,m,!1),T=(m&o.childLanes)!==0,vr||T){if(y=dn,y!==null&&(G=nl(y,m),G!==0&&G!==C.retryLane))throw C.retryLane=G,Oa(o,G),Cn(y,o,G),_g;jh(),u=lS(o,u,m)}else o=C.treeContext,Si=Il(G.nextSibling),Zi=u,zn=!0,nu=null,Rs=!1,o!==null&&eg(u,o),u=wg(u,y),u.flags|=4096;return u}return o=es(o.child,{mode:y.mode,children:y.children}),o.ref=u.ref,u.child=o,o.return=u,o}function gf(o,u){var m=u.ref;if(m===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(o===null||o.ref!==m)&&(u.flags|=4194816)}}function Uh(o,u,m,y,T){return Xu(u),m=hg(o,u,m,y,void 0,T),y=J0(),o!==null&&!vr?(ey(o,u,T),cr(o,u,T)):(zn&&y&&ml(u),u.flags|=1,kr(o,u,m,T),u.child)}function yp(o,u,m,y,T,C){return Xu(u),u.updateQueue=null,m=hf(u,y,m,T),T_(o),y=J0(),o!==null&&!vr?(ey(o,u,C),cr(o,u,C)):(zn&&y&&ml(u),u.flags|=1,kr(o,u,m,C),u.child)}function Mg(o,u,m,y,T){if(Xu(u),u.stateNode===null){var C=ju,G=m.contextType;typeof G=="object"&&G!==null&&(C=un(G)),C=new m(y,C),u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=vp,u.stateNode=C,C._reactInternals=u,C=u.stateNode,C.props=y,C.state=u.memoizedState,C.refs={},fp(u),G=m.contextType,C.context=typeof G=="object"&&G!==null?un(G):ju,C.state=u.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(bg(u,m,G,y),C.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(G=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),G!==C.state&&vp.enqueueReplaceState(C,C.state,null),Ph(u,y,C,T),hp(),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){C=u.stateNode;var Z=u.memoizedProps,ue=ec(m,Z);C.props=ue;var Pe=C.context,Ke=m.contextType;G=ju,typeof Ke=="object"&&Ke!==null&&(G=un(Ke));var tt=m.getDerivedStateFromProps;Ke=typeof tt=="function"||typeof C.getSnapshotBeforeUpdate=="function",Z=u.pendingProps!==Z,Ke||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Z||Pe!==G)&&xy(u,C,y,G),Da=!1;var De=u.memoizedState;C.state=De,Ph(u,y,C,T),hp(),Pe=u.memoizedState,Z||De!==Pe||Da?(typeof tt=="function"&&(bg(u,m,tt,y),Pe=u.memoizedState),(ue=Da||by(u,m,ue,y,De,Pe,G))?(Ke||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=Pe),C.props=y,C.state=Pe,C.context=G,y=ue):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{C=u.stateNode,$0(o,u),G=u.memoizedProps,Ke=ec(m,G),C.props=Ke,tt=u.pendingProps,De=C.context,Pe=m.contextType,ue=ju,typeof Pe=="object"&&Pe!==null&&(ue=un(Pe)),Z=m.getDerivedStateFromProps,(Pe=typeof Z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(G!==tt||De!==ue)&&xy(u,C,y,ue),Da=!1,De=u.memoizedState,C.state=De,Ph(u,y,C,T),hp();var Ve=u.memoizedState;G!==tt||De!==Ve||Da||o!==null&&o.dependencies!==null&&op(o.dependencies)?(typeof Z=="function"&&(bg(u,m,Z,y),Ve=u.memoizedState),(Ke=Da||by(u,m,Ke,y,De,Ve,ue)||o!==null&&o.dependencies!==null&&op(o.dependencies))?(Pe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,Ve,ue),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,Ve,ue)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||G===o.memoizedProps&&De===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&De===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Ve),C.props=y,C.state=Ve,C.context=ue,y=Ke):(typeof C.componentDidUpdate!="function"||G===o.memoizedProps&&De===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&De===o.memoizedState||(u.flags|=1024),y=!1)}return C=y,gf(o,u),y=(u.flags&128)!==0,C||y?(C=u.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:C.render(),u.flags|=1,o!==null&&y?(u.child=au(u,o.child,null,T),u.child=au(u,null,m,T)):kr(o,u,m,T),u.memoizedState=C.state,o=u.child):o=cr(o,u,T),o}function uS(o,u,m,y){return Wu(),u.flags|=256,kr(o,u,m,y),u.child}var Ay={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function da(o){return{baseLanes:o,cachePool:W0()}}function Ag(o,u,m){return o=o!==null?o.childLanes&~m:0,u&&(o|=za),o}function cS(o,u,m){var y=u.pendingProps,T=!1,C=(u.flags&128)!==0,G;if((G=C)||(G=o!==null&&o.memoizedState===null?!1:(Fn.current&2)!==0),G&&(T=!0,u.flags&=-129),G=(u.flags&32)!==0,u.flags&=-33,o===null){if(zn){if(T?ou(u):rs(),(o=Si)?(o=G3(o,Rs),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:tu!==null?{id:Fi,overflow:Fo}:null,retryLane:536870912,hydrationErrors:null},m=Sh(o),m.return=u,u.child=m,Zi=u,Si=null)):o=null,o===null)throw gl(u);return ET(o)?u.lanes=32:u.lanes=536870912,null}var Z=y.children;return y=y.fallback,T?(rs(),T=u.mode,Z=Tg({mode:"hidden",children:Z},T),y=Hu(y,T,m,null),Z.return=u,y.return=u,Z.sibling=y,u.child=Z,y=u.child,y.memoizedState=da(m),y.childLanes=Ag(o,G,m),u.memoizedState=Ay,Sl(null,y)):(ou(u),bp(u,Z))}var ue=o.memoizedState;if(ue!==null&&(Z=ue.dehydrated,Z!==null)){if(C)u.flags&256?(ou(u),u.flags&=-257,u=Ty(o,u,m)):u.memoizedState!==null?(rs(),u.child=o.child,u.flags|=128,u=null):(rs(),Z=y.fallback,T=u.mode,y=Tg({mode:"visible",children:y.children},T),Z=Hu(Z,T,m,null),Z.flags|=2,y.return=u,Z.return=u,y.sibling=Z,u.child=y,au(u,o.child,null,m),y=u.child,y.memoizedState=da(m),y.childLanes=Ag(o,G,m),u.memoizedState=Ay,u=Sl(null,y));else if(ou(u),ET(Z)){if(G=Z.nextSibling&&Z.nextSibling.dataset,G)var Pe=G.dgst;G=Pe,y=Error(i(419)),y.stack="",y.digest=G,vl({value:y,source:null,stack:null}),u=Ty(o,u,m)}else if(vr||xl(o,u,m,!1),G=(m&o.childLanes)!==0,vr||G){if(G=dn,G!==null&&(y=nl(G,m),y!==0&&y!==ue.retryLane))throw ue.retryLane=y,Oa(o,y),Cn(G,o,y),_g;wT(Z)||jh(),u=Ty(o,u,m)}else wT(Z)?(u.flags|=192,u.child=o.child,u=null):(o=ue.treeContext,Si=Il(Z.nextSibling),Zi=u,zn=!0,nu=null,Rs=!1,o!==null&&eg(u,o),u=bp(u,y.children),u.flags|=4096);return u}return T?(rs(),Z=y.fallback,T=u.mode,ue=o.child,Pe=ue.sibling,y=es(ue,{mode:"hidden",children:y.children}),y.subtreeFlags=ue.subtreeFlags&65011712,Pe!==null?Z=es(Pe,Z):(Z=Hu(Z,T,m,null),Z.flags|=2),Z.return=u,y.return=u,y.sibling=Z,u.child=y,Sl(null,y),y=u.child,Z=o.child.memoizedState,Z===null?Z=da(m):(T=Z.cachePool,T!==null?(ue=gr._currentValue,T=T.parent!==ue?{parent:ue,pool:ue}:T):T=W0(),Z={baseLanes:Z.baseLanes|m,cachePool:T}),y.memoizedState=Z,y.childLanes=Ag(o,G,m),u.memoizedState=Ay,Sl(o.child,y)):(ou(u),m=o.child,o=m.sibling,m=es(m,{mode:"visible",children:y.children}),m.return=u,m.sibling=null,o!==null&&(G=u.deletions,G===null?(u.deletions=[o],u.flags|=16):G.push(o)),u.child=m,u.memoizedState=null,m)}function bp(o,u){return u=Tg({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Tg(o,u){return o=zi(22,o,null,u),o.lanes=0,o}function Ty(o,u,m){return au(u,o.child,null,m),o=bp(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function fS(o,u,m){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),ng(o.return,u,m)}function vf(o,u,m,y,T,C){var G=o.memoizedState;G===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:T,treeForkCount:C}:(G.isBackwards=u,G.rendering=null,G.renderingStartTime=0,G.last=y,G.tail=m,G.tailMode=T,G.treeForkCount=C)}function ss(o,u,m){var y=u.pendingProps,T=y.revealOrder,C=y.tail;y=y.children;var G=Fn.current,Z=(G&2)!==0;if(Z?(G=G&1|2,u.flags|=128):G&=1,Ae(Fn,G),kr(o,u,y,m),y=zn?Eh:0,!Z&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&fS(o,m,u);else if(o.tag===19)fS(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(T){case"forwards":for(m=u.child,T=null;m!==null;)o=m.alternate,o!==null&&Is(o)===null&&(T=m),m=m.sibling;m=T,m===null?(T=u.child,u.child=null):(T=m.sibling,m.sibling=null),vf(u,!1,T,m,C,y);break;case"backwards":case"unstable_legacy-backwards":for(m=null,T=u.child,u.child=null;T!==null;){if(o=T.alternate,o!==null&&Is(o)===null){u.child=T;break}o=T.sibling,T.sibling=m,m=T,T=o}vf(u,!0,m,null,C,y);break;case"together":vf(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function cr(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),Cl|=u.lanes,(m&u.childLanes)===0)if(o!==null){if(xl(o,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,m=es(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=es(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function Cg(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&op(o)))}function fT(o,u,m){switch(u.tag){case 3:ut(u,u.stateNode.containerInfo),iu(u,gr,o.memoizedState.cache),Wu();break;case 27:case 5:et(u);break;case 4:ut(u,u.stateNode.containerInfo);break;case 10:iu(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,K0(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(ou(u),u.flags|=128,null):(m&u.child.childLanes)!==0?cS(o,u,m):(ou(u),o=cr(o,u,m),o!==null?o.sibling:null);ou(u);break;case 19:var T=(o.flags&128)!==0;if(y=(m&u.childLanes)!==0,y||(xl(o,u,m,!1),y=(m&u.childLanes)!==0),T){if(y)return ss(o,u,m);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Ae(Fn,Fn.current),y)break;return null;case 22:return u.lanes=0,mf(o,u,m,u.pendingProps);case 24:iu(u,gr,o.memoizedState.cache)}return cr(o,u,m)}function Rg(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps)vr=!0;else{if(!Cg(o,m)&&(u.flags&128)===0)return vr=!1,fT(o,u,m);vr=(o.flags&131072)!==0}else vr=!1,zn&&(u.flags&1048576)!==0&&y_(u,Eh,u.index);switch(u.lanes=0,u.tag){case 16:e:{var y=u.pendingProps;if(o=sf(u.elementType),u.type=o,typeof o=="function")Km(o)?(y=ec(o,y),u.tag=1,u=Mg(null,u,o,y,m)):(u.tag=0,u=Uh(null,u,o,y,m));else{if(o!=null){var T=o.$$typeof;if(T===O){u.tag=11,u=My(null,u,o,y,m);break e}else if(T===D){u.tag=14,u=pf(null,u,o,y,m);break e}}throw u=oe(o)||o,Error(i(306,u,""))}}return u;case 0:return Uh(o,u,u.type,u.pendingProps,m);case 1:return y=u.type,T=ec(y,u.pendingProps),Mg(o,u,y,T,m);case 3:e:{if(ut(u,u.stateNode.containerInfo),o===null)throw Error(i(387));y=u.pendingProps;var C=u.memoizedState;T=C.element,$0(o,u),Ph(u,y,null,m);var G=u.memoizedState;if(y=G.cache,iu(u,gr,y),y!==C.cache&&ig(u,[gr],m,!0),hp(),y=G.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:G.cache},u.updateQueue.baseState=C,u.memoizedState=C,u.flags&256){u=uS(o,u,y,m);break e}else if(y!==T){T=Cs(Error(i(424)),u),vl(T),u=uS(o,u,y,m);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Si=Il(o.firstChild),Zi=u,zn=!0,nu=null,Rs=!0,m=ug(u,null,y,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Wu(),y===T){u=cr(o,u,m);break e}kr(o,u,y,m)}u=u.child}return u;case 26:return gf(o,u),o===null?(m=K3(u.type,null,u.pendingProps,null))?u.memoizedState=m:zn||(m=u.type,o=u.pendingProps,y=mS(_e.current).createElement(m),y[xi]=u,y[Ui]=o,Ba(y,m,o),K(y),u.stateNode=y):u.memoizedState=K3(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return et(u),o===null&&zn&&(y=u.stateNode=$3(u.type,u.pendingProps,_e.current),Zi=u,Rs=!0,T=Si,Wh(u.type)?(MT=T,Si=Il(y.firstChild)):Si=T),kr(o,u,u.pendingProps.children,m),gf(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&zn&&((T=y=Si)&&(y=Fq(y,u.type,u.pendingProps,Rs),y!==null?(u.stateNode=y,Zi=u,Si=Il(y.firstChild),Rs=!1,T=!0):T=!1),T||gl(u)),et(u),T=u.type,C=u.pendingProps,G=o!==null?o.memoizedProps:null,y=C.children,xT(T,C)?y=null:G!==null&&xT(T,G)&&(u.flags|=32),u.memoizedState!==null&&(T=hg(o,u,df,null,null,m),zy._currentValue=T),gf(o,u),kr(o,u,y,m),u.child;case 6:return o===null&&zn&&((o=m=Si)&&(m=Bq(m,u.pendingProps,Rs),m!==null?(u.stateNode=m,Zi=u,Si=null,o=!0):o=!1),o||gl(u)),null;case 13:return cS(o,u,m);case 4:return ut(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=au(u,null,y,m):kr(o,u,y,m),u.child;case 11:return My(o,u,u.type,u.pendingProps,m);case 7:return kr(o,u,u.pendingProps,m),u.child;case 8:return kr(o,u,u.pendingProps.children,m),u.child;case 12:return kr(o,u,u.pendingProps.children,m),u.child;case 10:return y=u.pendingProps,iu(u,u.type,y.value),kr(o,u,y.children,m),u.child;case 9:return T=u.type._context,y=u.pendingProps.children,Xu(u),T=un(T),y=y(T),u.flags|=1,kr(o,u,y,m),u.child;case 14:return pf(o,u,u.type,u.pendingProps,m);case 15:return Sg(o,u,u.type,u.pendingProps,m);case 19:return ss(o,u,m);case 31:return Eg(o,u,m);case 22:return mf(o,u,m,u.pendingProps);case 24:return Xu(u),y=un(gr),o===null?(T=ag(),T===null&&(T=dn,C=j0(),T.pooledCache=C,C.refCount++,C!==null&&(T.pooledCacheLanes|=m),T=C),u.memoizedState={parent:y,cache:T},fp(u),iu(u,gr,T)):((o.lanes&m)!==0&&($0(o,u),Ph(u,null,null,m),hp()),T=o.memoizedState,C=u.memoizedState,T.parent!==y?(T={parent:y,cache:y},u.memoizedState=T,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=T),iu(u,gr,y)):(y=C.cache,iu(u,gr,y),y!==T.cache&&ig(u,[gr],m,!0))),kr(o,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function wl(o){o.flags|=4}function xp(o,u,m,y,T){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(T&335544128)===T)if(o.stateNode.complete)o.flags|=8192;else if(Hi())o.flags|=8192;else throw _l=sg,up}else o.flags&=-16777217}function Cy(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!tL(u))if(Hi())o.flags|=8192;else throw _l=sg,up}function uu(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?cn():536870912,o.lanes|=u,Ri|=u)}function El(o,u){if(!zn)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function pi(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,y=0;if(u)for(var T=o.child;T!==null;)m|=T.lanes|T.childLanes,y|=T.subtreeFlags&65011712,y|=T.flags&65011712,T.return=o,T=T.sibling;else for(T=o.child;T!==null;)m|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=o,T=T.sibling;return o.subtreeFlags|=y,o.childLanes=m,u}function _p(o,u,m){var y=u.pendingProps;switch(Jm(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(u),null;case 1:return pi(u),null;case 3:return m=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),bl(gr),ve(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Ah(u)?wl(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,tg())),pi(u),null;case 26:var T=u.type,C=u.memoizedState;return o===null?(wl(u),C!==null?(pi(u),Cy(u,C)):(pi(u),xp(u,T,null,y,m))):C?C!==o.memoizedState?(wl(u),pi(u),Cy(u,C)):(pi(u),u.flags&=-16777217):(o=o.memoizedProps,o!==y&&wl(u),pi(u),xp(u,T,o,y,m)),null;case 27:if(At(u),m=_e.current,T=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&wl(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return pi(u),null}o=We.current,Ah(u)?b_(u):(o=$3(T,y,m),u.stateNode=o,wl(u))}return pi(u),null;case 5:if(At(u),T=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&wl(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return pi(u),null}if(C=We.current,Ah(u))b_(u);else{var G=mS(_e.current);switch(C){case 1:C=G.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:C=G.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":C=G.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":C=G.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":C=G.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof y.is=="string"?G.createElement("select",{is:y.is}):G.createElement("select"),y.multiple?C.multiple=!0:y.size&&(C.size=y.size);break;default:C=typeof y.is=="string"?G.createElement(T,{is:y.is}):G.createElement(T)}}C[xi]=u,C[Ui]=y;e:for(G=u.child;G!==null;){if(G.tag===5||G.tag===6)C.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===u)break e;for(;G.sibling===null;){if(G.return===null||G.return===u)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}u.stateNode=C;e:switch(Ba(C,T,y),T){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&wl(u)}}return pi(u),xp(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,m),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==y&&wl(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(i(166));if(o=_e.current,Ah(u)){if(o=u.stateNode,m=u.memoizedProps,y=null,T=Zi,T!==null)switch(T.tag){case 27:case 5:y=T.memoizedProps}o[xi]=u,o=!!(o.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||U3(o.nodeValue,m)),o||gl(u,!0)}else o=mS(o).createTextNode(y),o[xi]=u,u.stateNode=o}return pi(u),null;case 31:if(m=u.memoizedState,o===null||o.memoizedState!==null){if(y=Ah(u),m!==null){if(o===null){if(!y)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[xi]=u}else Wu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;pi(u),o=!1}else m=tg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),o=!0;if(!o)return u.flags&256?(lr(u),u):(lr(u),null);if((u.flags&128)!==0)throw Error(i(558))}return pi(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(T=Ah(u),y!==null&&y.dehydrated!==null){if(o===null){if(!T)throw Error(i(318));if(T=u.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(i(317));T[xi]=u}else Wu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;pi(u),T=!1}else T=tg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=T),T=!0;if(!T)return u.flags&256?(lr(u),u):(lr(u),null)}return lr(u),(u.flags&128)!==0?(u.lanes=m,u):(m=y!==null,o=o!==null&&o.memoizedState!==null,m&&(y=u.child,T=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(T=y.alternate.memoizedState.cachePool.pool),C=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==T&&(y.flags|=2048)),m!==o&&m&&(u.child.flags|=8192),uu(u,u.updateQueue),pi(u),null);case 4:return ve(),o===null&&mT(u.stateNode.containerInfo),pi(u),null;case 10:return bl(u.type),pi(u),null;case 19:if(de(Fn),y=u.memoizedState,y===null)return pi(u),null;if(T=(u.flags&128)!==0,C=y.rendering,C===null)if(T)El(y,!1);else{if(Vi!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(C=Is(o),C!==null){for(u.flags|=128,El(y,!1),o=C.updateQueue,u.updateQueue=o,uu(u,o),u.subtreeFlags=0,o=m,m=u.child;m!==null;)_h(m,o),m=m.sibling;return Ae(Fn,Fn.current&1|2),zn&&pl(u,y.treeForkCount),u.child}o=o.sibling}y.tail!==null&&X()>fr&&(u.flags|=128,T=!0,El(y,!1),u.lanes=4194304)}else{if(!T)if(o=Is(C),o!==null){if(u.flags|=128,T=!0,o=o.updateQueue,u.updateQueue=o,uu(u,o),El(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!zn)return pi(u),null}else 2*X()-y.renderingStartTime>fr&&m!==536870912&&(u.flags|=128,T=!0,El(y,!1),u.lanes=4194304);y.isBackwards?(C.sibling=u.child,u.child=C):(o=y.last,o!==null?o.sibling=C:u.child=C,y.last=C)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=X(),o.sibling=null,m=Fn.current,Ae(Fn,T?m&1|2:m&1),zn&&pl(u,y.treeForkCount),o):(pi(u),null);case 22:case 23:return lr(u),dp(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(m&536870912)!==0&&(u.flags&128)===0&&(pi(u),u.subtreeFlags&6&&(u.flags|=8192)):pi(u),m=u.updateQueue,m!==null&&uu(u,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048),o!==null&&de(Yu),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),bl(gr),pi(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function co(o,u){switch(Jm(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return bl(gr),ve(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return At(u),null;case 31:if(u.memoizedState!==null){if(lr(u),u.alternate===null)throw Error(i(340));Wu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(lr(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Wu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return de(Fn),null;case 4:return ve(),null;case 10:return bl(u.type),null;case 22:case 23:return lr(u),dp(),o!==null&&de(Yu),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return bl(gr),null;case 25:return null;default:return null}}function Ns(o,u){switch(Jm(u),u.tag){case 3:bl(gr),ve();break;case 26:case 27:case 5:At(u);break;case 4:ve();break;case 31:u.memoizedState!==null&&lr(u);break;case 13:lr(u);break;case 19:de(Fn);break;case 10:bl(u.type);break;case 22:case 23:lr(u),dp(),o!==null&&de(Yu);break;case 24:bl(gr)}}function fo(o,u){try{var m=u.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var T=y.next;m=T;do{if((m.tag&o)===o){y=void 0;var C=m.create,G=m.inst;y=C(),G.destroy=y}m=m.next}while(m!==T)}}catch(Z){Kn(u,u.return,Z)}}function Yr(o,u,m){try{var y=u.updateQueue,T=y!==null?y.lastEffect:null;if(T!==null){var C=T.next;y=C;do{if((y.tag&o)===o){var G=y.inst,Z=G.destroy;if(Z!==void 0){G.destroy=void 0,T=u;var ue=m,Pe=Z;try{Pe()}catch(Ke){Kn(T,ue,Ke)}}}y=y.next}while(y!==C)}}catch(Ke){Kn(u,u.return,Ke)}}function Bo(o){var u=o.updateQueue;if(u!==null){var m=o.stateNode;try{E_(u,m)}catch(y){Kn(o,o.return,y)}}}function zr(o,u,m){m.props=ec(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(y){Kn(o,u,y)}}function cu(o,u){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof m=="function"?o.refCleanup=m(y):m.current=y}}catch(T){Kn(o,u,T)}}function Kr(o,u){var m=o.ref,y=o.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(T){Kn(o,u,T)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){Kn(o,u,T)}else m.current=null}function Sp(o){var u=o.type,m=o.memoizedProps,y=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(T){Kn(o,o.return,T)}}function Tr(o,u,m){try{var y=o.stateNode;Oq(y,o.type,m,u),y[Ui]=u}catch(T){Kn(o,o.return,T)}}function Di(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Wh(o.type)||o.tag===4}function Un(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Di(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Wh(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ml(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,u):(u=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,u.appendChild(o),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=No));else if(y!==4&&(y===27&&Wh(o.type)&&(m=o.stateNode,u=null),o=o.child,o!==null))for(Ml(o,u,m),o=o.sibling;o!==null;)Ml(o,u,m),o=o.sibling}function Ua(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(y!==4&&(y===27&&Wh(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(Ua(o,u,m),o=o.sibling;o!==null;)Ua(o,u,m),o=o.sibling}function Pg(o){var u=o.stateNode,m=o.memoizedProps;try{for(var y=o.type,T=u.attributes;T.length;)u.removeAttributeNode(T[0]);Ba(u,y,m),u[xi]=o,u[Ui]=m}catch(C){Kn(o,o.return,C)}}var ho=!1,wi=!1,Vo=!1,hS=typeof WeakSet=="function"?WeakSet:Set,Fr=null;function hT(o,u){if(o=o.containerInfo,yT=SS,o=p_(o),k0(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var T=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break e}var G=0,Z=-1,ue=-1,Pe=0,Ke=0,tt=o,De=null;t:for(;;){for(var Ve;tt!==m||T!==0&&tt.nodeType!==3||(Z=G+T),tt!==C||y!==0&&tt.nodeType!==3||(ue=G+y),tt.nodeType===3&&(G+=tt.nodeValue.length),(Ve=tt.firstChild)!==null;)De=tt,tt=Ve;for(;;){if(tt===o)break t;if(De===m&&++Pe===T&&(Z=G),De===C&&++Ke===y&&(ue=G),(Ve=tt.nextSibling)!==null)break;tt=De,De=tt.parentNode}tt=Ve}m=Z===-1||ue===-1?null:{start:Z,end:ue}}else m=null}m=m||{start:0,end:0}}else m=null;for(bT={focusedElem:o,selectionRange:m},SS=!1,Fr=u;Fr!==null;)if(u=Fr,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Fr=o;else for(;Fr!==null;){switch(u=Fr,C=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(m=0;m<o.length;m++)T=o[m],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&C!==null){o=void 0,m=u,T=C.memoizedProps,C=C.memoizedState,y=m.stateNode;try{var jt=ec(m.type,T);o=y.getSnapshotBeforeUpdate(jt,C),y.__reactInternalSnapshotBeforeUpdate=o}catch(ln){Kn(m,m.return,ln)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,m=o.nodeType,m===9)ST(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":ST(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,Fr=o;break}Fr=u.return}}function Li(o,u,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:go(o,m),y&4&&fo(5,m);break;case 1:if(go(o,m),y&4)if(o=m.stateNode,u===null)try{o.componentDidMount()}catch(G){Kn(m,m.return,G)}else{var T=ec(m.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(T,u,o.__reactInternalSnapshotBeforeUpdate)}catch(G){Kn(m,m.return,G)}}y&64&&Bo(m),y&512&&cu(m,m.return);break;case 3:if(go(o,m),y&64&&(o=m.updateQueue,o!==null)){if(u=null,m.child!==null)switch(m.child.tag){case 27:case 5:u=m.child.stateNode;break;case 1:u=m.child.stateNode}try{E_(o,u)}catch(G){Kn(m,m.return,G)}}break;case 27:u===null&&y&4&&Pg(m);case 26:case 5:go(o,m),u===null&&y&4&&Sp(m),y&512&&cu(m,m.return);break;case 12:go(o,m);break;case 31:go(o,m),y&4&&tc(o,m);break;case 13:go(o,m),y&4&&kh(o,m),y&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=x.bind(null,m),Vq(o,m))));break;case 22:if(y=m.memoizedState!==null||ho,!y){u=u!==null&&u.memoizedState!==null||wi,T=ho;var C=wi;ho=y,(wi=u)&&!C?ka(o,m,(m.subtreeFlags&8772)!==0):go(o,m),ho=T,wi=C}break;case 30:break;default:go(o,m)}}function wp(o){var u=o.alternate;u!==null&&(o.alternate=null,wp(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Zs(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var li=null,pa=!1;function po(o,u,m){for(m=m.child;m!==null;)Ig(o,u,m),m=m.sibling}function Ig(o,u,m){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Ge,m)}catch{}switch(m.tag){case 26:wi||Kr(m,u),po(o,u,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:wi||Kr(m,u);var y=li,T=pa;Wh(m.type)&&(li=m.stateNode,pa=!1),po(o,u,m),Ly(m.stateNode),li=y,pa=T;break;case 5:wi||Kr(m,u);case 6:if(y=li,T=pa,li=null,po(o,u,m),li=y,pa=T,li!==null)if(pa)try{(li.nodeType===9?li.body:li.nodeName==="HTML"?li.ownerDocument.body:li).removeChild(m.stateNode)}catch(C){Kn(m,u,C)}else try{li.removeChild(m.stateNode)}catch(C){Kn(m,u,C)}break;case 18:li!==null&&(pa?(o=li,j3(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),Fg(o)):j3(li,m.stateNode));break;case 4:y=li,T=pa,li=m.stateNode.containerInfo,pa=!0,po(o,u,m),li=y,pa=T;break;case 0:case 11:case 14:case 15:Yr(2,m,u),wi||Yr(4,m,u),po(o,u,m);break;case 1:wi||(Kr(m,u),y=m.stateNode,typeof y.componentWillUnmount=="function"&&zr(m,u,y)),po(o,u,m);break;case 21:po(o,u,m);break;case 22:wi=(y=wi)||m.memoizedState!==null,po(o,u,m),wi=y;break;default:po(o,u,m)}}function tc(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Fg(o)}catch(m){Kn(u,u.return,m)}}}function kh(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Fg(o)}catch(m){Kn(u,u.return,m)}}function Ry(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new hS),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new hS),u;default:throw Error(i(435,o.tag))}}function fu(o,u){var m=Ry(o);u.forEach(function(y){if(!m.has(y)){m.add(y);var T=A.bind(null,o,y);y.then(T,T)}})}function Cr(o,u){var m=u.deletions;if(m!==null)for(var y=0;y<m.length;y++){var T=m[y],C=o,G=u,Z=G;e:for(;Z!==null;){switch(Z.tag){case 27:if(Wh(Z.type)){li=Z.stateNode,pa=!1;break e}break;case 5:li=Z.stateNode,pa=!1;break e;case 3:case 4:li=Z.stateNode.containerInfo,pa=!0;break e}Z=Z.return}if(li===null)throw Error(i(160));Ig(C,G,T),li=null,pa=!1,C=T.alternate,C!==null&&(C.return=null),T.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)nc(u,o),u=u.sibling}var mo=null;function nc(o,u){var m=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Cr(u,o),Rr(o),y&4&&(Yr(3,o,o.return),fo(3,o),Yr(5,o,o.return));break;case 1:Cr(u,o),Rr(o),y&512&&(wi||m===null||Kr(m,m.return)),y&64&&ho&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var T=mo;if(Cr(u,o),Rr(o),y&512&&(wi||m===null||Kr(m,m.return)),y&4){var C=m!==null?m.memoizedState:null;if(y=o.memoizedState,m===null)if(y===null)if(o.stateNode===null){e:{y=o.type,m=o.memoizedProps,T=T.ownerDocument||T;t:switch(y){case"title":C=T.getElementsByTagName("title")[0],(!C||C[ua]||C[xi]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=T.createElement(y),T.head.insertBefore(C,T.querySelector("head > title"))),Ba(C,y,m),C[xi]=o,K(C),y=C;break e;case"link":var G=J3("link","href",T).get(y+(m.href||""));if(G){for(var Z=0;Z<G.length;Z++)if(C=G[Z],C.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&C.getAttribute("rel")===(m.rel==null?null:m.rel)&&C.getAttribute("title")===(m.title==null?null:m.title)&&C.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){G.splice(Z,1);break t}}C=T.createElement(y),Ba(C,y,m),T.head.appendChild(C);break;case"meta":if(G=J3("meta","content",T).get(y+(m.content||""))){for(Z=0;Z<G.length;Z++)if(C=G[Z],C.getAttribute("content")===(m.content==null?null:""+m.content)&&C.getAttribute("name")===(m.name==null?null:m.name)&&C.getAttribute("property")===(m.property==null?null:m.property)&&C.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&C.getAttribute("charset")===(m.charSet==null?null:m.charSet)){G.splice(Z,1);break t}}C=T.createElement(y),Ba(C,y,m),T.head.appendChild(C);break;default:throw Error(i(468,y))}C[xi]=o,K(C),y=C}o.stateNode=y}else eL(T,o.type,o.stateNode);else o.stateNode=Q3(T,y,o.memoizedProps);else C!==y?(C===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):C.count--,y===null?eL(T,o.type,o.stateNode):Q3(T,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Tr(o,o.memoizedProps,m.memoizedProps)}break;case 27:Cr(u,o),Rr(o),y&512&&(wi||m===null||Kr(m,m.return)),m!==null&&y&4&&Tr(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Cr(u,o),Rr(o),y&512&&(wi||m===null||Kr(m,m.return)),o.flags&32){T=o.stateNode;try{hi(T,"")}catch(jt){Kn(o,o.return,jt)}}y&4&&o.stateNode!=null&&(T=o.memoizedProps,Tr(o,T,m!==null?m.memoizedProps:T)),y&1024&&(Vo=!0);break;case 6:if(Cr(u,o),Rr(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,m=o.stateNode;try{m.nodeValue=y}catch(jt){Kn(o,o.return,jt)}}break;case 3:if(yS=null,T=mo,mo=gS(u.containerInfo),Cr(u,o),mo=T,Rr(o),y&4&&m!==null&&m.memoizedState.isDehydrated)try{Fg(u.containerInfo)}catch(jt){Kn(o,o.return,jt)}Vo&&(Vo=!1,Ng(o));break;case 4:y=mo,mo=gS(o.stateNode.containerInfo),Cr(u,o),Rr(o),mo=y;break;case 12:Cr(u,o),Rr(o);break;case 31:Cr(u,o),Rr(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,fu(o,y)));break;case 13:Cr(u,o),Rr(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(zh=X()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,fu(o,y)));break;case 22:T=o.memoizedState!==null;var ue=m!==null&&m.memoizedState!==null,Pe=ho,Ke=wi;if(ho=Pe||T,wi=Ke||ue,Cr(u,o),wi=Ke,ho=Pe,Rr(o),y&8192)e:for(u=o.stateNode,u._visibility=T?u._visibility&-2:u._visibility|1,T&&(m===null||ue||ho||wi||Al(o)),m=null,u=o;;){if(u.tag===5||u.tag===26){if(m===null){ue=m=u;try{if(C=ue.stateNode,T)G=C.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{Z=ue.stateNode;var tt=ue.memoizedProps.style,De=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;Z.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(jt){Kn(ue,ue.return,jt)}}}else if(u.tag===6){if(m===null){ue=u;try{ue.stateNode.nodeValue=T?"":ue.memoizedProps}catch(jt){Kn(ue,ue.return,jt)}}}else if(u.tag===18){if(m===null){ue=u;try{var Ve=ue.stateNode;T?H3(Ve,!0):H3(ue.stateNode,!1)}catch(jt){Kn(ue,ue.return,jt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=o.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,fu(o,m))));break;case 19:Cr(u,o),Rr(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,fu(o,y)));break;case 30:break;case 21:break;default:Cr(u,o),Rr(o)}}function Rr(o){var u=o.flags;if(u&2){try{for(var m,y=o.return;y!==null;){if(Di(y)){m=y;break}y=y.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var T=m.stateNode,C=Un(o);Ua(o,C,T);break;case 5:var G=m.stateNode;m.flags&32&&(hi(G,""),m.flags&=-33);var Z=Un(o);Ua(o,Z,G);break;case 3:case 4:var ue=m.stateNode.containerInfo,Pe=Un(o);Ml(o,Pe,ue);break;default:throw Error(i(161))}}catch(Ke){Kn(o,o.return,Ke)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Ng(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;Ng(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function go(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Li(o,u.alternate,u),u=u.sibling}function Al(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Yr(4,u,u.return),Al(u);break;case 1:Kr(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&zr(u,u.return,m),Al(u);break;case 27:Ly(u.stateNode);case 26:case 5:Kr(u,u.return),Al(u);break;case 22:u.memoizedState===null&&Al(u);break;case 30:Al(u);break;default:Al(u)}o=o.sibling}}function ka(o,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,T=o,C=u,G=C.flags;switch(C.tag){case 0:case 11:case 15:ka(T,C,m),fo(4,C);break;case 1:if(ka(T,C,m),y=C,T=y.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Pe){Kn(y,y.return,Pe)}if(y=C,T=y.updateQueue,T!==null){var Z=y.stateNode;try{var ue=T.shared.hiddenCallbacks;if(ue!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ue.length;T++)Ih(ue[T],Z)}catch(Pe){Kn(y,y.return,Pe)}}m&&G&64&&Bo(C),cu(C,C.return);break;case 27:Pg(C);case 26:case 5:ka(T,C,m),m&&y===null&&G&4&&Sp(C),cu(C,C.return);break;case 12:ka(T,C,m);break;case 31:ka(T,C,m),m&&G&4&&tc(T,C);break;case 13:ka(T,C,m),m&&G&4&&kh(T,C);break;case 22:C.memoizedState===null&&ka(T,C,m),cu(C,C.return);break;case 30:break;default:ka(T,C,m)}u=u.sibling}}function ic(o,u){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&rf(m))}function yf(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&rf(o))}function Zr(o,u,m,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Py(o,u,m,y),u=u.sibling}function Py(o,u,m,y){var T=u.flags;switch(u.tag){case 0:case 11:case 15:Zr(o,u,m,y),T&2048&&fo(9,u);break;case 1:Zr(o,u,m,y);break;case 3:Zr(o,u,m,y),T&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&rf(o)));break;case 12:if(T&2048){Zr(o,u,m,y),o=u.stateNode;try{var C=u.memoizedProps,G=C.id,Z=C.onPostCommit;typeof Z=="function"&&Z(G,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ue){Kn(u,u.return,ue)}}else Zr(o,u,m,y);break;case 31:Zr(o,u,m,y);break;case 13:Zr(o,u,m,y);break;case 23:break;case 22:C=u.stateNode,G=u.alternate,u.memoizedState!==null?C._visibility&2?Zr(o,u,m,y):Tl(o,u):C._visibility&2?Zr(o,u,m,y):(C._visibility|=2,Qr(o,u,m,y,(u.subtreeFlags&10256)!==0||!1)),T&2048&&ic(G,u);break;case 24:Zr(o,u,m,y),T&2048&&yf(u.alternate,u);break;default:Zr(o,u,m,y)}}function Qr(o,u,m,y,T){for(T=T&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var C=o,G=u,Z=m,ue=y,Pe=G.flags;switch(G.tag){case 0:case 11:case 15:Qr(C,G,Z,ue,T),fo(8,G);break;case 23:break;case 22:var Ke=G.stateNode;G.memoizedState!==null?Ke._visibility&2?Qr(C,G,Z,ue,T):Tl(C,G):(Ke._visibility|=2,Qr(C,G,Z,ue,T)),T&&Pe&2048&&ic(G.alternate,G);break;case 24:Qr(C,G,Z,ue,T),T&&Pe&2048&&yf(G.alternate,G);break;default:Qr(C,G,Z,ue,T)}u=u.sibling}}function Tl(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=o,y=u,T=y.flags;switch(y.tag){case 22:Tl(m,y),T&2048&&ic(y.alternate,y);break;case 24:Tl(m,y),T&2048&&yf(y.alternate,y);break;default:Tl(m,y)}u=u.sibling}}var bf=8192;function Os(o,u,m){if(o.subtreeFlags&bf)for(o=o.child;o!==null;)Og(o,u,m),o=o.sibling}function Og(o,u,m){switch(o.tag){case 26:Os(o,u,m),o.flags&bf&&o.memoizedState!==null&&Jq(m,mo,o.memoizedState,o.memoizedProps);break;case 5:Os(o,u,m);break;case 3:case 4:var y=mo;mo=gS(o.stateNode.containerInfo),Os(o,u,m),mo=y;break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=bf,bf=16777216,Os(o,u,m),bf=y):Os(o,u,m));break;default:Os(o,u,m)}}function xf(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function rc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];Fr=y,Qi(y,o)}xf(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)os(o),o=o.sibling}function os(o){switch(o.tag){case 0:case 11:case 15:rc(o),o.flags&2048&&Yr(9,o,o.return);break;case 3:rc(o);break;case 12:rc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,ls(o)):rc(o);break;default:rc(o)}}function ls(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];Fr=y,Qi(y,o)}xf(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Yr(8,u,u.return),ls(u);break;case 22:m=u.stateNode,m._visibility&2&&(m._visibility&=-3,ls(u));break;default:ls(u)}o=o.sibling}}function Qi(o,u){for(;Fr!==null;){var m=Fr;switch(m.tag){case 0:case 11:case 15:Yr(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:rf(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,Fr=y;else e:for(m=o;Fr!==null;){y=Fr;var T=y.sibling,C=y.return;if(wp(y),y===m){Fr=null;break e}if(T!==null){T.return=C,Fr=T;break e}Fr=C}}}var hu={getCacheForType:function(o){var u=un(gr),m=u.data.get(o);return m===void 0&&(m=o(),u.data.set(o,m)),m},cacheSignal:function(){return un(gr).controller.signal}},xn=typeof WeakMap=="function"?WeakMap:Map,qt=0,dn=null,Tn=null,wn=0,Vn=0,ma=null,vo=!1,jo=!1,Iy=!1,Ds=0,Vi=0,Cl=0,ac=0,Ep=0,za=0,Ri=0,_f=null,Ji=null,er=!1,zh=0,Ny=0,fr=1/0,ji=null,hr=null,ui=0,Ls=null,Fh=null,yo=0,Bh=0,Vh=null,Mp=null,sc=0,Sf=null;function Us(){return(qt&2)!==0&&wn!==0?wn&-wn:te.T!==null?Fe():Wl()}function On(){if(za===0)if((wn&536870912)===0||zn){var o=nt;nt<<=1,(nt&3932160)===0&&(nt=262144),za=o}else za=536870912;return o=is.current,o!==null&&(o.flags|=32),za}function Cn(o,u,m){(o===dn&&(Vn===2||Vn===9)||o.cancelPendingCommit!==null)&&(lc(o,0),yr(o,wn,za,!1)),si(o,m),((qt&2)===0||o!==dn)&&(o===dn&&((qt&2)===0&&(ac|=m),Vi===4&&yr(o,wn,za,!1)),yt(o))}function Dn(o,u,m){if((qt&6)!==0)throw Error(i(327));var y=!m&&(u&127)===0&&(u&o.expiredLanes)===0||lt(o,u),T=y?Ap(o,u):Fa(o,u,!0),C=y;do{if(T===0){jo&&!y&&yr(o,u,0,!1);break}else{if(m=o.current.alternate,C&&!ci(m)){T=Fa(o,u,!1),C=!1;continue}if(T===2){if(C=u,o.errorRecoveryDisabledLanes&C)var G=0;else G=o.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){u=G;e:{var Z=o;T=_f;var ue=Z.current.memoizedState.isDehydrated;if(ue&&(lc(Z,G).flags|=256),G=Fa(Z,G,!1),G!==2){if(Iy&&!ue){Z.errorRecoveryDisabledLanes|=C,ac|=C,T=4;break e}C=Ji,Ji=T,C!==null&&(Ji===null?Ji=C:Ji.push.apply(Ji,C))}T=G}if(C=!1,T!==2)continue}}if(T===1){lc(o,0),yr(o,u,0,!0);break}e:{switch(y=o,C=T,C){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:yr(y,u,za,!vo);break e;case 2:Ji=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(T=zh+300-X(),10<T)){if(yr(y,u,za,!vo),$e(y,0,!0)!==0)break e;yo=u,y.timeoutHandle=B3(kn.bind(null,y,m,Ji,ji,er,u,za,ac,Ri,vo,C,"Throttled",-0,0),T);break e}kn(y,m,Ji,ji,er,u,za,ac,Ri,vo,C,null,-0,0)}}break}while(!0);yt(o)}function kn(o,u,m,y,T,C,G,Z,ue,Pe,Ke,tt,De,Ve){if(o.timeoutHandle=-1,tt=u.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:No},Og(u,C,tt);var jt=(C&62914560)===C?zh-X():(C&4194048)===C?Ny-X():0;if(jt=eW(tt,jt),jt!==null){yo=C,o.cancelPendingCommit=jt(pu.bind(null,o,u,C,m,y,T,G,Z,ue,Ke,tt,null,De,Ve)),yr(o,C,G,!Pe);return}}pu(o,u,C,m,y,T,G,Z,ue)}function ci(o){for(var u=o;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var T=m[y],C=T.getSnapshot;T=T.value;try{if(!Na(C(),T))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function yr(o,u,m,y){u&=~Ep,u&=~ac,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var T=u;0<T;){var C=31-ae(T),G=1<<C;y[C]=-1,T&=~G}m!==0&&ws(o,m,u)}function Ho(){return(qt&6)===0?(Ot(0),!1):!0}function oc(){if(Tn!==null){if(Vn===0)var o=Tn.return;else o=Tn,yl=$u=null,ty(o),uf=null,cf=0,o=Tn;for(;o!==null;)Ns(o.alternate,o),o=o.return;Tn=null}}function lc(o,u){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,Uq(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),yo=0,oc(),dn=o,Tn=m=es(o.current,null),wn=u,Vn=0,ma=null,vo=!1,jo=lt(o,u),Iy=!1,Ri=za=Ep=ac=Cl=Vi=0,Ji=_f=null,er=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var T=31-ae(y),C=1<<T;u|=o[T],y&=~C}return Ds=u,ap(),m}function Rl(o,u){bn=null,te.H=Lh,u===af||u===An?(u=of(),Vn=3):u===up?(u=of(),Vn=4):Vn=u===_g?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ma=u,Tn===null&&(Vi=1,xg(o,Cs(u,o.current)))}function Hi(){var o=is.current;return o===null?!0:(wn&4194048)===wn?La===null:(wn&62914560)===wn||(wn&536870912)!==0?o===La:!1}function du(){var o=te.H;return te.H=Lh,o===null?Lh:o}function uc(){var o=te.A;return te.A=hu,o}function jh(){Vi=4,vo||(wn&4194048)!==wn&&is.current!==null||(jo=!0),(Cl&134217727)===0&&(ac&134217727)===0||dn===null||yr(dn,wn,za,!1)}function Fa(o,u,m){var y=qt;qt|=2;var T=du(),C=uc();(dn!==o||wn!==u)&&(ji=null,lc(o,u)),u=!1;var G=Vi;e:do try{if(Vn!==0&&Tn!==null){var Z=Tn,ue=ma;switch(Vn){case 8:oc(),G=6;break e;case 3:case 2:case 9:case 6:is.current===null&&(u=!0);var Pe=Vn;if(Vn=0,ma=null,wf(o,Z,ue,Pe),m&&jo){G=0;break e}break;default:Pe=Vn,Vn=0,ma=null,wf(o,Z,ue,Pe)}}Hh(),G=Vi;break}catch(Ke){Rl(o,Ke)}while(!0);return u&&o.shellSuspendCounter++,yl=$u=null,qt=y,te.H=T,te.A=C,Tn===null&&(dn=null,wn=0,ap()),G}function Hh(){for(;Tn!==null;)Dg(Tn)}function Ap(o,u){var m=qt;qt|=2;var y=du(),T=uc();dn!==o||wn!==u?(ji=null,fr=X()+500,lc(o,u)):jo=lt(o,u);e:do try{if(Vn!==0&&Tn!==null){u=Tn;var C=ma;t:switch(Vn){case 1:Vn=0,ma=null,wf(o,u,C,1);break;case 2:case 9:if(ns(C)){Vn=0,ma=null,Tp(u);break}u=function(){Vn!==2&&Vn!==9||dn!==o||(Vn=7),yt(o)},C.then(u,u);break e;case 3:Vn=7;break e;case 4:Vn=5;break e;case 7:ns(C)?(Vn=0,ma=null,Tp(u)):(Vn=0,ma=null,wf(o,u,C,7));break;case 5:var G=null;switch(Tn.tag){case 26:G=Tn.memoizedState;case 5:case 27:var Z=Tn;if(G?tL(G):Z.stateNode.complete){Vn=0,ma=null;var ue=Z.sibling;if(ue!==null)Tn=ue;else{var Pe=Z.return;Pe!==null?(Tn=Pe,cc(Pe)):Tn=null}break t}}Vn=0,ma=null,wf(o,u,C,5);break;case 6:Vn=0,ma=null,wf(o,u,C,6);break;case 8:oc(),Vi=6;break e;default:throw Error(i(462))}}us();break}catch(Ke){Rl(o,Ke)}while(!0);return yl=$u=null,te.H=y,te.A=T,qt=m,Tn!==null?0:(dn=null,wn=0,ap(),Vi)}function us(){for(;Tn!==null&&!vt();)Dg(Tn)}function Dg(o){var u=Rg(o.alternate,o,Ds);o.memoizedProps=o.pendingProps,u===null?cc(o):Tn=u}function Tp(o){var u=o,m=u.alternate;switch(u.tag){case 15:case 0:u=yp(m,u,u.pendingProps,u.type,void 0,wn);break;case 11:u=yp(m,u,u.pendingProps,u.type.render,u.ref,wn);break;case 5:ty(u);default:Ns(m,u),u=Tn=_h(u,Ds),u=Rg(m,u,Ds)}o.memoizedProps=o.pendingProps,u===null?cc(o):Tn=u}function wf(o,u,m,y){yl=$u=null,ty(u),uf=null,cf=0;var T=u.return;try{if(Ar(o,T,u,m,wn)){Vi=1,xg(o,Cs(m,o.current)),Tn=null;return}}catch(C){if(T!==null)throw Tn=T,C;Vi=1,xg(o,Cs(m,o.current)),Tn=null;return}u.flags&32768?(zn||y===1?o=!0:jo||(wn&536870912)!==0?o=!1:(vo=o=!0,(y===2||y===9||y===3||y===6)&&(y=is.current,y!==null&&y.tag===13&&(y.flags|=16384))),Cp(u,o)):cc(u)}function cc(o){var u=o;do{if((u.flags&32768)!==0){Cp(u,vo);return}o=u.return;var m=_p(u.alternate,u,Ds);if(m!==null){Tn=m;return}if(u=u.sibling,u!==null){Tn=u;return}Tn=u=o}while(u!==null);Vi===0&&(Vi=5)}function Cp(o,u){do{var m=co(o.alternate,o);if(m!==null){m.flags&=32767,Tn=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(o=o.sibling,o!==null)){Tn=o;return}Tn=o=m}while(o!==null);Vi=6,Tn=null}function pu(o,u,m,y,T,C,G,Z,ue){o.cancelPendingCommit=null;do Gh();while(ui!==0);if((qt&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(C=u.lanes|u.childLanes,C|=Lr,ar(o,m,C,G,Z,ue),o===dn&&(Tn=dn=null,wn=0),Fh=u,Ls=o,yo=m,Bh=C,Vh=T,Mp=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,N(Le,function(){return Lg(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=te.T,te.T=null,T=re.p,re.p=2,G=qt,qt|=4;try{hT(o,u,m)}finally{qt=G,re.p=T,te.T=y}}ui=1,br(),mu(),Ef()}}function br(){if(ui===1){ui=0;var o=Ls,u=Fh,m=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||m){m=te.T,te.T=null;var y=re.p;re.p=2;var T=qt;qt|=4;try{nc(u,o);var C=bT,G=p_(o.containerInfo),Z=C.focusedElem,ue=C.selectionRange;if(G!==Z&&Z&&Z.ownerDocument&&_i(Z.ownerDocument.documentElement,Z)){if(ue!==null&&k0(Z)){var Pe=ue.start,Ke=ue.end;if(Ke===void 0&&(Ke=Pe),"selectionStart"in Z)Z.selectionStart=Pe,Z.selectionEnd=Math.min(Ke,Z.value.length);else{var tt=Z.ownerDocument||document,De=tt&&tt.defaultView||window;if(De.getSelection){var Ve=De.getSelection(),jt=Z.textContent.length,ln=Math.min(ue.start,jt),Mi=ue.end===void 0?ln:Math.min(ue.end,jt);!Ve.extend&&ln>Mi&&(G=Mi,Mi=ln,ln=G);var Se=yh(Z,ln),me=yh(Z,Mi);if(Se&&me&&(Ve.rangeCount!==1||Ve.anchorNode!==Se.node||Ve.anchorOffset!==Se.offset||Ve.focusNode!==me.node||Ve.focusOffset!==me.offset)){var Ce=tt.createRange();Ce.setStart(Se.node,Se.offset),Ve.removeAllRanges(),ln>Mi?(Ve.addRange(Ce),Ve.extend(me.node,me.offset)):(Ce.setEnd(me.node,me.offset),Ve.addRange(Ce))}}}}for(tt=[],Ve=Z;Ve=Ve.parentNode;)Ve.nodeType===1&&tt.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<tt.length;Z++){var Qe=tt[Z];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}SS=!!yT,bT=yT=null}finally{qt=T,re.p=y,te.T=m}}o.current=u,ui=2}}function mu(){if(ui===2){ui=0;var o=Ls,u=Fh,m=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||m){m=te.T,te.T=null;var y=re.p;re.p=2;var T=qt;qt|=4;try{Li(o,u.alternate,u)}finally{qt=T,re.p=y,te.T=m}}ui=3}}function Ef(){if(ui===4||ui===3){ui=0,J();var o=Ls,u=Fh,m=yo,y=Mp;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ui=5:(ui=0,Fh=Ls=null,Pl(o,o.pendingLanes));var T=o.pendingLanes;if(T===0&&(hr=null),Aa(m),u=u.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Ge,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=te.T,T=re.p,re.p=2,te.T=null;try{for(var C=o.onRecoverableError,G=0;G<y.length;G++){var Z=y[G];C(Z.value,{componentStack:Z.stack})}}finally{te.T=u,re.p=T}}(yo&3)!==0&&Gh(),yt(o),T=o.pendingLanes,(m&261930)!==0&&(T&42)!==0?o===Sf?sc++:(sc=0,Sf=o):sc=0,Ot(0)}}function Pl(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,rf(u)))}function Gh(){return br(),mu(),Ef(),Lg()}function Lg(){if(ui!==5)return!1;var o=Ls,u=Bh;Bh=0;var m=Aa(yo),y=te.T,T=re.p;try{re.p=32>m?32:m,te.T=null,m=Vh,Vh=null;var C=Ls,G=yo;if(ui=0,Fh=Ls=null,yo=0,(qt&6)!==0)throw Error(i(331));var Z=qt;if(qt|=4,os(C.current),Py(C,C.current,G,m),qt=Z,Ot(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Ge,C)}catch{}return!0}finally{re.p=T,te.T=y,Pl(o,u)}}function Oy(o,u,m){u=Cs(m,u),u=wy(o.stateNode,u,2),o=Ku(o,u,2),o!==null&&(si(o,2),yt(o))}function Kn(o,u,m){if(o.tag===3)Oy(o,o,m);else for(;u!==null;){if(u.tag===3){Oy(u,o,m);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(hr===null||!hr.has(y))){o=Cs(m,o),m=Ey(2),y=Ku(u,m,2),y!==null&&(oS(m,y,u,o),si(y,2),yt(y));break}}u=u.return}}function Rp(o,u,m){var y=o.pingCache;if(y===null){y=o.pingCache=new xn;var T=new Set;y.set(u,T)}else T=y.get(u),T===void 0&&(T=new Set,y.set(u,T));T.has(m)||(Iy=!0,T.add(m),o=f.bind(null,o,u,m),u.then(o,o))}function f(o,u,m){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,dn===o&&(wn&m)===m&&(Vi===4||Vi===3&&(wn&62914560)===wn&&300>X()-zh?(qt&2)===0&&lc(o,0):Ep|=m,Ri===wn&&(Ri=0)),yt(o)}function d(o,u){u===0&&(u=cn()),o=Oa(o,u),o!==null&&(si(o,u),yt(o))}function x(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),d(o,m)}function A(o,u){var m=0;switch(o.tag){case 31:case 13:var y=o.stateNode,T=o.memoizedState;T!==null&&(m=T.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(u),d(o,m)}function N(o,u){return gt(o,u)}var z=null,Y=null,ce=!1,Be=!1,ct=!1,St=0;function yt(o){o!==Y&&o.next===null&&(Y===null?z=Y=o:Y=Y.next=o),Be=!0,ce||(ce=!0,we())}function Ot(o,u){if(!ct&&Be){ct=!0;do for(var m=!1,y=z;y!==null;){if(o!==0){var T=y.pendingLanes;if(T===0)var C=0;else{var G=y.suspendedLanes,Z=y.pingedLanes;C=(1<<31-ae(42|o)+1)-1,C&=T&~(G&~Z),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(m=!0,Ie(y,C))}else C=wn,C=$e(y,y===dn?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(C&3)===0||lt(y,C)||(m=!0,Ie(y,C));y=y.next}while(m);ct=!1}}function vn(){dr()}function dr(){Be=ce=!1;var o=0;St!==0&&Lq()&&(o=St);for(var u=X(),m=null,y=z;y!==null;){var T=y.next,C=qh(y,u);C===0?(y.next=null,m===null?z=T:m.next=T,T===null&&(Y=m)):(m=y,(o!==0||(C&3)!==0)&&(Be=!0)),y=T}ui!==0&&ui!==5||Ot(o),St!==0&&(St=0)}function qh(o,u){for(var m=o.suspendedLanes,y=o.pingedLanes,T=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var G=31-ae(C),Z=1<<G,ue=T[G];ue===-1?((Z&m)===0||(Z&y)!==0)&&(T[G]=Ht(Z,u)):ue<=u&&(o.expiredLanes|=Z),C&=~Z}if(u=dn,m=wn,m=$e(o,o===u?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,m===0||o===u&&(Vn===2||Vn===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Ut(y),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||lt(o,m)){if(u=m&-m,u===o.callbackPriority)return u;switch(y!==null&&Ut(y),Aa(m)){case 2:case 8:m=Ye;break;case 32:m=Le;break;case 268435456:m=le;break;default:m=Le}return y=fc.bind(null,o),m=gt(m,y),o.callbackPriority=u,o.callbackNode=m,u}return y!==null&&y!==null&&Ut(y),o.callbackPriority=2,o.callbackNode=null,2}function fc(o,u){if(ui!==0&&ui!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(Gh()&&o.callbackNode!==m)return null;var y=wn;return y=$e(o,o===dn?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Dn(o,y,u),qh(o,X()),o.callbackNode!=null&&o.callbackNode===m?fc.bind(null,o):null)}function Ie(o,u){if(Gh())return null;Dn(o,u,!0)}function we(){kq(function(){(qt&6)!==0?gt(ke,vn):dr()})}function Fe(){if(St===0){var o=ru;o===0&&(o=rt,rt<<=1,(rt&261888)===0&&(rt=256)),St=o}return St}function _t(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:$c(""+o)}function en(o,u){var m=u.ownerDocument.createElement("input");return m.name=u.name,m.value=u.value,o.id&&m.setAttribute("form",o.id),u.parentNode.insertBefore(m,u),o=new FormData(o),m.parentNode.removeChild(m),o}function Gi(o,u,m,y,T){if(u==="submit"&&m&&m.stateNode===T){var C=_t((T[Ui]||null).action),G=y.submitter;G&&(u=(u=G[Ui]||null)?_t(u.formAction):G.getAttribute("formAction"),u!==null&&(C=u,G=null));var Z=new Lo("action","action",null,y,T);o.push({event:Z,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(St!==0){var ue=G?en(T,G):new FormData(T);my(m,{pending:!0,data:ue,method:T.method,action:C},null,ue)}}else typeof C=="function"&&(Z.preventDefault(),ue=G?en(T,G):new FormData(T),my(m,{pending:!0,data:ue,method:T.method,action:C},C,ue))},currentTarget:T}]})}}for(var rn=0;rn<ip.length;rn++){var Hn=ip[rn],Br=Hn.toLowerCase(),Zn=Hn[0].toUpperCase()+Hn.slice(1);io(Br,"on"+Zn)}io(Xm,"onAnimationEnd"),io(np,"onAnimationIteration"),io(F0,"onAnimationStart"),io("dblclick","onDoubleClick"),io("focusin","onFocus"),io("focusout","onBlur"),io(g_,"onTransitionRun"),io(rT,"onTransitionStart"),io(v_,"onTransitionCancel"),io(B0,"onTransitionEnd"),xe("onMouseEnter",["mouseout","mouseover"]),xe("onMouseLeave",["mouseout","mouseover"]),xe("onPointerEnter",["pointerout","pointerover"]),xe("onPointerLeave",["pointerout","pointerover"]),Re("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Re("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Re("onBeforeInput",["compositionend","keypress","textInput","paste"]),Re("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Re("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Re("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bo));function N3(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var y=o[m],T=y.event;y=y.listeners;e:{var C=void 0;if(u)for(var G=y.length-1;0<=G;G--){var Z=y[G],ue=Z.instance,Pe=Z.currentTarget;if(Z=Z.listener,ue!==C&&T.isPropagationStopped())break e;C=Z,T.currentTarget=Pe;try{C(T)}catch(Ke){rp(Ke)}T.currentTarget=null,C=ue}else for(G=0;G<y.length;G++){if(Z=y[G],ue=Z.instance,Pe=Z.currentTarget,Z=Z.listener,ue!==C&&T.isPropagationStopped())break e;C=Z,T.currentTarget=Pe;try{C(T)}catch(Ke){rp(Ke)}T.currentTarget=null,C=ue}}}}function jn(o,u){var m=u[la];m===void 0&&(m=u[la]=new Set);var y=o+"__bubble";m.has(y)||(O3(u,o,2,!1),m.add(y))}function pT(o,u,m){var y=0;u&&(y|=4),O3(m,o,y,u)}var dS="_reactListening"+Math.random().toString(36).slice(2);function mT(o){if(!o[dS]){o[dS]=!0,ge.forEach(function(m){m!=="selectionchange"&&(dT.has(m)||pT(m,!1,o),pT(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[dS]||(u[dS]=!0,pT("selectionchange",!1,u))}}function O3(o,u,m,y){switch(lL(u)){case 2:var T=iW;break;case 8:T=rW;break;default:T=PT}m=T.bind(null,u,m,o),T=void 0,!Yc||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),y?T!==void 0?o.addEventListener(u,m,{capture:!0,passive:T}):o.addEventListener(u,m,!0):T!==void 0?o.addEventListener(u,m,{passive:T}):o.addEventListener(u,m,!1)}function gT(o,u,m,y,T){var C=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var Z=y.stateNode.containerInfo;if(Z===T)break;if(G===4)for(G=y.return;G!==null;){var ue=G.tag;if((ue===3||ue===4)&&G.stateNode.containerInfo===T)return;G=G.return}for(;Z!==null;){if(G=Es(Z),G===null)return;if(ue=G.tag,ue===5||ue===6||ue===26||ue===27){y=C=G;continue e}Z=Z.parentNode}}y=y.return}Yl(function(){var Pe=C,Ke=As(m),tt=[];e:{var De=no.get(o);if(De!==void 0){var Ve=Lo,jt=o;switch(o){case"keypress":if(Lu(m)===0)break e;case"keydown":case"keyup":Ve=ll;break;case"focusin":jt="focus",Ve=zu;break;case"focusout":jt="blur",Ve=zu;break;case"beforeblur":case"afterblur":Ve=zu;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=V;break;case Xm:case np:case F0:Ve=qm;break;case B0:Ve=ee;break;case"scroll":case"scrollend":Ve=ch;break;case"wheel":Ve=ze;break;case"copy":case"cut":case"paste":Ve=Yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=ul;break;case"toggle":case"beforetoggle":Ve=gn}var ln=(u&4)!==0,Mi=!ln&&(o==="scroll"||o==="scrollend"),Se=ln?De!==null?De+"Capture":null:De;ln=[];for(var me=Pe,Ce;me!==null;){var Qe=me;if(Ce=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||Ce===null||Se===null||(Qe=Js(me,Se),Qe!=null&&ln.push(Dy(me,Qe,Ce))),Mi)break;me=me.return}0<ln.length&&(De=new Ve(De,jt,null,m,Ke),tt.push({event:De,listeners:ln}))}}if((u&7)===0){e:{if(De=o==="mouseover"||o==="pointerover",Ve=o==="mouseout"||o==="pointerout",De&&m!==lh&&(jt=m.relatedTarget||m.fromElement)&&(Es(jt)||jt[$r]))break e;if((Ve||De)&&(De=Ke.window===Ke?Ke:(De=Ke.ownerDocument)?De.defaultView||De.parentWindow:window,Ve?(jt=m.relatedTarget||m.toElement,Ve=Pe,jt=jt?Es(jt):null,jt!==null&&(Mi=a(jt),ln=jt.tag,jt!==Mi||ln!==5&&ln!==27&&ln!==6)&&(jt=null)):(Ve=null,jt=Pe),Ve!==jt)){if(ln=fh,Qe="onMouseLeave",Se="onMouseEnter",me="mouse",(o==="pointerout"||o==="pointerover")&&(ln=ul,Qe="onPointerLeave",Se="onPointerEnter",me="pointer"),Mi=Ve==null?De:ca(Ve),Ce=jt==null?De:ca(jt),De=new ln(Qe,me+"leave",Ve,m,Ke),De.target=Mi,De.relatedTarget=Ce,Qe=null,Es(Ke)===Pe&&(ln=new ln(Se,me+"enter",jt,m,Ke),ln.target=Ce,ln.relatedTarget=Mi,Qe=ln),Mi=Qe,Ve&&jt)t:{for(ln=Pq,Se=Ve,me=jt,Ce=0,Qe=Se;Qe;Qe=ln(Qe))Ce++;Qe=0;for(var Qt=me;Qt;Qt=ln(Qt))Qe++;for(;0<Ce-Qe;)Se=ln(Se),Ce--;for(;0<Qe-Ce;)me=ln(me),Qe--;for(;Ce--;){if(Se===me||me!==null&&Se===me.alternate){ln=Se;break t}Se=ln(Se),me=ln(me)}ln=null}else ln=null;Ve!==null&&D3(tt,De,Ve,ln,!1),jt!==null&&Mi!==null&&D3(tt,Mi,jt,ln,!0)}}e:{if(De=Pe?ca(Pe):window,Ve=De.nodeName&&De.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&De.type==="file")var ii=N0;else if(I0(De))if(cl)ii=d_;else{ii=L0;var Gt=f_}else Ve=De.nodeName,!Ve||Ve.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Pe&&Ra(Pe.elementType)&&(ii=N0):ii=h_;if(ii&&(ii=ii(o,Pe))){Wm(tt,ii,m,Ke);break e}Gt&&Gt(o,De,Pe),o==="focusout"&&Pe&&De.type==="number"&&Pe.memoizedProps.value!=null&&vi(De,"number",De.value)}switch(Gt=Pe?ca(Pe):window,o){case"focusin":(I0(Gt)||Gt.contentEditable==="true")&&(fl=Gt,hl=Pe,bh=null);break;case"focusout":bh=hl=fl=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,xh(tt,m,Ke);break;case"selectionchange":if(m_)break;case"keydown":case"keyup":xh(tt,m,Ke)}var In;if(Bn)e:{switch(o){case"compositionstart":var Gn="onCompositionStart";break e;case"compositionend":Gn="onCompositionEnd";break e;case"compositionupdate":Gn="onCompositionUpdate";break e}Gn=void 0}else ef?Ql(o,m)&&(Gn="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Gn="onCompositionStart");Gn&&(ko&&m.locale!=="ko"&&(ef||Gn!=="onCompositionStart"?Gn==="onCompositionEnd"&&ef&&(In=Du()):(Pa=Ke,uh="value"in Pa?Pa.value:Pa.textContent,ef=!0)),Gt=pS(Pe,Gn),0<Gt.length&&(Gn=new eo(Gn,o,null,m,Ke),tt.push({event:Gn,listeners:Gt}),In?Gn.data=In:(In=Jc(m),In!==null&&(Gn.data=In)))),(In=Ia?u_(o,m):R0(o,m))&&(Gn=pS(Pe,"onBeforeInput"),0<Gn.length&&(Gt=new eo("onBeforeInput","beforeinput",null,m,Ke),tt.push({event:Gt,listeners:Gn}),Gt.data=In)),Gi(tt,o,Pe,m,Ke)}N3(tt,u)})}function Dy(o,u,m){return{instance:o,listener:u,currentTarget:m}}function pS(o,u){for(var m=u+"Capture",y=[];o!==null;){var T=o,C=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||C===null||(T=Js(o,m),T!=null&&y.unshift(Dy(o,T,C)),T=Js(o,u),T!=null&&y.push(Dy(o,T,C))),o.tag===3)return y;o=o.return}return[]}function Pq(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function D3(o,u,m,y,T){for(var C=u._reactName,G=[];m!==null&&m!==y;){var Z=m,ue=Z.alternate,Pe=Z.stateNode;if(Z=Z.tag,ue!==null&&ue===y)break;Z!==5&&Z!==26&&Z!==27||Pe===null||(ue=Pe,T?(Pe=Js(m,C),Pe!=null&&G.unshift(Dy(m,Pe,ue))):T||(Pe=Js(m,C),Pe!=null&&G.push(Dy(m,Pe,ue)))),m=m.return}G.length!==0&&o.push({event:u,listeners:G})}var Iq=/\r\n?/g,Nq=/\u0000|\uFFFD/g;function L3(o){return(typeof o=="string"?o:""+o).replace(Iq,`
`).replace(Nq,"")}function U3(o,u){return u=L3(u),L3(o)===u}function Ei(o,u,m,y,T,C){switch(m){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||hi(o,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&hi(o,""+y);break;case"className":Vt(o,"class",y);break;case"tabIndex":Vt(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Vt(o,m,y);break;case"style":il(o,y,C);break;case"data":if(u!=="object"){Vt(o,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||m!=="href")){o.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=$c(""+y),o.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(m==="formAction"?(u!=="input"&&Ei(o,u,"name",T.name,T,null),Ei(o,u,"formEncType",T.formEncType,T,null),Ei(o,u,"formMethod",T.formMethod,T,null),Ei(o,u,"formTarget",T.formTarget,T,null)):(Ei(o,u,"encType",T.encType,T,null),Ei(o,u,"method",T.method,T,null),Ei(o,u,"target",T.target,T,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=$c(""+y),o.setAttribute(m,y);break;case"onClick":y!=null&&(o.onclick=No);break;case"onScroll":y!=null&&jn("scroll",o);break;case"onScrollEnd":y!=null&&jn("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(T.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}m=$c(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""+y):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":y===!0?o.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,y):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(m,y):o.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(m):o.setAttribute(m,y);break;case"popover":jn("beforetoggle",o),jn("toggle",o),kt(o,"popover",y);break;case"xlinkActuate":It(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":It(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":It(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":It(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":It(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":It(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":It(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":It(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":It(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":kt(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=$d.get(m)||m,kt(o,m,y))}}function vT(o,u,m,y,T,C){switch(m){case"style":il(o,y,C);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(T.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"children":typeof y=="string"?hi(o,y):(typeof y=="number"||typeof y=="bigint")&&hi(o,""+y);break;case"onScroll":y!=null&&jn("scroll",o);break;case"onScrollEnd":y!=null&&jn("scrollend",o);break;case"onClick":y!=null&&(o.onclick=No);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ue.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),u=m.slice(2,T?m.length-7:void 0),C=o[Ui]||null,C=C!=null?C[m]:null,typeof C=="function"&&o.removeEventListener(u,C,T),typeof y=="function")){typeof C!="function"&&C!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(u,y,T);break e}m in o?o[m]=y:y===!0?o.setAttribute(m,""):kt(o,m,y)}}}function Ba(o,u,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jn("error",o),jn("load",o);var y=!1,T=!1,C;for(C in m)if(m.hasOwnProperty(C)){var G=m[C];if(G!=null)switch(C){case"src":y=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Ei(o,u,C,G,m,null)}}T&&Ei(o,u,"srcSet",m.srcSet,m,null),y&&Ei(o,u,"src",m.src,m,null);return;case"input":jn("invalid",o);var Z=C=G=T=null,ue=null,Pe=null;for(y in m)if(m.hasOwnProperty(y)){var Ke=m[y];if(Ke!=null)switch(y){case"name":T=Ke;break;case"type":G=Ke;break;case"checked":ue=Ke;break;case"defaultChecked":Pe=Ke;break;case"value":C=Ke;break;case"defaultValue":Z=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(i(137,u));break;default:Ei(o,u,y,Ke,m,null)}}Ms(o,C,Z,ue,Pe,G,T,!1);return;case"select":jn("invalid",o),y=G=C=null;for(T in m)if(m.hasOwnProperty(T)&&(Z=m[T],Z!=null))switch(T){case"value":C=Z;break;case"defaultValue":G=Z;break;case"multiple":y=Z;default:Ei(o,u,T,Z,m,null)}u=C,m=G,o.multiple=!!y,u!=null?Xr(o,!!y,u,!1):m!=null&&Xr(o,!!y,m,!0);return;case"textarea":jn("invalid",o),C=T=y=null;for(G in m)if(m.hasOwnProperty(G)&&(Z=m[G],Z!=null))switch(G){case"value":y=Z;break;case"defaultValue":T=Z;break;case"children":C=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(91));break;default:Ei(o,u,G,Z,m,null)}Ti(o,y,T,C);return;case"option":for(ue in m)if(m.hasOwnProperty(ue)&&(y=m[ue],y!=null))switch(ue){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Ei(o,u,ue,y,m,null)}return;case"dialog":jn("beforetoggle",o),jn("toggle",o),jn("cancel",o),jn("close",o);break;case"iframe":case"object":jn("load",o);break;case"video":case"audio":for(y=0;y<bo.length;y++)jn(bo[y],o);break;case"image":jn("error",o),jn("load",o);break;case"details":jn("toggle",o);break;case"embed":case"source":case"link":jn("error",o),jn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in m)if(m.hasOwnProperty(Pe)&&(y=m[Pe],y!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Ei(o,u,Pe,y,m,null)}return;default:if(Ra(u)){for(Ke in m)m.hasOwnProperty(Ke)&&(y=m[Ke],y!==void 0&&vT(o,u,Ke,y,m,void 0));return}}for(Z in m)m.hasOwnProperty(Z)&&(y=m[Z],y!=null&&Ei(o,u,Z,y,m,null))}function Oq(o,u,m,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,C=null,G=null,Z=null,ue=null,Pe=null,Ke=null;for(Ve in m){var tt=m[Ve];if(m.hasOwnProperty(Ve)&&tt!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":ue=tt;default:y.hasOwnProperty(Ve)||Ei(o,u,Ve,null,y,tt)}}for(var De in y){var Ve=y[De];if(tt=m[De],y.hasOwnProperty(De)&&(Ve!=null||tt!=null))switch(De){case"type":C=Ve;break;case"name":T=Ve;break;case"checked":Pe=Ve;break;case"defaultChecked":Ke=Ve;break;case"value":G=Ve;break;case"defaultValue":Z=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(i(137,u));break;default:Ve!==tt&&Ei(o,u,De,Ve,y,tt)}}ki(o,G,Z,ue,Pe,Ke,C,T);return;case"select":Ve=G=Z=De=null;for(C in m)if(ue=m[C],m.hasOwnProperty(C)&&ue!=null)switch(C){case"value":break;case"multiple":Ve=ue;default:y.hasOwnProperty(C)||Ei(o,u,C,null,y,ue)}for(T in y)if(C=y[T],ue=m[T],y.hasOwnProperty(T)&&(C!=null||ue!=null))switch(T){case"value":De=C;break;case"defaultValue":Z=C;break;case"multiple":G=C;default:C!==ue&&Ei(o,u,T,C,y,ue)}u=Z,m=G,y=Ve,De!=null?Xr(o,!!m,De,!1):!!y!=!!m&&(u!=null?Xr(o,!!m,u,!0):Xr(o,!!m,m?[]:"",!1));return;case"textarea":Ve=De=null;for(Z in m)if(T=m[Z],m.hasOwnProperty(Z)&&T!=null&&!y.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:Ei(o,u,Z,null,y,T)}for(G in y)if(T=y[G],C=m[G],y.hasOwnProperty(G)&&(T!=null||C!=null))switch(G){case"value":De=T;break;case"defaultValue":Ve=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:T!==C&&Ei(o,u,G,T,y,C)}Yn(o,De,Ve);return;case"option":for(var jt in m)if(De=m[jt],m.hasOwnProperty(jt)&&De!=null&&!y.hasOwnProperty(jt))switch(jt){case"selected":o.selected=!1;break;default:Ei(o,u,jt,null,y,De)}for(ue in y)if(De=y[ue],Ve=m[ue],y.hasOwnProperty(ue)&&De!==Ve&&(De!=null||Ve!=null))switch(ue){case"selected":o.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:Ei(o,u,ue,De,y,Ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ln in m)De=m[ln],m.hasOwnProperty(ln)&&De!=null&&!y.hasOwnProperty(ln)&&Ei(o,u,ln,null,y,De);for(Pe in y)if(De=y[Pe],Ve=m[Pe],y.hasOwnProperty(Pe)&&De!==Ve&&(De!=null||Ve!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(i(137,u));break;default:Ei(o,u,Pe,De,y,Ve)}return;default:if(Ra(u)){for(var Mi in m)De=m[Mi],m.hasOwnProperty(Mi)&&De!==void 0&&!y.hasOwnProperty(Mi)&&vT(o,u,Mi,void 0,y,De);for(Ke in y)De=y[Ke],Ve=m[Ke],!y.hasOwnProperty(Ke)||De===Ve||De===void 0&&Ve===void 0||vT(o,u,Ke,De,y,Ve);return}}for(var Se in m)De=m[Se],m.hasOwnProperty(Se)&&De!=null&&!y.hasOwnProperty(Se)&&Ei(o,u,Se,null,y,De);for(tt in y)De=y[tt],Ve=m[tt],!y.hasOwnProperty(tt)||De===Ve||De==null&&Ve==null||Ei(o,u,tt,De,y,Ve)}function k3(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Dq(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,m=performance.getEntriesByType("resource"),y=0;y<m.length;y++){var T=m[y],C=T.transferSize,G=T.initiatorType,Z=T.duration;if(C&&Z&&k3(G)){for(G=0,Z=T.responseEnd,y+=1;y<m.length;y++){var ue=m[y],Pe=ue.startTime;if(Pe>Z)break;var Ke=ue.transferSize,tt=ue.initiatorType;Ke&&k3(tt)&&(ue=ue.responseEnd,G+=Ke*(ue<Z?1:(Z-Pe)/(ue-Pe)))}if(--y,u+=8*(C+G)/(T.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var yT=null,bT=null;function mS(o){return o.nodeType===9?o:o.ownerDocument}function z3(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F3(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function xT(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var _T=null;function Lq(){var o=window.event;return o&&o.type==="popstate"?o===_T?!1:(_T=o,!0):(_T=null,!1)}var B3=typeof setTimeout=="function"?setTimeout:void 0,Uq=typeof clearTimeout=="function"?clearTimeout:void 0,V3=typeof Promise=="function"?Promise:void 0,kq=typeof queueMicrotask=="function"?queueMicrotask:typeof V3<"u"?function(o){return V3.resolve(null).then(o).catch(zq)}:B3;function zq(o){setTimeout(function(){throw o})}function Wh(o){return o==="head"}function j3(o,u){var m=u,y=0;do{var T=m.nextSibling;if(o.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"||m==="/&"){if(y===0){o.removeChild(T),Fg(u);return}y--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")y++;else if(m==="html")Ly(o.ownerDocument.documentElement);else if(m==="head"){m=o.ownerDocument.head,Ly(m);for(var C=m.firstChild;C;){var G=C.nextSibling,Z=C.nodeName;C[ua]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&C.rel.toLowerCase()==="stylesheet"||m.removeChild(C),C=G}}else m==="body"&&Ly(o.ownerDocument.body);m=T}while(m);Fg(u)}function H3(o,u){var m=o;o=0;do{var y=m.nextSibling;if(m.nodeType===1?u?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(u?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),y&&y.nodeType===8)if(m=y.data,m==="/$"){if(o===0)break;o--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||o++;m=y}while(m)}function ST(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var m=u;switch(u=u.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":ST(m),Zs(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function Fq(o,u,m,y){for(;o.nodeType===1;){var T=m;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[ua])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(C=o.getAttribute("rel"),C==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(C!==T.rel||o.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||o.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||o.getAttribute("title")!==(T.title==null?null:T.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(C=o.getAttribute("src"),(C!==(T.src==null?null:T.src)||o.getAttribute("type")!==(T.type==null?null:T.type)||o.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&C&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var C=T.name==null?null:""+T.name;if(T.type==="hidden"&&o.getAttribute("name")===C)return o}else return o;if(o=Il(o.nextSibling),o===null)break}return null}function Bq(o,u,m){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Il(o.nextSibling),o===null))return null;return o}function G3(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Il(o.nextSibling),o===null))return null;return o}function wT(o){return o.data==="$?"||o.data==="$~"}function ET(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Vq(o,u){var m=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||m.readyState!=="loading")u();else{var y=function(){u(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function Il(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var MT=null;function q3(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"||m==="/&"){if(u===0)return Il(o.nextSibling);u--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||u++}o=o.nextSibling}return null}function W3(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(u===0)return o;u--}else m!=="/$"&&m!=="/&"||u++}o=o.previousSibling}return null}function $3(o,u,m){switch(u=mS(m),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Ly(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Zs(o)}var Nl=new Map,X3=new Set;function gS(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Mf=re.d;re.d={f:jq,r:Hq,D:Gq,C:qq,L:Wq,m:$q,X:Yq,S:Xq,M:Kq};function jq(){var o=Mf.f(),u=Ho();return o||u}function Hq(o){var u=Ca(o);u!==null&&u.tag===5&&u.type==="form"?Q_(u):Mf.r(o)}var Ug=typeof document>"u"?null:document;function Y3(o,u,m){var y=Ug;if(y&&typeof u=="string"&&u){var T=tn(u);T='link[rel="'+o+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),X3.has(T)||(X3.add(T),o={rel:o,crossOrigin:m,href:u},y.querySelector(T)===null&&(u=y.createElement("link"),Ba(u,"link",o),K(u),y.head.appendChild(u)))}}function Gq(o){Mf.D(o),Y3("dns-prefetch",o,null)}function qq(o,u){Mf.C(o,u),Y3("preconnect",o,u)}function Wq(o,u,m){Mf.L(o,u,m);var y=Ug;if(y&&o&&u){var T='link[rel="preload"][as="'+tn(u)+'"]';u==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+tn(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+tn(m.imageSizes)+'"]')):T+='[href="'+tn(o)+'"]';var C=T;switch(u){case"style":C=kg(o);break;case"script":C=zg(o)}Nl.has(C)||(o=g({rel:"preload",href:u==="image"&&m&&m.imageSrcSet?void 0:o,as:u},m),Nl.set(C,o),y.querySelector(T)!==null||u==="style"&&y.querySelector(Uy(C))||u==="script"&&y.querySelector(ky(C))||(u=y.createElement("link"),Ba(u,"link",o),K(u),y.head.appendChild(u)))}}function $q(o,u){Mf.m(o,u);var m=Ug;if(m&&o){var y=u&&typeof u.as=="string"?u.as:"script",T='link[rel="modulepreload"][as="'+tn(y)+'"][href="'+tn(o)+'"]',C=T;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=zg(o)}if(!Nl.has(C)&&(o=g({rel:"modulepreload",href:o},u),Nl.set(C,o),m.querySelector(T)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(ky(C)))return}y=m.createElement("link"),Ba(y,"link",o),K(y),m.head.appendChild(y)}}}function Xq(o,u,m){Mf.S(o,u,m);var y=Ug;if(y&&o){var T=Qa(y).hoistableStyles,C=kg(o);u=u||"default";var G=T.get(C);if(!G){var Z={loading:0,preload:null};if(G=y.querySelector(Uy(C)))Z.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},m),(m=Nl.get(C))&&AT(o,m);var ue=G=y.createElement("link");K(ue),Ba(ue,"link",o),ue._p=new Promise(function(Pe,Ke){ue.onload=Pe,ue.onerror=Ke}),ue.addEventListener("load",function(){Z.loading|=1}),ue.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,vS(G,u,y)}G={type:"stylesheet",instance:G,count:1,state:Z},T.set(C,G)}}}function Yq(o,u){Mf.X(o,u);var m=Ug;if(m&&o){var y=Qa(m).hoistableScripts,T=zg(o),C=y.get(T);C||(C=m.querySelector(ky(T)),C||(o=g({src:o,async:!0},u),(u=Nl.get(T))&&TT(o,u),C=m.createElement("script"),K(C),Ba(C,"link",o),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(T,C))}}function Kq(o,u){Mf.M(o,u);var m=Ug;if(m&&o){var y=Qa(m).hoistableScripts,T=zg(o),C=y.get(T);C||(C=m.querySelector(ky(T)),C||(o=g({src:o,async:!0,type:"module"},u),(u=Nl.get(T))&&TT(o,u),C=m.createElement("script"),K(C),Ba(C,"link",o),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(T,C))}}function K3(o,u,m,y){var T=(T=_e.current)?gS(T):null;if(!T)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(u=kg(m.href),m=Qa(T).hoistableStyles,y=m.get(u),y||(y={type:"style",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=kg(m.href);var C=Qa(T).hoistableStyles,G=C.get(o);if(G||(T=T.ownerDocument||T,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(o,G),(C=T.querySelector(Uy(o)))&&!C._p&&(G.instance=C,G.state.loading=5),Nl.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Nl.set(o,m),C||Zq(T,o,m,G.state))),u&&y===null)throw Error(i(528,""));return G}if(u&&y!==null)throw Error(i(529,""));return null;case"script":return u=m.async,m=m.src,typeof m=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=zg(m),m=Qa(T).hoistableScripts,y=m.get(u),y||(y={type:"script",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function kg(o){return'href="'+tn(o)+'"'}function Uy(o){return'link[rel="stylesheet"]['+o+"]"}function Z3(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function Zq(o,u,m,y){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=o.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),Ba(u,"link",m),K(u),o.head.appendChild(u))}function zg(o){return'[src="'+tn(o)+'"]'}function ky(o){return"script[async]"+o}function Q3(o,u,m){if(u.count++,u.instance===null)switch(u.type){case"style":var y=o.querySelector('style[data-href~="'+tn(m.href)+'"]');if(y)return u.instance=y,K(y),y;var T=g({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),K(y),Ba(y,"style",T),vS(y,m.precedence,o),u.instance=y;case"stylesheet":T=kg(m.href);var C=o.querySelector(Uy(T));if(C)return u.state.loading|=4,u.instance=C,K(C),C;y=Z3(m),(T=Nl.get(T))&&AT(y,T),C=(o.ownerDocument||o).createElement("link"),K(C);var G=C;return G._p=new Promise(function(Z,ue){G.onload=Z,G.onerror=ue}),Ba(C,"link",y),u.state.loading|=4,vS(C,m.precedence,o),u.instance=C;case"script":return C=zg(m.src),(T=o.querySelector(ky(C)))?(u.instance=T,K(T),T):(y=m,(T=Nl.get(C))&&(y=g({},m),TT(y,T)),o=o.ownerDocument||o,T=o.createElement("script"),K(T),Ba(T,"link",y),o.head.appendChild(T),u.instance=T);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,vS(y,m.precedence,o));return u.instance}function vS(o,u,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=y.length?y[y.length-1]:null,C=T,G=0;G<y.length;G++){var Z=y[G];if(Z.dataset.precedence===u)C=Z;else if(C!==T)break}C?C.parentNode.insertBefore(o,C.nextSibling):(u=m.nodeType===9?m.head:m,u.insertBefore(o,u.firstChild))}function AT(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function TT(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var yS=null;function J3(o,u,m){if(yS===null){var y=new Map,T=yS=new Map;T.set(m,y)}else T=yS,y=T.get(m),y||(y=new Map,T.set(m,y));if(y.has(o))return y;for(y.set(o,null),m=m.getElementsByTagName(o),T=0;T<m.length;T++){var C=m[T];if(!(C[ua]||C[xi]||o==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var G=C.getAttribute(u)||"";G=o+G;var Z=y.get(G);Z?Z.push(C):y.set(G,[C])}}return y}function eL(o,u,m){o=o.ownerDocument||o,o.head.insertBefore(m,u==="title"?o.querySelector("head > title"):null)}function Qq(o,u,m){if(m===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function tL(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function Jq(o,u,m,y){if(m.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var T=kg(y.href),C=u.querySelector(Uy(T));if(C){u=C._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=bS.bind(o),u.then(o,o)),m.state.loading|=4,m.instance=C,K(C);return}C=u.ownerDocument||u,y=Z3(y),(T=Nl.get(T))&&AT(y,T),C=C.createElement("link"),K(C);var G=C;G._p=new Promise(function(Z,ue){G.onload=Z,G.onerror=ue}),Ba(C,"link",y),m.instance=C}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(m,u),(u=m.state.preload)&&(m.state.loading&3)===0&&(o.count++,m=bS.bind(o),u.addEventListener("load",m),u.addEventListener("error",m))}}var CT=0;function eW(o,u){return o.stylesheets&&o.count===0&&_S(o,o.stylesheets),0<o.count||0<o.imgCount?function(m){var y=setTimeout(function(){if(o.stylesheets&&_S(o,o.stylesheets),o.unsuspend){var C=o.unsuspend;o.unsuspend=null,C()}},6e4+u);0<o.imgBytes&&CT===0&&(CT=62500*Dq());var T=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&_S(o,o.stylesheets),o.unsuspend)){var C=o.unsuspend;o.unsuspend=null,C()}},(o.imgBytes>CT?50:800)+u);return o.unsuspend=m,function(){o.unsuspend=null,clearTimeout(y),clearTimeout(T)}}:null}function bS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_S(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var xS=null;function _S(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,xS=new Map,u.forEach(tW,o),xS=null,bS.call(o))}function tW(o,u){if(!(u.state.loading&4)){var m=xS.get(o);if(m)var y=m.get(null);else{m=new Map,xS.set(o,m);for(var T=o.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<T.length;C++){var G=T[C];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(m.set(G.dataset.precedence,G),y=G)}y&&m.set(null,y)}T=u.instance,G=T.getAttribute("data-precedence"),C=m.get(G)||y,C===y&&m.set(null,T),m.set(G,T),this.count++,y=bS.bind(this),T.addEventListener("load",y),T.addEventListener("error",y),C?C.parentNode.insertBefore(T,C.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(T,o.firstChild)),u.state.loading|=4}}var zy={$$typeof:P,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function nW(o,u,m,y,T,C,G,Z,ue){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jt(0),this.hiddenUpdates=Jt(null),this.identifierPrefix=y,this.onUncaughtError=T,this.onCaughtError=C,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function nL(o,u,m,y,T,C,G,Z,ue,Pe,Ke,tt){return o=new nW(o,u,m,G,ue,Pe,Ke,tt,Z),u=1,C===!0&&(u|=24),C=zi(3,null,null,u),o.current=C,C.stateNode=o,u=j0(),u.refCount++,o.pooledCache=u,u.refCount++,C.memoizedState={element:y,isDehydrated:m,cache:u},fp(C),o}function iL(o){return o?(o=ju,o):ju}function rL(o,u,m,y,T,C){T=iL(T),y.context===null?y.context=T:y.pendingContext=T,y=su(u),y.payload={element:m},C=C===void 0?null:C,C!==null&&(y.callback=C),m=Ku(o,y,u),m!==null&&(Cn(m,o,u),Zu(m,o,u))}function aL(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function RT(o,u){aL(o,u),(o=o.alternate)&&aL(o,u)}function sL(o){if(o.tag===13||o.tag===31){var u=Oa(o,67108864);u!==null&&Cn(u,o,67108864),RT(o,67108864)}}function oL(o){if(o.tag===13||o.tag===31){var u=Us();u=Ks(u);var m=Oa(o,u);m!==null&&Cn(m,o,u),RT(o,u)}}var SS=!0;function iW(o,u,m,y){var T=te.T;te.T=null;var C=re.p;try{re.p=2,PT(o,u,m,y)}finally{re.p=C,te.T=T}}function rW(o,u,m,y){var T=te.T;te.T=null;var C=re.p;try{re.p=8,PT(o,u,m,y)}finally{re.p=C,te.T=T}}function PT(o,u,m,y){if(SS){var T=IT(y);if(T===null)gT(o,u,y,wS,m),uL(o,y);else if(sW(T,o,u,m,y))y.stopPropagation();else if(uL(o,y),u&4&&-1<aW.indexOf(o)){for(;T!==null;){var C=Ca(T);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var G=it(C.pendingLanes);if(G!==0){var Z=C;for(Z.pendingLanes|=2,Z.entangledLanes|=2;G;){var ue=1<<31-ae(G);Z.entanglements[1]|=ue,G&=~ue}yt(C),(qt&6)===0&&(fr=X()+500,Ot(0))}}break;case 31:case 13:Z=Oa(C,2),Z!==null&&Cn(Z,C,2),Ho(),RT(C,2)}if(C=IT(y),C===null&&gT(o,u,y,wS,m),C===T)break;T=C}T!==null&&y.stopPropagation()}else gT(o,u,y,null,m)}}function IT(o){return o=As(o),NT(o)}var wS=null;function NT(o){if(wS=null,o=Es(o),o!==null){var u=a(o);if(u===null)o=null;else{var m=u.tag;if(m===13){if(o=s(u),o!==null)return o;o=null}else if(m===31){if(o=l(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return wS=o,null}function lL(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case ke:return 2;case Ye:return 8;case Le:case Tt:return 32;case le:return 268435456;default:return 32}default:return 32}}var OT=!1,$h=null,Xh=null,Yh=null,Fy=new Map,By=new Map,Kh=[],aW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uL(o,u){switch(o){case"focusin":case"focusout":$h=null;break;case"dragenter":case"dragleave":Xh=null;break;case"mouseover":case"mouseout":Yh=null;break;case"pointerover":case"pointerout":Fy.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":By.delete(u.pointerId)}}function Vy(o,u,m,y,T,C){return o===null||o.nativeEvent!==C?(o={blockedOn:u,domEventName:m,eventSystemFlags:y,nativeEvent:C,targetContainers:[T]},u!==null&&(u=Ca(u),u!==null&&sL(u)),o):(o.eventSystemFlags|=y,u=o.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),o)}function sW(o,u,m,y,T){switch(u){case"focusin":return $h=Vy($h,o,u,m,y,T),!0;case"dragenter":return Xh=Vy(Xh,o,u,m,y,T),!0;case"mouseover":return Yh=Vy(Yh,o,u,m,y,T),!0;case"pointerover":var C=T.pointerId;return Fy.set(C,Vy(Fy.get(C)||null,o,u,m,y,T)),!0;case"gotpointercapture":return C=T.pointerId,By.set(C,Vy(By.get(C)||null,o,u,m,y,T)),!0}return!1}function cL(o){var u=Es(o.target);if(u!==null){var m=a(u);if(m!==null){if(u=m.tag,u===13){if(u=s(m),u!==null){o.blockedOn=u,Ai(o.priority,function(){oL(m)});return}}else if(u===31){if(u=l(m),u!==null){o.blockedOn=u,Ai(o.priority,function(){oL(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ES(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=IT(o.nativeEvent);if(m===null){m=o.nativeEvent;var y=new m.constructor(m.type,m);lh=y,m.target.dispatchEvent(y),lh=null}else return u=Ca(m),u!==null&&sL(u),o.blockedOn=m,!1;u.shift()}return!0}function fL(o,u,m){ES(o)&&m.delete(u)}function oW(){OT=!1,$h!==null&&ES($h)&&($h=null),Xh!==null&&ES(Xh)&&(Xh=null),Yh!==null&&ES(Yh)&&(Yh=null),Fy.forEach(fL),By.forEach(fL)}function MS(o,u){o.blockedOn===u&&(o.blockedOn=null,OT||(OT=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oW)))}var AS=null;function hL(o){AS!==o&&(AS=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){AS===o&&(AS=null);for(var u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],T=o[u+2];if(typeof y!="function"){if(NT(y||m)===null)continue;break}var C=Ca(m);C!==null&&(o.splice(u,3),u-=3,my(C,{pending:!0,data:T,method:m.method,action:y},y,T))}}))}function Fg(o){function u(ue){return MS(ue,o)}$h!==null&&MS($h,o),Xh!==null&&MS(Xh,o),Yh!==null&&MS(Yh,o),Fy.forEach(u),By.forEach(u);for(var m=0;m<Kh.length;m++){var y=Kh[m];y.blockedOn===o&&(y.blockedOn=null)}for(;0<Kh.length&&(m=Kh[0],m.blockedOn===null);)cL(m),m.blockedOn===null&&Kh.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var T=m[y],C=m[y+1],G=T[Ui]||null;if(typeof C=="function")G||hL(m);else if(G){var Z=null;if(C&&C.hasAttribute("formAction")){if(T=C,G=C[Ui]||null)Z=G.formAction;else if(NT(T)!==null)continue}else Z=G.action;typeof Z=="function"?m[y+1]=Z:(m.splice(y,3),y-=3),hL(m)}}}function dL(){function o(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(G){return T=G})},focusReset:"manual",scroll:"manual"})}function u(){T!==null&&(T(),T=null),y||setTimeout(m,20)}function m(){if(!y&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,T=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(m,100),function(){y=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),T!==null&&(T(),T=null)}}}function DT(o){this._internalRoot=o}TS.prototype.render=DT.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var m=u.current,y=Us();rL(m,y,o,u,null,null)},TS.prototype.unmount=DT.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;rL(o.current,2,null,o,null,null),Ho(),u[$r]=null}};function TS(o){this._internalRoot=o}TS.prototype.unstable_scheduleHydration=function(o){if(o){var u=Wl();o={blockedOn:null,target:o,priority:u};for(var m=0;m<Kh.length&&u!==0&&u<Kh[m].priority;m++);Kh.splice(m,0,o),m===0&&cL(o)}};var pL=e.version;if(pL!=="19.2.4")throw Error(i(527,pL,"19.2.4"));re.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=h(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var lW={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CS.isDisabled&&CS.supportsFiber)try{Ge=CS.inject(lW),Xe=CS}catch{}}return Hy.createRoot=function(o,u){if(!r(o))throw Error(i(299));var m=!1,y="",T=aS,C=_y,G=Sy;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(G=u.onRecoverableError)),u=nL(o,1,!1,null,null,m,y,null,T,C,G,dL),o[$r]=u.current,mT(o),new DT(u)},Hy.hydrateRoot=function(o,u,m){if(!r(o))throw Error(i(299));var y=!1,T="",C=aS,G=_y,Z=Sy,ue=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(C=m.onUncaughtError),m.onCaughtError!==void 0&&(G=m.onCaughtError),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError),m.formState!==void 0&&(ue=m.formState)),u=nL(o,1,!0,u,m??null,y,T,ue,C,G,Z,dL),u.context=iL(null),m=u.current,y=Us(),y=Ks(y),T=su(y),T.callback=null,Ku(m,T,y),m=y,u.current.lanes=m,si(u,m),yt(u),o[$r]=u.current,mT(o),new TS(u)},Hy.version="19.2.4",Hy}var EL;function bW(){if(EL)return zT.exports;EL=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zT.exports=yW(),zT.exports}var xW=bW();const _W=Pu(xW);var _5=x5();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fb(){return Fb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Fb.apply(this,arguments)}var dd;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(dd||(dd={}));const ML="popstate";function SW(n){n===void 0&&(n={});function e(i,r){let{pathname:a,search:s,hash:l}=i.location;return RP("",{pathname:a,search:s,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:uw(r)}return EW(e,t,null,n)}function Gr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xN(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wW(){return Math.random().toString(36).substr(2,8)}function AL(n,e){return{usr:n.state,key:n.key,idx:e}}function RP(n,e,t,i){return t===void 0&&(t=null),Fb({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?o0(e):e,{state:t,key:e&&e.key||i||wW()})}function uw(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function o0(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function EW(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:a=!1}=i,s=r.history,l=dd.Pop,c=null,h=p();h==null&&(h=0,s.replaceState(Fb({},s.state,{idx:h}),""));function p(){return(s.state||{idx:null}).idx}function g(){l=dd.Pop;let S=p(),w=S==null?null:S-h;h=S,c&&c({action:l,location:M.location,delta:w})}function v(S,w){l=dd.Push;let R=RP(M.location,S,w);h=p()+1;let P=AL(R,h),O=M.createHref(R);try{s.pushState(P,"",O)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(O)}a&&c&&c({action:l,location:M.location,delta:1})}function b(S,w){l=dd.Replace;let R=RP(M.location,S,w);h=p();let P=AL(R,h),O=M.createHref(R);s.replaceState(P,"",O),a&&c&&c({action:l,location:M.location,delta:0})}function _(S){let w=r.location.origin!=="null"?r.location.origin:r.location.href,R=typeof S=="string"?S:uw(S);return R=R.replace(/ $/,"%20"),Gr(w,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,w)}let M={get action(){return l},get location(){return n(r,s)},listen(S){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(ML,g),c=S,()=>{r.removeEventListener(ML,g),c=null}},createHref(S){return e(r,S)},createURL:_,encodeLocation(S){let w=_(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:b,go(S){return s.go(S)}};return M}var TL;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(TL||(TL={}));function MW(n,e,t){return t===void 0&&(t="/"),AW(n,e,t)}function AW(n,e,t,i){let r=typeof e=="string"?o0(e):e,a=_N(r.pathname||"/",t);if(a==null)return null;let s=S5(n);TW(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let h=FW(a);l=UW(s[c],h)}return l}function S5(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(a,s,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(Gr(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let h=bd([i,c.relativePath]),p=t.concat(c);a.children&&a.children.length>0&&(Gr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),S5(a.children,e,p,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:DW(h,a.index),routesMeta:p})};return n.forEach((a,s)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,s);else for(let c of w5(a.path))r(a,s,c)}),e}function w5(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let s=w5(i.join("/")),l=[];return l.push(...s.map(c=>c===""?a:[a,c].join("/"))),r&&l.push(...s),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function TW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LW(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const CW=/^:[\w-]+$/,RW=3,PW=2,IW=1,NW=10,OW=-2,CL=n=>n==="*";function DW(n,e){let t=n.split("/"),i=t.length;return t.some(CL)&&(i+=OW),e&&(i+=PW),t.filter(r=>!CL(r)).reduce((r,a)=>r+(CW.test(a)?RW:a===""?IW:NW),i)}function LW(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function UW(n,e,t){let{routesMeta:i}=n,r={},a="/",s=[];for(let l=0;l<i.length;++l){let c=i[l],h=l===i.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=kW({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),v=c.route;if(!g)return null;Object.assign(r,g.params),s.push({params:r,pathname:bd([a,g.pathname]),pathnameBase:GW(bd([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=bd([a,g.pathnameBase]))}return s}function kW(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=zW(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],s=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((h,p,g)=>{let{paramName:v,isOptional:b}=p;if(v==="*"){let M=l[g]||"";s=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const _=l[g];return b&&!_?h[v]=void 0:h[v]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:s,pattern:n}}function zW(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xN(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function FW(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xN(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function _N(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const BW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VW=n=>BW.test(n);function jW(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?o0(n):n,a;if(t)if(VW(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),xN(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+t))}t.startsWith("/")?a=RL(t.substring(1),"/"):a=RL(t,e)}else a=e;return{pathname:a,search:qW(i),hash:WW(r)}}function RL(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function jT(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HW(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function E5(n,e){let t=HW(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function M5(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=o0(n):(r=Fb({},n),Gr(!r.pathname||!r.pathname.includes("?"),jT("?","pathname","search",r)),Gr(!r.pathname||!r.pathname.includes("#"),jT("#","pathname","hash",r)),Gr(!r.search||!r.search.includes("#"),jT("#","search","hash",r)));let a=n===""||r.pathname==="",s=a?"/":r.pathname,l;if(s==null)l=t;else{let g=e.length-1;if(!i&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=jW(r,l),h=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const bd=n=>n.join("/").replace(/\/\/+/g,"/"),GW=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qW=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,WW=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function $W(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const A5=["post","put","patch","delete"];new Set(A5);const XW=["get",...A5];new Set(XW);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bb(){return Bb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Bb.apply(this,arguments)}const SN=j.createContext(null),YW=j.createContext(null),Lm=j.createContext(null),mM=j.createContext(null),Um=j.createContext({outlet:null,matches:[],isDataRoute:!1}),T5=j.createContext(null);function KW(n,e){let{relative:t}=e===void 0?{}:e;Ix()||Gr(!1);let{basename:i,navigator:r}=j.useContext(Lm),{hash:a,pathname:s,search:l}=P5(n,{relative:t}),c=s;return i!=="/"&&(c=s==="/"?i:bd([i,s])),r.createHref({pathname:c,search:l,hash:a})}function Ix(){return j.useContext(mM)!=null}function gM(){return Ix()||Gr(!1),j.useContext(mM).location}function C5(n){j.useContext(Lm).static||j.useLayoutEffect(n)}function R5(){let{isDataRoute:n}=j.useContext(Um);return n?u$():ZW()}function ZW(){Ix()||Gr(!1);let n=j.useContext(SN),{basename:e,future:t,navigator:i}=j.useContext(Lm),{matches:r}=j.useContext(Um),{pathname:a}=gM(),s=JSON.stringify(E5(r,t.v7_relativeSplatPath)),l=j.useRef(!1);return C5(()=>{l.current=!0}),j.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){i.go(h);return}let g=M5(h,JSON.parse(s),a,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:bd([e,g.pathname])),(p.replace?i.replace:i.push)(g,p.state,p)},[e,i,s,a,n])}function P5(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=j.useContext(Lm),{matches:r}=j.useContext(Um),{pathname:a}=gM(),s=JSON.stringify(E5(r,i.v7_relativeSplatPath));return j.useMemo(()=>M5(n,JSON.parse(s),a,t==="path"),[n,s,a,t])}function QW(n,e){return JW(n,e)}function JW(n,e,t,i){Ix()||Gr(!1);let{navigator:r}=j.useContext(Lm),{matches:a}=j.useContext(Um),s=a[a.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let h=gM(),p;if(e){var g;let S=typeof e=="string"?o0(e):e;c==="/"||(g=S.pathname)!=null&&g.startsWith(c)||Gr(!1),p=S}else p=h;let v=p.pathname||"/",b=v;if(c!=="/"){let S=c.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=MW(n,{pathname:b}),M=r$(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:bd([c,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:bd([c,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,i);return e&&M?j.createElement(mM.Provider,{value:{location:Bb({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:dd.Pop}},M):M}function e$(){let n=l$(),e=$W(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,null)}const t$=j.createElement(e$,null);class n$ extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(Um.Provider,{value:this.props.routeContext},j.createElement(T5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i$(n){let{routeContext:e,match:t,children:i}=n,r=j.useContext(SN);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Um.Provider,{value:e},i)}function r$(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,l=(r=t)==null?void 0:r.errors;if(l!=null){let p=s.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);p>=0||Gr(!1),s=s.slice(0,Math.min(s.length,p+1))}let c=!1,h=-1;if(t&&i&&i.v7_partialHydration)for(let p=0;p<s.length;p++){let g=s[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:v,errors:b}=t,_=g.route.loader&&v[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||_){c=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((p,g,v)=>{let b,_=!1,M=null,S=null;t&&(b=l&&g.route.id?l[g.route.id]:void 0,M=g.route.errorElement||t$,c&&(h<0&&v===0?(c$("route-fallback"),_=!0,S=null):h===v&&(_=!0,S=g.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,v+1)),R=()=>{let P;return b?P=M:_?P=S:g.route.Component?P=j.createElement(g.route.Component,null):g.route.element?P=g.route.element:P=p,j.createElement(i$,{match:g,routeContext:{outlet:p,matches:w,isDataRoute:t!=null},children:P})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?j.createElement(n$,{location:t.location,revalidation:t.revalidation,component:M,error:b,children:R(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):R()},null)}var I5=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(I5||{}),N5=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(N5||{});function a$(n){let e=j.useContext(SN);return e||Gr(!1),e}function s$(n){let e=j.useContext(YW);return e||Gr(!1),e}function o$(n){let e=j.useContext(Um);return e||Gr(!1),e}function O5(n){let e=o$(),t=e.matches[e.matches.length-1];return t.route.id||Gr(!1),t.route.id}function l$(){var n;let e=j.useContext(T5),t=s$(),i=O5();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function u$(){let{router:n}=a$(I5.UseNavigateStable),e=O5(N5.UseNavigateStable),t=j.useRef(!1);return C5(()=>{t.current=!0}),j.useCallback(function(r,a){a===void 0&&(a={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Bb({fromRouteId:e},a)))},[n,e])}const PL={};function c$(n,e,t){PL[n]||(PL[n]=!0)}function f$(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function qp(n){Gr(!1)}function h$(n){let{basename:e="/",children:t=null,location:i,navigationType:r=dd.Pop,navigator:a,static:s=!1,future:l}=n;Ix()&&Gr(!1);let c=e.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:c,navigator:a,static:s,future:Bb({v7_relativeSplatPath:!1},l)}),[c,l,a,s]);typeof i=="string"&&(i=o0(i));let{pathname:p="/",search:g="",hash:v="",state:b=null,key:_="default"}=i,M=j.useMemo(()=>{let S=_N(p,c);return S==null?null:{location:{pathname:S,search:g,hash:v,state:b,key:_},navigationType:r}},[c,p,g,v,b,_,r]);return M==null?null:j.createElement(Lm.Provider,{value:h},j.createElement(mM.Provider,{children:t,value:M}))}function d$(n){let{children:e,location:t}=n;return QW(PP(e),t)}new Promise(()=>{});function PP(n,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(n,(i,r)=>{if(!j.isValidElement(i))return;let a=[...e,r];if(i.type===j.Fragment){t.push.apply(t,PP(i.props.children,a));return}i.type!==qp&&Gr(!1),!i.props.index||!i.props.children||Gr(!1);let s={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=PP(i.props.children,a)),t.push(s)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function IP(){return IP=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},IP.apply(this,arguments)}function p$(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function m$(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function g$(n,e){return n.button===0&&(!e||e==="_self")&&!m$(n)}const v$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],y$="6";try{window.__reactRouterVersion=y$}catch{}const b$="startTransition",IL=y5[b$];function x$(n){let{basename:e,children:t,future:i,window:r}=n,a=j.useRef();a.current==null&&(a.current=SW({window:r,v5Compat:!0}));let s=a.current,[l,c]=j.useState({action:s.action,location:s.location}),{v7_startTransition:h}=i||{},p=j.useCallback(g=>{h&&IL?IL(()=>c(g)):c(g)},[c,h]);return j.useLayoutEffect(()=>s.listen(p),[s,p]),j.useEffect(()=>f$(i),[i]),j.createElement(h$,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:s,future:i})}const _$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xc=j.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:a,replace:s,state:l,target:c,to:h,preventScrollReset:p,viewTransition:g}=e,v=p$(e,v$),{basename:b}=j.useContext(Lm),_,M=!1;if(typeof h=="string"&&S$.test(h)&&(_=h,_$))try{let P=new URL(window.location.href),O=h.startsWith("//")?new URL(P.protocol+h):new URL(h),k=_N(O.pathname,b);O.origin===P.origin&&k!=null?h=k+O.search+O.hash:M=!0}catch{}let S=KW(h,{relative:r}),w=w$(h,{replace:s,state:l,target:c,preventScrollReset:p,relative:r,viewTransition:g});function R(P){i&&i(P),P.defaultPrevented||w(P)}return j.createElement("a",IP({},v,{href:_||S,onClick:M||a?i:R,ref:t,target:c}))});var NL;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(NL||(NL={}));var OL;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(OL||(OL={}));function w$(n,e){let{target:t,replace:i,state:r,preventScrollReset:a,relative:s,viewTransition:l}=e===void 0?{}:e,c=R5(),h=gM(),p=P5(n,{relative:s});return j.useCallback(g=>{if(g$(g,t)){g.preventDefault();let v=i!==void 0?i:uw(h)===uw(p);c(n,{replace:v,state:r,preventScrollReset:a,relative:s,viewTransition:l})}},[h,c,p,i,r,t,n,a,s,l])}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const vM="182",Wp={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},$p={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},D5=0,NP=1,L5=2,E$=3,U5=0,Cv=1,wb=2,tm=3,Hf=0,qs=1,_c=2,Cc=0,fm=1,OP=2,DP=3,LP=4,k5=5,cd=100,z5=101,F5=102,B5=103,V5=104,j5=200,H5=201,G5=202,q5=203,cw=204,fw=205,W5=206,$5=207,X5=208,Y5=209,K5=210,Z5=211,Q5=212,J5=213,e2=214,hw=0,dw=1,pw=2,xm=3,mw=4,gw=5,vw=6,yw=7,Nx=0,t2=1,n2=2,zl=0,wN=1,EN=2,MN=3,yM=4,AN=5,TN=6,CN=7,UP="attached",i2="detached",bM=300,Oc=301,Td=302,Vb=303,jb=304,l0=306,Hb=1e3,Mo=1001,Gb=1002,Or=1003,RN=1004,M$=1004,Sv=1005,A$=1005,Xi=1006,Eb=1007,T$=1007,Ec=1008,C$=1008,Bs=1009,PN=1010,IN=1011,kv=1012,xM=1013,Fl=1014,js=1015,Dc=1016,_M=1017,SM=1018,zv=1020,NN=35902,ON=35899,DN=1021,LN=1022,bs=1023,Lc=1026,pd=1027,wM=1028,Ox=1029,_m=1030,EM=1031,R$=1032,MM=1033,Mb=33776,Ab=33777,Tb=33778,Cb=33779,bw=35840,xw=35841,_w=35842,Sw=35843,ww=36196,Ew=37492,Mw=37496,Aw=37488,Tw=37489,Cw=37490,Rw=37491,Pw=37808,Iw=37809,Nw=37810,Ow=37811,Dw=37812,Lw=37813,Uw=37814,kw=37815,zw=37816,Fw=37817,Bw=37818,Vw=37819,jw=37820,Hw=37821,Gw=36492,qw=36494,Ww=36495,$w=36283,Xw=36284,Yw=36285,Kw=36286,r2=2200,a2=2201,s2=2202,qb=2300,Zw=2301,q1=2302,nm=2400,im=2401,Wb=2402,AM=2500,UN=2501,P$=0,I$=1,N$=2,o2=3200,O$=3201,D$=3202,L$=3203,Fd=0,l2=1,Df="",qa="srgb",Cd="srgb-linear",$b="linear",mi="srgb",U$="",k$="rg",z$="ga",F$=0,Xp=7680,B$=7681,V$=7682,j$=7683,H$=34055,G$=34056,q$=5386,W$=512,$$=513,X$=514,Y$=515,K$=516,Z$=517,Q$=518,kP=519,u2=512,c2=513,f2=514,TM=515,h2=516,d2=517,CM=518,p2=519,Xb=35044,J$=35048,eX=35040,tX=35045,nX=35049,iX=35041,rX=35046,aX=35050,sX=35042,oX="100",zP="300 es",$o=2e3,Fv=2001,lX={COMPUTE:"compute",RENDER:"render"},uX={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},cX={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function m2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const fX={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function wv(n,e){return new fX[n](e)}function g2(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Yb(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function v2(){const n=Yb("canvas");return n.style.display="block",n}const DL={};let Rd=null;function hX(n){Rd=n}function dX(){return Rd}function Kb(...n){const e="THREE."+n.shift();Rd?Rd("log",e,...n):console.log(e,...n)}function Rt(...n){const e="THREE."+n.shift();Rd?Rd("warn",e,...n):console.warn(e,...n)}function Yt(...n){const e="THREE."+n.shift();Rd?Rd("error",e,...n):console.error(e,...n)}function Bv(...n){const e=n.join(" ");e in DL||(DL[e]=!0,Rt(...n))}function pX(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}let Gc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const fs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let LL=1234567;const hm=Math.PI/180,Vv=180/Math.PI;function Ko(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(fs[n&255]+fs[n>>8&255]+fs[n>>16&255]+fs[n>>24&255]+"-"+fs[e&255]+fs[e>>8&255]+"-"+fs[e>>16&15|64]+fs[e>>24&255]+"-"+fs[t&63|128]+fs[t>>8&255]+"-"+fs[t>>16&255]+fs[t>>24&255]+fs[i&255]+fs[i>>8&255]+fs[i>>16&255]+fs[i>>24&255]).toLowerCase()}function fn(n,e,t){return Math.max(e,Math.min(t,n))}function kN(n,e){return(n%e+e)%e}function mX(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function gX(n,e,t){return n!==e?(t-n)/(e-n):0}function Rb(n,e,t){return(1-t)*n+t*e}function vX(n,e,t,i){return Rb(n,e,1-Math.exp(-t*i))}function yX(n,e=1){return e-Math.abs(kN(n,e*2)-e)}function bX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function xX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function _X(n,e){return n+Math.floor(Math.random()*(e-n+1))}function SX(n,e){return n+Math.random()*(e-n)}function wX(n){return n*(.5-Math.random())}function EX(n){n!==void 0&&(LL=n);let e=LL+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function MX(n){return n*hm}function AX(n){return n*Vv}function TX(n){return(n&n-1)===0&&n!==0}function CX(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function RX(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function PX(n,e,t,i,r){const a=Math.cos,s=Math.sin,l=a(t/2),c=s(t/2),h=a((e+i)/2),p=s((e+i)/2),g=a((e-i)/2),v=s((e-i)/2),b=a((i-e)/2),_=s((i-e)/2);switch(r){case"XYX":n.set(l*p,c*g,c*v,l*h);break;case"YZY":n.set(c*v,l*p,c*g,l*h);break;case"ZXZ":n.set(c*g,c*v,l*p,l*h);break;case"XZX":n.set(l*p,c*_,c*b,l*h);break;case"YXY":n.set(c*b,l*p,c*_,l*h);break;case"ZYZ":n.set(c*_,c*b,l*p,l*h);break;default:Rt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Vs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Rn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const y2={DEG2RAD:hm,RAD2DEG:Vv,generateUUID:Ko,clamp:fn,euclideanModulo:kN,mapLinear:mX,inverseLerp:gX,lerp:Rb,damp:vX,pingpong:yX,smoothstep:bX,smootherstep:xX,randInt:_X,randFloat:SX,randFloatSpread:wX,seededRandom:EX,degToRad:MX,radToDeg:AX,isPowerOfTwo:TX,ceilPowerOfTwo:CX,floorPowerOfTwo:RX,setQuaternionFromProperEuler:PX,normalize:Rn,denormalize:Vs};class Je{constructor(e=0,t=0){Je.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xs{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,s,l){let c=i[r+0],h=i[r+1],p=i[r+2],g=i[r+3],v=a[s+0],b=a[s+1],_=a[s+2],M=a[s+3];if(l<=0){e[t+0]=c,e[t+1]=h,e[t+2]=p,e[t+3]=g;return}if(l>=1){e[t+0]=v,e[t+1]=b,e[t+2]=_,e[t+3]=M;return}if(g!==M||c!==v||h!==b||p!==_){let S=c*v+h*b+p*_+g*M;S<0&&(v=-v,b=-b,_=-_,M=-M,S=-S);let w=1-l;if(S<.9995){const R=Math.acos(S),P=Math.sin(R);w=Math.sin(w*R)/P,l=Math.sin(l*R)/P,c=c*w+v*l,h=h*w+b*l,p=p*w+_*l,g=g*w+M*l}else{c=c*w+v*l,h=h*w+b*l,p=p*w+_*l,g=g*w+M*l;const R=1/Math.sqrt(c*c+h*h+p*p+g*g);c*=R,h*=R,p*=R,g*=R}}e[t]=c,e[t+1]=h,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,a,s){const l=i[r],c=i[r+1],h=i[r+2],p=i[r+3],g=a[s],v=a[s+1],b=a[s+2],_=a[s+3];return e[t]=l*_+p*g+c*b-h*v,e[t+1]=c*_+p*v+h*g-l*b,e[t+2]=h*_+p*b+l*v-c*g,e[t+3]=p*_-l*g-c*v-h*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,s=e._order,l=Math.cos,c=Math.sin,h=l(i/2),p=l(r/2),g=l(a/2),v=c(i/2),b=c(r/2),_=c(a/2);switch(s){case"XYZ":this._x=v*p*g+h*b*_,this._y=h*b*g-v*p*_,this._z=h*p*_+v*b*g,this._w=h*p*g-v*b*_;break;case"YXZ":this._x=v*p*g+h*b*_,this._y=h*b*g-v*p*_,this._z=h*p*_-v*b*g,this._w=h*p*g+v*b*_;break;case"ZXY":this._x=v*p*g-h*b*_,this._y=h*b*g+v*p*_,this._z=h*p*_+v*b*g,this._w=h*p*g-v*b*_;break;case"ZYX":this._x=v*p*g-h*b*_,this._y=h*b*g+v*p*_,this._z=h*p*_-v*b*g,this._w=h*p*g+v*b*_;break;case"YZX":this._x=v*p*g+h*b*_,this._y=h*b*g+v*p*_,this._z=h*p*_-v*b*g,this._w=h*p*g-v*b*_;break;case"XZY":this._x=v*p*g-h*b*_,this._y=h*b*g-v*p*_,this._z=h*p*_+v*b*g,this._w=h*p*g+v*b*_;break;default:Rt("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],s=t[1],l=t[5],c=t[9],h=t[2],p=t[6],g=t[10],v=i+l+g;if(v>0){const b=.5/Math.sqrt(v+1);this._w=.25/b,this._x=(p-c)*b,this._y=(a-h)*b,this._z=(s-r)*b}else if(i>l&&i>g){const b=2*Math.sqrt(1+i-l-g);this._w=(p-c)/b,this._x=.25*b,this._y=(r+s)/b,this._z=(a+h)/b}else if(l>g){const b=2*Math.sqrt(1+l-i-g);this._w=(a-h)/b,this._x=(r+s)/b,this._y=.25*b,this._z=(c+p)/b}else{const b=2*Math.sqrt(1+g-i-l);this._w=(s-r)/b,this._x=(a+h)/b,this._y=(c+p)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,s=e._w,l=t._x,c=t._y,h=t._z,p=t._w;return this._x=i*p+s*l+r*h-a*c,this._y=r*p+s*c+a*l-i*h,this._z=a*p+s*h+i*c-r*l,this._w=s*p-i*l-r*c-a*h,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,s=e._w,l=this.dot(e);l<0&&(i=-i,r=-r,a=-a,s=-s,l=-l);let c=1-t;if(l<.9995){const h=Math.acos(l),p=Math.sin(h);c=Math.sin(c*h)/p,t=Math.sin(t*h)/p,this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this._onChangeCallback()}else this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ne{constructor(e=0,t=0,i=0){ne.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(UL.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(UL.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,s=e.y,l=e.z,c=e.w,h=2*(s*r-l*i),p=2*(l*t-a*r),g=2*(a*i-s*t);return this.x=t+c*h+s*g-l*p,this.y=i+c*p+l*h-a*g,this.z=r+c*g+a*p-s*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,s=t.x,l=t.y,c=t.z;return this.x=r*c-a*l,this.y=a*s-i*c,this.z=i*l-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return HT.copy(this).projectOnVector(e),this.sub(HT)}reflect(e){return this.sub(HT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const HT=new ne,UL=new xs;class En{constructor(e,t,i,r,a,s,l,c,h){En.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,l,c,h)}set(e,t,i,r,a,s,l,c,h){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=a,p[5]=c,p[6]=i,p[7]=s,p[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],l=i[3],c=i[6],h=i[1],p=i[4],g=i[7],v=i[2],b=i[5],_=i[8],M=r[0],S=r[3],w=r[6],R=r[1],P=r[4],O=r[7],k=r[2],B=r[5],D=r[8];return a[0]=s*M+l*R+c*k,a[3]=s*S+l*P+c*B,a[6]=s*w+l*O+c*D,a[1]=h*M+p*R+g*k,a[4]=h*S+p*P+g*B,a[7]=h*w+p*O+g*D,a[2]=v*M+b*R+_*k,a[5]=v*S+b*P+_*B,a[8]=v*w+b*O+_*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],p=e[8];return t*s*p-t*l*h-i*a*p+i*l*c+r*a*h-r*s*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],p=e[8],g=p*s-l*h,v=l*c-p*a,b=h*a-s*c,_=t*g+i*v+r*b;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/_;return e[0]=g*M,e[1]=(r*h-p*i)*M,e[2]=(l*i-r*s)*M,e[3]=v*M,e[4]=(p*t-r*c)*M,e[5]=(r*a-l*t)*M,e[6]=b*M,e[7]=(i*c-h*t)*M,e[8]=(s*t-i*a)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,s,l){const c=Math.cos(a),h=Math.sin(a);return this.set(i*c,i*h,-i*(c*s+h*l)+s+e,-r*h,r*c,-r*(-h*s+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(GT.makeScale(e,t)),this}rotate(e){return this.premultiply(GT.makeRotation(-e)),this}translate(e,t){return this.premultiply(GT.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const GT=new En,kL=new En().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),zL=new En().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function IX(){const n={enabled:!0,workingColorSpace:Cd,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===mi&&(r.r=Ff(r.r),r.g=Ff(r.g),r.b=Ff(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===mi&&(r.r=Rv(r.r),r.g=Rv(r.g),r.b=Rv(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Df?$b:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return Bv("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return Bv("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Cd]:{primaries:e,whitePoint:i,transfer:$b,toXYZ:kL,fromXYZ:zL,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:qa},outputColorSpaceConfig:{drawingBufferColorSpace:qa}},[qa]:{primaries:e,whitePoint:i,transfer:mi,toXYZ:kL,fromXYZ:zL,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:qa}}}),n}const qn=IX();function Ff(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Rv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Bg;class b2{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Bg===void 0&&(Bg=Yb("canvas")),Bg.width=e.width,Bg.height=e.height;const r=Bg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Bg}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Yb("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=Ff(a[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ff(t[i]/255)*255):t[i]=Ff(t[i]);return{data:t,width:e.width,height:e.height}}else return Rt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let NX=0;class md{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:NX++}),this.uuid=Ko(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,l=r.length;s<l;s++)r[s].isDataTexture?a.push(qT(r[s].image)):a.push(qT(r[s]))}else a=qT(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function qT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?b2.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Rt("Texture: Unable to serialize Texture."),{})}let OX=0;const WT=new ne;class wr extends Gc{constructor(e=wr.DEFAULT_IMAGE,t=wr.DEFAULT_MAPPING,i=Mo,r=Mo,a=Xi,s=Ec,l=bs,c=Bs,h=wr.DEFAULT_ANISOTROPY,p=Df){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:OX++}),this.uuid=Ko(),this.name="",this.source=new md(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new En,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(WT).x}get height(){return this.source.getSize(WT).y}get depth(){return this.source.getSize(WT).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){Rt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Rt(`Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==bM)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Hb:e.x=e.x-Math.floor(e.x);break;case Mo:e.x=e.x<0?0:1;break;case Gb:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Hb:e.y=e.y-Math.floor(e.y);break;case Mo:e.y=e.y<0?0:1;break;case Gb:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}wr.DEFAULT_IMAGE=null;wr.DEFAULT_MAPPING=bM;wr.DEFAULT_ANISOTROPY=1;class Pi{constructor(e=0,t=0,i=0,r=1){Pi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const c=e.elements,h=c[0],p=c[4],g=c[8],v=c[1],b=c[5],_=c[9],M=c[2],S=c[6],w=c[10];if(Math.abs(p-v)<.01&&Math.abs(g-M)<.01&&Math.abs(_-S)<.01){if(Math.abs(p+v)<.1&&Math.abs(g+M)<.1&&Math.abs(_+S)<.1&&Math.abs(h+b+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(h+1)/2,O=(b+1)/2,k=(w+1)/2,B=(p+v)/4,D=(g+M)/4,F=(_+S)/4;return P>O&&P>k?P<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(P),r=B/i,a=D/i):O>k?O<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(O),i=B/r,a=F/r):k<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(k),i=D/a,r=F/a),this.set(i,r,a,t),this}let R=Math.sqrt((S-_)*(S-_)+(g-M)*(g-M)+(v-p)*(v-p));return Math.abs(R)<.001&&(R=1),this.x=(S-_)/R,this.y=(g-M)/R,this.z=(v-p)/R,this.w=Math.acos((h+b+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this.w=fn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this.w=fn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class zN extends Gc{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Xi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Pi(0,0,e,t),this.scissorTest=!1,this.viewport=new Pi(0,0,e,t);const r={width:e,height:t,depth:i.depth},a=new wr(r);this.textures=[];const s=i.count;for(let l=0;l<s;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Xi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new md(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Zo extends zN{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class RM extends wr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Or,this.minFilter=Or,this.wrapR=Mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class DX extends Zo{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new RM(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class PM extends wr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Or,this.minFilter=Or,this.wrapR=Mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class LX extends Zo{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new PM(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Xa{constructor(e=new ne(1/0,1/0,1/0),t=new ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(gu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(gu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=gu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,l=a.count;s<l;s++)e.isMesh===!0?e.getVertexPosition(s,gu):gu.fromBufferAttribute(a,s),gu.applyMatrix4(e.matrixWorld),this.expandByPoint(gu);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),RS.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),RS.copy(i.boundingBox)),RS.applyMatrix4(e.matrixWorld),this.union(RS)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,gu),gu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Gy),PS.subVectors(this.max,Gy),Vg.subVectors(e.a,Gy),jg.subVectors(e.b,Gy),Hg.subVectors(e.c,Gy),Qh.subVectors(jg,Vg),Jh.subVectors(Hg,jg),Pp.subVectors(Vg,Hg);let t=[0,-Qh.z,Qh.y,0,-Jh.z,Jh.y,0,-Pp.z,Pp.y,Qh.z,0,-Qh.x,Jh.z,0,-Jh.x,Pp.z,0,-Pp.x,-Qh.y,Qh.x,0,-Jh.y,Jh.x,0,-Pp.y,Pp.x,0];return!$T(t,Vg,jg,Hg,PS)||(t=[1,0,0,0,1,0,0,0,1],!$T(t,Vg,jg,Hg,PS))?!1:(IS.crossVectors(Qh,Jh),t=[IS.x,IS.y,IS.z],$T(t,Vg,jg,Hg,PS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,gu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(gu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Af[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Af[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Af[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Af[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Af[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Af[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Af[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Af[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Af),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Af=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],gu=new ne,RS=new Xa,Vg=new ne,jg=new ne,Hg=new ne,Qh=new ne,Jh=new ne,Pp=new ne,Gy=new ne,PS=new ne,IS=new ne,Ip=new ne;function $T(n,e,t,i,r){for(let a=0,s=n.length-3;a<=s;a+=3){Ip.fromArray(n,a);const l=r.x*Math.abs(Ip.x)+r.y*Math.abs(Ip.y)+r.z*Math.abs(Ip.z),c=e.dot(Ip),h=t.dot(Ip),p=i.dot(Ip);if(Math.max(-Math.max(c,h,p),Math.min(c,h,p))>l)return!1}return!0}const UX=new Xa,qy=new ne,XT=new ne;class _a{constructor(e=new ne,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):UX.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;qy.subVectors(e,this.center);const t=qy.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(qy,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(XT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(qy.copy(e.center).add(XT)),this.expandByPoint(qy.copy(e.center).sub(XT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Tf=new ne,YT=new ne,NS=new ne,ed=new ne,KT=new ne,OS=new ne,ZT=new ne;class km{constructor(e=new ne,t=new ne(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Tf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tf.copy(this.origin).addScaledVector(this.direction,t),Tf.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){YT.copy(e).add(t).multiplyScalar(.5),NS.copy(t).sub(e).normalize(),ed.copy(this.origin).sub(YT);const a=e.distanceTo(t)*.5,s=-this.direction.dot(NS),l=ed.dot(this.direction),c=-ed.dot(NS),h=ed.lengthSq(),p=Math.abs(1-s*s);let g,v,b,_;if(p>0)if(g=s*c-l,v=s*l-c,_=a*p,g>=0)if(v>=-_)if(v<=_){const M=1/p;g*=M,v*=M,b=g*(g+s*v+2*l)+v*(s*g+v+2*c)+h}else v=a,g=Math.max(0,-(s*v+l)),b=-g*g+v*(v+2*c)+h;else v=-a,g=Math.max(0,-(s*v+l)),b=-g*g+v*(v+2*c)+h;else v<=-_?(g=Math.max(0,-(-s*a+l)),v=g>0?-a:Math.min(Math.max(-a,-c),a),b=-g*g+v*(v+2*c)+h):v<=_?(g=0,v=Math.min(Math.max(-a,-c),a),b=v*(v+2*c)+h):(g=Math.max(0,-(s*a+l)),v=g>0?a:Math.min(Math.max(-a,-c),a),b=-g*g+v*(v+2*c)+h);else v=s>0?-a:a,g=Math.max(0,-(s*v+l)),b=-g*g+v*(v+2*c)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(YT).addScaledVector(NS,v),b}intersectSphere(e,t){Tf.subVectors(e.center,this.origin);const i=Tf.dot(this.direction),r=Tf.dot(Tf)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),l=i-s,c=i+s;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,s,l,c;const h=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,v=this.origin;return h>=0?(i=(e.min.x-v.x)*h,r=(e.max.x-v.x)*h):(i=(e.max.x-v.x)*h,r=(e.min.x-v.x)*h),p>=0?(a=(e.min.y-v.y)*p,s=(e.max.y-v.y)*p):(a=(e.max.y-v.y)*p,s=(e.min.y-v.y)*p),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),g>=0?(l=(e.min.z-v.z)*g,c=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,c=(e.min.z-v.z)*g),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Tf)!==null}intersectTriangle(e,t,i,r,a){KT.subVectors(t,e),OS.subVectors(i,e),ZT.crossVectors(KT,OS);let s=this.direction.dot(ZT),l;if(s>0){if(r)return null;l=1}else if(s<0)l=-1,s=-s;else return null;ed.subVectors(this.origin,e);const c=l*this.direction.dot(OS.crossVectors(ed,OS));if(c<0)return null;const h=l*this.direction.dot(KT.cross(ed));if(h<0||c+h>s)return null;const p=-l*ed.dot(ZT);return p<0?null:this.at(p/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pn{constructor(e,t,i,r,a,s,l,c,h,p,g,v,b,_,M,S){pn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,l,c,h,p,g,v,b,_,M,S)}set(e,t,i,r,a,s,l,c,h,p,g,v,b,_,M,S){const w=this.elements;return w[0]=e,w[4]=t,w[8]=i,w[12]=r,w[1]=a,w[5]=s,w[9]=l,w[13]=c,w[2]=h,w[6]=p,w[10]=g,w[14]=v,w[3]=b,w[7]=_,w[11]=M,w[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,r=1/Gg.setFromMatrixColumn(e,0).length(),a=1/Gg.setFromMatrixColumn(e,1).length(),s=1/Gg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r),p=Math.cos(a),g=Math.sin(a);if(e.order==="XYZ"){const v=s*p,b=s*g,_=l*p,M=l*g;t[0]=c*p,t[4]=-c*g,t[8]=h,t[1]=b+_*h,t[5]=v-M*h,t[9]=-l*c,t[2]=M-v*h,t[6]=_+b*h,t[10]=s*c}else if(e.order==="YXZ"){const v=c*p,b=c*g,_=h*p,M=h*g;t[0]=v+M*l,t[4]=_*l-b,t[8]=s*h,t[1]=s*g,t[5]=s*p,t[9]=-l,t[2]=b*l-_,t[6]=M+v*l,t[10]=s*c}else if(e.order==="ZXY"){const v=c*p,b=c*g,_=h*p,M=h*g;t[0]=v-M*l,t[4]=-s*g,t[8]=_+b*l,t[1]=b+_*l,t[5]=s*p,t[9]=M-v*l,t[2]=-s*h,t[6]=l,t[10]=s*c}else if(e.order==="ZYX"){const v=s*p,b=s*g,_=l*p,M=l*g;t[0]=c*p,t[4]=_*h-b,t[8]=v*h+M,t[1]=c*g,t[5]=M*h+v,t[9]=b*h-_,t[2]=-h,t[6]=l*c,t[10]=s*c}else if(e.order==="YZX"){const v=s*c,b=s*h,_=l*c,M=l*h;t[0]=c*p,t[4]=M-v*g,t[8]=_*g+b,t[1]=g,t[5]=s*p,t[9]=-l*p,t[2]=-h*p,t[6]=b*g+_,t[10]=v-M*g}else if(e.order==="XZY"){const v=s*c,b=s*h,_=l*c,M=l*h;t[0]=c*p,t[4]=-g,t[8]=h*p,t[1]=v*g+M,t[5]=s*p,t[9]=b*g-_,t[2]=_*g-b,t[6]=l*p,t[10]=M*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kX,e,zX)}lookAt(e,t,i){const r=this.elements;return Go.subVectors(e,t),Go.lengthSq()===0&&(Go.z=1),Go.normalize(),td.crossVectors(i,Go),td.lengthSq()===0&&(Math.abs(i.z)===1?Go.x+=1e-4:Go.z+=1e-4,Go.normalize(),td.crossVectors(i,Go)),td.normalize(),DS.crossVectors(Go,td),r[0]=td.x,r[4]=DS.x,r[8]=Go.x,r[1]=td.y,r[5]=DS.y,r[9]=Go.y,r[2]=td.z,r[6]=DS.z,r[10]=Go.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],l=i[4],c=i[8],h=i[12],p=i[1],g=i[5],v=i[9],b=i[13],_=i[2],M=i[6],S=i[10],w=i[14],R=i[3],P=i[7],O=i[11],k=i[15],B=r[0],D=r[4],F=r[8],I=r[12],L=r[1],H=r[5],q=r[9],W=r[13],oe=r[2],fe=r[6],te=r[10],re=r[14],he=r[3],Me=r[7],Ne=r[11],Q=r[15];return a[0]=s*B+l*L+c*oe+h*he,a[4]=s*D+l*H+c*fe+h*Me,a[8]=s*F+l*q+c*te+h*Ne,a[12]=s*I+l*W+c*re+h*Q,a[1]=p*B+g*L+v*oe+b*he,a[5]=p*D+g*H+v*fe+b*Me,a[9]=p*F+g*q+v*te+b*Ne,a[13]=p*I+g*W+v*re+b*Q,a[2]=_*B+M*L+S*oe+w*he,a[6]=_*D+M*H+S*fe+w*Me,a[10]=_*F+M*q+S*te+w*Ne,a[14]=_*I+M*W+S*re+w*Q,a[3]=R*B+P*L+O*oe+k*he,a[7]=R*D+P*H+O*fe+k*Me,a[11]=R*F+P*q+O*te+k*Ne,a[15]=R*I+P*W+O*re+k*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],s=e[1],l=e[5],c=e[9],h=e[13],p=e[2],g=e[6],v=e[10],b=e[14],_=e[3],M=e[7],S=e[11],w=e[15],R=c*b-h*v,P=l*b-h*g,O=l*v-c*g,k=s*b-h*p,B=s*v-c*p,D=s*g-l*p;return t*(M*R-S*P+w*O)-i*(_*R-S*k+w*B)+r*(_*P-M*k+w*D)-a*(_*O-M*B+S*D)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],p=e[8],g=e[9],v=e[10],b=e[11],_=e[12],M=e[13],S=e[14],w=e[15],R=g*S*h-M*v*h+M*c*b-l*S*b-g*c*w+l*v*w,P=_*v*h-p*S*h-_*c*b+s*S*b+p*c*w-s*v*w,O=p*M*h-_*g*h+_*l*b-s*M*b-p*l*w+s*g*w,k=_*g*c-p*M*c-_*l*v+s*M*v+p*l*S-s*g*S,B=t*R+i*P+r*O+a*k;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/B;return e[0]=R*D,e[1]=(M*v*a-g*S*a-M*r*b+i*S*b+g*r*w-i*v*w)*D,e[2]=(l*S*a-M*c*a+M*r*h-i*S*h-l*r*w+i*c*w)*D,e[3]=(g*c*a-l*v*a-g*r*h+i*v*h+l*r*b-i*c*b)*D,e[4]=P*D,e[5]=(p*S*a-_*v*a+_*r*b-t*S*b-p*r*w+t*v*w)*D,e[6]=(_*c*a-s*S*a-_*r*h+t*S*h+s*r*w-t*c*w)*D,e[7]=(s*v*a-p*c*a+p*r*h-t*v*h-s*r*b+t*c*b)*D,e[8]=O*D,e[9]=(_*g*a-p*M*a-_*i*b+t*M*b+p*i*w-t*g*w)*D,e[10]=(s*M*a-_*l*a+_*i*h-t*M*h-s*i*w+t*l*w)*D,e[11]=(p*l*a-s*g*a-p*i*h+t*g*h+s*i*b-t*l*b)*D,e[12]=k*D,e[13]=(p*M*r-_*g*r+_*i*v-t*M*v-p*i*S+t*g*S)*D,e[14]=(_*l*r-s*M*r-_*i*c+t*M*c+s*i*S-t*l*S)*D,e[15]=(s*g*r-p*l*r+p*i*c-t*g*c-s*i*v+t*l*v)*D,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,s=e.x,l=e.y,c=e.z,h=a*s,p=a*l;return this.set(h*s+i,h*l-r*c,h*c+r*l,0,h*l+r*c,p*l+i,p*c-r*s,0,h*c-r*l,p*c+r*s,a*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,s=t._y,l=t._z,c=t._w,h=a+a,p=s+s,g=l+l,v=a*h,b=a*p,_=a*g,M=s*p,S=s*g,w=l*g,R=c*h,P=c*p,O=c*g,k=i.x,B=i.y,D=i.z;return r[0]=(1-(M+w))*k,r[1]=(b+O)*k,r[2]=(_-P)*k,r[3]=0,r[4]=(b-O)*B,r[5]=(1-(v+w))*B,r[6]=(S+R)*B,r[7]=0,r[8]=(_+P)*D,r[9]=(S-R)*D,r[10]=(1-(v+M))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let a=Gg.set(r[0],r[1],r[2]).length();const s=Gg.set(r[4],r[5],r[6]).length(),l=Gg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),vu.copy(this);const h=1/a,p=1/s,g=1/l;return vu.elements[0]*=h,vu.elements[1]*=h,vu.elements[2]*=h,vu.elements[4]*=p,vu.elements[5]*=p,vu.elements[6]*=p,vu.elements[8]*=g,vu.elements[9]*=g,vu.elements[10]*=g,t.setFromRotationMatrix(vu),i.x=a,i.y=s,i.z=l,this}makePerspective(e,t,i,r,a,s,l=$o,c=!1){const h=this.elements,p=2*a/(t-e),g=2*a/(i-r),v=(t+e)/(t-e),b=(i+r)/(i-r);let _,M;if(c)_=a/(s-a),M=s*a/(s-a);else if(l===$o)_=-(s+a)/(s-a),M=-2*s*a/(s-a);else if(l===Fv)_=-s/(s-a),M=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return h[0]=p,h[4]=0,h[8]=v,h[12]=0,h[1]=0,h[5]=g,h[9]=b,h[13]=0,h[2]=0,h[6]=0,h[10]=_,h[14]=M,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,r,a,s,l=$o,c=!1){const h=this.elements,p=2/(t-e),g=2/(i-r),v=-(t+e)/(t-e),b=-(i+r)/(i-r);let _,M;if(c)_=1/(s-a),M=s/(s-a);else if(l===$o)_=-2/(s-a),M=-(s+a)/(s-a);else if(l===Fv)_=-1/(s-a),M=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return h[0]=p,h[4]=0,h[8]=0,h[12]=v,h[1]=0,h[5]=g,h[9]=0,h[13]=b,h[2]=0,h[6]=0,h[10]=_,h[14]=M,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Gg=new ne,vu=new pn,kX=new ne(0,0,0),zX=new ne(1,1,1),td=new ne,DS=new ne,Go=new ne,FL=new pn,BL=new xs;class Jo{constructor(e=0,t=0,i=0,r=Jo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],l=r[8],c=r[1],h=r[5],p=r[9],g=r[2],v=r[6],b=r[10];switch(t){case"XYZ":this._y=Math.asin(fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,b),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(v,h),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,b),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-g,a),this._z=0);break;case"ZXY":this._x=Math.asin(fn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,b),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-fn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,b),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,h));break;case"YZX":this._z=Math.asin(fn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,h),this._y=Math.atan2(-g,a)):(this._x=0,this._y=Math.atan2(l,b));break;case"XZY":this._z=Math.asin(-fn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(v,h),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-p,b),this._y=0);break;default:Rt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return FL.makeRotationFromQuaternion(e),this.setFromRotationMatrix(FL,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return BL.setFromEuler(this),this.setFromQuaternion(BL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Jo.DEFAULT_ORDER="XYZ";class jv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let FX=0;const VL=new ne,qg=new xs,Cf=new pn,LS=new ne,Wy=new ne,BX=new ne,VX=new xs,jL=new ne(1,0,0),HL=new ne(0,1,0),GL=new ne(0,0,1),qL={type:"added"},jX={type:"removed"},Wg={type:"childadded",child:null},QT={type:"childremoved",child:null};class ti extends Gc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:FX++}),this.uuid=Ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ti.DEFAULT_UP.clone();const e=new ne,t=new Jo,i=new xs,r=new ne(1,1,1);function a(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pn},normalMatrix:{value:new En}}),this.matrix=new pn,this.matrixWorld=new pn,this.matrixAutoUpdate=ti.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new jv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qg.setFromAxisAngle(e,t),this.quaternion.multiply(qg),this}rotateOnWorldAxis(e,t){return qg.setFromAxisAngle(e,t),this.quaternion.premultiply(qg),this}rotateX(e){return this.rotateOnAxis(jL,e)}rotateY(e){return this.rotateOnAxis(HL,e)}rotateZ(e){return this.rotateOnAxis(GL,e)}translateOnAxis(e,t){return VL.copy(e).applyQuaternion(this.quaternion),this.position.add(VL.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(jL,e)}translateY(e){return this.translateOnAxis(HL,e)}translateZ(e){return this.translateOnAxis(GL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Cf.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?LS.copy(e):LS.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Wy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cf.lookAt(Wy,LS,this.up):Cf.lookAt(LS,Wy,this.up),this.quaternion.setFromRotationMatrix(Cf),r&&(Cf.extractRotation(r.matrixWorld),qg.setFromRotationMatrix(Cf),this.quaternion.premultiply(qg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Yt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(qL),Wg.child=e,this.dispatchEvent(Wg),Wg.child=null):Yt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jX),QT.child=e,this.dispatchEvent(QT),QT.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Cf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Cf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Cf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(qL),Wg.child=e,this.dispatchEvent(Wg),Wg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wy,e,BX),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wy,VX,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(l=>({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let h=0,p=c.length;h<p;h++){const g=c[h];a(e.shapes,g)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,h=this.material.length;c<h;c++)l.push(a(e.materials,this.material[c]));r.material=l}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(a(e.animations,c))}}if(t){const l=s(e.geometries),c=s(e.materials),h=s(e.textures),p=s(e.images),g=s(e.shapes),v=s(e.skeletons),b=s(e.animations),_=s(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),h.length>0&&(i.textures=h),p.length>0&&(i.images=p),g.length>0&&(i.shapes=g),v.length>0&&(i.skeletons=v),b.length>0&&(i.animations=b),_.length>0&&(i.nodes=_)}return i.object=r,i;function s(l){const c=[];for(const h in l){const p=l[h];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}ti.DEFAULT_UP=new ne(0,1,0);ti.DEFAULT_MATRIX_AUTO_UPDATE=!0;ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const yu=new ne,Rf=new ne,JT=new ne,Pf=new ne,$g=new ne,Xg=new ne,WL=new ne,eC=new ne,tC=new ne,nC=new ne,iC=new Pi,rC=new Pi,aC=new Pi;class wo{constructor(e=new ne,t=new ne,i=new ne){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),yu.subVectors(e,t),r.cross(yu);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){yu.subVectors(r,t),Rf.subVectors(i,t),JT.subVectors(e,t);const s=yu.dot(yu),l=yu.dot(Rf),c=yu.dot(JT),h=Rf.dot(Rf),p=Rf.dot(JT),g=s*h-l*l;if(g===0)return a.set(0,0,0),null;const v=1/g,b=(h*c-l*p)*v,_=(s*p-l*c)*v;return a.set(1-b-_,_,b)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Pf)===null?!1:Pf.x>=0&&Pf.y>=0&&Pf.x+Pf.y<=1}static getInterpolation(e,t,i,r,a,s,l,c){return this.getBarycoord(e,t,i,r,Pf)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,Pf.x),c.addScaledVector(s,Pf.y),c.addScaledVector(l,Pf.z),c)}static getInterpolatedAttribute(e,t,i,r,a,s){return iC.setScalar(0),rC.setScalar(0),aC.setScalar(0),iC.fromBufferAttribute(e,t),rC.fromBufferAttribute(e,i),aC.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(iC,a.x),s.addScaledVector(rC,a.y),s.addScaledVector(aC,a.z),s}static isFrontFacing(e,t,i,r){return yu.subVectors(i,t),Rf.subVectors(e,t),yu.cross(Rf).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return yu.subVectors(this.c,this.b),Rf.subVectors(this.a,this.b),yu.cross(Rf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return wo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return wo.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return wo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let s,l;$g.subVectors(r,i),Xg.subVectors(a,i),eC.subVectors(e,i);const c=$g.dot(eC),h=Xg.dot(eC);if(c<=0&&h<=0)return t.copy(i);tC.subVectors(e,r);const p=$g.dot(tC),g=Xg.dot(tC);if(p>=0&&g<=p)return t.copy(r);const v=c*g-p*h;if(v<=0&&c>=0&&p<=0)return s=c/(c-p),t.copy(i).addScaledVector($g,s);nC.subVectors(e,a);const b=$g.dot(nC),_=Xg.dot(nC);if(_>=0&&b<=_)return t.copy(a);const M=b*h-c*_;if(M<=0&&h>=0&&_<=0)return l=h/(h-_),t.copy(i).addScaledVector(Xg,l);const S=p*_-b*g;if(S<=0&&g-p>=0&&b-_>=0)return WL.subVectors(a,r),l=(g-p)/(g-p+(b-_)),t.copy(r).addScaledVector(WL,l);const w=1/(S+M+v);return s=M*w,l=v*w,t.copy(i).addScaledVector($g,s).addScaledVector(Xg,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const x2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nd={h:0,s:0,l:0},US={h:0,s:0,l:0};function sC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Lt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=qa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=qn.workingColorSpace){return this.r=e,this.g=t,this.b=i,qn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=qn.workingColorSpace){if(e=kN(e,1),t=fn(t,0,1),i=fn(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,s=2*i-a;this.r=sC(s,a,e+1/3),this.g=sC(s,a,e),this.b=sC(s,a,e-1/3)}return qn.colorSpaceToWorking(this,r),this}setStyle(e,t=qa){function i(a){a!==void 0&&parseFloat(a)<1&&Rt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],l=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:Rt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);Rt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=qa){const i=x2[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Rt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ff(e.r),this.g=Ff(e.g),this.b=Ff(e.b),this}copyLinearToSRGB(e){return this.r=Rv(e.r),this.g=Rv(e.g),this.b=Rv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=qa){return qn.workingToColorSpace(hs.copy(this),e),Math.round(fn(hs.r*255,0,255))*65536+Math.round(fn(hs.g*255,0,255))*256+Math.round(fn(hs.b*255,0,255))}getHexString(e=qa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qn.workingColorSpace){qn.workingToColorSpace(hs.copy(this),t);const i=hs.r,r=hs.g,a=hs.b,s=Math.max(i,r,a),l=Math.min(i,r,a);let c,h;const p=(l+s)/2;if(l===s)c=0,h=0;else{const g=s-l;switch(h=p<=.5?g/(s+l):g/(2-s-l),s){case i:c=(r-a)/g+(r<a?6:0);break;case r:c=(a-i)/g+2;break;case a:c=(i-r)/g+4;break}c/=6}return e.h=c,e.s=h,e.l=p,e}getRGB(e,t=qn.workingColorSpace){return qn.workingToColorSpace(hs.copy(this),t),e.r=hs.r,e.g=hs.g,e.b=hs.b,e}getStyle(e=qa){qn.workingToColorSpace(hs.copy(this),e);const t=hs.r,i=hs.g,r=hs.b;return e!==qa?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(nd),this.setHSL(nd.h+e,nd.s+t,nd.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(nd),e.getHSL(US);const i=Rb(nd.h,US.h,t),r=Rb(nd.s,US.s,t),a=Rb(nd.l,US.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const hs=new Lt;Lt.NAMES=x2;let HX=0;class Ss extends Gc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:HX++}),this.uuid=Ko(),this.name="",this.type="Material",this.blending=fm,this.side=Hf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=cw,this.blendDst=fw,this.blendEquation=cd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Lt(0,0,0),this.blendAlpha=0,this.depthFunc=xm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Xp,this.stencilZFail=Xp,this.stencilZPass=Xp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){Rt(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Rt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==fm&&(i.blending=this.blending),this.side!==Hf&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==cw&&(i.blendSrc=this.blendSrc),this.blendDst!==fw&&(i.blendDst=this.blendDst),this.blendEquation!==cd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==xm&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==kP&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Xp&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Xp&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Xp&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const l in a){const c=a[l];delete c.metadata,s.push(c)}return s}if(t){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Bd extends Ss{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jo,this.combine=Nx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Lf=GX();function GX(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):h<-14?(i[c]=1024>>-h-14,i[c|256]=1024>>-h-14|32768,r[c]=-h-1,r[c|256]=-h-1):h<=15?(i[c]=h+15<<10,i[c|256]=h+15<<10|32768,r[c]=13,r[c|256]=13):h<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,p=0;for(;(h&8388608)===0;)h<<=1,p-=8388608;h&=-8388609,p+=947912704,a[c]=h|p}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:l}}function _o(n){Math.abs(n)>65504&&Rt("DataUtils.toHalfFloat(): Value out of range."),n=fn(n,-65504,65504),Lf.floatView[0]=n;const e=Lf.uint32View[0],t=e>>23&511;return Lf.baseTable[t]+((e&8388607)>>Lf.shiftTable[t])}function hb(n){const e=n>>10;return Lf.uint32View[0]=Lf.mantissaTable[Lf.offsetTable[e]+(n&1023)]+Lf.exponentTable[e],Lf.floatView[0]}class qX{static toHalfFloat(e){return _o(e)}static fromHalfFloat(e){return hb(e)}}const Vr=new ne,kS=new Je;let WX=0;class fi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:WX++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Xb,this.updateRanges=[],this.gpuType=js,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)kS.fromBufferAttribute(this,t),kS.applyMatrix3(e),this.setXY(t,kS.x,kS.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Vr.fromBufferAttribute(this,t),Vr.applyMatrix3(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Vr.fromBufferAttribute(this,t),Vr.applyMatrix4(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Vr.fromBufferAttribute(this,t),Vr.applyNormalMatrix(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Vr.fromBufferAttribute(this,t),Vr.transformDirection(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Vs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Rn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Vs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Vs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Vs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Vs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array),a=Rn(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Xb&&(e.usage=this.usage),e}}class $X extends fi{constructor(e,t,i){super(new Int8Array(e),t,i)}}class XX extends fi{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class YX extends fi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class KX extends fi{constructor(e,t,i){super(new Int16Array(e),t,i)}}class FN extends fi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class ZX extends fi{constructor(e,t,i){super(new Int32Array(e),t,i)}}class BN extends fi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class QX extends fi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=hb(this.array[e*this.itemSize]);return this.normalized&&(t=Vs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize]=_o(t),this}getY(e){let t=hb(this.array[e*this.itemSize+1]);return this.normalized&&(t=Vs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+1]=_o(t),this}getZ(e){let t=hb(this.array[e*this.itemSize+2]);return this.normalized&&(t=Vs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+2]=_o(t),this}getW(e){let t=hb(this.array[e*this.itemSize+3]);return this.normalized&&(t=Vs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+3]=_o(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array)),this.array[e+0]=_o(t),this.array[e+1]=_o(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array)),this.array[e+0]=_o(t),this.array[e+1]=_o(i),this.array[e+2]=_o(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array),a=Rn(a,this.array)),this.array[e+0]=_o(t),this.array[e+1]=_o(i),this.array[e+2]=_o(r),this.array[e+3]=_o(a),this}}class Ft extends fi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let JX=0;const Ol=new pn,oC=new ti,Yg=new ne,qo=new Xa,$y=new Xa,ga=new ne;class mn extends Gc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:JX++}),this.uuid=Ko(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(m2(e)?BN:FN)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new En().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ol.makeRotationFromQuaternion(e),this.applyMatrix4(Ol),this}rotateX(e){return Ol.makeRotationX(e),this.applyMatrix4(Ol),this}rotateY(e){return Ol.makeRotationY(e),this.applyMatrix4(Ol),this}rotateZ(e){return Ol.makeRotationZ(e),this.applyMatrix4(Ol),this}translate(e,t,i){return Ol.makeTranslation(e,t,i),this.applyMatrix4(Ol),this}scale(e,t,i){return Ol.makeScale(e,t,i),this.applyMatrix4(Ol),this}lookAt(e){return oC.lookAt(e),oC.updateMatrix(),this.applyMatrix4(oC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Yg).negate(),this.translate(Yg.x,Yg.y,Yg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ft(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&Rt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Yt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];qo.setFromBufferAttribute(a),this.morphTargetsRelative?(ga.addVectors(this.boundingBox.min,qo.min),this.boundingBox.expandByPoint(ga),ga.addVectors(this.boundingBox.max,qo.max),this.boundingBox.expandByPoint(ga)):(this.boundingBox.expandByPoint(qo.min),this.boundingBox.expandByPoint(qo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Yt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _a);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Yt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ne,1/0);return}if(e){const i=this.boundingSphere.center;if(qo.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const l=t[a];$y.setFromBufferAttribute(l),this.morphTargetsRelative?(ga.addVectors(qo.min,$y.min),qo.expandByPoint(ga),ga.addVectors(qo.max,$y.max),qo.expandByPoint(ga)):(qo.expandByPoint($y.min),qo.expandByPoint($y.max))}qo.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)ga.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(ga));if(t)for(let a=0,s=t.length;a<s;a++){const l=t[a],c=this.morphTargetsRelative;for(let h=0,p=l.count;h<p;h++)ga.fromBufferAttribute(l,h),c&&(Yg.fromBufferAttribute(e,h),ga.add(Yg)),r=Math.max(r,i.distanceToSquared(ga))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&Yt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Yt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fi(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),l=[],c=[];for(let F=0;F<i.count;F++)l[F]=new ne,c[F]=new ne;const h=new ne,p=new ne,g=new ne,v=new Je,b=new Je,_=new Je,M=new ne,S=new ne;function w(F,I,L){h.fromBufferAttribute(i,F),p.fromBufferAttribute(i,I),g.fromBufferAttribute(i,L),v.fromBufferAttribute(a,F),b.fromBufferAttribute(a,I),_.fromBufferAttribute(a,L),p.sub(h),g.sub(h),b.sub(v),_.sub(v);const H=1/(b.x*_.y-_.x*b.y);isFinite(H)&&(M.copy(p).multiplyScalar(_.y).addScaledVector(g,-b.y).multiplyScalar(H),S.copy(g).multiplyScalar(b.x).addScaledVector(p,-_.x).multiplyScalar(H),l[F].add(M),l[I].add(M),l[L].add(M),c[F].add(S),c[I].add(S),c[L].add(S))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let F=0,I=R.length;F<I;++F){const L=R[F],H=L.start,q=L.count;for(let W=H,oe=H+q;W<oe;W+=3)w(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const P=new ne,O=new ne,k=new ne,B=new ne;function D(F){k.fromBufferAttribute(r,F),B.copy(k);const I=l[F];P.copy(I),P.sub(k.multiplyScalar(k.dot(I))).normalize(),O.crossVectors(B,I);const H=O.dot(c[F])<0?-1:1;s.setXYZW(F,P.x,P.y,P.z,H)}for(let F=0,I=R.length;F<I;++F){const L=R[F],H=L.start,q=L.count;for(let W=H,oe=H+q;W<oe;W+=3)D(e.getX(W+0)),D(e.getX(W+1)),D(e.getX(W+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new fi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,b=i.count;v<b;v++)i.setXYZ(v,0,0,0);const r=new ne,a=new ne,s=new ne,l=new ne,c=new ne,h=new ne,p=new ne,g=new ne;if(e)for(let v=0,b=e.count;v<b;v+=3){const _=e.getX(v+0),M=e.getX(v+1),S=e.getX(v+2);r.fromBufferAttribute(t,_),a.fromBufferAttribute(t,M),s.fromBufferAttribute(t,S),p.subVectors(s,a),g.subVectors(r,a),p.cross(g),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,M),h.fromBufferAttribute(i,S),l.add(p),c.add(p),h.add(p),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(M,c.x,c.y,c.z),i.setXYZ(S,h.x,h.y,h.z)}else for(let v=0,b=t.count;v<b;v+=3)r.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),p.subVectors(s,a),g.subVectors(r,a),p.cross(g),i.setXYZ(v+0,p.x,p.y,p.z),i.setXYZ(v+1,p.x,p.y,p.z),i.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ga.fromBufferAttribute(e,t),ga.normalize(),e.setXYZ(t,ga.x,ga.y,ga.z)}toNonIndexed(){function e(l,c){const h=l.array,p=l.itemSize,g=l.normalized,v=new h.constructor(c.length*p);let b=0,_=0;for(let M=0,S=c.length;M<S;M++){l.isInterleavedBufferAttribute?b=c[M]*l.data.stride+l.offset:b=c[M]*p;for(let w=0;w<p;w++)v[_++]=h[b++]}return new fi(v,p,g)}if(this.index===null)return Rt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new mn,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],h=e(c,i);t.setAttribute(l,h)}const a=this.morphAttributes;for(const l in a){const c=[],h=a[l];for(let p=0,g=h.length;p<g;p++){const v=h[p],b=e(v,i);c.push(b)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let l=0,c=s.length;l<c;l++){const h=s[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const h=i[c];e.data.attributes[c]=h.toJSON(e.data)}const r={};let a=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],p=[];for(let g=0,v=h.length;g<v;g++){const b=h[g];p.push(b.toJSON(e.data))}p.length>0&&(r[c]=p,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere=l.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const h in r){const p=r[h];this.setAttribute(h,p.clone(t))}const a=e.morphAttributes;for(const h in a){const p=[],g=a[h];for(let v=0,b=g.length;v<b;v++)p.push(g[v].clone(t));this.morphAttributes[h]=p}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let h=0,p=s.length;h<p;h++){const g=s[h];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $L=new pn,Np=new km,zS=new _a,XL=new ne,FS=new ne,BS=new ne,VS=new ne,lC=new ne,jS=new ne,YL=new ne,HS=new ne;class Wr extends ti{constructor(e=new mn,t=new Bd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(a&&l){jS.set(0,0,0);for(let c=0,h=a.length;c<h;c++){const p=l[c],g=a[c];p!==0&&(lC.fromBufferAttribute(g,e),s?jS.addScaledVector(lC,p):jS.addScaledVector(lC.sub(t),p))}t.add(jS)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),zS.copy(i.boundingSphere),zS.applyMatrix4(a),Np.copy(e.ray).recast(e.near),!(zS.containsPoint(Np.origin)===!1&&(Np.intersectSphere(zS,XL)===null||Np.origin.distanceToSquared(XL)>(e.far-e.near)**2))&&($L.copy(a).invert(),Np.copy(e.ray).applyMatrix4($L),!(i.boundingBox!==null&&Np.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Np)))}_computeIntersections(e,t,i){let r;const a=this.geometry,s=this.material,l=a.index,c=a.attributes.position,h=a.attributes.uv,p=a.attributes.uv1,g=a.attributes.normal,v=a.groups,b=a.drawRange;if(l!==null)if(Array.isArray(s))for(let _=0,M=v.length;_<M;_++){const S=v[_],w=s[S.materialIndex],R=Math.max(S.start,b.start),P=Math.min(l.count,Math.min(S.start+S.count,b.start+b.count));for(let O=R,k=P;O<k;O+=3){const B=l.getX(O),D=l.getX(O+1),F=l.getX(O+2);r=GS(this,w,e,i,h,p,g,B,D,F),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,b.start),M=Math.min(l.count,b.start+b.count);for(let S=_,w=M;S<w;S+=3){const R=l.getX(S),P=l.getX(S+1),O=l.getX(S+2);r=GS(this,s,e,i,h,p,g,R,P,O),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let _=0,M=v.length;_<M;_++){const S=v[_],w=s[S.materialIndex],R=Math.max(S.start,b.start),P=Math.min(c.count,Math.min(S.start+S.count,b.start+b.count));for(let O=R,k=P;O<k;O+=3){const B=O,D=O+1,F=O+2;r=GS(this,w,e,i,h,p,g,B,D,F),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,b.start),M=Math.min(c.count,b.start+b.count);for(let S=_,w=M;S<w;S+=3){const R=S,P=S+1,O=S+2;r=GS(this,s,e,i,h,p,g,R,P,O),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function eY(n,e,t,i,r,a,s,l){let c;if(e.side===qs?c=i.intersectTriangle(s,a,r,!0,l):c=i.intersectTriangle(r,a,s,e.side===Hf,l),c===null)return null;HS.copy(l),HS.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(HS);return h<t.near||h>t.far?null:{distance:h,point:HS.clone(),object:n}}function GS(n,e,t,i,r,a,s,l,c,h){n.getVertexPosition(l,FS),n.getVertexPosition(c,BS),n.getVertexPosition(h,VS);const p=eY(n,e,t,i,FS,BS,VS,YL);if(p){const g=new ne;wo.getBarycoord(YL,FS,BS,VS,g),r&&(p.uv=wo.getInterpolatedAttribute(r,l,c,h,g,new Je)),a&&(p.uv1=wo.getInterpolatedAttribute(a,l,c,h,g,new Je)),s&&(p.normal=wo.getInterpolatedAttribute(s,l,c,h,g,new ne),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const v={a:l,b:c,c:h,normal:new ne,materialIndex:0};wo.getNormal(FS,BS,VS,v.normal),p.face=v,p.barycoord=g}return p}class zm extends mn{constructor(e=1,t=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const l=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const c=[],h=[],p=[],g=[];let v=0,b=0;_("z","y","x",-1,-1,i,t,e,s,a,0),_("z","y","x",1,-1,i,t,-e,s,a,1),_("x","z","y",1,1,e,i,t,r,s,2),_("x","z","y",1,-1,e,i,-t,r,s,3),_("x","y","z",1,-1,e,t,i,r,a,4),_("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(c),this.setAttribute("position",new Ft(h,3)),this.setAttribute("normal",new Ft(p,3)),this.setAttribute("uv",new Ft(g,2));function _(M,S,w,R,P,O,k,B,D,F,I){const L=O/D,H=k/F,q=O/2,W=k/2,oe=B/2,fe=D+1,te=F+1;let re=0,he=0;const Me=new ne;for(let Ne=0;Ne<te;Ne++){const Q=Ne*H-W;for(let de=0;de<fe;de++){const Ae=de*L-q;Me[M]=Ae*R,Me[S]=Q*P,Me[w]=oe,h.push(Me.x,Me.y,Me.z),Me[M]=0,Me[S]=0,Me[w]=B>0?1:-1,p.push(Me.x,Me.y,Me.z),g.push(de/D),g.push(1-Ne/F),re+=1}}for(let Ne=0;Ne<F;Ne++)for(let Q=0;Q<D;Q++){const de=v+Q+fe*Ne,Ae=v+Q+fe*(Ne+1),We=v+(Q+1)+fe*(Ne+1),bt=v+(Q+1)+fe*Ne;c.push(de,Ae,bt),c.push(Ae,We,bt),he+=6}l.addGroup(b,he,I),b+=he,v+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zm(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Hv(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Rt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function zs(n){const e={};for(let t=0;t<n.length;t++){const i=Hv(n[t]);for(const r in i)e[r]=i[r]}return e}function tY(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function _2(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qn.workingColorSpace}const S2={clone:Hv,merge:zs};var nY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,iY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Bl extends Ss{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=nY,this.fragmentShader=iY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hv(e.uniforms),this.uniformsGroups=tY(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class IM extends ti{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pn,this.projectionMatrix=new pn,this.projectionMatrixInverse=new pn,this.coordinateSystem=$o,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const id=new ne,KL=new Je,ZL=new Je;class Nr extends IM{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Vv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Vv*2*Math.atan(Math.tan(hm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){id.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(id.x,id.y).multiplyScalar(-e/id.z),id.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(id.x,id.y).multiplyScalar(-e/id.z)}getViewSize(e,t){return this.getViewBounds(e,KL,ZL),t.subVectors(ZL,KL)}setViewOffset(e,t,i,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(hm*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,h=s.fullHeight;a+=s.offsetX*r/c,t-=s.offsetY*i/h,r*=s.width/c,i*=s.height/h}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Kg=-90,Zg=1;class w2 extends ti{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Nr(Kg,Zg,e,t);r.layers=this.layers,this.add(r);const a=new Nr(Kg,Zg,e,t);a.layers=this.layers,this.add(a);const s=new Nr(Kg,Zg,e,t);s.layers=this.layers,this.add(s);const l=new Nr(Kg,Zg,e,t);l.layers=this.layers,this.add(l);const c=new Nr(Kg,Zg,e,t);c.layers=this.layers,this.add(c);const h=new Nr(Kg,Zg,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,s,l,c]=t;for(const h of t)this.remove(h);if(e===$o)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Fv)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,l,c,h,p]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),b=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(g,v,b),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class Dx extends wr{constructor(e=[],t=Oc,i,r,a,s,l,c,h,p){super(e,t,i,r,a,s,l,c,h,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class VN extends Zo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Dx(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new zm(5,5,5),a=new Bl({name:"CubemapFromEquirect",uniforms:Hv(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:qs,blending:Cc});a.uniforms.tEquirect.value=t;const s=new Wr(r,a),l=t.minFilter;return t.minFilter===Ec&&(t.minFilter=Xi),new w2(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(a)}}class Ev extends ti{constructor(){super(),this.isGroup=!0,this.type="Group"}}const rY={type:"move"};class W1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ev,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ev,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ev,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,s=null;const l=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){s=!0;for(const M of e.hand.values()){const S=t.getJointPose(M,i),w=this._getHandJoint(h,M);S!==null&&(w.matrix.fromArray(S.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=S.radius),w.visible=S!==null}const p=h.joints["index-finger-tip"],g=h.joints["thumb-tip"],v=p.position.distanceTo(g.position),b=.02,_=.005;h.inputState.pinching&&v>b+_?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=b-_&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(rY)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=a!==null),h!==null&&(h.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ev;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class NM{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Lt(e),this.density=t}clone(){return new NM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class OM{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Lt(e),this.near=t,this.far=i}clone(){return new OM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class jN extends ti{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Jo,this.environmentIntensity=1,this.environmentRotation=new Jo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class DM{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Xb,this.updateRanges=[],this.version=0,this.uuid=Ko()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ks=new ne;class Sm{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ks.fromBufferAttribute(this,t),ks.applyMatrix4(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ks.fromBufferAttribute(this,t),ks.applyNormalMatrix(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ks.fromBufferAttribute(this,t),ks.transformDirection(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Vs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Rn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Vs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Vs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Vs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Vs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array),a=Rn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){Kb("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new fi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Sm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Kb("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class HN extends Ss{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Qg;const Xy=new ne,Jg=new ne,ev=new ne,tv=new Je,Yy=new Je,E2=new pn,qS=new ne,Ky=new ne,WS=new ne,QL=new Je,uC=new Je,JL=new Je;class M2 extends ti{constructor(e=new HN){if(super(),this.isSprite=!0,this.type="Sprite",Qg===void 0){Qg=new mn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new DM(t,5);Qg.setIndex([0,1,2,0,2,3]),Qg.setAttribute("position",new Sm(i,3,0,!1)),Qg.setAttribute("uv",new Sm(i,2,3,!1))}this.geometry=Qg,this.material=e,this.center=new Je(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Yt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Jg.setFromMatrixScale(this.matrixWorld),E2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ev.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Jg.multiplyScalar(-ev.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;$S(qS.set(-.5,-.5,0),ev,s,Jg,r,a),$S(Ky.set(.5,-.5,0),ev,s,Jg,r,a),$S(WS.set(.5,.5,0),ev,s,Jg,r,a),QL.set(0,0),uC.set(1,0),JL.set(1,1);let l=e.ray.intersectTriangle(qS,Ky,WS,!1,Xy);if(l===null&&($S(Ky.set(-.5,.5,0),ev,s,Jg,r,a),uC.set(0,1),l=e.ray.intersectTriangle(qS,WS,Ky,!1,Xy),l===null))return;const c=e.ray.origin.distanceTo(Xy);c<e.near||c>e.far||t.push({distance:c,point:Xy.clone(),uv:wo.getInterpolation(Xy,qS,Ky,WS,QL,uC,JL,new Je),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $S(n,e,t,i,r,a){tv.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Yy.x=a*tv.x-r*tv.y,Yy.y=r*tv.x+a*tv.y):Yy.copy(tv),n.copy(e),n.x+=Yy.x,n.y+=Yy.y,n.applyMatrix4(E2)}const XS=new ne,eU=new ne;class A2 extends ti{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){XS.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(XS);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){XS.setFromMatrixPosition(e.matrixWorld),eU.setFromMatrixPosition(this.matrixWorld);const i=XS.distanceTo(eU)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),i>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const tU=new ne,nU=new Pi,iU=new Pi,aY=new ne,rU=new pn,YS=new ne,cC=new _a,aU=new pn,fC=new km;class T2 extends Wr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=UP,this.bindMatrix=new pn,this.bindMatrixInverse=new pn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Xa),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,YS),this.boundingBox.expandByPoint(YS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new _a),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,YS),this.boundingSphere.expandByPoint(YS)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),cC.copy(this.boundingSphere),cC.applyMatrix4(r),e.ray.intersectsSphere(cC)!==!1&&(aU.copy(r).invert(),fC.copy(e.ray).applyMatrix4(aU),!(this.boundingBox!==null&&fC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,fC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Pi,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===UP?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===i2?this.bindMatrixInverse.copy(this.bindMatrix).invert():Rt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;nU.fromBufferAttribute(r.attributes.skinIndex,e),iU.fromBufferAttribute(r.attributes.skinWeight,e),tU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=iU.getComponent(a);if(s!==0){const l=nU.getComponent(a);rU.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(aY.copy(tU).applyMatrix4(rU),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class GN extends ti{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Eu extends wr{constructor(e=null,t=1,i=1,r,a,s,l,c,h=Or,p=Or,g,v){super(null,s,l,c,h,p,r,a,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const sU=new pn,sY=new pn;class LM{constructor(e=[],t=[]){this.uuid=Ko(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Rt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new pn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new pn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const l=e[a]?e[a].matrixWorld:sY;sU.multiplyMatrices(l,t[a]),sU.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new LM(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Eu(t,e,e,bs,js);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=t[a];s===void 0&&(Rt("Skeleton: No bone found with UUID:",a),s=new GN),this.bones.push(s),this.boneInverses.push(new pn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const s=t[r];e.bones.push(s.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Gv extends fi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const nv=new pn,oU=new pn,KS=[],lU=new Xa,oY=new pn,Zy=new Wr,Qy=new _a;class C2 extends Wr{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Gv(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,oY)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Xa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,nv),lU.copy(e.boundingBox).applyMatrix4(nv),this.boundingBox.union(lU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new _a),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,nv),Qy.copy(e.boundingSphere).applyMatrix4(nv),this.boundingSphere.union(Qy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let l=0;l<i.length;l++)i[l]=r[s+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Zy.geometry=this.geometry,Zy.material=this.material,Zy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Qy.copy(this.boundingSphere),Qy.applyMatrix4(i),e.ray.intersectsSphere(Qy)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,nv),oU.multiplyMatrices(i,nv),Zy.matrixWorld=oU,Zy.raycast(e,KS);for(let s=0,l=KS.length;s<l;s++){const c=KS[s];c.instanceId=a,c.object=this,t.push(c)}KS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Gv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Eu(new Float32Array(r*this.count),r,this.count,wM,js));const a=this.morphTexture.source.data.data;let s=0;for(let h=0;h<i.length;h++)s+=i[h];const l=this.geometry.morphTargetsRelative?1:1-s,c=r*e;a[c]=l,a.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const hC=new ne,lY=new ne,uY=new En;class Nf{constructor(e=new ne(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=hC.subVectors(i,t).cross(lY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(hC),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||uY.getNormalMatrix(e),r=this.coplanarPoint(hC).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Op=new _a,cY=new Je(.5,.5),ZS=new ne;class u0{constructor(e=new Nf,t=new Nf,i=new Nf,r=new Nf,a=new Nf,s=new Nf){this.planes=[e,t,i,r,a,s]}set(e,t,i,r,a,s){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(a),l[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=$o,i=!1){const r=this.planes,a=e.elements,s=a[0],l=a[1],c=a[2],h=a[3],p=a[4],g=a[5],v=a[6],b=a[7],_=a[8],M=a[9],S=a[10],w=a[11],R=a[12],P=a[13],O=a[14],k=a[15];if(r[0].setComponents(h-s,b-p,w-_,k-R).normalize(),r[1].setComponents(h+s,b+p,w+_,k+R).normalize(),r[2].setComponents(h+l,b+g,w+M,k+P).normalize(),r[3].setComponents(h-l,b-g,w-M,k-P).normalize(),i)r[4].setComponents(c,v,S,O).normalize(),r[5].setComponents(h-c,b-v,w-S,k-O).normalize();else if(r[4].setComponents(h-c,b-v,w-S,k-O).normalize(),t===$o)r[5].setComponents(h+c,b+v,w+S,k+O).normalize();else if(t===Fv)r[5].setComponents(c,v,S,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Op.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Op.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Op)}intersectsSprite(e){Op.center.set(0,0,0);const t=cY.distanceTo(e.center);return Op.radius=.7071067811865476+t,Op.applyMatrix4(e.matrixWorld),this.intersectsSphere(Op)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(ZS.x=r.normal.x>0?e.max.x:e.min.x,ZS.y=r.normal.y>0?e.max.y:e.min.y,ZS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ZS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const hc=new pn,dc=new u0;class UM{constructor(){this.coordinateSystem=$o}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),dc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),dc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),dc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),dc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),dc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),dc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),dc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),dc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),dc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),dc.containsPoint(e))return!0}return!1}clone(){return new UM}}function dC(n,e){return n-e}function fY(n,e){return n.z-e.z}function hY(n,e){return e.z-n.z}class dY{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const l=a[this.index];s.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const xo=new pn,pY=new Lt(1,1,1),uU=new u0,mY=new UM,QS=new Xa,Dp=new _a,Jy=new ne,cU=new ne,gY=new ne,pC=new dY,ds=new Wr,JS=[];function vY(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Lp(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class R2 extends Wr{constructor(e,t,i=t*2,r){super(new mn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Eu(t,e,e,bs,js);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Eu(t,e,e,Ox,Fl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Eu(t,e,e,bs,js);i.colorSpace=qn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:l,itemSize:c,normalized:h}=s,p=new l.constructor(i*c),g=new fi(p,c,h);t.setAttribute(a,g)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new fi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xa);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,xo),this.getBoundingBoxAt(a,QS).applyMatrix4(xo),e.union(QS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _a);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,xo),this.getBoundingSphereAt(a,Dp).applyMatrix4(xo),e.union(Dp)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(dC),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;xo.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(pY.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(dC),c=this._availableGeometryIds.shift(),a[c]=r):(c=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=t.getIndex(),l=this._geometryInfo[e];if(r&&s.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,h=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in i.attributes){const g=t.getAttribute(p),v=i.getAttribute(p);vY(g,v,c);const b=g.itemSize;for(let _=g.count,M=h;_<M;_++){const S=c+_;for(let w=0;w<b;w++)v.setComponent(S,w,0)}v.needsUpdate=!0,v.addUpdateRange(c*b,h*b)}if(r){const p=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<s.count;v++)a.setX(p+v,c+s.getX(v));for(let v=s.count,b=g;v<b;v++)a.setX(p+v,c);a.needsUpdate=!0,a.addUpdateRange(p,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((s,l)=>l).sort((s,l)=>i[s].vertexStart-i[l].vertexStart),a=this.geometry;for(let s=0,l=i.length;s<l;s++){const c=r[s],h=i[c];if(h.active!==!1){if(a.index!==null){if(h.indexStart!==t){const{indexStart:p,vertexStart:g,reservedIndexCount:v}=h,b=a.index,_=b.array,M=e-g;for(let S=p;S<p+v;S++)_[S]=_[S]+M;b.array.copyWithin(t,p,p+v),b.addUpdateRange(t,v),b.needsUpdate=!0,h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:p,reservedVertexCount:g}=h,v=a.attributes;for(const b in v){const _=v[b],{array:M,itemSize:S}=_;M.copyWithin(e*S,p*S,(p+g)*S),_.addUpdateRange(e*S,g*S),_.needsUpdate=!0}h.vertexStart=e}e+=h.reservedVertexCount,h.start=a.index?h.indexStart:h.vertexStart,this._nextIndexStart=a.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new Xa,s=i.index,l=i.attributes.position;for(let c=r.start,h=r.start+r.count;c<h;c++){let p=c;s&&(p=s.getX(p)),a.expandByPoint(Jy.fromBufferAttribute(l,p))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new _a;this.getBoundingBoxAt(e,QS),QS.getCenter(a.center);const s=i.index,l=i.attributes.position;let c=0;for(let h=r.start,p=r.start+r.count;h<p;h++){let g=h;s&&(g=s.getX(g)),Jy.fromBufferAttribute(l,g),c=Math.max(c,a.center.distanceToSquared(Jy))}a.radius=Math.sqrt(c),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(dC);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);Lp(this._multiDrawCounts,r),Lp(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Lp(s.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Lp(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Lp(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new mn,this._initializeGeometry(a));const s=this.geometry;a.index&&Lp(a.index.array,s.index.array);for(const l in a.attributes)Lp(a.attributes[l].array,s.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;ds.material=this.material,ds.geometry.index=s.index,ds.geometry.attributes=s.attributes,ds.geometry.boundingBox===null&&(ds.geometry.boundingBox=new Xa),ds.geometry.boundingSphere===null&&(ds.geometry.boundingSphere=new _a);for(let l=0,c=i.length;l<c;l++){if(!i[l].visible||!i[l].active)continue;const h=i[l].geometryIndex,p=r[h];ds.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,ds.matrixWorld).premultiply(a),this.getBoundingBoxAt(h,ds.geometry.boundingBox),this.getBoundingSphereAt(h,ds.geometry.boundingSphere),ds.raycast(e,JS);for(let g=0,v=JS.length;g<v;g++){const b=JS[g];b.object=this,b.batchId=l,t.push(b)}JS.length=0}ds.material=null,ds.geometry.index=null,ds.geometry.attributes={},ds.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),l=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,h=this._multiDrawStarts,p=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,b=this._indirectTexture,_=b.image.data,M=i.isArrayCamera?mY:uU;v&&!i.isArrayCamera&&(xo.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),uU.setFromProjectionMatrix(xo,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){xo.copy(this.matrixWorld).invert(),Jy.setFromMatrixPosition(i.matrixWorld).applyMatrix4(xo),cU.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(xo);for(let P=0,O=c.length;P<O;P++)if(c[P].visible&&c[P].active){const k=c[P].geometryIndex;this.getMatrixAt(P,xo),this.getBoundingSphereAt(k,Dp).applyMatrix4(xo);let B=!1;if(v&&(B=!M.intersectsSphere(Dp,i)),!B){const D=g[k],F=gY.subVectors(Dp.center,Jy).dot(cU);pC.push(D.start,D.count,F,P)}}const w=pC.list,R=this.customSort;R===null?w.sort(a.transparent?hY:fY):R.call(this,w,i);for(let P=0,O=w.length;P<O;P++){const k=w[P];h[S]=k.start*l,p[S]=k.count,_[S]=k.index,S++}pC.reset()}else for(let w=0,R=c.length;w<R;w++)if(c[w].visible&&c[w].active){const P=c[w].geometryIndex;let O=!1;if(v&&(this.getMatrixAt(w,xo),this.getBoundingSphereAt(P,Dp).applyMatrix4(xo),O=!M.intersectsSphere(Dp,i)),!O){const k=g[P];h[S]=k.start*l,p[S]=k.count,_[S]=w,S++}}b.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class $s extends Ss{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Lt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Qw=new ne,Jw=new ne,fU=new pn,eb=new km,e1=new _a,mC=new ne,hU=new ne;class Pd extends ti{constructor(e=new mn,t=new $s){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)Qw.fromBufferAttribute(t,r-1),Jw.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Qw.distanceTo(Jw);e.setAttribute("lineDistance",new Ft(i,1))}else Rt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),e1.copy(i.boundingSphere),e1.applyMatrix4(r),e1.radius+=a,e.ray.intersectsSphere(e1)===!1)return;fU.copy(r).invert(),eb.copy(e.ray).applyMatrix4(fU);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const b=Math.max(0,s.start),_=Math.min(p.count,s.start+s.count);for(let M=b,S=_-1;M<S;M+=h){const w=p.getX(M),R=p.getX(M+1),P=t1(this,e,eb,c,w,R,M);P&&t.push(P)}if(this.isLineLoop){const M=p.getX(_-1),S=p.getX(b),w=t1(this,e,eb,c,M,S,_-1);w&&t.push(w)}}else{const b=Math.max(0,s.start),_=Math.min(v.count,s.start+s.count);for(let M=b,S=_-1;M<S;M+=h){const w=t1(this,e,eb,c,M,M+1,M);w&&t.push(w)}if(this.isLineLoop){const M=t1(this,e,eb,c,_-1,b,_-1);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function t1(n,e,t,i,r,a,s){const l=n.geometry.attributes.position;if(Qw.fromBufferAttribute(l,r),Jw.fromBufferAttribute(l,a),t.distanceSqToSegment(Qw,Jw,mC,hU)>i)return;mC.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(mC);if(!(h<e.near||h>e.far))return{distance:h,point:hU.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const dU=new ne,pU=new ne;class qc extends Pd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)dU.fromBufferAttribute(t,r),pU.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+dU.distanceTo(pU);e.setAttribute("lineDistance",new Ft(i,1))}else Rt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class P2 extends Pd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class qN extends Ss{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const mU=new pn,FP=new km,n1=new _a,i1=new ne;class I2 extends ti{constructor(e=new mn,t=new qN){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),n1.copy(i.boundingSphere),n1.applyMatrix4(r),n1.radius+=a,e.ray.intersectsSphere(n1)===!1)return;mU.copy(r).invert(),FP.copy(e.ray).applyMatrix4(mU);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=i.index,g=i.attributes.position;if(h!==null){const v=Math.max(0,s.start),b=Math.min(h.count,s.start+s.count);for(let _=v,M=b;_<M;_++){const S=h.getX(_);i1.fromBufferAttribute(g,S),gU(i1,S,c,r,e,t,this)}}else{const v=Math.max(0,s.start),b=Math.min(g.count,s.start+s.count);for(let _=v,M=b;_<M;_++)i1.fromBufferAttribute(g,_),gU(i1,_,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function gU(n,e,t,i,r,a,s){const l=FP.distanceSqToPoint(n);if(l<t){const c=new ne;FP.closestPointToPoint(n,c),c.applyMatrix4(i);const h=r.ray.origin.distanceTo(c);if(h<r.near||h>r.far)return;a.push({distance:h,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class N2 extends wr{constructor(e,t,i,r,a=Xi,s=Xi,l,c,h){super(e,t,i,r,a,s,l,c,h),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const p=this;function g(){p.needsUpdate=!0,p._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class yY extends N2{constructor(e,t,i,r,a,s,l,c){super({},e,t,i,r,a,s,l,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class bY extends wr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Or,this.minFilter=Or,this.generateMipmaps=!1,this.needsUpdate=!0}}class kM extends wr{constructor(e,t,i,r,a,s,l,c,h,p,g,v){super(null,s,l,c,h,p,r,a,g,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xY extends kM{constructor(e,t,i,r,a,s){super(e,t,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Mo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _Y extends kM{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Oc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class SY extends wr{constructor(e,t,i,r,a,s,l,c,h){super(e,t,i,r,a,s,l,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class qv extends wr{constructor(e,t,i=Fl,r,a,s,l=Or,c=Or,h,p=Lc,g=1){if(p!==Lc&&p!==pd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:g};super(v,r,a,s,l,c,p,i,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new md(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class O2 extends qv{constructor(e,t=Fl,i=Oc,r,a,s=Or,l=Or,c,h=Lc){const p={width:e,height:e,depth:1},g=[p,p,p,p,p,p];super(e,e,t,i,r,a,s,l,c,h),this.image=g,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class WN extends wr{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class zM extends mn{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],l=[],c=[],h=[],p=t/2,g=Math.PI/2*e,v=t,b=2*g+v,_=i*2+a,M=r+1,S=new ne,w=new ne;for(let R=0;R<=_;R++){let P=0,O=0,k=0,B=0;if(R<=i){const I=R/i,L=I*Math.PI/2;O=-p-e*Math.cos(L),k=e*Math.sin(L),B=-e*Math.cos(L),P=I*g}else if(R<=i+a){const I=(R-i)/a;O=-p+I*t,k=e,B=0,P=g+I*v}else{const I=(R-i-a)/i,L=I*Math.PI/2;O=p+e*Math.sin(L),k=e*Math.cos(L),B=e*Math.sin(L),P=g+v+I*g}const D=Math.max(0,Math.min(1,P/b));let F=0;R===0?F=.5/r:R===_&&(F=-.5/r);for(let I=0;I<=r;I++){const L=I/r,H=L*Math.PI*2,q=Math.sin(H),W=Math.cos(H);w.x=-k*W,w.y=O,w.z=k*q,l.push(w.x,w.y,w.z),S.set(-k*W,B,k*q),S.normalize(),c.push(S.x,S.y,S.z),h.push(L+F,D)}if(R>0){const I=(R-1)*M;for(let L=0;L<r;L++){const H=I+L,q=I+L+1,W=R*M+L,oe=R*M+L+1;s.push(H,q,W),s.push(q,oe,W)}}}this.setIndex(s),this.setAttribute("position",new Ft(l,3)),this.setAttribute("normal",new Ft(c,3)),this.setAttribute("uv",new Ft(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zM(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class FM extends mn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],s=[],l=[],c=[],h=new ne,p=new Je;s.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const b=i+g/t*r;h.x=e*Math.cos(b),h.y=e*Math.sin(b),s.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(s[v]/e+1)/2,p.y=(s[v+1]/e+1)/2,c.push(p.x,p.y)}for(let g=1;g<=t;g++)a.push(g,g+1,0);this.setIndex(a),this.setAttribute("position",new Ft(s,3)),this.setAttribute("normal",new Ft(l,3)),this.setAttribute("uv",new Ft(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Lx extends mn{constructor(e=1,t=1,i=1,r=32,a=1,s=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c};const h=this;r=Math.floor(r),a=Math.floor(a);const p=[],g=[],v=[],b=[];let _=0;const M=[],S=i/2;let w=0;R(),s===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(p),this.setAttribute("position",new Ft(g,3)),this.setAttribute("normal",new Ft(v,3)),this.setAttribute("uv",new Ft(b,2));function R(){const O=new ne,k=new ne;let B=0;const D=(t-e)/i;for(let F=0;F<=a;F++){const I=[],L=F/a,H=L*(t-e)+e;for(let q=0;q<=r;q++){const W=q/r,oe=W*c+l,fe=Math.sin(oe),te=Math.cos(oe);k.x=H*fe,k.y=-L*i+S,k.z=H*te,g.push(k.x,k.y,k.z),O.set(fe,D,te).normalize(),v.push(O.x,O.y,O.z),b.push(W,1-L),I.push(_++)}M.push(I)}for(let F=0;F<r;F++)for(let I=0;I<a;I++){const L=M[I][F],H=M[I+1][F],q=M[I+1][F+1],W=M[I][F+1];(e>0||I!==0)&&(p.push(L,H,W),B+=3),(t>0||I!==a-1)&&(p.push(H,q,W),B+=3)}h.addGroup(w,B,0),w+=B}function P(O){const k=_,B=new Je,D=new ne;let F=0;const I=O===!0?e:t,L=O===!0?1:-1;for(let q=1;q<=r;q++)g.push(0,S*L,0),v.push(0,L,0),b.push(.5,.5),_++;const H=_;for(let q=0;q<=r;q++){const oe=q/r*c+l,fe=Math.cos(oe),te=Math.sin(oe);D.x=I*te,D.y=S*L,D.z=I*fe,g.push(D.x,D.y,D.z),v.push(0,L,0),B.x=fe*.5+.5,B.y=te*.5*L+.5,b.push(B.x,B.y),_++}for(let q=0;q<r;q++){const W=k+q,oe=H+q;O===!0?p.push(oe,oe+1,W):p.push(oe+1,oe,W),F+=3}h.addGroup(w,F,O===!0?1:2),w+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lx(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ux extends Lx{constructor(e=1,t=1,i=32,r=1,a=!1,s=0,l=Math.PI*2){super(0,e,t,i,r,a,s,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:l}}static fromJSON(e){return new Ux(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vd extends mn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],s=[];l(r),h(i),p(),this.setAttribute("position",new Ft(a,3)),this.setAttribute("normal",new Ft(a.slice(),3)),this.setAttribute("uv",new Ft(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(R){const P=new ne,O=new ne,k=new ne;for(let B=0;B<t.length;B+=3)b(t[B+0],P),b(t[B+1],O),b(t[B+2],k),c(P,O,k,R)}function c(R,P,O,k){const B=k+1,D=[];for(let F=0;F<=B;F++){D[F]=[];const I=R.clone().lerp(O,F/B),L=P.clone().lerp(O,F/B),H=B-F;for(let q=0;q<=H;q++)q===0&&F===B?D[F][q]=I:D[F][q]=I.clone().lerp(L,q/H)}for(let F=0;F<B;F++)for(let I=0;I<2*(B-F)-1;I++){const L=Math.floor(I/2);I%2===0?(v(D[F][L+1]),v(D[F+1][L]),v(D[F][L])):(v(D[F][L+1]),v(D[F+1][L+1]),v(D[F+1][L]))}}function h(R){const P=new ne;for(let O=0;O<a.length;O+=3)P.x=a[O+0],P.y=a[O+1],P.z=a[O+2],P.normalize().multiplyScalar(R),a[O+0]=P.x,a[O+1]=P.y,a[O+2]=P.z}function p(){const R=new ne;for(let P=0;P<a.length;P+=3){R.x=a[P+0],R.y=a[P+1],R.z=a[P+2];const O=S(R)/2/Math.PI+.5,k=w(R)/Math.PI+.5;s.push(O,1-k)}_(),g()}function g(){for(let R=0;R<s.length;R+=6){const P=s[R+0],O=s[R+2],k=s[R+4],B=Math.max(P,O,k),D=Math.min(P,O,k);B>.9&&D<.1&&(P<.2&&(s[R+0]+=1),O<.2&&(s[R+2]+=1),k<.2&&(s[R+4]+=1))}}function v(R){a.push(R.x,R.y,R.z)}function b(R,P){const O=R*3;P.x=e[O+0],P.y=e[O+1],P.z=e[O+2]}function _(){const R=new ne,P=new ne,O=new ne,k=new ne,B=new Je,D=new Je,F=new Je;for(let I=0,L=0;I<a.length;I+=9,L+=6){R.set(a[I+0],a[I+1],a[I+2]),P.set(a[I+3],a[I+4],a[I+5]),O.set(a[I+6],a[I+7],a[I+8]),B.set(s[L+0],s[L+1]),D.set(s[L+2],s[L+3]),F.set(s[L+4],s[L+5]),k.copy(R).add(P).add(O).divideScalar(3);const H=S(k);M(B,L+0,R,H),M(D,L+2,P,H),M(F,L+4,O,H)}}function M(R,P,O,k){k<0&&R.x===1&&(s[P]=R.x-1),O.x===0&&O.z===0&&(s[P]=k/2/Math.PI+.5)}function S(R){return Math.atan2(R.z,-R.x)}function w(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vd(e.vertices,e.indices,e.radius,e.detail)}}class BM extends Vd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new BM(e.radius,e.detail)}}const r1=new ne,a1=new ne,gC=new ne,s1=new wo;class D2 extends mn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(hm*t),s=e.getIndex(),l=e.getAttribute("position"),c=s?s.count:l.count,h=[0,0,0],p=["a","b","c"],g=new Array(3),v={},b=[];for(let _=0;_<c;_+=3){s?(h[0]=s.getX(_),h[1]=s.getX(_+1),h[2]=s.getX(_+2)):(h[0]=_,h[1]=_+1,h[2]=_+2);const{a:M,b:S,c:w}=s1;if(M.fromBufferAttribute(l,h[0]),S.fromBufferAttribute(l,h[1]),w.fromBufferAttribute(l,h[2]),s1.getNormal(gC),g[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,g[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,g[2]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const P=(R+1)%3,O=g[R],k=g[P],B=s1[p[R]],D=s1[p[P]],F=`${O}_${k}`,I=`${k}_${O}`;I in v&&v[I]?(gC.dot(v[I].normal)<=a&&(b.push(B.x,B.y,B.z),b.push(D.x,D.y,D.z)),v[I]=null):F in v||(v[F]={index0:h[R],index1:h[P],normal:gC.clone()})}}for(const _ in v)if(v[_]){const{index0:M,index1:S}=v[_];r1.fromBufferAttribute(l,M),a1.fromBufferAttribute(l,S),b.push(r1.x,r1.y,r1.z),b.push(a1.x,a1.y,a1.z)}this.setAttribute("position",new Ft(b,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Iu=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Rt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let s;t?s=t:s=e*i[a-1];let l=0,c=a-1,h;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),h=i[r]-s,h<0)l=r+1;else if(h>0)c=r-1;else{c=r;break}if(r=c,i[r]===s)return r/(a-1);const p=i[r],v=i[r+1]-p,b=(s-p)/v;return(r+b)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),l=this.getPoint(a),c=t||(s.isVector2?new Je:new ne);return c.copy(l).sub(s).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new ne,r=[],a=[],s=[],l=new ne,c=new pn;for(let b=0;b<=e;b++){const _=b/e;r[b]=this.getTangentAt(_,new ne)}a[0]=new ne,s[0]=new ne;let h=Number.MAX_VALUE;const p=Math.abs(r[0].x),g=Math.abs(r[0].y),v=Math.abs(r[0].z);p<=h&&(h=p,i.set(1,0,0)),g<=h&&(h=g,i.set(0,1,0)),v<=h&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],l),s[0].crossVectors(r[0],a[0]);for(let b=1;b<=e;b++){if(a[b]=a[b-1].clone(),s[b]=s[b-1].clone(),l.crossVectors(r[b-1],r[b]),l.length()>Number.EPSILON){l.normalize();const _=Math.acos(fn(r[b-1].dot(r[b]),-1,1));a[b].applyMatrix4(c.makeRotationAxis(l,_))}s[b].crossVectors(r[b],a[b])}if(t===!0){let b=Math.acos(fn(a[0].dot(a[e]),-1,1));b/=e,r[0].dot(l.crossVectors(a[0],a[e]))>0&&(b=-b);for(let _=1;_<=e;_++)a[_].applyMatrix4(c.makeRotationAxis(r[_],b*_)),s[_].crossVectors(r[_],a[_])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class VM extends Iu{constructor(e=0,t=0,i=1,r=1,a=0,s=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new Je){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const l=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=c-this.aX,b=h-this.aY;c=v*p-b*g+this.aX,h=v*g+b*p+this.aY}return i.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class L2 extends VM{constructor(e,t,i,r,a,s){super(e,t,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function $N(){let n=0,e=0,t=0,i=0;function r(a,s,l,c){n=a,e=l,t=-3*a+3*s-2*l-c,i=2*a-2*s+l+c}return{initCatmullRom:function(a,s,l,c,h){r(s,l,h*(l-a),h*(c-s))},initNonuniformCatmullRom:function(a,s,l,c,h,p,g){let v=(s-a)/h-(l-a)/(h+p)+(l-s)/p,b=(l-s)/p-(c-s)/(p+g)+(c-l)/g;v*=p,b*=p,r(s,l,v,b)},calc:function(a){const s=a*a,l=s*a;return n+e*a+t*s+i*l}}}const o1=new ne,vC=new $N,yC=new $N,bC=new $N;class U2 extends Iu{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ne){const i=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:c===0&&l===a-1&&(l=a-2,c=1);let h,p;this.closed||l>0?h=r[(l-1)%a]:(o1.subVectors(r[0],r[1]).add(r[0]),h=o1);const g=r[l%a],v=r[(l+1)%a];if(this.closed||l+2<a?p=r[(l+2)%a]:(o1.subVectors(r[a-1],r[a-2]).add(r[a-1]),p=o1),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let _=Math.pow(h.distanceToSquared(g),b),M=Math.pow(g.distanceToSquared(v),b),S=Math.pow(v.distanceToSquared(p),b);M<1e-4&&(M=1),_<1e-4&&(_=M),S<1e-4&&(S=M),vC.initNonuniformCatmullRom(h.x,g.x,v.x,p.x,_,M,S),yC.initNonuniformCatmullRom(h.y,g.y,v.y,p.y,_,M,S),bC.initNonuniformCatmullRom(h.z,g.z,v.z,p.z,_,M,S)}else this.curveType==="catmullrom"&&(vC.initCatmullRom(h.x,g.x,v.x,p.x,this.tension),yC.initCatmullRom(h.y,g.y,v.y,p.y,this.tension),bC.initCatmullRom(h.z,g.z,v.z,p.z,this.tension));return i.set(vC.calc(c),yC.calc(c),bC.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ne().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function vU(n,e,t,i,r){const a=(i-e)*.5,s=(r-t)*.5,l=n*n,c=n*l;return(2*t-2*i+a+s)*c+(-3*t+3*i-2*a-s)*l+a*n+t}function wY(n,e){const t=1-n;return t*t*e}function EY(n,e){return 2*(1-n)*n*e}function MY(n,e){return n*n*e}function Pb(n,e,t,i){return wY(n,e)+EY(n,t)+MY(n,i)}function AY(n,e){const t=1-n;return t*t*t*e}function TY(n,e){const t=1-n;return 3*t*t*n*e}function CY(n,e){return 3*(1-n)*n*n*e}function RY(n,e){return n*n*n*e}function Ib(n,e,t,i,r){return AY(n,e)+TY(n,t)+CY(n,i)+RY(n,r)}class XN extends Iu{constructor(e=new Je,t=new Je,i=new Je,r=new Je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Je){const i=t,r=this.v0,a=this.v1,s=this.v2,l=this.v3;return i.set(Ib(e,r.x,a.x,s.x,l.x),Ib(e,r.y,a.y,s.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class k2 extends Iu{constructor(e=new ne,t=new ne,i=new ne,r=new ne){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ne){const i=t,r=this.v0,a=this.v1,s=this.v2,l=this.v3;return i.set(Ib(e,r.x,a.x,s.x,l.x),Ib(e,r.y,a.y,s.y,l.y),Ib(e,r.z,a.z,s.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YN extends Iu{constructor(e=new Je,t=new Je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Je){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Je){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class z2 extends Iu{constructor(e=new ne,t=new ne){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ne){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ne){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KN extends Iu{constructor(e=new Je,t=new Je,i=new Je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Je){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(Pb(e,r.x,a.x,s.x),Pb(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZN extends Iu{constructor(e=new ne,t=new ne,i=new ne){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ne){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(Pb(e,r.x,a.x,s.x),Pb(e,r.y,a.y,s.y),Pb(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QN extends Iu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Je){const i=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),l=a-s,c=r[s===0?s:s-1],h=r[s],p=r[s>r.length-2?r.length-1:s+1],g=r[s>r.length-3?r.length-1:s+2];return i.set(vU(l,c.x,h.x,p.x,g.x),vU(l,c.y,h.y,p.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Je().fromArray(r))}return this}}var eE=Object.freeze({__proto__:null,ArcCurve:L2,CatmullRomCurve3:U2,CubicBezierCurve:XN,CubicBezierCurve3:k2,EllipseCurve:VM,LineCurve:YN,LineCurve3:z2,QuadraticBezierCurve:KN,QuadraticBezierCurve3:ZN,SplineCurve:QN});class F2 extends Iu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new eE[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,l=this.curves[a],c=l.getLength(),h=c===0?0:1-s/c;return l.getPointAt(h,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],l=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(l);for(let h=0;h<c.length;h++){const p=c[h];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new eE[r.type]().fromJSON(r))}return this}}let tE=class extends F2{constructor(e){super(),this.type="Path",this.currentPoint=new Je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new YN(this.currentPoint.clone(),new Je(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new KN(this.currentPoint.clone(),new Je(e,t),new Je(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,s){const l=new XN(this.currentPoint.clone(),new Je(e,t),new Je(i,r),new Je(a,s));return this.curves.push(l),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new QN(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,r,a,s),this}absarc(e,t,i,r,a,s){return this.absellipse(e,t,i,i,r,a,s),this}ellipse(e,t,i,r,a,s,l,c){const h=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+h,t+p,i,r,a,s,l,c),this}absellipse(e,t,i,r,a,s,l,c){const h=new VM(e,t,i,r,a,s,l,c);if(this.curves.length>0){const g=h.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(h);const p=h.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class dm extends tE{constructor(e){super(e),this.uuid=Ko(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new tE().fromJSON(r))}return this}}function PY(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=B2(n,0,r,t,!0);const s=[];if(!a||a.next===a.prev)return s;let l,c,h;if(i&&(a=LY(n,e,a,t)),n.length>80*t){l=n[0],c=n[1];let p=l,g=c;for(let v=t;v<r;v+=t){const b=n[v],_=n[v+1];b<l&&(l=b),_<c&&(c=_),b>p&&(p=b),_>g&&(g=_)}h=Math.max(p-l,g-c),h=h!==0?32767/h:0}return Zb(a,s,t,l,c,h,0),s}function B2(n,e,t,i,r){let a;if(r===WY(n,e,t,i)>0)for(let s=e;s<t;s+=i)a=yU(s/i|0,n[s],n[s+1],a);else for(let s=t-i;s>=e;s-=i)a=yU(s/i|0,n[s],n[s+1],a);return a&&Wv(a,a.next)&&(Jb(a),a=a.next),a}function wm(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Wv(t,t.next)||pr(t.prev,t,t.next)===0)){if(Jb(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Zb(n,e,t,i,r,a,s){if(!n)return;!s&&a&&BY(n,i,r,a);let l=n;for(;n.prev!==n.next;){const c=n.prev,h=n.next;if(a?NY(n,i,r,a):IY(n)){e.push(c.i,n.i,h.i),Jb(n),n=h.next,l=h.next;continue}if(n=h,n===l){s?s===1?(n=OY(wm(n),e),Zb(n,e,t,i,r,a,2)):s===2&&DY(n,e,t,i,r,a):Zb(wm(n),e,t,i,r,a,1);break}}}function IY(n){const e=n.prev,t=n,i=n.next;if(pr(e,t,i)>=0)return!1;const r=e.x,a=t.x,s=i.x,l=e.y,c=t.y,h=i.y,p=Math.min(r,a,s),g=Math.min(l,c,h),v=Math.max(r,a,s),b=Math.max(l,c,h);let _=i.next;for(;_!==e;){if(_.x>=p&&_.x<=v&&_.y>=g&&_.y<=b&&db(r,l,a,c,s,h,_.x,_.y)&&pr(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function NY(n,e,t,i){const r=n.prev,a=n,s=n.next;if(pr(r,a,s)>=0)return!1;const l=r.x,c=a.x,h=s.x,p=r.y,g=a.y,v=s.y,b=Math.min(l,c,h),_=Math.min(p,g,v),M=Math.max(l,c,h),S=Math.max(p,g,v),w=BP(b,_,e,t,i),R=BP(M,S,e,t,i);let P=n.prevZ,O=n.nextZ;for(;P&&P.z>=w&&O&&O.z<=R;){if(P.x>=b&&P.x<=M&&P.y>=_&&P.y<=S&&P!==r&&P!==s&&db(l,p,c,g,h,v,P.x,P.y)&&pr(P.prev,P,P.next)>=0||(P=P.prevZ,O.x>=b&&O.x<=M&&O.y>=_&&O.y<=S&&O!==r&&O!==s&&db(l,p,c,g,h,v,O.x,O.y)&&pr(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;P&&P.z>=w;){if(P.x>=b&&P.x<=M&&P.y>=_&&P.y<=S&&P!==r&&P!==s&&db(l,p,c,g,h,v,P.x,P.y)&&pr(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;O&&O.z<=R;){if(O.x>=b&&O.x<=M&&O.y>=_&&O.y<=S&&O!==r&&O!==s&&db(l,p,c,g,h,v,O.x,O.y)&&pr(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function OY(n,e){let t=n;do{const i=t.prev,r=t.next.next;!Wv(i,r)&&j2(i,t,t.next,r)&&Qb(i,r)&&Qb(r,i)&&(e.push(i.i,t.i,r.i),Jb(t),Jb(t.next),t=n=r),t=t.next}while(t!==n);return wm(t)}function DY(n,e,t,i,r,a){let s=n;do{let l=s.next.next;for(;l!==s.prev;){if(s.i!==l.i&&HY(s,l)){let c=H2(s,l);s=wm(s,s.next),c=wm(c,c.next),Zb(s,e,t,i,r,a,0),Zb(c,e,t,i,r,a,0);return}l=l.next}s=s.next}while(s!==n)}function LY(n,e,t,i){const r=[];for(let a=0,s=e.length;a<s;a++){const l=e[a]*i,c=a<s-1?e[a+1]*i:n.length,h=B2(n,l,c,i,!1);h===h.next&&(h.steiner=!0),r.push(jY(h))}r.sort(UY);for(let a=0;a<r.length;a++)t=kY(r[a],t);return t}function UY(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function kY(n,e){const t=zY(n,e);if(!t)return e;const i=H2(t,n);return wm(i,i.next),wm(t,t.next)}function zY(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,s;if(Wv(n,t))return t;do{if(Wv(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const g=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=i&&g>a&&(a=g,s=t.x<t.next.x?t:t.next,g===i))return s}t=t.next}while(t!==e);if(!s)return null;const l=s,c=s.x,h=s.y;let p=1/0;t=s;do{if(i>=t.x&&t.x>=c&&i!==t.x&&V2(r<h?i:a,r,c,h,r<h?a:i,r,t.x,t.y)){const g=Math.abs(r-t.y)/(i-t.x);Qb(t,n)&&(g<p||g===p&&(t.x>s.x||t.x===s.x&&FY(s,t)))&&(s=t,p=g)}t=t.next}while(t!==l);return s}function FY(n,e){return pr(n.prev,n,e.prev)<0&&pr(e.next,n,n.next)<0}function BY(n,e,t,i){let r=n;do r.z===0&&(r.z=BP(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,VY(r)}function VY(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let s=i,l=0;for(let h=0;h<t&&(l++,s=s.nextZ,!!s);h++);let c=t;for(;l>0||c>0&&s;)l!==0&&(c===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,l--):(r=s,s=s.nextZ,c--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=s}a.nextZ=null,t*=2}while(e>1);return n}function BP(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function jY(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function V2(n,e,t,i,r,a,s,l){return(r-s)*(e-l)>=(n-s)*(a-l)&&(n-s)*(i-l)>=(t-s)*(e-l)&&(t-s)*(a-l)>=(r-s)*(i-l)}function db(n,e,t,i,r,a,s,l){return!(n===s&&e===l)&&V2(n,e,t,i,r,a,s,l)}function HY(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!GY(n,e)&&(Qb(n,e)&&Qb(e,n)&&qY(n,e)&&(pr(n.prev,n,e.prev)||pr(n,e.prev,e))||Wv(n,e)&&pr(n.prev,n,n.next)>0&&pr(e.prev,e,e.next)>0)}function pr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Wv(n,e){return n.x===e.x&&n.y===e.y}function j2(n,e,t,i){const r=u1(pr(n,e,t)),a=u1(pr(n,e,i)),s=u1(pr(t,i,n)),l=u1(pr(t,i,e));return!!(r!==a&&s!==l||r===0&&l1(n,t,e)||a===0&&l1(n,i,e)||s===0&&l1(t,n,i)||l===0&&l1(t,e,i))}function l1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function u1(n){return n>0?1:n<0?-1:0}function GY(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&j2(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Qb(n,e){return pr(n.prev,n,n.next)<0?pr(n,e,n.next)>=0&&pr(n,n.prev,e)>=0:pr(n,e,n.prev)<0||pr(n,n.next,e)<0}function qY(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function H2(n,e){const t=VP(n.i,n.x,n.y),i=VP(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function yU(n,e,t,i){const r=VP(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Jb(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function VP(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function WY(n,e,t,i){let r=0;for(let a=e,s=t-i;a<t;a+=i)r+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return r}class $Y{static triangulate(e,t,i=2){return PY(e,t,i)}}class wu{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return wu.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];bU(e),xU(i,e);let s=e.length;t.forEach(bU);for(let c=0;c<t.length;c++)r.push(s),s+=t[c].length,xU(i,t[c]);const l=$Y.triangulate(i,r);for(let c=0;c<l.length;c+=3)a.push(l.slice(c,c+3));return a}}function bU(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function xU(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class jM extends mn{constructor(e=new dm([new Je(.5,.5),new Je(-.5,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let l=0,c=e.length;l<c;l++){const h=e[l];s(h)}this.setAttribute("position",new Ft(r,3)),this.setAttribute("uv",new Ft(a,2)),this.computeVertexNormals();function s(l){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,b=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:b-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:XY;let P,O=!1,k,B,D,F;if(w){P=w.getSpacedPoints(p),O=!0,v=!1;const Oe=w.isCatmullRomCurve3?w.closed:!1;k=w.computeFrenetFrames(p,Oe),B=new ne,D=new ne,F=new ne}v||(S=0,b=0,_=0,M=0);const I=l.extractPoints(h);let L=I.shape;const H=I.holes;if(!wu.isClockWise(L)){L=L.reverse();for(let Oe=0,Ze=H.length;Oe<Ze;Oe++){const je=H[Oe];wu.isClockWise(je)&&(H[Oe]=je.reverse())}}function W(Oe){const je=10000000000000001e-36;let ht=Oe[0];for(let ie=1;ie<=Oe.length;ie++){const Mt=ie%Oe.length,gt=Oe[Mt],Ut=gt.x-ht.x,vt=gt.y-ht.y,J=Ut*Ut+vt*vt,X=Math.max(Math.abs(gt.x),Math.abs(gt.y),Math.abs(ht.x),Math.abs(ht.y)),pe=je*X*X;if(J<=pe){Oe.splice(Mt,1),ie--;continue}ht=gt}}W(L),H.forEach(W);const oe=H.length,fe=L;for(let Oe=0;Oe<oe;Oe++){const Ze=H[Oe];L=L.concat(Ze)}function te(Oe,Ze,je){return Ze||Yt("ExtrudeGeometry: vec does not exist"),Oe.clone().addScaledVector(Ze,je)}const re=L.length;function he(Oe,Ze,je){let ht,ie,Mt;const gt=Oe.x-Ze.x,Ut=Oe.y-Ze.y,vt=je.x-Oe.x,J=je.y-Oe.y,X=gt*gt+Ut*Ut,pe=gt*J-Ut*vt;if(Math.abs(pe)>Number.EPSILON){const ke=Math.sqrt(X),Ye=Math.sqrt(vt*vt+J*J),Le=Ze.x-Ut/ke,Tt=Ze.y+gt/ke,le=je.x-J/Ye,Ee=je.y+vt/Ye,st=((le-Le)*J-(Ee-Tt)*vt)/(gt*J-Ut*vt);ht=Le+gt*st-Oe.x,ie=Tt+Ut*st-Oe.y;const Ge=ht*ht+ie*ie;if(Ge<=2)return new Je(ht,ie);Mt=Math.sqrt(Ge/2)}else{let ke=!1;gt>Number.EPSILON?vt>Number.EPSILON&&(ke=!0):gt<-Number.EPSILON?vt<-Number.EPSILON&&(ke=!0):Math.sign(Ut)===Math.sign(J)&&(ke=!0),ke?(ht=-Ut,ie=gt,Mt=Math.sqrt(X)):(ht=gt,ie=Ut,Mt=Math.sqrt(X/2))}return new Je(ht/Mt,ie/Mt)}const Me=[];for(let Oe=0,Ze=fe.length,je=Ze-1,ht=Oe+1;Oe<Ze;Oe++,je++,ht++)je===Ze&&(je=0),ht===Ze&&(ht=0),Me[Oe]=he(fe[Oe],fe[je],fe[ht]);const Ne=[];let Q,de=Me.concat();for(let Oe=0,Ze=oe;Oe<Ze;Oe++){const je=H[Oe];Q=[];for(let ht=0,ie=je.length,Mt=ie-1,gt=ht+1;ht<ie;ht++,Mt++,gt++)Mt===ie&&(Mt=0),gt===ie&&(gt=0),Q[ht]=he(je[ht],je[Mt],je[gt]);Ne.push(Q),de=de.concat(Q)}let Ae;if(S===0)Ae=wu.triangulateShape(fe,H);else{const Oe=[],Ze=[];for(let je=0;je<S;je++){const ht=je/S,ie=b*Math.cos(ht*Math.PI/2),Mt=_*Math.sin(ht*Math.PI/2)+M;for(let gt=0,Ut=fe.length;gt<Ut;gt++){const vt=te(fe[gt],Me[gt],Mt);ve(vt.x,vt.y,-ie),ht===0&&Oe.push(vt)}for(let gt=0,Ut=oe;gt<Ut;gt++){const vt=H[gt];Q=Ne[gt];const J=[];for(let X=0,pe=vt.length;X<pe;X++){const ke=te(vt[X],Q[X],Mt);ve(ke.x,ke.y,-ie),ht===0&&J.push(ke)}ht===0&&Ze.push(J)}}Ae=wu.triangulateShape(Oe,Ze)}const We=Ae.length,bt=_+M;for(let Oe=0;Oe<re;Oe++){const Ze=v?te(L[Oe],de[Oe],bt):L[Oe];O?(D.copy(k.normals[0]).multiplyScalar(Ze.x),B.copy(k.binormals[0]).multiplyScalar(Ze.y),F.copy(P[0]).add(D).add(B),ve(F.x,F.y,F.z)):ve(Ze.x,Ze.y,0)}for(let Oe=1;Oe<=p;Oe++)for(let Ze=0;Ze<re;Ze++){const je=v?te(L[Ze],de[Ze],bt):L[Ze];O?(D.copy(k.normals[Oe]).multiplyScalar(je.x),B.copy(k.binormals[Oe]).multiplyScalar(je.y),F.copy(P[Oe]).add(D).add(B),ve(F.x,F.y,F.z)):ve(je.x,je.y,g/p*Oe)}for(let Oe=S-1;Oe>=0;Oe--){const Ze=Oe/S,je=b*Math.cos(Ze*Math.PI/2),ht=_*Math.sin(Ze*Math.PI/2)+M;for(let ie=0,Mt=fe.length;ie<Mt;ie++){const gt=te(fe[ie],Me[ie],ht);ve(gt.x,gt.y,g+je)}for(let ie=0,Mt=H.length;ie<Mt;ie++){const gt=H[ie];Q=Ne[ie];for(let Ut=0,vt=gt.length;Ut<vt;Ut++){const J=te(gt[Ut],Q[Ut],ht);O?ve(J.x,J.y+P[p-1].y,P[p-1].x+je):ve(J.x,J.y,g+je)}}}_e(),Te();function _e(){const Oe=r.length/3;if(v){let Ze=0,je=re*Ze;for(let ht=0;ht<We;ht++){const ie=Ae[ht];et(ie[2]+je,ie[1]+je,ie[0]+je)}Ze=p+S*2,je=re*Ze;for(let ht=0;ht<We;ht++){const ie=Ae[ht];et(ie[0]+je,ie[1]+je,ie[2]+je)}}else{for(let Ze=0;Ze<We;Ze++){const je=Ae[Ze];et(je[2],je[1],je[0])}for(let Ze=0;Ze<We;Ze++){const je=Ae[Ze];et(je[0]+re*p,je[1]+re*p,je[2]+re*p)}}i.addGroup(Oe,r.length/3-Oe,0)}function Te(){const Oe=r.length/3;let Ze=0;ut(fe,Ze),Ze+=fe.length;for(let je=0,ht=H.length;je<ht;je++){const ie=H[je];ut(ie,Ze),Ze+=ie.length}i.addGroup(Oe,r.length/3-Oe,1)}function ut(Oe,Ze){let je=Oe.length;for(;--je>=0;){const ht=je;let ie=je-1;ie<0&&(ie=Oe.length-1);for(let Mt=0,gt=p+S*2;Mt<gt;Mt++){const Ut=re*Mt,vt=re*(Mt+1),J=Ze+ht+Ut,X=Ze+ie+Ut,pe=Ze+ie+vt,ke=Ze+ht+vt;At(J,X,pe,ke)}}}function ve(Oe,Ze,je){c.push(Oe),c.push(Ze),c.push(je)}function et(Oe,Ze,je){He(Oe),He(Ze),He(je);const ht=r.length/3,ie=R.generateTopUV(i,r,ht-3,ht-2,ht-1);Ct(ie[0]),Ct(ie[1]),Ct(ie[2])}function At(Oe,Ze,je,ht){He(Oe),He(Ze),He(ht),He(Ze),He(je),He(ht);const ie=r.length/3,Mt=R.generateSideWallUV(i,r,ie-6,ie-3,ie-2,ie-1);Ct(Mt[0]),Ct(Mt[1]),Ct(Mt[3]),Ct(Mt[1]),Ct(Mt[2]),Ct(Mt[3])}function He(Oe){r.push(c[Oe*3+0]),r.push(c[Oe*3+1]),r.push(c[Oe*3+2])}function Ct(Oe){a.push(Oe.x),a.push(Oe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return YY(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const l=t[e.shapes[a]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new eE[r.type]().fromJSON(r)),new jM(i,e.options)}}const XY={generateTopUV:function(n,e,t,i,r){const a=e[t*3],s=e[t*3+1],l=e[i*3],c=e[i*3+1],h=e[r*3],p=e[r*3+1];return[new Je(a,s),new Je(l,c),new Je(h,p)]},generateSideWallUV:function(n,e,t,i,r,a){const s=e[t*3],l=e[t*3+1],c=e[t*3+2],h=e[i*3],p=e[i*3+1],g=e[i*3+2],v=e[r*3],b=e[r*3+1],_=e[r*3+2],M=e[a*3],S=e[a*3+1],w=e[a*3+2];return Math.abs(l-p)<Math.abs(s-h)?[new Je(s,1-c),new Je(h,1-g),new Je(v,1-_),new Je(M,1-w)]:[new Je(l,1-c),new Je(p,1-g),new Je(b,1-_),new Je(S,1-w)]}};function YY(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class HM extends Vd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new HM(e.radius,e.detail)}}class GM extends mn{constructor(e=[new Je(0,-.5),new Je(.5,0),new Je(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=fn(r,0,Math.PI*2);const a=[],s=[],l=[],c=[],h=[],p=1/t,g=new ne,v=new Je,b=new ne,_=new ne,M=new ne;let S=0,w=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:S=e[R+1].x-e[R].x,w=e[R+1].y-e[R].y,b.x=w*1,b.y=-S,b.z=w*0,M.copy(b),b.normalize(),c.push(b.x,b.y,b.z);break;case e.length-1:c.push(M.x,M.y,M.z);break;default:S=e[R+1].x-e[R].x,w=e[R+1].y-e[R].y,b.x=w*1,b.y=-S,b.z=w*0,_.copy(b),b.x+=M.x,b.y+=M.y,b.z+=M.z,b.normalize(),c.push(b.x,b.y,b.z),M.copy(_)}for(let R=0;R<=t;R++){const P=i+R*p*r,O=Math.sin(P),k=Math.cos(P);for(let B=0;B<=e.length-1;B++){g.x=e[B].x*O,g.y=e[B].y,g.z=e[B].x*k,s.push(g.x,g.y,g.z),v.x=R/t,v.y=B/(e.length-1),l.push(v.x,v.y);const D=c[3*B+0]*O,F=c[3*B+1],I=c[3*B+0]*k;h.push(D,F,I)}}for(let R=0;R<t;R++)for(let P=0;P<e.length-1;P++){const O=P+R*e.length,k=O,B=O+e.length,D=O+e.length+1,F=O+1;a.push(k,B,F),a.push(D,F,B)}this.setIndex(a),this.setAttribute("position",new Ft(s,3)),this.setAttribute("uv",new Ft(l,2)),this.setAttribute("normal",new Ft(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new GM(e.points,e.segments,e.phiStart,e.phiLength)}}class kx extends Vd{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kx(e.radius,e.detail)}}class c0 extends mn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,s=t/2,l=Math.floor(i),c=Math.floor(r),h=l+1,p=c+1,g=e/l,v=t/c,b=[],_=[],M=[],S=[];for(let w=0;w<p;w++){const R=w*v-s;for(let P=0;P<h;P++){const O=P*g-a;_.push(O,-R,0),M.push(0,0,1),S.push(P/l),S.push(1-w/c)}}for(let w=0;w<c;w++)for(let R=0;R<l;R++){const P=R+h*w,O=R+h*(w+1),k=R+1+h*(w+1),B=R+1+h*w;b.push(P,O,B),b.push(O,k,B)}this.setIndex(b),this.setAttribute("position",new Ft(_,3)),this.setAttribute("normal",new Ft(M,3)),this.setAttribute("uv",new Ft(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c0(e.width,e.height,e.widthSegments,e.heightSegments)}}class qM extends mn{constructor(e=.5,t=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],h=[],p=[];let g=e;const v=(t-e)/r,b=new ne,_=new Je;for(let M=0;M<=r;M++){for(let S=0;S<=i;S++){const w=a+S/i*s;b.x=g*Math.cos(w),b.y=g*Math.sin(w),c.push(b.x,b.y,b.z),h.push(0,0,1),_.x=(b.x/t+1)/2,_.y=(b.y/t+1)/2,p.push(_.x,_.y)}g+=v}for(let M=0;M<r;M++){const S=M*(i+1);for(let w=0;w<i;w++){const R=w+S,P=R,O=R+i+1,k=R+i+2,B=R+1;l.push(P,O,B),l.push(O,k,B)}}this.setIndex(l),this.setAttribute("position",new Ft(c,3)),this.setAttribute("normal",new Ft(h,3)),this.setAttribute("uv",new Ft(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class WM extends mn{constructor(e=new dm([new Je(0,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],s=[];let l=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let p=0;p<e.length;p++)h(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new Ft(r,3)),this.setAttribute("normal",new Ft(a,3)),this.setAttribute("uv",new Ft(s,2));function h(p){const g=r.length/3,v=p.extractPoints(t);let b=v.shape;const _=v.holes;wu.isClockWise(b)===!1&&(b=b.reverse());for(let S=0,w=_.length;S<w;S++){const R=_[S];wu.isClockWise(R)===!0&&(_[S]=R.reverse())}const M=wu.triangulateShape(b,_);for(let S=0,w=_.length;S<w;S++){const R=_[S];b=b.concat(R)}for(let S=0,w=b.length;S<w;S++){const R=b[S];r.push(R.x,R.y,0),a.push(0,0,1),s.push(R.x,R.y)}for(let S=0,w=M.length;S<w;S++){const R=M[S],P=R[0]+g,O=R[1]+g,k=R[2]+g;i.push(P,O,k),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return KY(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=t[e.shapes[r]];i.push(s)}return new WM(i,e.curveSegments)}}function KY(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class zx extends mn{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,s=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(s+l,Math.PI);let h=0;const p=[],g=new ne,v=new ne,b=[],_=[],M=[],S=[];for(let w=0;w<=i;w++){const R=[],P=w/i;let O=0;w===0&&s===0?O=.5/t:w===i&&c===Math.PI&&(O=-.5/t);for(let k=0;k<=t;k++){const B=k/t;g.x=-e*Math.cos(r+B*a)*Math.sin(s+P*l),g.y=e*Math.cos(s+P*l),g.z=e*Math.sin(r+B*a)*Math.sin(s+P*l),_.push(g.x,g.y,g.z),v.copy(g).normalize(),M.push(v.x,v.y,v.z),S.push(B+O,1-P),R.push(h++)}p.push(R)}for(let w=0;w<i;w++)for(let R=0;R<t;R++){const P=p[w][R+1],O=p[w][R],k=p[w+1][R],B=p[w+1][R+1];(w!==0||s>0)&&b.push(P,O,B),(w!==i-1||c<Math.PI)&&b.push(O,k,B)}this.setIndex(b),this.setAttribute("position",new Ft(_,3)),this.setAttribute("normal",new Ft(M,3)),this.setAttribute("uv",new Ft(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zx(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class $M extends Vd{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $M(e.radius,e.detail)}}class XM extends mn{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],l=[],c=[],h=[],p=new ne,g=new ne,v=new ne;for(let b=0;b<=i;b++)for(let _=0;_<=r;_++){const M=_/r*a,S=b/i*Math.PI*2;g.x=(e+t*Math.cos(S))*Math.cos(M),g.y=(e+t*Math.cos(S))*Math.sin(M),g.z=t*Math.sin(S),l.push(g.x,g.y,g.z),p.x=e*Math.cos(M),p.y=e*Math.sin(M),v.subVectors(g,p).normalize(),c.push(v.x,v.y,v.z),h.push(_/r),h.push(b/i)}for(let b=1;b<=i;b++)for(let _=1;_<=r;_++){const M=(r+1)*b+_-1,S=(r+1)*(b-1)+_-1,w=(r+1)*(b-1)+_,R=(r+1)*b+_;s.push(M,S,R),s.push(S,w,R)}this.setIndex(s),this.setAttribute("position",new Ft(l,3)),this.setAttribute("normal",new Ft(c,3)),this.setAttribute("uv",new Ft(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class YM extends mn{constructor(e=1,t=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],h=[],p=[],g=new ne,v=new ne,b=new ne,_=new ne,M=new ne,S=new ne,w=new ne;for(let P=0;P<=i;++P){const O=P/i*a*Math.PI*2;R(O,a,s,e,b),R(O+.01,a,s,e,_),S.subVectors(_,b),w.addVectors(_,b),M.crossVectors(S,w),w.crossVectors(M,S),M.normalize(),w.normalize();for(let k=0;k<=r;++k){const B=k/r*Math.PI*2,D=-t*Math.cos(B),F=t*Math.sin(B);g.x=b.x+(D*w.x+F*M.x),g.y=b.y+(D*w.y+F*M.y),g.z=b.z+(D*w.z+F*M.z),c.push(g.x,g.y,g.z),v.subVectors(g,b).normalize(),h.push(v.x,v.y,v.z),p.push(P/i),p.push(k/r)}}for(let P=1;P<=i;P++)for(let O=1;O<=r;O++){const k=(r+1)*(P-1)+(O-1),B=(r+1)*P+(O-1),D=(r+1)*P+O,F=(r+1)*(P-1)+O;l.push(k,B,F),l.push(B,D,F)}this.setIndex(l),this.setAttribute("position",new Ft(c,3)),this.setAttribute("normal",new Ft(h,3)),this.setAttribute("uv",new Ft(p,2));function R(P,O,k,B,D){const F=Math.cos(P),I=Math.sin(P),L=k/O*P,H=Math.cos(L);D.x=B*(2+H)*.5*F,D.y=B*(2+H)*I*.5,D.z=B*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new YM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class KM extends mn{constructor(e=new ZN(new ne(-1,-1,0),new ne(-1,1,0),new ne(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const l=new ne,c=new ne,h=new Je;let p=new ne;const g=[],v=[],b=[],_=[];M(),this.setIndex(_),this.setAttribute("position",new Ft(g,3)),this.setAttribute("normal",new Ft(v,3)),this.setAttribute("uv",new Ft(b,2));function M(){for(let P=0;P<t;P++)S(P);S(a===!1?t:0),R(),w()}function S(P){p=e.getPointAt(P/t,p);const O=s.normals[P],k=s.binormals[P];for(let B=0;B<=r;B++){const D=B/r*Math.PI*2,F=Math.sin(D),I=-Math.cos(D);c.x=I*O.x+F*k.x,c.y=I*O.y+F*k.y,c.z=I*O.z+F*k.z,c.normalize(),v.push(c.x,c.y,c.z),l.x=p.x+i*c.x,l.y=p.y+i*c.y,l.z=p.z+i*c.z,g.push(l.x,l.y,l.z)}}function w(){for(let P=1;P<=t;P++)for(let O=1;O<=r;O++){const k=(r+1)*(P-1)+(O-1),B=(r+1)*P+(O-1),D=(r+1)*P+O,F=(r+1)*(P-1)+O;_.push(k,B,F),_.push(B,D,F)}}function R(){for(let P=0;P<=t;P++)for(let O=0;O<=r;O++)h.x=P/t,h.y=O/r,b.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new KM(new eE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class G2 extends mn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ne,a=new ne;if(e.index!==null){const s=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,p=c.length;h<p;++h){const g=c[h],v=g.start,b=g.count;for(let _=v,M=v+b;_<M;_+=3)for(let S=0;S<3;S++){const w=l.getX(_+S),R=l.getX(_+(S+1)%3);r.fromBufferAttribute(s,w),a.fromBufferAttribute(s,R),_U(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let l=0,c=s.count/3;l<c;l++)for(let h=0;h<3;h++){const p=3*l+h,g=3*l+(h+1)%3;r.fromBufferAttribute(s,p),a.fromBufferAttribute(s,g),_U(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Ft(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function _U(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var SU=Object.freeze({__proto__:null,BoxGeometry:zm,CapsuleGeometry:zM,CircleGeometry:FM,ConeGeometry:Ux,CylinderGeometry:Lx,DodecahedronGeometry:BM,EdgesGeometry:D2,ExtrudeGeometry:jM,IcosahedronGeometry:HM,LatheGeometry:GM,OctahedronGeometry:kx,PlaneGeometry:c0,PolyhedronGeometry:Vd,RingGeometry:qM,ShapeGeometry:WM,SphereGeometry:zx,TetrahedronGeometry:$M,TorusGeometry:XM,TorusKnotGeometry:YM,TubeGeometry:KM,WireframeGeometry:G2});class q2 extends Ss{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Lt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class JN extends Bl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class eO extends Ss{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Lt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class W2 extends eO{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Lt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Lt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Lt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class $2 extends Ss{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Lt(16777215),this.specular=new Lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jo,this.combine=Nx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class X2 extends Ss{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Y2 extends Ss{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class K2 extends Ss{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jo,this.combine=Nx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tO extends Ss{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=o2,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class nO extends Ss{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Z2 extends Ss{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Q2 extends $s{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rm(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function J2(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function jP(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,s=0;s!==i;++a){const l=t[a]*e;for(let c=0;c!==e;++c)r[s++]=n[l+c]}return r}function iO(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),t.push(s)),a=n[r++];while(a!==void 0)}function ZY(n,e,t,i,r=30){const a=n.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const h=a.tracks[c],p=h.getValueSize(),g=[],v=[];for(let b=0;b<h.times.length;++b){const _=h.times[b]*r;if(!(_<t||_>=i)){g.push(h.times[b]);for(let M=0;M<p;++M)v.push(h.values[b*p+M])}}g.length!==0&&(h.times=rm(g,h.times.constructor),h.values=rm(v,h.values.constructor),s.push(h))}a.tracks=s;let l=1/0;for(let c=0;c<a.tracks.length;++c)l>a.tracks[c].times[0]&&(l=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*l);return a.resetDuration(),a}function QY(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let s=0;s<r;++s){const l=t.tracks[s],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const h=n.tracks.find(function(w){return w.name===l.name&&w.ValueTypeName===c});if(h===void 0)continue;let p=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let v=0;const b=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=b/3);const _=l.times.length-1;let M;if(a<=l.times[0]){const w=p,R=g-p;M=l.values.slice(w,R)}else if(a>=l.times[_]){const w=_*g+p,R=w+g-p;M=l.values.slice(w,R)}else{const w=l.createInterpolant(),R=p,P=g-p;w.evaluate(a),M=w.resultBuffer.slice(R,P)}c==="quaternion"&&new xs().fromArray(M).normalize().conjugate().toArray(M);const S=h.times.length;for(let w=0;w<S;++w){const R=w*b+v;if(c==="quaternion")xs.multiplyQuaternionsFlat(h.values,R,M,0,h.values,R);else{const P=b-v*2;for(let O=0;O<P;++O)h.values[R+O]-=M[O]}}}return n.blendMode=UN,n}class JY{static convertArray(e,t){return rm(e,t)}static isTypedArray(e){return g2(e)}static getKeyframeOrder(e){return J2(e)}static sortedArray(e,t,i){return jP(e,t,i)}static flattenJSON(e,t,i,r){iO(e,t,i,r)}static subclip(e,t,i,r,a=30){return ZY(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return QY(e,t,i,r)}}class Fx{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(a=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=a)){const l=t[1];e<l&&(i=2,a=l);for(let c=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=a,a=t[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const l=i+s>>>1;e<t[l]?s=l:i=l+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=i[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class e6 extends Fx{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:nm,endingEnd:nm}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,s=e+1,l=r[a],c=r[s];if(l===void 0)switch(this.getSettings_().endingStart){case im:a=e,l=2*t-i;break;case Wb:a=r.length-2,l=t+r[a]-r[a+1];break;default:a=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case im:s=e,c=2*i-t;break;case Wb:s=1,c=i+r[1]-r[0];break;default:s=e-1,c=t}const h=(i-t)*.5,p=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(c-i),this._offsetPrev=a*p,this._offsetNext=s*p}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,p=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,b=this._weightNext,_=(i-t)/(r-t),M=_*_,S=M*_,w=-v*S+2*v*M-v*_,R=(1+v)*S+(-1.5-2*v)*M+(-.5+v)*_+1,P=(-1-b)*S+(1.5+b)*M+.5*_,O=b*S-b*M;for(let k=0;k!==l;++k)a[k]=w*s[p+k]+R*s[h+k]+P*s[c+k]+O*s[g+k];return a}}class rO extends Fx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,p=(i-t)/(r-t),g=1-p;for(let v=0;v!==l;++v)a[v]=s[h+v]*g+s[c+v]*p;return a}}class t6 extends Fx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Gl{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rm(t,this.TimeBufferType),this.values=rm(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:rm(e.times,Array),values:rm(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new t6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new e6(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case qb:t=this.InterpolantFactoryMethodDiscrete;break;case Zw:t=this.InterpolantFactoryMethodLinear;break;case q1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Rt("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qb;case this.InterpolantFactoryMethodLinear:return Zw;case this.InterpolantFactoryMethodSmooth:return q1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const l=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*l,s*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Yt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(Yt("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let l=0;l!==a;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){Yt("KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(s!==null&&s>c){Yt("KeyframeTrack: Out of order keys.",this,l,c,s),e=!1;break}s=c}if(r!==void 0&&g2(r))for(let l=0,c=r.length;l!==c;++l){const h=r[l];if(isNaN(h)){Yt("KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===q1,a=e.length-1;let s=1;for(let l=1;l<a;++l){let c=!1;const h=e[l],p=e[l+1];if(h!==p&&(l!==1||h!==e[0]))if(r)c=!0;else{const g=l*i,v=g-i,b=g+i;for(let _=0;_!==i;++_){const M=t[g+_];if(M!==t[v+_]||M!==t[b+_]){c=!0;break}}}if(c){if(l!==s){e[s]=e[l];const g=l*i,v=s*i;for(let b=0;b!==i;++b)t[v+b]=t[g+b]}++s}}if(a>0){e[s]=e[a];for(let l=a*i,c=s*i,h=0;h!==i;++h)t[c+h]=t[l+h];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Gl.prototype.ValueTypeName="";Gl.prototype.TimeBufferType=Float32Array;Gl.prototype.ValueBufferType=Float32Array;Gl.prototype.DefaultInterpolation=Zw;class Fm extends Gl{constructor(e,t,i){super(e,t,i)}}Fm.prototype.ValueTypeName="bool";Fm.prototype.ValueBufferType=Array;Fm.prototype.DefaultInterpolation=qb;Fm.prototype.InterpolantFactoryMethodLinear=void 0;Fm.prototype.InterpolantFactoryMethodSmooth=void 0;class aO extends Gl{constructor(e,t,i,r){super(e,t,i,r)}}aO.prototype.ValueTypeName="color";class ex extends Gl{constructor(e,t,i,r){super(e,t,i,r)}}ex.prototype.ValueTypeName="number";class n6 extends Fx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=(i-t)/(r-t);let h=e*l;for(let p=h+l;h!==p;h+=4)xs.slerpFlat(a,0,s,h-l,s,h,c);return a}}class Bx extends Gl{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new n6(this.times,this.values,this.getValueSize(),e)}}Bx.prototype.ValueTypeName="quaternion";Bx.prototype.InterpolantFactoryMethodSmooth=void 0;class Bm extends Gl{constructor(e,t,i){super(e,t,i)}}Bm.prototype.ValueTypeName="string";Bm.prototype.ValueBufferType=Array;Bm.prototype.DefaultInterpolation=qb;Bm.prototype.InterpolantFactoryMethodLinear=void 0;Bm.prototype.InterpolantFactoryMethodSmooth=void 0;class tx extends Gl{constructor(e,t,i,r){super(e,t,i,r)}}tx.prototype.ValueTypeName="vector";class nx{constructor(e="",t=-1,i=[],r=AM){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ko(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,l=i.length;s!==l;++s)t.push(tK(i[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=i.length;a!==s;++a)t.push(Gl.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,s=[];for(let l=0;l<a;l++){let c=[],h=[];c.push((l+a-1)%a,l,(l+1)%a),h.push(0,1,0);const p=J2(c);c=jP(c,1,p),h=jP(h,1,p),!r&&c[0]===0&&(c.push(a),h.push(h[0])),s.push(new ex(".morphTargetInfluences["+t[l].name+"]",c,h).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const h=e[l],p=h.name.match(a);if(p&&p.length>1){const g=p[1];let v=r[g];v||(r[g]=v=[]),v.push(h)}}const s=[];for(const l in r)s.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return s}static parseAnimation(e,t){if(Rt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Yt("AnimationClip: No animation in JSONLoader data."),null;const i=function(g,v,b,_,M){if(b.length!==0){const S=[],w=[];iO(b,S,w,_),S.length!==0&&M.push(new g(v,S,w))}},r=[],a=e.name||"default",s=e.fps||30,l=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let g=0;g<h.length;g++){const v=h[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const b={};let _;for(_=0;_<v.length;_++)if(v[_].morphTargets)for(let M=0;M<v[_].morphTargets.length;M++)b[v[_].morphTargets[M]]=-1;for(const M in b){const S=[],w=[];for(let R=0;R!==v[_].morphTargets.length;++R){const P=v[_];S.push(P.time),w.push(P.morphTarget===M?1:0)}r.push(new ex(".morphTargetInfluence["+M+"]",S,w))}c=b.length*s}else{const b=".bones["+t[g].name+"]";i(tx,b+".position",v,"pos",r),i(Bx,b+".quaternion",v,"rot",r),i(tx,b+".scale",v,"scl",r)}}return r.length===0?null:new this(a,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function eK(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ex;case"vector":case"vector2":case"vector3":case"vector4":return tx;case"color":return aO;case"quaternion":return Bx;case"bool":case"boolean":return Fm;case"string":return Bm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function tK(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=eK(n.type);if(n.times===void 0){const t=[],i=[];iO(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Mc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class sO{constructor(e,t,i){const r=this;let a=!1,s=0,l=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(p){l++,a===!1&&r.onStart!==void 0&&r.onStart(p,s,l),a=!0},this.itemEnd=function(p){s++,r.onProgress!==void 0&&r.onProgress(p,s,l),s===l&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,g){return h.push(p,g),this},this.removeHandler=function(p){const g=h.indexOf(p);return g!==-1&&h.splice(g,2),this},this.getHandler=function(p){for(let g=0,v=h.length;g<v;g+=2){const b=h[g],_=h[g+1];if(b.global&&(b.lastIndex=0),b.test(p))return _}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const i6=new sO;class Xs{constructor(e){this.manager=e!==void 0?e:i6,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Xs.DEFAULT_MATERIAL_NAME="__DEFAULT";const If={};class nK extends Error{constructor(e,t){super(e),this.response=t}}class Uc extends Xs{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Mc.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(If[e]!==void 0){If[e].push({onLoad:t,onProgress:i,onError:r});return}If[e]=[],If[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),l=this.mimeType,c=this.responseType;fetch(s).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&Rt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const p=If[e],g=h.body.getReader(),v=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),b=v?parseInt(v):0,_=b!==0;let M=0;const S=new ReadableStream({start(w){R();function R(){g.read().then(({done:P,value:O})=>{if(P)w.close();else{M+=O.byteLength;const k=new ProgressEvent("progress",{lengthComputable:_,loaded:M,total:b});for(let B=0,D=p.length;B<D;B++){const F=p[B];F.onProgress&&F.onProgress(k)}w.enqueue(O),R()}},P=>{w.error(P)})}}});return new Response(S)}else throw new nK(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return h.json();default:if(l==="")return h.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,b=new TextDecoder(v);return h.arrayBuffer().then(_=>b.decode(_))}}}).then(h=>{Mc.add(`file:${e}`,h);const p=If[e];delete If[e];for(let g=0,v=p.length;g<v;g++){const b=p[g];b.onLoad&&b.onLoad(h)}}).catch(h=>{const p=If[e];if(p===void 0)throw this.manager.itemError(e),h;delete If[e];for(let g=0,v=p.length;g<v;g++){const b=p[g];b.onError&&b.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class iK extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Uc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=nx.parse(e[i]);t.push(r)}return t}}class rK extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=[],l=new kM,c=new Uc(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let h=0;function p(g){c.load(e[g],function(v){const b=a.parse(v,!0);s[g]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},h+=1,h===6&&(b.mipmapCount===1&&(l.minFilter=Xi),l.image=s,l.format=b.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)p(g);else c.load(e,function(g){const v=a.parse(g,!0);if(v.isCubemap){const b=v.mipmaps.length/v.mipmapCount;for(let _=0;_<b;_++){s[_]={mipmaps:[]};for(let M=0;M<v.mipmapCount;M++)s[_].mipmaps.push(v.mipmaps[_*v.mipmapCount+M]),s[_].format=v.format,s[_].width=v.width,s[_].height=v.height}l.image=s}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Xi),l.format=v.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}const iv=new WeakMap;class ix extends Xs{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Mc.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let g=iv.get(s);g===void 0&&(g=[],iv.set(s,g)),g.push({onLoad:t,onError:r})}return s}const l=Yb("img");function c(){p(),t&&t(this);const g=iv.get(this)||[];for(let v=0;v<g.length;v++){const b=g[v];b.onLoad&&b.onLoad(this)}iv.delete(this),a.manager.itemEnd(e)}function h(g){p(),r&&r(g),Mc.remove(`image:${e}`);const v=iv.get(this)||[];for(let b=0;b<v.length;b++){const _=v[b];_.onError&&_.onError(g)}iv.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),Mc.add(`image:${e}`,l),a.manager.itemStart(e),l.src=e,l}}class aK extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=new Dx;a.colorSpace=qa;const s=new ix(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let l=0;function c(h){s.load(e[h],function(p){a.images[h]=p,l++,l===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let h=0;h<e.length;++h)c(h);return a}}class sK extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Eu,l=new Uc(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(a.withCredentials),l.load(e,function(c){let h;try{h=a.parse(c)}catch(p){if(r!==void 0)r(p);else{p(p);return}}h.image!==void 0?s.image=h.image:h.data!==void 0&&(s.image.width=h.width,s.image.height=h.height,s.image.data=h.data),s.wrapS=h.wrapS!==void 0?h.wrapS:Mo,s.wrapT=h.wrapT!==void 0?h.wrapT:Mo,s.magFilter=h.magFilter!==void 0?h.magFilter:Xi,s.minFilter=h.minFilter!==void 0?h.minFilter:Xi,s.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(s.colorSpace=h.colorSpace),h.flipY!==void 0&&(s.flipY=h.flipY),h.format!==void 0&&(s.format=h.format),h.type!==void 0&&(s.type=h.type),h.mipmaps!==void 0&&(s.mipmaps=h.mipmaps,s.minFilter=Ec),h.mipmapCount===1&&(s.minFilter=Xi),h.generateMipmaps!==void 0&&(s.generateMipmaps=h.generateMipmaps),s.needsUpdate=!0,t&&t(s,h)},i,r),s}}class oK extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=new wr,s=new ix(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(l){a.image=l,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class jd extends ti{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Lt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class r6 extends jd{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ti.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Lt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const xC=new pn,wU=new ne,EU=new ne;class oO{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.mapType=Bs,this.map=null,this.mapPass=null,this.matrix=new pn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new u0,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new Pi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;wU.setFromMatrixPosition(e.matrixWorld),t.position.copy(wU),EU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(EU),t.updateMatrixWorld(),xC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xC,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(xC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class lK extends oO{constructor(){super(new Nr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Vv*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class a6 extends jd{constructor(e,t,i=0,r=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ti.DEFAULT_UP),this.updateMatrix(),this.target=new ti,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new lK}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class uK extends oO{constructor(){super(new Nr(90,1,.5,500)),this.isPointLightShadow=!0}}class s6 extends jd{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new uK}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class Bf extends IM{constructor(e=-1,t=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=h*this.view.offsetX,s=a+h*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(a,s,l,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class cK extends oO{constructor(){super(new Bf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class o6 extends jd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ti.DEFAULT_UP),this.updateMatrix(),this.target=new ti,this.shadow=new cK}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class l6 extends jd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class u6 extends jd{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class lO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ne)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(i*a)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*i*a),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class c6 extends jd{constructor(e=new lO,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class ZM extends Xs{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,s=new Uc(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&Rt("MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Lt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new Lt().setHex(s.value);break;case"v2":r.uniforms[a].value=new Je().fromArray(s.value);break;case"v3":r.uniforms[a].value=new ne().fromArray(s.value);break;case"v4":r.uniforms[a].value=new Pi().fromArray(s.value);break;case"m3":r.uniforms[a].value=new En().fromArray(s.value);break;case"m4":r.uniforms[a].value=new pn().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new Je().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return ZM.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:q2,SpriteMaterial:HN,RawShaderMaterial:JN,ShaderMaterial:Bl,PointsMaterial:qN,MeshPhysicalMaterial:W2,MeshStandardMaterial:eO,MeshPhongMaterial:$2,MeshToonMaterial:X2,MeshNormalMaterial:Y2,MeshLambertMaterial:K2,MeshDepthMaterial:tO,MeshDistanceMaterial:nO,MeshBasicMaterial:Bd,MeshMatcapMaterial:Z2,LineDashedMaterial:Q2,LineBasicMaterial:$s,Material:Ss};return new t[e]}}class HP{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class f6 extends mn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class h6 extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Uc(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(b,_){if(t[_]!==void 0)return t[_];const S=b.interleavedBuffers[_],w=a(b,S.buffer),R=wv(S.type,w),P=new DM(R,S.stride);return P.uuid=S.uuid,t[_]=P,P}function a(b,_){if(i[_]!==void 0)return i[_];const S=b.arrayBuffers[_],w=new Uint32Array(S).buffer;return i[_]=w,w}const s=e.isInstancedBufferGeometry?new f6:new mn,l=e.data.index;if(l!==void 0){const b=wv(l.type,l.array);s.setIndex(new fi(b,1))}const c=e.data.attributes;for(const b in c){const _=c[b];let M;if(_.isInterleavedBufferAttribute){const S=r(e.data,_.data);M=new Sm(S,_.itemSize,_.offset,_.normalized)}else{const S=wv(_.type,_.array),w=_.isInstancedBufferAttribute?Gv:fi;M=new w(S,_.itemSize,_.normalized)}_.name!==void 0&&(M.name=_.name),_.usage!==void 0&&M.setUsage(_.usage),s.setAttribute(b,M)}const h=e.data.morphAttributes;if(h)for(const b in h){const _=h[b],M=[];for(let S=0,w=_.length;S<w;S++){const R=_[S];let P;if(R.isInterleavedBufferAttribute){const O=r(e.data,R.data);P=new Sm(O,R.itemSize,R.offset,R.normalized)}else{const O=wv(R.type,R.array);P=new fi(O,R.itemSize,R.normalized)}R.name!==void 0&&(P.name=R.name),M.push(P)}s.morphAttributes[b]=M}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let b=0,_=g.length;b!==_;++b){const M=g[b];s.addGroup(M.start,M.count,M.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(s.boundingSphere=new _a().fromJSON(v)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class fK extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=this.path===""?HP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const l=new Uc(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let h=null;try{h=JSON.parse(c)}catch(g){r!==void 0&&r(g),g("ObjectLoader: Can't parse "+e+".",g.message);return}const p=h.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),Yt("ObjectLoader: Can't load "+e);return}a.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?HP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new Uc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),l=JSON.parse(s),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(h)}),l=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,a,c,l,i),p=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,p),this.bindLightTargets(h),t!==void 0){let g=!1;for(const v in s)if(s[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,r,l,s,t),h=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,h),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new dm().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const l=new LM().fromJSON(e[a],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new h6;for(let a=0,s=e.length;a<s;a++){let l;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in SU?l=SU[c.type].fromJSON(c,t):Rt(`ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new ZM;a.setTextures(t);for(let s=0,l=e.length;s<l;s++){const c=e[s];i[c.uuid]===void 0&&(i[c.uuid]=a.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=nx.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function s(c){return i.manager.itemStart(c),a.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const h=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return s(p)}else return c.data?{data:wv(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new sO(t);a=new ix(c),a.setCrossOrigin(this.crossOrigin);for(let h=0,p=e.length;h<p;h++){const g=e[h],v=g.url;if(Array.isArray(v)){const b=[];for(let _=0,M=v.length;_<M;_++){const S=v[_],w=l(S);w!==null&&(w instanceof HTMLImageElement?b.push(w):b.push(new Eu(w.data,w.width,w.height)))}r[g.uuid]=new md(b)}else{const b=l(g.url);r[g.uuid]=new md(b)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(s){if(typeof s=="string"){const l=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return s.data?{data:wv(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new ix(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,l=e.length;s<l;s++){const c=e[s],h=c.url;if(Array.isArray(h)){const p=[];for(let g=0,v=h.length;g<v;g++){const b=h[g],_=await a(b);_!==null&&(_ instanceof HTMLImageElement?p.push(_):p.push(new Eu(_.data,_.width,_.height)))}i[c.uuid]=new md(p)}else{const p=await a(c.url);i[c.uuid]=new md(p)}}}return i}parseTextures(e,t){function i(a,s){return typeof a=="number"?a:(Rt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const l=e[a];l.image===void 0&&Rt('ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&Rt("ObjectLoader: Undefined image",l.image);const c=t[l.image],h=c.data;let p;Array.isArray(h)?(p=new Dx,h.length===6&&(p.needsUpdate=!0)):(h&&h.data?p=new Eu:p=new wr,h&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=i(l.mapping,hK)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=i(l.wrap[0],MU),p.wrapT=i(l.wrap[1],MU)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=i(l.minFilter,AU)),l.magFilter!==void 0&&(p.magFilter=i(l.magFilter,AU)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,i,r,a){let s;function l(v){return t[v]===void 0&&Rt("ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const b=[];for(let _=0,M=v.length;_<M;_++){const S=v[_];i[S]===void 0&&Rt("ObjectLoader: Undefined material",S),b.push(i[S])}return b}return i[v]===void 0&&Rt("ObjectLoader: Undefined material",v),i[v]}}function h(v){return r[v]===void 0&&Rt("ObjectLoader: Undefined texture",v),r[v]}let p,g;switch(e.type){case"Scene":s=new jN,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Lt(e.background):s.background=h(e.background)),e.environment!==void 0&&(s.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new OM(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new NM(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Nr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Bf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new l6(e.color,e.intensity);break;case"DirectionalLight":s=new o6(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new s6(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new u6(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new a6(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new r6(e.color,e.groundColor,e.intensity);break;case"LightProbe":const v=new lO().fromArray(e.sh);s=new c6(v,e.intensity);break;case"SkinnedMesh":p=l(e.geometry),g=c(e.material),s=new T2(p,g),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),g=c(e.material),s=new Wr(p,g);break;case"InstancedMesh":p=l(e.geometry),g=c(e.material);const b=e.count,_=e.instanceMatrix,M=e.instanceColor;s=new C2(p,g,b),s.instanceMatrix=new Gv(new Float32Array(_.array),16),M!==void 0&&(s.instanceColor=new Gv(new Float32Array(M.array),M.itemSize));break;case"BatchedMesh":p=l(e.geometry),g=c(e.material),s=new R2(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),s.geometry=p,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(S=>{let w=null,R=null;return S.boundingBox!==void 0&&(w=new Xa().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(R=new _a().fromJSON(S.boundingSphere)),{...S,boundingBox:w,boundingSphere:R}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=h(e.matricesTexture.uuid),s._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new _a().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new Xa().fromJSON(e.boundingBox));break;case"LOD":s=new A2;break;case"Line":s=new Pd(l(e.geometry),c(e.material));break;case"LineLoop":s=new P2(l(e.geometry),c(e.material));break;case"LineSegments":s=new qc(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new I2(l(e.geometry),c(e.material));break;case"Sprite":s=new M2(c(e.material));break;case"Group":s=new Ev;break;case"Bone":s=new GN;break;default:s=new ti}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let b=0;b<v.length;b++)s.add(this.parseObject(v[b],t,i,r,a))}if(e.animations!==void 0){const v=e.animations;for(let b=0;b<v.length;b++){const _=v[b];s.animations.push(a[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const v=e.levels;for(let b=0;b<v.length;b++){const _=v[b],M=s.getObjectByProperty("uuid",_.object);M!==void 0&&s.addLevel(M,_.distance,_.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?Rt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new ti}})}}const hK={UVMapping:bM,CubeReflectionMapping:Oc,CubeRefractionMapping:Td,EquirectangularReflectionMapping:Vb,EquirectangularRefractionMapping:jb,CubeUVReflectionMapping:l0},MU={RepeatWrapping:Hb,ClampToEdgeWrapping:Mo,MirroredRepeatWrapping:Gb},AU={NearestFilter:Or,NearestMipmapNearestFilter:RN,NearestMipmapLinearFilter:Sv,LinearFilter:Xi,LinearMipmapNearestFilter:Eb,LinearMipmapLinearFilter:Ec},_C=new WeakMap;class dK extends Xs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Rt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Rt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Mc.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(h=>{if(_C.has(s)===!0)r&&r(_C.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(h),a.manager.itemEnd(e),h});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,l.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(h){return Mc.add(`image-bitmap:${e}`,h),t&&t(h),a.manager.itemEnd(e),h}).catch(function(h){r&&r(h),_C.set(c,h),Mc.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Mc.add(`image-bitmap:${e}`,c),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let c1;class uO{static getContext(){return c1===void 0&&(c1=new(window.AudioContext||window.webkitAudioContext)),c1}static setContext(e){c1=e}}class pK extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Uc(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const h=c.slice(0);uO.getContext().decodeAudioData(h,function(g){t(g)}).catch(l)}catch(h){l(h)}},i,r);function l(c){r?r(c):Yt(c),a.manager.itemError(e)}}}const TU=new pn,CU=new pn,Up=new pn;class mK{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Up.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,s=t.near*Math.tan(hm*t.fov*.5)/t.zoom;let l,c;CU.elements[12]=-r,TU.elements[12]=r,l=-s*t.aspect+a,c=s*t.aspect+a,Up.elements[0]=2*t.near/(c-l),Up.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Up),l=-s*t.aspect-a,c=s*t.aspect-a,Up.elements[0]=2*t.near/(c-l),Up.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Up)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(CU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(TU)}}class d6 extends Nr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let cO=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};const kp=new ne,SC=new xs,gK=new ne,zp=new ne,Fp=new ne;class vK extends ti{constructor(){super(),this.type="AudioListener",this.context=uO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(kp,SC,gK),zp.set(0,0,-1).applyQuaternion(SC),Fp.set(0,1,0).applyQuaternion(SC),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(kp.x,i),t.positionY.linearRampToValueAtTime(kp.y,i),t.positionZ.linearRampToValueAtTime(kp.z,i),t.forwardX.linearRampToValueAtTime(zp.x,i),t.forwardY.linearRampToValueAtTime(zp.y,i),t.forwardZ.linearRampToValueAtTime(zp.z,i),t.upX.linearRampToValueAtTime(Fp.x,i),t.upY.linearRampToValueAtTime(Fp.y,i),t.upZ.linearRampToValueAtTime(Fp.z,i)}else t.setPosition(kp.x,kp.y,kp.z),t.setOrientation(zp.x,zp.y,zp.z,Fp.x,Fp.y,Fp.z)}}class p6 extends ti{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Rt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Rt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Rt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Bp=new ne,RU=new xs,yK=new ne,Vp=new ne;class bK extends p6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Bp,RU,yK),Vp.set(0,0,1).applyQuaternion(RU);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Bp.x,i),t.positionY.linearRampToValueAtTime(Bp.y,i),t.positionZ.linearRampToValueAtTime(Bp.z,i),t.orientationX.linearRampToValueAtTime(Vp.x,i),t.orientationY.linearRampToValueAtTime(Vp.y,i),t.orientationZ.linearRampToValueAtTime(Vp.z,i)}else t.setPosition(Bp.x,Bp.y,Bp.z),t.setOrientation(Vp.x,Vp.y,Vp.z)}}class xK{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class m6{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let l=0;l!==r;++l)i[a+l]=i[l];s=t}else{s+=t;const l=t/s;this._mixBufferRegion(i,a,0,l,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(i[c]!==i[c+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,s=r;a!==s;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){xs.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const s=this._workIndex*a;xs.multiplyQuaternionsFlat(e,s,e,t,e,i),xs.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,a){const s=1-r;for(let l=0;l!==a;++l){const c=t+l;e[c]=e[c]*s+e[i+l]*r}}_lerpAdditive(e,t,i,r,a){for(let s=0;s!==a;++s){const l=t+s;e[l]=e[l]+e[i+s]*r}}}const fO="\\[\\]\\.:\\/",_K=new RegExp("["+fO+"]","g"),hO="[^"+fO+"]",SK="[^"+fO.replace("\\.","")+"]",wK=/((?:WC+[\/:])*)/.source.replace("WC",hO),EK=/(WCOD+)?/.source.replace("WCOD",SK),MK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hO),AK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hO),TK=new RegExp("^"+wK+EK+MK+AK+"$"),CK=["material","materials","bones","map"];class RK{constructor(e,t,i){const r=i||ei.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ei{constructor(e,t,i){this.path=t,this.parsedPath=i||ei.parseTrackName(t),this.node=ei.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ei.Composite(e,t,i):new ei(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_K,"")}static parseTrackName(e){const t=TK.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);CK.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const l=a[s];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=ei.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Rt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){Yt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Yt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Yt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===h){h=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Yt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Yt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Yt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){Yt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const s=e[r];if(s===void 0){const h=t.nodeName;Yt("PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){Yt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Yt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ei.Composite=RK;ei.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ei.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ei.prototype.GetterByBindingType=[ei.prototype._getValue_direct,ei.prototype._getValue_array,ei.prototype._getValue_arrayElement,ei.prototype._getValue_toArray];ei.prototype.SetterByBindingTypeAndVersioning=[[ei.prototype._setValue_direct,ei.prototype._setValue_direct_setNeedsUpdate,ei.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_array,ei.prototype._setValue_array_setNeedsUpdate,ei.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_arrayElement,ei.prototype._setValue_arrayElement_setNeedsUpdate,ei.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_fromArray,ei.prototype._setValue_fromArray_setNeedsUpdate,ei.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class PK{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ko(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let l,c=e.length,h=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const v=arguments[p],b=v.uuid;let _=t[b];if(_===void 0){_=c++,t[b]=_,e.push(v);for(let M=0,S=s;M!==S;++M)a[M].push(new ei(v,i[M],r[M]))}else if(_<h){l=e[_];const M=--h,S=e[M];t[S.uuid]=_,e[_]=S,t[b]=M,e[M]=v;for(let w=0,R=s;w!==R;++w){const P=a[w],O=P[M];let k=P[_];P[_]=O,k===void 0&&(k=new ei(v,i[w],r[w])),P[M]=k}}else e[_]!==l&&Yt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,l=arguments.length;s!==l;++s){const c=arguments[s],h=c.uuid,p=t[h];if(p!==void 0&&p>=a){const g=a++,v=e[g];t[v.uuid]=p,e[p]=v,t[h]=g,e[g]=c;for(let b=0,_=r;b!==_;++b){const M=i[b],S=M[g],w=M[p];M[p]=S,M[g]=w}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let l=0,c=arguments.length;l!==c;++l){const h=arguments[l],p=h.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<a){const v=--a,b=e[v],_=--s,M=e[_];t[b.uuid]=g,e[g]=b,t[M.uuid]=v,e[v]=M,e.pop();for(let S=0,w=r;S!==w;++S){const R=i[S],P=R[v],O=R[_];R[g]=P,R[v]=O,R.pop()}}else{const v=--s,b=e[v];v>0&&(t[b.uuid]=g),e[g]=b,e.pop();for(let _=0,M=r;_!==M;++_){const S=i[_];S[g]=S[v],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,l=this._parsedPaths,c=this._objects,h=c.length,p=this.nCachedObjects_,g=new Array(h);r=a.length,i[e]=r,s.push(e),l.push(t),a.push(g);for(let v=p,b=c.length;v!==b;++v){const _=c[v];g[v]=new ei(_,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length-1,c=s[l],h=e[l];t[h]=i,s[i]=c,s.pop(),a[i]=a[l],a.pop(),r[i]=r[l],r.pop()}}}class g6{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,s=a.length,l=new Array(s),c={endingStart:nm,endingEnd:nm};for(let h=0;h!==s;++h){const p=a[h].createInterpolant(null);l[h]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=a2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,l=r/a;e.warp(1,s,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,s=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=a,c[1]=a+i,h[0]=e/s,h[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const s=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case UN:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(s),h[p].accumulateAdditive(l);break;case AM:default:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(s),h[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===s2;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(i===r2){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,a+=Math.abs(l);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=im,r.endingEnd=im):(e?r.endingStart=this.zeroSlopeAtStart?im:nm:r.endingStart=Wb,t?r.endingEnd=this.zeroSlopeAtEnd?im:nm:r.endingEnd=Wb)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const l=s.parameterPositions,c=s.sampleValues;return l[0]=a,c[0]=t,l[1]=a+e,c[1]=i,this}}const IK=new Float32Array(1);class NK extends Gc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,l=e._interpolants,c=i.uuid,h=this._bindingsByRootAndName;let p=h[c];p===void 0&&(p={},h[c]=p);for(let g=0;g!==a;++g){const v=r[g],b=v.name;let _=p[b];if(_!==void 0)++_.referenceCount,s[g]=_;else{if(_=s[g],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,b));continue}const M=t&&t._propertyBindings[g].binding.parsedPath;_=new m6(ei.create(i,b,M),v.ValueTypeName,v.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,b),s[g]=_}l[g].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const l=s.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,l=s[a],c=l.knownActions,h=c[c.length-1],p=e._byClipCacheIndex;h._byClipCacheIndex=p,c[p]=h,c.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,l=s[r],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete l[a],Object.keys(l).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new rO(new Float32Array(2),new Float32Array(2),1,IK),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?nx.findByName(r,e):e;const l=s!==null?s.uuid:e,c=this._actionsByClip[l];let h=null;if(i===void 0&&(s!==null?i=s.blendMode:i=AM),c!==void 0){const g=c.actionByRoot[a];if(g!==void 0&&g.blendMode===i)return g;h=c.knownActions[0],s===null&&(s=h._clip)}if(s===null)return null;const p=new g6(this,s,t,i);return this._bindAction(p,h),this._addInactiveAction(p,l,a),p}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?nx.findByName(i,e):e,s=a?a.uuid:e,l=this._actionsByClip[s];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,a,s);const l=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)l[h].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let l=0,c=s.length;l!==c;++l){const h=s[l];this._deactivateAction(h);const p=h._cacheIndex,g=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const l=i[s].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const l=a[s];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class OK extends zN{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new PM(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class dO{constructor(e){this.value=e}clone(){return new dO(this.value.clone===void 0?this.value:this.value.clone())}}let DK=0;class LK extends Gc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:DK++}),this.name="",this.usage=Xb,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class UK extends DM{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class kK{constructor(e,t,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const PU=new pn;class v6{constructor(e,t,i=0,r=1/0){this.ray=new km(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new jv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Yt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return PU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(PU),this}intersectObject(e,t=!0,i=[]){return GP(e,this,i,t),i.sort(IU),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)GP(e[r],this,i,t);return i.sort(IU),i}}function IU(n,e){return n.distance-e.distance}function GP(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let s=0,l=a.length;s<l;s++)GP(a[s],e,t,!0)}}class zK{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=FK.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function FK(){this._document.hidden===!1&&this.reset()}class qP{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=fn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class BK{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class pO{constructor(e,t,i,r){pO.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const NU=new Je;class VK{constructor(e=new Je(1/0,1/0),t=new Je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=NU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,NU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const OU=new ne,f1=new ne,rv=new ne,av=new ne,wC=new ne,jK=new ne,HK=new ne;class GK{constructor(e=new ne,t=new ne){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){OU.subVectors(e,this.start),f1.subVectors(this.end,this.start);const i=f1.dot(f1);let a=f1.dot(OU)/i;return t&&(a=fn(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=jK,i=HK){const r=10000000000000001e-32;let a,s;const l=this.start,c=e.start,h=this.end,p=e.end;rv.subVectors(h,l),av.subVectors(p,c),wC.subVectors(l,c);const g=rv.dot(rv),v=av.dot(av),b=av.dot(wC);if(g<=r&&v<=r)return t.copy(l),i.copy(c),t.sub(i),t.dot(t);if(g<=r)a=0,s=b/v,s=fn(s,0,1);else{const _=rv.dot(wC);if(v<=r)s=0,a=fn(-_/g,0,1);else{const M=rv.dot(av),S=g*v-M*M;S!==0?a=fn((M*b-_*v)/S,0,1):a=0,s=(M*a+b)/v,s<0?(s=0,a=fn(-_/g,0,1)):s>1&&(s=1,a=fn((M-_)/g,0,1))}}return t.copy(l).add(rv.multiplyScalar(a)),i.copy(c).add(av.multiplyScalar(s)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const DU=new ne;class qK extends ti{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new mn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,l=1,c=32;s<c;s++,l++){const h=s/c*Math.PI*2,p=l/c*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new Ft(r,3));const a=new $s({fog:!1,toneMapped:!1});this.cone=new qc(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),DU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(DU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const rd=new ne,h1=new pn,EC=new pn;class WK extends qc{constructor(e){const t=y6(e),i=new mn,r=[],a=[];for(let h=0;h<t.length;h++){const p=t[h];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new Ft(r,3)),i.setAttribute("color",new Ft(a,3));const s=new $s({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const l=new Lt(255),c=new Lt(65280);this.setColors(l,c)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");EC.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const l=t[a];l.parent&&l.parent.isBone&&(h1.multiplyMatrices(EC,l.matrixWorld),rd.setFromMatrixPosition(h1),r.setXYZ(s,rd.x,rd.y,rd.z),h1.multiplyMatrices(EC,l.parent.matrixWorld),rd.setFromMatrixPosition(h1),r.setXYZ(s+1,rd.x,rd.y,rd.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function y6(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...y6(n.children[t]));return e}class $K extends Wr{constructor(e,t,i){const r=new zx(t,4,2),a=new Bd({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const XK=new ne,LU=new Lt,UU=new Lt;class YK extends ti{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new kx(t);r.rotateY(Math.PI*.5),this.material=new Bd({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new fi(s,3)),this.add(new Wr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");LU.copy(this.light.color),UU.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?LU:UU;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(XK.setFromMatrixPosition(this.light.matrixWorld).negate())}}class KK extends qc{constructor(e=10,t=10,i=4473924,r=8947848){i=new Lt(i),r=new Lt(r);const a=t/2,s=e/t,l=e/2,c=[],h=[];for(let v=0,b=0,_=-l;v<=t;v++,_+=s){c.push(-l,0,_,l,0,_),c.push(_,0,-l,_,0,l);const M=v===a?i:r;M.toArray(h,b),b+=3,M.toArray(h,b),b+=3,M.toArray(h,b),b+=3,M.toArray(h,b),b+=3}const p=new mn;p.setAttribute("position",new Ft(c,3)),p.setAttribute("color",new Ft(h,3));const g=new $s({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZK extends qc{constructor(e=10,t=16,i=8,r=64,a=4473924,s=8947848){a=new Lt(a),s=new Lt(s);const l=[],c=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),b=Math.sin(v)*e,_=Math.cos(v)*e;l.push(0,0,0),l.push(b,0,_);const M=g&1?a:s;c.push(M.r,M.g,M.b),c.push(M.r,M.g,M.b)}for(let g=0;g<i;g++){const v=g&1?a:s,b=e-e/i*g;for(let _=0;_<r;_++){let M=_/r*(Math.PI*2),S=Math.sin(M)*b,w=Math.cos(M)*b;l.push(S,0,w),c.push(v.r,v.g,v.b),M=(_+1)/r*(Math.PI*2),S=Math.sin(M)*b,w=Math.cos(M)*b,l.push(S,0,w),c.push(v.r,v.g,v.b)}}const h=new mn;h.setAttribute("position",new Ft(l,3)),h.setAttribute("color",new Ft(c,3));const p=new $s({vertexColors:!0,toneMapped:!1});super(h,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const kU=new ne,d1=new ne,zU=new ne;class QK extends ti{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new mn;r.setAttribute("position",new Ft([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new $s({fog:!1,toneMapped:!1});this.lightPlane=new Pd(r,a),this.add(this.lightPlane),r=new mn,r.setAttribute("position",new Ft([0,0,0,0,0,1],3)),this.targetLine=new Pd(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kU.setFromMatrixPosition(this.light.matrixWorld),d1.setFromMatrixPosition(this.light.target.matrixWorld),zU.subVectors(d1,kU),this.lightPlane.lookAt(d1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(d1),this.targetLine.scale.z=zU.length()}}const p1=new ne,xr=new IM;class JK extends qc{constructor(e){const t=new mn,i=new $s({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(_,M){c(_),c(M)}function c(_){r.push(0,0,0),a.push(0,0,0),s[_]===void 0&&(s[_]=[]),s[_].push(r.length/3-1)}t.setAttribute("position",new Ft(r,3)),t.setAttribute("color",new Ft(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const h=new Lt(16755200),p=new Lt(16711680),g=new Lt(43775),v=new Lt(16777215),b=new Lt(3355443);this.setColors(h,p,g,v,b)}setColors(e,t,i,r,a){const l=this.geometry.getAttribute("color");return l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,a.r,a.g,a.b),l.setXYZ(41,a.r,a.g,a.b),l.setXYZ(42,a.r,a.g,a.b),l.setXYZ(43,a.r,a.g,a.b),l.setXYZ(44,a.r,a.g,a.b),l.setXYZ(45,a.r,a.g,a.b),l.setXYZ(46,a.r,a.g,a.b),l.setXYZ(47,a.r,a.g,a.b),l.setXYZ(48,a.r,a.g,a.b),l.setXYZ(49,a.r,a.g,a.b),l.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let a,s;if(xr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===$o)a=-1,s=1;else if(this.camera.coordinateSystem===Fv)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Pr("c",t,e,xr,0,0,a),Pr("t",t,e,xr,0,0,s),Pr("n1",t,e,xr,-i,-r,a),Pr("n2",t,e,xr,i,-r,a),Pr("n3",t,e,xr,-i,r,a),Pr("n4",t,e,xr,i,r,a),Pr("f1",t,e,xr,-i,-r,s),Pr("f2",t,e,xr,i,-r,s),Pr("f3",t,e,xr,-i,r,s),Pr("f4",t,e,xr,i,r,s),Pr("u1",t,e,xr,i*.7,r*1.1,a),Pr("u2",t,e,xr,-i*.7,r*1.1,a),Pr("u3",t,e,xr,0,r*2,a),Pr("cf1",t,e,xr,-i,0,s),Pr("cf2",t,e,xr,i,0,s),Pr("cf3",t,e,xr,0,-r,s),Pr("cf4",t,e,xr,0,r,s),Pr("cn1",t,e,xr,-i,0,a),Pr("cn2",t,e,xr,i,0,a),Pr("cn3",t,e,xr,0,-r,a),Pr("cn4",t,e,xr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pr(n,e,t,i,r,a,s){p1.set(r,a,s).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let h=0,p=l.length;h<p;h++)c.setXYZ(l[h],p1.x,p1.y,p1.z)}}const m1=new Xa;class eZ extends qc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new mn;a.setIndex(new fi(i,1)),a.setAttribute("position",new fi(r,3)),super(a,new $s({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&m1.setFromObject(this.object),m1.isEmpty())return;const e=m1.min,t=m1.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tZ extends qc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new mn;a.setIndex(new fi(i,1)),a.setAttribute("position",new Ft(r,3)),super(a,new $s({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class nZ extends Pd{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new mn;s.setAttribute("position",new Ft(a,3)),s.computeBoundingSphere(),super(s,new $s({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new mn;c.setAttribute("position",new Ft(l,3)),c.computeBoundingSphere(),this.add(new Wr(c,new Bd({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const FU=new ne;let g1,MC;class iZ extends ti{constructor(e=new ne(0,0,1),t=new ne(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",g1===void 0&&(g1=new mn,g1.setAttribute("position",new Ft([0,0,0,0,1,0],3)),MC=new Ux(.5,1,5,1),MC.translate(0,-.5,0)),this.position.copy(t),this.line=new Pd(g1,new $s({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Wr(MC,new Bd({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{FU.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(FU,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class rZ extends qc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new mn;r.setAttribute("position",new Ft(t,3)),r.setAttribute("color",new Ft(i,3));const a=new $s({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new Lt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aZ{constructor(){this.type="ShapePath",this.color=new Lt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new tE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,s){return this.currentPath.bezierCurveTo(e,t,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const R=[];for(let P=0,O=w.length;P<O;P++){const k=w[P],B=new dm;B.curves=k.curves,R.push(B)}return R}function i(w,R){const P=R.length;let O=!1;for(let k=P-1,B=0;B<P;k=B++){let D=R[k],F=R[B],I=F.x-D.x,L=F.y-D.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(D=R[B],I=-I,F=R[k],L=-L),w.y<D.y||w.y>F.y)continue;if(w.y===D.y){if(w.x===D.x)return!0}else{const H=L*(w.x-D.x)-I*(w.y-D.y);if(H===0)return!0;if(H<0)continue;O=!O}}else{if(w.y!==D.y)continue;if(F.x<=w.x&&w.x<=D.x||D.x<=w.x&&w.x<=F.x)return!0}}return O}const r=wu.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,l,c;const h=[];if(a.length===1)return l=a[0],c=new dm,c.curves=l.curves,h.push(c),h;let p=!r(a[0].getPoints());p=e?!p:p;const g=[],v=[];let b=[],_=0,M;v[_]=void 0,b[_]=[];for(let w=0,R=a.length;w<R;w++)l=a[w],M=l.getPoints(),s=r(M),s=e?!s:s,s?(!p&&v[_]&&_++,v[_]={s:new dm,p:M},v[_].s.curves=l.curves,p&&_++,b[_]=[]):b[_].push({h:l,p:M[0]});if(!v[0])return t(a);if(v.length>1){let w=!1,R=0;for(let P=0,O=v.length;P<O;P++)g[P]=[];for(let P=0,O=v.length;P<O;P++){const k=b[P];for(let B=0;B<k.length;B++){const D=k[B];let F=!0;for(let I=0;I<v.length;I++)i(D.p,v[I].p)&&(P!==I&&R++,F?(F=!1,g[I].push(D)):w=!0);F&&g[P].push(D)}}R>0&&w===!1&&(b=g)}let S;for(let w=0,R=v.length;w<R;w++){c=v[w].s,h.push(c),S=b[w];for(let P=0,O=S.length;P<O;P++)c.holes.push(S[P].h)}return h}}class sZ extends Gc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Rt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function oZ(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function lZ(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function uZ(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function WP(n,e,t,i){const r=cZ(i);switch(t){case DN:return n*e;case wM:return n*e/r.components*r.byteLength;case Ox:return n*e/r.components*r.byteLength;case _m:return n*e*2/r.components*r.byteLength;case EM:return n*e*2/r.components*r.byteLength;case LN:return n*e*3/r.components*r.byteLength;case bs:return n*e*4/r.components*r.byteLength;case MM:return n*e*4/r.components*r.byteLength;case Mb:case Ab:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Tb:case Cb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case xw:case Sw:return Math.max(n,16)*Math.max(e,8)/4;case bw:case _w:return Math.max(n,8)*Math.max(e,8)/2;case ww:case Ew:case Aw:case Tw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Mw:case Cw:case Rw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Pw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Iw:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Nw:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Ow:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Dw:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Lw:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Uw:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case kw:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case zw:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Fw:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Bw:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Vw:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case jw:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Hw:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Gw:case qw:case Ww:return Math.ceil(n/4)*Math.ceil(e/4)*16;case $w:case Xw:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Yw:case Kw:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function cZ(n){switch(n){case Bs:case PN:return{byteLength:1,components:1};case kv:case IN:case Dc:return{byteLength:2,components:1};case _M:case SM:return{byteLength:2,components:4};case Fl:case xM:case js:return{byteLength:4,components:1};case NN:case ON:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class fZ{static contain(e,t){return oZ(e,t)}static cover(e,t){return lZ(e,t)}static fill(e){return uZ(e)}static getByteLength(e,t,i,r){return WP(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vM}}));typeof window<"u"&&(window.__THREE__?Rt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vM);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function b6(){let n=null,e=!1,t=null,i=null;function r(a,s){t(a,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function hZ(n){const e=new WeakMap;function t(l,c){const h=l.array,p=l.usage,g=h.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,h,p),l.onUploadCallback();let b;if(h instanceof Float32Array)b=n.FLOAT;else if(typeof Float16Array<"u"&&h instanceof Float16Array)b=n.HALF_FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?b=n.HALF_FLOAT:b=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)b=n.SHORT;else if(h instanceof Uint32Array)b=n.UNSIGNED_INT;else if(h instanceof Int32Array)b=n.INT;else if(h instanceof Int8Array)b=n.BYTE;else if(h instanceof Uint8Array)b=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)b=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:b,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:g}}function i(l,c,h){const p=c.array,g=c.updateRanges;if(n.bindBuffer(h,l),g.length===0)n.bufferSubData(h,0,p);else{g.sort((b,_)=>b.start-_.start);let v=0;for(let b=1;b<g.length;b++){const _=g[v],M=g[b];M.start<=_.start+_.count+1?_.count=Math.max(_.count,M.start+M.count-_.start):(++v,g[v]=M)}g.length=v+1;for(let b=0,_=g.length;b<_;b++){const M=g[b];n.bufferSubData(h,M.start*p.BYTES_PER_ELEMENT,p,M.start,M.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function s(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=e.get(l);if(h===void 0)e.set(l,t(l,c));else if(h.version<l.version){if(h.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(h.buffer,l,c),h.version=l.version}}return{get:r,remove:a,update:s}}var dZ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,pZ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,mZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,gZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vZ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,bZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,xZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_Z=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,SZ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,wZ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,EZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,MZ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,AZ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,TZ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,CZ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,RZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,PZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,IZ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,NZ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,OZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,DZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,LZ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,UZ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,kZ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,zZ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,FZ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,BZ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,VZ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jZ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,HZ="gl_FragColor = linearToOutputTexel( gl_FragColor );",GZ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,WZ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,$Z=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,XZ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,YZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,KZ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ZZ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,QZ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,JZ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,eQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,tQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,iQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,rQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,aQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,sQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,uQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,cQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,fQ=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,hQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,dQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,pQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,mQ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gQ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vQ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yQ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,bQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,xQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,_Q=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,SQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,EQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MQ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,AQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,TQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,CQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,RQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,PQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,IQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,NQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,OQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,DQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,LQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,UQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,kQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,zQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,FQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,BQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,VQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,HQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,GQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,WQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,$Q=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,XQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,YQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,KQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ZQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,QQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,JQ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,eJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tJ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nJ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,iJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,rJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,aJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,sJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,oJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,lJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,fJ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const hJ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,dJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,bJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,xJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_J=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,SJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wJ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,MJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,AJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,TJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,IJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,OJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,DJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,kJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,VJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,GJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Nn={alphahash_fragment:dZ,alphahash_pars_fragment:pZ,alphamap_fragment:mZ,alphamap_pars_fragment:gZ,alphatest_fragment:vZ,alphatest_pars_fragment:yZ,aomap_fragment:bZ,aomap_pars_fragment:xZ,batching_pars_vertex:_Z,batching_vertex:SZ,begin_vertex:wZ,beginnormal_vertex:EZ,bsdfs:MZ,iridescence_fragment:AZ,bumpmap_pars_fragment:TZ,clipping_planes_fragment:CZ,clipping_planes_pars_fragment:RZ,clipping_planes_pars_vertex:PZ,clipping_planes_vertex:IZ,color_fragment:NZ,color_pars_fragment:OZ,color_pars_vertex:DZ,color_vertex:LZ,common:UZ,cube_uv_reflection_fragment:kZ,defaultnormal_vertex:zZ,displacementmap_pars_vertex:FZ,displacementmap_vertex:BZ,emissivemap_fragment:VZ,emissivemap_pars_fragment:jZ,colorspace_fragment:HZ,colorspace_pars_fragment:GZ,envmap_fragment:qZ,envmap_common_pars_fragment:WZ,envmap_pars_fragment:$Z,envmap_pars_vertex:XZ,envmap_physical_pars_fragment:aQ,envmap_vertex:YZ,fog_vertex:KZ,fog_pars_vertex:ZZ,fog_fragment:QZ,fog_pars_fragment:JZ,gradientmap_pars_fragment:eQ,lightmap_pars_fragment:tQ,lights_lambert_fragment:nQ,lights_lambert_pars_fragment:iQ,lights_pars_begin:rQ,lights_toon_fragment:sQ,lights_toon_pars_fragment:oQ,lights_phong_fragment:lQ,lights_phong_pars_fragment:uQ,lights_physical_fragment:cQ,lights_physical_pars_fragment:fQ,lights_fragment_begin:hQ,lights_fragment_maps:dQ,lights_fragment_end:pQ,logdepthbuf_fragment:mQ,logdepthbuf_pars_fragment:gQ,logdepthbuf_pars_vertex:vQ,logdepthbuf_vertex:yQ,map_fragment:bQ,map_pars_fragment:xQ,map_particle_fragment:_Q,map_particle_pars_fragment:SQ,metalnessmap_fragment:wQ,metalnessmap_pars_fragment:EQ,morphinstance_vertex:MQ,morphcolor_vertex:AQ,morphnormal_vertex:TQ,morphtarget_pars_vertex:CQ,morphtarget_vertex:RQ,normal_fragment_begin:PQ,normal_fragment_maps:IQ,normal_pars_fragment:NQ,normal_pars_vertex:OQ,normal_vertex:DQ,normalmap_pars_fragment:LQ,clearcoat_normal_fragment_begin:UQ,clearcoat_normal_fragment_maps:kQ,clearcoat_pars_fragment:zQ,iridescence_pars_fragment:FQ,opaque_fragment:BQ,packing:VQ,premultiplied_alpha_fragment:jQ,project_vertex:HQ,dithering_fragment:GQ,dithering_pars_fragment:qQ,roughnessmap_fragment:WQ,roughnessmap_pars_fragment:$Q,shadowmap_pars_fragment:XQ,shadowmap_pars_vertex:YQ,shadowmap_vertex:KQ,shadowmask_pars_fragment:ZQ,skinbase_vertex:QQ,skinning_pars_vertex:JQ,skinning_vertex:eJ,skinnormal_vertex:tJ,specularmap_fragment:nJ,specularmap_pars_fragment:iJ,tonemapping_fragment:rJ,tonemapping_pars_fragment:aJ,transmission_fragment:sJ,transmission_pars_fragment:oJ,uv_pars_fragment:lJ,uv_pars_vertex:uJ,uv_vertex:cJ,worldpos_vertex:fJ,background_vert:hJ,background_frag:dJ,backgroundCube_vert:pJ,backgroundCube_frag:mJ,cube_vert:gJ,cube_frag:vJ,depth_vert:yJ,depth_frag:bJ,distance_vert:xJ,distance_frag:_J,equirect_vert:SJ,equirect_frag:wJ,linedashed_vert:EJ,linedashed_frag:MJ,meshbasic_vert:AJ,meshbasic_frag:TJ,meshlambert_vert:CJ,meshlambert_frag:RJ,meshmatcap_vert:PJ,meshmatcap_frag:IJ,meshnormal_vert:NJ,meshnormal_frag:OJ,meshphong_vert:DJ,meshphong_frag:LJ,meshphysical_vert:UJ,meshphysical_frag:kJ,meshtoon_vert:zJ,meshtoon_frag:FJ,points_vert:BJ,points_frag:VJ,shadow_vert:jJ,shadow_frag:HJ,sprite_vert:GJ,sprite_frag:qJ},Nt={common:{diffuse:{value:new Lt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new En},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new En}},envmap:{envMap:{value:null},envMapRotation:{value:new En},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new En}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new En}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new En},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new En},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new En},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new En}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new En}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new En}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0},uvTransform:{value:new En}},sprite:{diffuse:{value:new Lt(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new En},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0}}},bu={basic:{uniforms:zs([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.fog]),vertexShader:Nn.meshbasic_vert,fragmentShader:Nn.meshbasic_frag},lambert:{uniforms:zs([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Lt(0)}}]),vertexShader:Nn.meshlambert_vert,fragmentShader:Nn.meshlambert_frag},phong:{uniforms:zs([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Lt(0)},specular:{value:new Lt(1118481)},shininess:{value:30}}]),vertexShader:Nn.meshphong_vert,fragmentShader:Nn.meshphong_frag},standard:{uniforms:zs([Nt.common,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.roughnessmap,Nt.metalnessmap,Nt.fog,Nt.lights,{emissive:{value:new Lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag},toon:{uniforms:zs([Nt.common,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.gradientmap,Nt.fog,Nt.lights,{emissive:{value:new Lt(0)}}]),vertexShader:Nn.meshtoon_vert,fragmentShader:Nn.meshtoon_frag},matcap:{uniforms:zs([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,{matcap:{value:null}}]),vertexShader:Nn.meshmatcap_vert,fragmentShader:Nn.meshmatcap_frag},points:{uniforms:zs([Nt.points,Nt.fog]),vertexShader:Nn.points_vert,fragmentShader:Nn.points_frag},dashed:{uniforms:zs([Nt.common,Nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nn.linedashed_vert,fragmentShader:Nn.linedashed_frag},depth:{uniforms:zs([Nt.common,Nt.displacementmap]),vertexShader:Nn.depth_vert,fragmentShader:Nn.depth_frag},normal:{uniforms:zs([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,{opacity:{value:1}}]),vertexShader:Nn.meshnormal_vert,fragmentShader:Nn.meshnormal_frag},sprite:{uniforms:zs([Nt.sprite,Nt.fog]),vertexShader:Nn.sprite_vert,fragmentShader:Nn.sprite_frag},background:{uniforms:{uvTransform:{value:new En},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nn.background_vert,fragmentShader:Nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new En}},vertexShader:Nn.backgroundCube_vert,fragmentShader:Nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nn.cube_vert,fragmentShader:Nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nn.equirect_vert,fragmentShader:Nn.equirect_frag},distance:{uniforms:zs([Nt.common,Nt.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nn.distance_vert,fragmentShader:Nn.distance_frag},shadow:{uniforms:zs([Nt.lights,Nt.fog,{color:{value:new Lt(0)},opacity:{value:1}}]),vertexShader:Nn.shadow_vert,fragmentShader:Nn.shadow_frag}};bu.physical={uniforms:zs([bu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new En},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new En},clearcoatNormalScale:{value:new Je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new En},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new En},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new En},sheen:{value:0},sheenColor:{value:new Lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new En},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new En},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new En},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new En},attenuationDistance:{value:0},attenuationColor:{value:new Lt(0)},specularColor:{value:new Lt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new En},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new En},anisotropyVector:{value:new Je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new En}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag};const v1={r:0,b:0,g:0},jp=new Jo,WJ=new pn;function $J(n,e,t,i,r,a,s){const l=new Lt(0);let c=a===!0?0:1,h,p,g=null,v=0,b=null;function _(P){let O=P.isScene===!0?P.background:null;return O&&O.isTexture&&(O=(P.backgroundBlurriness>0?t:e).get(O)),O}function M(P){let O=!1;const k=_(P);k===null?w(l,c):k&&k.isColor&&(w(k,1),O=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?i.buffers.color.setClear(0,0,0,1,s):B==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||O)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(P,O){const k=_(O);k&&(k.isCubeTexture||k.mapping===l0)?(p===void 0&&(p=new Wr(new zm(1,1,1),new Bl({name:"BackgroundCubeMaterial",uniforms:Hv(bu.backgroundCube.uniforms),vertexShader:bu.backgroundCube.vertexShader,fragmentShader:bu.backgroundCube.fragmentShader,side:qs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(B,D,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),jp.copy(O.backgroundRotation),jp.x*=-1,jp.y*=-1,jp.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(jp.y*=-1,jp.z*=-1),p.material.uniforms.envMap.value=k,p.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(WJ.makeRotationFromEuler(jp)),p.material.toneMapped=qn.getTransfer(k.colorSpace)!==mi,(g!==k||v!==k.version||b!==n.toneMapping)&&(p.material.needsUpdate=!0,g=k,v=k.version,b=n.toneMapping),p.layers.enableAll(),P.unshift(p,p.geometry,p.material,0,0,null)):k&&k.isTexture&&(h===void 0&&(h=new Wr(new c0(2,2),new Bl({name:"BackgroundMaterial",uniforms:Hv(bu.background.uniforms),vertexShader:bu.background.vertexShader,fragmentShader:bu.background.fragmentShader,side:Hf,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=k,h.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,h.material.toneMapped=qn.getTransfer(k.colorSpace)!==mi,k.matrixAutoUpdate===!0&&k.updateMatrix(),h.material.uniforms.uvTransform.value.copy(k.matrix),(g!==k||v!==k.version||b!==n.toneMapping)&&(h.material.needsUpdate=!0,g=k,v=k.version,b=n.toneMapping),h.layers.enableAll(),P.unshift(h,h.geometry,h.material,0,0,null))}function w(P,O){P.getRGB(v1,_2(n)),i.buffers.color.setClear(v1.r,v1.g,v1.b,O,s)}function R(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return l},setClearColor:function(P,O=1){l.set(P),c=O,w(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(P){c=P,w(l,c)},render:M,addToRenderList:S,dispose:R}}function XJ(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null);let a=r,s=!1;function l(L,H,q,W,oe){let fe=!1;const te=g(W,q,H);a!==te&&(a=te,h(a.object)),fe=b(L,W,q,oe),fe&&_(L,W,q,oe),oe!==null&&e.update(oe,n.ELEMENT_ARRAY_BUFFER),(fe||s)&&(s=!1,O(L,H,q,W),oe!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(oe).buffer))}function c(){return n.createVertexArray()}function h(L){return n.bindVertexArray(L)}function p(L){return n.deleteVertexArray(L)}function g(L,H,q){const W=q.wireframe===!0;let oe=i[L.id];oe===void 0&&(oe={},i[L.id]=oe);let fe=oe[H.id];fe===void 0&&(fe={},oe[H.id]=fe);let te=fe[W];return te===void 0&&(te=v(c()),fe[W]=te),te}function v(L){const H=[],q=[],W=[];for(let oe=0;oe<t;oe++)H[oe]=0,q[oe]=0,W[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:q,attributeDivisors:W,object:L,attributes:{},index:null}}function b(L,H,q,W){const oe=a.attributes,fe=H.attributes;let te=0;const re=q.getAttributes();for(const he in re)if(re[he].location>=0){const Ne=oe[he];let Q=fe[he];if(Q===void 0&&(he==="instanceMatrix"&&L.instanceMatrix&&(Q=L.instanceMatrix),he==="instanceColor"&&L.instanceColor&&(Q=L.instanceColor)),Ne===void 0||Ne.attribute!==Q||Q&&Ne.data!==Q.data)return!0;te++}return a.attributesNum!==te||a.index!==W}function _(L,H,q,W){const oe={},fe=H.attributes;let te=0;const re=q.getAttributes();for(const he in re)if(re[he].location>=0){let Ne=fe[he];Ne===void 0&&(he==="instanceMatrix"&&L.instanceMatrix&&(Ne=L.instanceMatrix),he==="instanceColor"&&L.instanceColor&&(Ne=L.instanceColor));const Q={};Q.attribute=Ne,Ne&&Ne.data&&(Q.data=Ne.data),oe[he]=Q,te++}a.attributes=oe,a.attributesNum=te,a.index=W}function M(){const L=a.newAttributes;for(let H=0,q=L.length;H<q;H++)L[H]=0}function S(L){w(L,0)}function w(L,H){const q=a.newAttributes,W=a.enabledAttributes,oe=a.attributeDivisors;q[L]=1,W[L]===0&&(n.enableVertexAttribArray(L),W[L]=1),oe[L]!==H&&(n.vertexAttribDivisor(L,H),oe[L]=H)}function R(){const L=a.newAttributes,H=a.enabledAttributes;for(let q=0,W=H.length;q<W;q++)H[q]!==L[q]&&(n.disableVertexAttribArray(q),H[q]=0)}function P(L,H,q,W,oe,fe,te){te===!0?n.vertexAttribIPointer(L,H,q,oe,fe):n.vertexAttribPointer(L,H,q,W,oe,fe)}function O(L,H,q,W){M();const oe=W.attributes,fe=q.getAttributes(),te=H.defaultAttributeValues;for(const re in fe){const he=fe[re];if(he.location>=0){let Me=oe[re];if(Me===void 0&&(re==="instanceMatrix"&&L.instanceMatrix&&(Me=L.instanceMatrix),re==="instanceColor"&&L.instanceColor&&(Me=L.instanceColor)),Me!==void 0){const Ne=Me.normalized,Q=Me.itemSize,de=e.get(Me);if(de===void 0)continue;const Ae=de.buffer,We=de.type,bt=de.bytesPerElement,_e=We===n.INT||We===n.UNSIGNED_INT||Me.gpuType===xM;if(Me.isInterleavedBufferAttribute){const Te=Me.data,ut=Te.stride,ve=Me.offset;if(Te.isInstancedInterleavedBuffer){for(let et=0;et<he.locationSize;et++)w(he.location+et,Te.meshPerAttribute);L.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let et=0;et<he.locationSize;et++)S(he.location+et);n.bindBuffer(n.ARRAY_BUFFER,Ae);for(let et=0;et<he.locationSize;et++)P(he.location+et,Q/he.locationSize,We,Ne,ut*bt,(ve+Q/he.locationSize*et)*bt,_e)}else{if(Me.isInstancedBufferAttribute){for(let Te=0;Te<he.locationSize;Te++)w(he.location+Te,Me.meshPerAttribute);L.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let Te=0;Te<he.locationSize;Te++)S(he.location+Te);n.bindBuffer(n.ARRAY_BUFFER,Ae);for(let Te=0;Te<he.locationSize;Te++)P(he.location+Te,Q/he.locationSize,We,Ne,Q*bt,Q/he.locationSize*Te*bt,_e)}}else if(te!==void 0){const Ne=te[re];if(Ne!==void 0)switch(Ne.length){case 2:n.vertexAttrib2fv(he.location,Ne);break;case 3:n.vertexAttrib3fv(he.location,Ne);break;case 4:n.vertexAttrib4fv(he.location,Ne);break;default:n.vertexAttrib1fv(he.location,Ne)}}}}R()}function k(){F();for(const L in i){const H=i[L];for(const q in H){const W=H[q];for(const oe in W)p(W[oe].object),delete W[oe];delete H[q]}delete i[L]}}function B(L){if(i[L.id]===void 0)return;const H=i[L.id];for(const q in H){const W=H[q];for(const oe in W)p(W[oe].object),delete W[oe];delete H[q]}delete i[L.id]}function D(L){for(const H in i){const q=i[H];if(q[L.id]===void 0)continue;const W=q[L.id];for(const oe in W)p(W[oe].object),delete W[oe];delete q[L.id]}}function F(){I(),s=!0,a!==r&&(a=r,h(a.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:F,resetDefaultState:I,dispose:k,releaseStatesOfGeometry:B,releaseStatesOfProgram:D,initAttributes:M,enableAttribute:S,disableUnusedAttributes:R}}function YJ(n,e,t){let i;function r(h){i=h}function a(h,p){n.drawArrays(i,h,p),t.update(p,i,1)}function s(h,p,g){g!==0&&(n.drawArraysInstanced(i,h,p,g),t.update(p,i,g))}function l(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,h,0,p,0,g);let b=0;for(let _=0;_<g;_++)b+=p[_];t.update(b,i,1)}function c(h,p,g,v){if(g===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let _=0;_<h.length;_++)s(h[_],p[_],v[_]);else{b.multiDrawArraysInstancedWEBGL(i,h,0,p,0,v,0,g);let _=0;for(let M=0;M<g;M++)_+=p[M]*v[M];t.update(_,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function KJ(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(D){return!(D!==bs&&i.convert(D)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(D){const F=D===Dc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==Bs&&i.convert(D)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==js&&!F)}function c(D){if(D==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const p=c(h);p!==h&&(Rt("WebGLRenderer:",h,"not supported, using",p,"instead."),h=p);const g=t.logarithmicDepthBuffer===!0,v=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),b=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),P=n.getParameter(n.MAX_VARYING_VECTORS),O=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),k=n.getParameter(n.MAX_SAMPLES),B=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:g,reversedDepthBuffer:v,maxTextures:b,maxVertexTextures:_,maxTextureSize:M,maxCubemapSize:S,maxAttributes:w,maxVertexUniforms:R,maxVaryings:P,maxFragmentUniforms:O,maxSamples:k,samples:B}}function ZJ(n){const e=this;let t=null,i=0,r=!1,a=!1;const s=new Nf,l=new En,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const b=g.length!==0||v||i!==0||r;return r=v,i=g.length,b},this.beginShadows=function(){a=!0,p(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(g,v){t=p(g,v,0)},this.setState=function(g,v,b){const _=g.clippingPlanes,M=g.clipIntersection,S=g.clipShadows,w=n.get(g);if(!r||_===null||_.length===0||a&&!S)a?p(null):h();else{const R=a?0:i,P=R*4;let O=w.clippingState||null;c.value=O,O=p(_,v,P,b);for(let k=0;k!==P;++k)O[k]=t[k];w.clippingState=O,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=R}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,v,b,_){const M=g!==null?g.length:0;let S=null;if(M!==0){if(S=c.value,_!==!0||S===null){const w=b+M*4,R=v.matrixWorldInverse;l.getNormalMatrix(R),(S===null||S.length<w)&&(S=new Float32Array(w));for(let P=0,O=b;P!==M;++P,O+=4)s.copy(g[P]).applyMatrix4(R,l),s.normal.toArray(S,O),S[O+3]=s.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,S}}function QJ(n){let e=new WeakMap;function t(s,l){return l===Vb?s.mapping=Oc:l===jb&&(s.mapping=Td),s}function i(s){if(s&&s.isTexture){const l=s.mapping;if(l===Vb||l===jb)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const h=new VN(c.height);return h.fromEquirectangularTexture(n,s),e.set(s,h),s.addEventListener("dispose",r),t(h.texture,s.mapping)}else return null}}return s}function r(s){const l=s.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const gd=4,BU=[.125,.215,.35,.446,.526,.582],em=20,JJ=256,tb=new Bf,VU=new Lt;let AC=null,TC=0,CC=0,RC=!1;const eee=new ne;class $P{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,a={}){const{size:s=256,position:l=eee}=a;AC=this._renderer.getRenderTarget(),TC=this._renderer.getActiveCubeFace(),CC=this._renderer.getActiveMipmapLevel(),RC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,l),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=GU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=HU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(AC,TC,CC),this._renderer.xr.enabled=RC,e.scissorTest=!1,sv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Oc||e.mapping===Td?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),AC=this._renderer.getRenderTarget(),TC=this._renderer.getActiveCubeFace(),CC=this._renderer.getActiveMipmapLevel(),RC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Xi,minFilter:Xi,generateMipmaps:!1,type:Dc,format:bs,colorSpace:Cd,depthBuffer:!1},r=jU(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=jU(e,t,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=tee(a)),this._blurMaterial=iee(a,e,t),this._ggxMaterial=nee(a,e,t)}return r}_compileMaterial(e){const t=new Wr(new mn,e);this._renderer.compile(t,tb)}_sceneToCubeUV(e,t,i,r,a){const c=new Nr(90,1,t,i),h=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,b=g.toneMapping;g.getClearColor(VU),g.toneMapping=zl,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(r),g.clearDepth(),g.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Wr(new zm,new Bd({name:"PMREM.Background",side:qs,depthWrite:!1,depthTest:!1})));const M=this._backgroundBox,S=M.material;let w=!1;const R=e.background;R?R.isColor&&(S.color.copy(R),e.background=null,w=!0):(S.color.copy(VU),w=!0);for(let P=0;P<6;P++){const O=P%3;O===0?(c.up.set(0,h[P],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+p[P],a.y,a.z)):O===1?(c.up.set(0,0,h[P]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+p[P],a.z)):(c.up.set(0,h[P],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+p[P]));const k=this._cubeSize;sv(r,O*k,P>2?k:0,k,k),g.setRenderTarget(r),w&&g.render(M,c),g.render(e,c)}g.toneMapping=b,g.autoClear=v,e.background=R}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Oc||e.mapping===Td;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=GU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=HU());const a=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const l=a.uniforms;l.envMap.value=e;const c=this._cubeSize;sv(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(s,tb)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodMeshes.length;for(let a=1;a<r;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=i}_applyGGXFilter(e,t,i){const r=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,l=this._lodMeshes[i];l.material=s;const c=s.uniforms,h=i/(this._lodMeshes.length-1),p=t/(this._lodMeshes.length-1),g=Math.sqrt(h*h-p*p),v=0+h*1.25,b=g*v,{_lodMax:_}=this,M=this._sizeLods[i],S=3*M*(i>_-gd?i-_+gd:0),w=4*(this._cubeSize-M);c.envMap.value=e.texture,c.roughness.value=b,c.mipInt.value=_-t,sv(a,S,w,3*M,2*M),r.setRenderTarget(a),r.render(l,tb),c.envMap.value=a.texture,c.roughness.value=0,c.mipInt.value=_-i,sv(e,S,w,3*M,2*M),r.setRenderTarget(e),r.render(l,tb)}_blur(e,t,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,s,l){const c=this._renderer,h=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&Yt("blur direction must be either latitudinal or longitudinal!");const p=3,g=this._lodMeshes[r];g.material=h;const v=h.uniforms,b=this._sizeLods[i]-1,_=isFinite(a)?Math.PI/(2*b):2*Math.PI/(2*em-1),M=a/_,S=isFinite(a)?1+Math.floor(p*M):em;S>em&&Rt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${em}`);const w=[];let R=0;for(let D=0;D<em;++D){const F=D/M,I=Math.exp(-F*F/2);w.push(I),D===0?R+=I:D<S&&(R+=2*I)}for(let D=0;D<w.length;D++)w[D]=w[D]/R;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=w,v.latitudinal.value=s==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:P}=this;v.dTheta.value=_,v.mipInt.value=P-i;const O=this._sizeLods[r],k=3*O*(r>P-gd?r-P+gd:0),B=4*(this._cubeSize-O);sv(t,k,B,3*O,2*O),c.setRenderTarget(t),c.render(g,tb)}}function tee(n){const e=[],t=[],i=[];let r=n;const a=n-gd+1+BU.length;for(let s=0;s<a;s++){const l=Math.pow(2,r);e.push(l);let c=1/l;s>n-gd?c=BU[s-n+gd-1]:s===0&&(c=0),t.push(c);const h=1/(l-2),p=-h,g=1+h,v=[p,p,g,p,g,g,p,p,g,g,p,g],b=6,_=6,M=3,S=2,w=1,R=new Float32Array(M*_*b),P=new Float32Array(S*_*b),O=new Float32Array(w*_*b);for(let B=0;B<b;B++){const D=B%3*2/3-1,F=B>2?0:-1,I=[D,F,0,D+2/3,F,0,D+2/3,F+1,0,D,F,0,D+2/3,F+1,0,D,F+1,0];R.set(I,M*_*B),P.set(v,S*_*B);const L=[B,B,B,B,B,B];O.set(L,w*_*B)}const k=new mn;k.setAttribute("position",new fi(R,M)),k.setAttribute("uv",new fi(P,S)),k.setAttribute("faceIndex",new fi(O,w)),i.push(new Wr(k,null)),r>gd&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function jU(n,e,t){const i=new Zo(n,e,t);return i.texture.mapping=l0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function sv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function nee(n,e,t){return new Bl({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:JJ,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:QM(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Cc,depthTest:!1,depthWrite:!1})}function iee(n,e,t){const i=new Float32Array(em),r=new ne(0,1,0);return new Bl({name:"SphericalGaussianBlur",defines:{n:em,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:QM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Cc,depthTest:!1,depthWrite:!1})}function HU(){return new Bl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:QM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Cc,depthTest:!1,depthWrite:!1})}function GU(){return new Bl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:QM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Cc,depthTest:!1,depthWrite:!1})}function QM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ree(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,h=c===Vb||c===jb,p=c===Oc||c===Td;if(h||p){let g=e.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new $P(n)),g=h?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const b=l.image;return h&&b&&b.height>0||p&&b&&r(b)?(t===null&&(t=new $P(n)),g=h?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",a),g.texture):null}}}return l}function r(l){let c=0;const h=6;for(let p=0;p<h;p++)l[p]!==void 0&&c++;return c===h}function a(l){const c=l.target;c.removeEventListener("dispose",a);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function aee(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Bv("WebGLRenderer: "+i+" extension not supported."),r}}}function see(n,e,t,i){const r={},a=new WeakMap;function s(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const _ in v.attributes)e.remove(v.attributes[_]);v.removeEventListener("dispose",s),delete r[v.id];const b=a.get(v);b&&(e.remove(b),a.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return r[v.id]===!0||(v.addEventListener("dispose",s),r[v.id]=!0,t.memory.geometries++),v}function c(g){const v=g.attributes;for(const b in v)e.update(v[b],n.ARRAY_BUFFER)}function h(g){const v=[],b=g.index,_=g.attributes.position;let M=0;if(b!==null){const R=b.array;M=b.version;for(let P=0,O=R.length;P<O;P+=3){const k=R[P+0],B=R[P+1],D=R[P+2];v.push(k,B,B,D,D,k)}}else if(_!==void 0){const R=_.array;M=_.version;for(let P=0,O=R.length/3-1;P<O;P+=3){const k=P+0,B=P+1,D=P+2;v.push(k,B,B,D,D,k)}}else return;const S=new(m2(v)?BN:FN)(v,1);S.version=M;const w=a.get(g);w&&e.remove(w),a.set(g,S)}function p(g){const v=a.get(g);if(v){const b=g.index;b!==null&&v.version<b.version&&h(g)}else h(g);return a.get(g)}return{get:l,update:c,getWireframeAttribute:p}}function oee(n,e,t){let i;function r(v){i=v}let a,s;function l(v){a=v.type,s=v.bytesPerElement}function c(v,b){n.drawElements(i,b,a,v*s),t.update(b,i,1)}function h(v,b,_){_!==0&&(n.drawElementsInstanced(i,b,a,v*s,_),t.update(b,i,_))}function p(v,b,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,b,0,a,v,0,_);let S=0;for(let w=0;w<_;w++)S+=b[w];t.update(S,i,1)}function g(v,b,_,M){if(_===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let w=0;w<v.length;w++)h(v[w]/s,b[w],M[w]);else{S.multiDrawElementsInstancedWEBGL(i,b,0,a,v,0,M,0,_);let w=0;for(let R=0;R<_;R++)w+=b[R]*M[R];t.update(w,i,1)}}this.setMode=r,this.setIndex=l,this.render=c,this.renderInstances=h,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function lee(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,l){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=l*(a/3);break;case n.LINES:t.lines+=l*(a/2);break;case n.LINE_STRIP:t.lines+=l*(a-1);break;case n.LINE_LOOP:t.lines+=l*a;break;case n.POINTS:t.points+=l*a;break;default:Yt("WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function uee(n,e,t){const i=new WeakMap,r=new Pi;function a(s,l,c){const h=s.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=p!==void 0?p.length:0;let v=i.get(l);if(v===void 0||v.count!==g){let L=function(){F.dispose(),i.delete(l),l.removeEventListener("dispose",L)};var b=L;v!==void 0&&v.texture.dispose();const _=l.morphAttributes.position!==void 0,M=l.morphAttributes.normal!==void 0,S=l.morphAttributes.color!==void 0,w=l.morphAttributes.position||[],R=l.morphAttributes.normal||[],P=l.morphAttributes.color||[];let O=0;_===!0&&(O=1),M===!0&&(O=2),S===!0&&(O=3);let k=l.attributes.position.count*O,B=1;k>e.maxTextureSize&&(B=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const D=new Float32Array(k*B*4*g),F=new RM(D,k,B,g);F.type=js,F.needsUpdate=!0;const I=O*4;for(let H=0;H<g;H++){const q=w[H],W=R[H],oe=P[H],fe=k*B*4*H;for(let te=0;te<q.count;te++){const re=te*I;_===!0&&(r.fromBufferAttribute(q,te),D[fe+re+0]=r.x,D[fe+re+1]=r.y,D[fe+re+2]=r.z,D[fe+re+3]=0),M===!0&&(r.fromBufferAttribute(W,te),D[fe+re+4]=r.x,D[fe+re+5]=r.y,D[fe+re+6]=r.z,D[fe+re+7]=0),S===!0&&(r.fromBufferAttribute(oe,te),D[fe+re+8]=r.x,D[fe+re+9]=r.y,D[fe+re+10]=r.z,D[fe+re+11]=oe.itemSize===4?r.w:1)}}v={count:g,texture:F,size:new Je(k,B)},i.set(l,v),l.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let _=0;for(let S=0;S<h.length;S++)_+=h[S];const M=l.morphTargetsRelative?1:1-_;c.getUniforms().setValue(n,"morphTargetBaseInfluence",M),c.getUniforms().setValue(n,"morphTargetInfluences",h)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:a}}function cee(n,e,t,i){let r=new WeakMap;function a(c){const h=i.render.frame,p=c.geometry,g=e.get(c,p);if(r.get(g)!==h&&(e.update(g),r.set(g,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==h&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,h))),c.isSkinnedMesh){const v=c.skeleton;r.get(v)!==h&&(v.update(),r.set(v,h))}return g}function s(){r=new WeakMap}function l(c){const h=c.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:a,dispose:s}}const fee={[wN]:"LINEAR_TONE_MAPPING",[EN]:"REINHARD_TONE_MAPPING",[MN]:"CINEON_TONE_MAPPING",[yM]:"ACES_FILMIC_TONE_MAPPING",[TN]:"AGX_TONE_MAPPING",[CN]:"NEUTRAL_TONE_MAPPING",[AN]:"CUSTOM_TONE_MAPPING"};function hee(n,e,t,i,r){const a=new Zo(e,t,{type:n,depthBuffer:i,stencilBuffer:r}),s=new Zo(e,t,{type:Dc,depthBuffer:!1,stencilBuffer:!1}),l=new mn;l.setAttribute("position",new Ft([-1,3,0,-1,-1,0,3,-1,0],3)),l.setAttribute("uv",new Ft([0,2,0,0,2,0],2));const c=new JN({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),h=new Wr(l,c),p=new Bf(-1,1,1,-1,0,1);let g=null,v=null,b=!1,_,M=null,S=[],w=!1;this.setSize=function(R,P){a.setSize(R,P),s.setSize(R,P);for(let O=0;O<S.length;O++){const k=S[O];k.setSize&&k.setSize(R,P)}},this.setEffects=function(R){S=R,w=S.length>0&&S[0].isRenderPass===!0;const P=a.width,O=a.height;for(let k=0;k<S.length;k++){const B=S[k];B.setSize&&B.setSize(P,O)}},this.begin=function(R,P){if(b||R.toneMapping===zl&&S.length===0)return!1;if(M=P,P!==null){const O=P.width,k=P.height;(a.width!==O||a.height!==k)&&this.setSize(O,k)}return w===!1&&R.setRenderTarget(a),_=R.toneMapping,R.toneMapping=zl,!0},this.hasRenderPass=function(){return w},this.end=function(R,P){R.toneMapping=_,b=!0;let O=a,k=s;for(let B=0;B<S.length;B++){const D=S[B];if(D.enabled!==!1&&(D.render(R,k,O,P),D.needsSwap!==!1)){const F=O;O=k,k=F}}if(g!==R.outputColorSpace||v!==R.toneMapping){g=R.outputColorSpace,v=R.toneMapping,c.defines={},qn.getTransfer(g)===mi&&(c.defines.SRGB_TRANSFER="");const B=fee[v];B&&(c.defines[B]=""),c.needsUpdate=!0}c.uniforms.tDiffuse.value=O.texture,R.setRenderTarget(M),R.render(h,p),M=null,b=!1},this.isCompositing=function(){return b},this.dispose=function(){a.dispose(),s.dispose(),l.dispose(),c.dispose()}}const x6=new wr,XP=new qv(1,1),_6=new RM,S6=new PM,w6=new Dx,qU=[],WU=[],$U=new Float32Array(16),XU=new Float32Array(9),YU=new Float32Array(4);function f0(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=qU[r];if(a===void 0&&(a=new Float32Array(r),qU[r]=a),e!==0){i.toArray(a,0);for(let s=1,l=0;s!==e;++s)l+=t,n[s].toArray(a,l)}return a}function ia(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ra(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function JM(n,e){let t=WU[e];t===void 0&&(t=new Int32Array(e),WU[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function dee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function pee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ia(t,e))return;n.uniform2fv(this.addr,e),ra(t,e)}}function mee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ia(t,e))return;n.uniform3fv(this.addr,e),ra(t,e)}}function gee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ia(t,e))return;n.uniform4fv(this.addr,e),ra(t,e)}}function vee(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ia(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ra(t,e)}else{if(ia(t,i))return;YU.set(i),n.uniformMatrix2fv(this.addr,!1,YU),ra(t,i)}}function yee(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ia(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ra(t,e)}else{if(ia(t,i))return;XU.set(i),n.uniformMatrix3fv(this.addr,!1,XU),ra(t,i)}}function bee(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ia(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ra(t,e)}else{if(ia(t,i))return;$U.set(i),n.uniformMatrix4fv(this.addr,!1,$U),ra(t,i)}}function xee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _ee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ia(t,e))return;n.uniform2iv(this.addr,e),ra(t,e)}}function See(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ia(t,e))return;n.uniform3iv(this.addr,e),ra(t,e)}}function wee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ia(t,e))return;n.uniform4iv(this.addr,e),ra(t,e)}}function Eee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Mee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ia(t,e))return;n.uniform2uiv(this.addr,e),ra(t,e)}}function Aee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ia(t,e))return;n.uniform3uiv(this.addr,e),ra(t,e)}}function Tee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ia(t,e))return;n.uniform4uiv(this.addr,e),ra(t,e)}}function Cee(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(XP.compareFunction=t.isReversedDepthBuffer()?CM:TM,a=XP):a=x6,t.setTexture2D(e||a,r)}function Ree(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||S6,r)}function Pee(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||w6,r)}function Iee(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||_6,r)}function Nee(n){switch(n){case 5126:return dee;case 35664:return pee;case 35665:return mee;case 35666:return gee;case 35674:return vee;case 35675:return yee;case 35676:return bee;case 5124:case 35670:return xee;case 35667:case 35671:return _ee;case 35668:case 35672:return See;case 35669:case 35673:return wee;case 5125:return Eee;case 36294:return Mee;case 36295:return Aee;case 36296:return Tee;case 35678:case 36198:case 36298:case 36306:case 35682:return Cee;case 35679:case 36299:case 36307:return Ree;case 35680:case 36300:case 36308:case 36293:return Pee;case 36289:case 36303:case 36311:case 36292:return Iee}}function Oee(n,e){n.uniform1fv(this.addr,e)}function Dee(n,e){const t=f0(e,this.size,2);n.uniform2fv(this.addr,t)}function Lee(n,e){const t=f0(e,this.size,3);n.uniform3fv(this.addr,t)}function Uee(n,e){const t=f0(e,this.size,4);n.uniform4fv(this.addr,t)}function kee(n,e){const t=f0(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zee(n,e){const t=f0(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Fee(n,e){const t=f0(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Bee(n,e){n.uniform1iv(this.addr,e)}function Vee(n,e){n.uniform2iv(this.addr,e)}function jee(n,e){n.uniform3iv(this.addr,e)}function Hee(n,e){n.uniform4iv(this.addr,e)}function Gee(n,e){n.uniform1uiv(this.addr,e)}function qee(n,e){n.uniform2uiv(this.addr,e)}function Wee(n,e){n.uniform3uiv(this.addr,e)}function $ee(n,e){n.uniform4uiv(this.addr,e)}function Xee(n,e,t){const i=this.cache,r=e.length,a=JM(t,r);ia(i,a)||(n.uniform1iv(this.addr,a),ra(i,a));let s;this.type===n.SAMPLER_2D_SHADOW?s=XP:s=x6;for(let l=0;l!==r;++l)t.setTexture2D(e[l]||s,a[l])}function Yee(n,e,t){const i=this.cache,r=e.length,a=JM(t,r);ia(i,a)||(n.uniform1iv(this.addr,a),ra(i,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||S6,a[s])}function Kee(n,e,t){const i=this.cache,r=e.length,a=JM(t,r);ia(i,a)||(n.uniform1iv(this.addr,a),ra(i,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||w6,a[s])}function Zee(n,e,t){const i=this.cache,r=e.length,a=JM(t,r);ia(i,a)||(n.uniform1iv(this.addr,a),ra(i,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||_6,a[s])}function Qee(n){switch(n){case 5126:return Oee;case 35664:return Dee;case 35665:return Lee;case 35666:return Uee;case 35674:return kee;case 35675:return zee;case 35676:return Fee;case 5124:case 35670:return Bee;case 35667:case 35671:return Vee;case 35668:case 35672:return jee;case 35669:case 35673:return Hee;case 5125:return Gee;case 36294:return qee;case 36295:return Wee;case 36296:return $ee;case 35678:case 36198:case 36298:case 36306:case 35682:return Xee;case 35679:case 36299:case 36307:return Yee;case 35680:case 36300:case 36308:case 36293:return Kee;case 36289:case 36303:case 36311:case 36292:return Zee}}class Jee{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Nee(t.type)}}class ete{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Qee(t.type)}}class tte{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const l=r[a];l.setValue(e,t[l.id],i)}}}const PC=/(\w+)(\])?(\[|\.)?/g;function KU(n,e){n.seq.push(e),n.map[e.id]=e}function nte(n,e,t){const i=n.name,r=i.length;for(PC.lastIndex=0;;){const a=PC.exec(i),s=PC.lastIndex;let l=a[1];const c=a[2]==="]",h=a[3];if(c&&(l=l|0),h===void 0||h==="["&&s+2===r){KU(t,h===void 0?new Jee(l,n,e):new ete(l,n,e));break}else{let g=t.map[l];g===void 0&&(g=new tte(l),KU(t,g)),t=g}}}class $1{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const l=e.getActiveUniform(t,s),c=e.getUniformLocation(t,l.name);nte(l,c,this)}const r=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(s):a.push(s);r.length>0&&(this.seq=r.concat(a))}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,s=t.length;a!==s;++a){const l=t[a],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function ZU(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const ite=37297;let rte=0;function ate(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){const l=s+1;i.push(`${l===e?">":" "} ${l}: ${t[s]}`)}return i.join(`
`)}const QU=new En;function ste(n){qn._getMatrix(QU,qn.workingColorSpace,n);const e=`mat3( ${QU.elements.map(t=>t.toFixed(4))} )`;switch(qn.getTransfer(n)){case $b:return[e,"LinearTransferOETF"];case mi:return[e,"sRGBTransferOETF"];default:return Rt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function JU(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const l=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+ate(n.getShaderSource(e),l)}else return a}function ote(n,e){const t=ste(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const lte={[wN]:"Linear",[EN]:"Reinhard",[MN]:"Cineon",[yM]:"ACESFilmic",[TN]:"AgX",[CN]:"Neutral",[AN]:"Custom"};function ute(n,e){const t=lte[e];return t===void 0?(Rt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const y1=new ne;function cte(){qn.getLuminanceCoefficients(y1);const n=y1.x.toFixed(4),e=y1.y.toFixed(4),t=y1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function fte(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(pb).join(`
`)}function hte(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function dte(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),s=a.name;let l=1;a.type===n.FLOAT_MAT2&&(l=2),a.type===n.FLOAT_MAT3&&(l=3),a.type===n.FLOAT_MAT4&&(l=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:l}}return t}function pb(n){return n!==""}function ek(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function tk(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const pte=/^[ \t]*#include +<([\w\d./]+)>/gm;function YP(n){return n.replace(pte,gte)}const mte=new Map;function gte(n,e){let t=Nn[e];if(t===void 0){const i=mte.get(e);if(i!==void 0)t=Nn[i],Rt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return YP(t)}const vte=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nk(n){return n.replace(vte,yte)}function yte(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function ik(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const bte={[Cv]:"SHADOWMAP_TYPE_PCF",[tm]:"SHADOWMAP_TYPE_VSM"};function xte(n){return bte[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const _te={[Oc]:"ENVMAP_TYPE_CUBE",[Td]:"ENVMAP_TYPE_CUBE",[l0]:"ENVMAP_TYPE_CUBE_UV"};function Ste(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":_te[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const wte={[Td]:"ENVMAP_MODE_REFRACTION"};function Ete(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":wte[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Mte={[Nx]:"ENVMAP_BLENDING_MULTIPLY",[t2]:"ENVMAP_BLENDING_MIX",[n2]:"ENVMAP_BLENDING_ADD"};function Ate(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":Mte[n.combine]||"ENVMAP_BLENDING_NONE"}function Tte(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function Cte(n,e,t,i){const r=n.getContext(),a=t.defines;let s=t.vertexShader,l=t.fragmentShader;const c=xte(t),h=Ste(t),p=Ete(t),g=Ate(t),v=Tte(t),b=fte(t),_=hte(a),M=r.createProgram();let S,w,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(pb).join(`
`),S.length>0&&(S+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(pb).join(`
`),w.length>0&&(w+=`
`)):(S=[ik(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(pb).join(`
`),w=[ik(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==zl?"#define TONE_MAPPING":"",t.toneMapping!==zl?Nn.tonemapping_pars_fragment:"",t.toneMapping!==zl?ute("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Nn.colorspace_pars_fragment,ote("linearToOutputTexel",t.outputColorSpace),cte(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(pb).join(`
`)),s=YP(s),s=ek(s,t),s=tk(s,t),l=YP(l),l=ek(l,t),l=tk(l,t),s=nk(s),l=nk(l),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,S=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,w=["#define varying in",t.glslVersion===zP?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===zP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const P=R+S+s,O=R+w+l,k=ZU(r,r.VERTEX_SHADER,P),B=ZU(r,r.FRAGMENT_SHADER,O);r.attachShader(M,k),r.attachShader(M,B),t.index0AttributeName!==void 0?r.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M);function D(H){if(n.debug.checkShaderErrors){const q=r.getProgramInfoLog(M)||"",W=r.getShaderInfoLog(k)||"",oe=r.getShaderInfoLog(B)||"",fe=q.trim(),te=W.trim(),re=oe.trim();let he=!0,Me=!0;if(r.getProgramParameter(M,r.LINK_STATUS)===!1)if(he=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,M,k,B);else{const Ne=JU(r,k,"vertex"),Q=JU(r,B,"fragment");Yt("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+fe+`
`+Ne+`
`+Q)}else fe!==""?Rt("WebGLProgram: Program Info Log:",fe):(te===""||re==="")&&(Me=!1);Me&&(H.diagnostics={runnable:he,programLog:fe,vertexShader:{log:te,prefix:S},fragmentShader:{log:re,prefix:w}})}r.deleteShader(k),r.deleteShader(B),F=new $1(r,M),I=dte(r,M)}let F;this.getUniforms=function(){return F===void 0&&D(this),F};let I;this.getAttributes=function(){return I===void 0&&D(this),I};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(M,ite)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=rte++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=k,this.fragmentShader=B,this}let Rte=0;class Pte{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Ite(e),t.set(e,i)),i}}class Ite{constructor(e){this.id=Rte++,this.code=e,this.usedTimes=0}}function Nte(n,e,t,i,r,a,s){const l=new jv,c=new Pte,h=new Set,p=[],g=new Map,v=r.logarithmicDepthBuffer;let b=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(I){return h.add(I),I===0?"uv":`uv${I}`}function S(I,L,H,q,W){const oe=q.fog,fe=W.geometry,te=I.isMeshStandardMaterial?q.environment:null,re=(I.isMeshStandardMaterial?t:e).get(I.envMap||te),he=re&&re.mapping===l0?re.image.height:null,Me=_[I.type];I.precision!==null&&(b=r.getMaxPrecision(I.precision),b!==I.precision&&Rt("WebGLProgram.getParameters:",I.precision,"not supported, using",b,"instead."));const Ne=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,Q=Ne!==void 0?Ne.length:0;let de=0;fe.morphAttributes.position!==void 0&&(de=1),fe.morphAttributes.normal!==void 0&&(de=2),fe.morphAttributes.color!==void 0&&(de=3);let Ae,We,bt,_e;if(Me){const Jt=bu[Me];Ae=Jt.vertexShader,We=Jt.fragmentShader}else Ae=I.vertexShader,We=I.fragmentShader,c.update(I),bt=c.getVertexShaderID(I),_e=c.getFragmentShaderID(I);const Te=n.getRenderTarget(),ut=n.state.buffers.depth.getReversed(),ve=W.isInstancedMesh===!0,et=W.isBatchedMesh===!0,At=!!I.map,He=!!I.matcap,Ct=!!re,Oe=!!I.aoMap,Ze=!!I.lightMap,je=!!I.bumpMap,ht=!!I.normalMap,ie=!!I.displacementMap,Mt=!!I.emissiveMap,gt=!!I.metalnessMap,Ut=!!I.roughnessMap,vt=I.anisotropy>0,J=I.clearcoat>0,X=I.dispersion>0,pe=I.iridescence>0,ke=I.sheen>0,Ye=I.transmission>0,Le=vt&&!!I.anisotropyMap,Tt=J&&!!I.clearcoatMap,le=J&&!!I.clearcoatNormalMap,Ee=J&&!!I.clearcoatRoughnessMap,st=pe&&!!I.iridescenceMap,Ge=pe&&!!I.iridescenceThicknessMap,Xe=ke&&!!I.sheenColorMap,ft=ke&&!!I.sheenRoughnessMap,ae=!!I.specularMap,ye=!!I.specularColorMap,dt=!!I.specularIntensityMap,se=Ye&&!!I.transmissionMap,rt=Ye&&!!I.thicknessMap,nt=!!I.gradientMap,ot=!!I.alphaMap,it=I.alphaTest>0,$e=!!I.alphaHash,lt=!!I.extensions;let Ht=zl;I.toneMapped&&(Te===null||Te.isXRRenderTarget===!0)&&(Ht=n.toneMapping);const cn={shaderID:Me,shaderType:I.type,shaderName:I.name,vertexShader:Ae,fragmentShader:We,defines:I.defines,customVertexShaderID:bt,customFragmentShaderID:_e,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:b,batching:et,batchingColor:et&&W._colorsTexture!==null,instancing:ve,instancingColor:ve&&W.instanceColor!==null,instancingMorph:ve&&W.morphTexture!==null,outputColorSpace:Te===null?n.outputColorSpace:Te.isXRRenderTarget===!0?Te.texture.colorSpace:Cd,alphaToCoverage:!!I.alphaToCoverage,map:At,matcap:He,envMap:Ct,envMapMode:Ct&&re.mapping,envMapCubeUVHeight:he,aoMap:Oe,lightMap:Ze,bumpMap:je,normalMap:ht,displacementMap:ie,emissiveMap:Mt,normalMapObjectSpace:ht&&I.normalMapType===l2,normalMapTangentSpace:ht&&I.normalMapType===Fd,metalnessMap:gt,roughnessMap:Ut,anisotropy:vt,anisotropyMap:Le,clearcoat:J,clearcoatMap:Tt,clearcoatNormalMap:le,clearcoatRoughnessMap:Ee,dispersion:X,iridescence:pe,iridescenceMap:st,iridescenceThicknessMap:Ge,sheen:ke,sheenColorMap:Xe,sheenRoughnessMap:ft,specularMap:ae,specularColorMap:ye,specularIntensityMap:dt,transmission:Ye,transmissionMap:se,thicknessMap:rt,gradientMap:nt,opaque:I.transparent===!1&&I.blending===fm&&I.alphaToCoverage===!1,alphaMap:ot,alphaTest:it,alphaHash:$e,combine:I.combine,mapUv:At&&M(I.map.channel),aoMapUv:Oe&&M(I.aoMap.channel),lightMapUv:Ze&&M(I.lightMap.channel),bumpMapUv:je&&M(I.bumpMap.channel),normalMapUv:ht&&M(I.normalMap.channel),displacementMapUv:ie&&M(I.displacementMap.channel),emissiveMapUv:Mt&&M(I.emissiveMap.channel),metalnessMapUv:gt&&M(I.metalnessMap.channel),roughnessMapUv:Ut&&M(I.roughnessMap.channel),anisotropyMapUv:Le&&M(I.anisotropyMap.channel),clearcoatMapUv:Tt&&M(I.clearcoatMap.channel),clearcoatNormalMapUv:le&&M(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ee&&M(I.clearcoatRoughnessMap.channel),iridescenceMapUv:st&&M(I.iridescenceMap.channel),iridescenceThicknessMapUv:Ge&&M(I.iridescenceThicknessMap.channel),sheenColorMapUv:Xe&&M(I.sheenColorMap.channel),sheenRoughnessMapUv:ft&&M(I.sheenRoughnessMap.channel),specularMapUv:ae&&M(I.specularMap.channel),specularColorMapUv:ye&&M(I.specularColorMap.channel),specularIntensityMapUv:dt&&M(I.specularIntensityMap.channel),transmissionMapUv:se&&M(I.transmissionMap.channel),thicknessMapUv:rt&&M(I.thicknessMap.channel),alphaMapUv:ot&&M(I.alphaMap.channel),vertexTangents:!!fe.attributes.tangent&&(ht||vt),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!fe.attributes.color&&fe.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!fe.attributes.uv&&(At||ot),fog:!!oe,useFog:I.fog===!0,fogExp2:!!oe&&oe.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:ut,skinning:W.isSkinnedMesh===!0,morphTargets:fe.morphAttributes.position!==void 0,morphNormals:fe.morphAttributes.normal!==void 0,morphColors:fe.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:de,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ht,decodeVideoTexture:At&&I.map.isVideoTexture===!0&&qn.getTransfer(I.map.colorSpace)===mi,decodeVideoTextureEmissive:Mt&&I.emissiveMap.isVideoTexture===!0&&qn.getTransfer(I.emissiveMap.colorSpace)===mi,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===_c,flipSided:I.side===qs,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:lt&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(lt&&I.extensions.multiDraw===!0||et)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return cn.vertexUv1s=h.has(1),cn.vertexUv2s=h.has(2),cn.vertexUv3s=h.has(3),h.clear(),cn}function w(I){const L=[];if(I.shaderID?L.push(I.shaderID):(L.push(I.customVertexShaderID),L.push(I.customFragmentShaderID)),I.defines!==void 0)for(const H in I.defines)L.push(H),L.push(I.defines[H]);return I.isRawShaderMaterial===!1&&(R(L,I),P(L,I),L.push(n.outputColorSpace)),L.push(I.customProgramCacheKey),L.join()}function R(I,L){I.push(L.precision),I.push(L.outputColorSpace),I.push(L.envMapMode),I.push(L.envMapCubeUVHeight),I.push(L.mapUv),I.push(L.alphaMapUv),I.push(L.lightMapUv),I.push(L.aoMapUv),I.push(L.bumpMapUv),I.push(L.normalMapUv),I.push(L.displacementMapUv),I.push(L.emissiveMapUv),I.push(L.metalnessMapUv),I.push(L.roughnessMapUv),I.push(L.anisotropyMapUv),I.push(L.clearcoatMapUv),I.push(L.clearcoatNormalMapUv),I.push(L.clearcoatRoughnessMapUv),I.push(L.iridescenceMapUv),I.push(L.iridescenceThicknessMapUv),I.push(L.sheenColorMapUv),I.push(L.sheenRoughnessMapUv),I.push(L.specularMapUv),I.push(L.specularColorMapUv),I.push(L.specularIntensityMapUv),I.push(L.transmissionMapUv),I.push(L.thicknessMapUv),I.push(L.combine),I.push(L.fogExp2),I.push(L.sizeAttenuation),I.push(L.morphTargetsCount),I.push(L.morphAttributeCount),I.push(L.numDirLights),I.push(L.numPointLights),I.push(L.numSpotLights),I.push(L.numSpotLightMaps),I.push(L.numHemiLights),I.push(L.numRectAreaLights),I.push(L.numDirLightShadows),I.push(L.numPointLightShadows),I.push(L.numSpotLightShadows),I.push(L.numSpotLightShadowsWithMaps),I.push(L.numLightProbes),I.push(L.shadowMapType),I.push(L.toneMapping),I.push(L.numClippingPlanes),I.push(L.numClipIntersection),I.push(L.depthPacking)}function P(I,L){l.disableAll(),L.instancing&&l.enable(0),L.instancingColor&&l.enable(1),L.instancingMorph&&l.enable(2),L.matcap&&l.enable(3),L.envMap&&l.enable(4),L.normalMapObjectSpace&&l.enable(5),L.normalMapTangentSpace&&l.enable(6),L.clearcoat&&l.enable(7),L.iridescence&&l.enable(8),L.alphaTest&&l.enable(9),L.vertexColors&&l.enable(10),L.vertexAlphas&&l.enable(11),L.vertexUv1s&&l.enable(12),L.vertexUv2s&&l.enable(13),L.vertexUv3s&&l.enable(14),L.vertexTangents&&l.enable(15),L.anisotropy&&l.enable(16),L.alphaHash&&l.enable(17),L.batching&&l.enable(18),L.dispersion&&l.enable(19),L.batchingColor&&l.enable(20),L.gradientMap&&l.enable(21),I.push(l.mask),l.disableAll(),L.fog&&l.enable(0),L.useFog&&l.enable(1),L.flatShading&&l.enable(2),L.logarithmicDepthBuffer&&l.enable(3),L.reversedDepthBuffer&&l.enable(4),L.skinning&&l.enable(5),L.morphTargets&&l.enable(6),L.morphNormals&&l.enable(7),L.morphColors&&l.enable(8),L.premultipliedAlpha&&l.enable(9),L.shadowMapEnabled&&l.enable(10),L.doubleSided&&l.enable(11),L.flipSided&&l.enable(12),L.useDepthPacking&&l.enable(13),L.dithering&&l.enable(14),L.transmission&&l.enable(15),L.sheen&&l.enable(16),L.opaque&&l.enable(17),L.pointsUvs&&l.enable(18),L.decodeVideoTexture&&l.enable(19),L.decodeVideoTextureEmissive&&l.enable(20),L.alphaToCoverage&&l.enable(21),I.push(l.mask)}function O(I){const L=_[I.type];let H;if(L){const q=bu[L];H=S2.clone(q.uniforms)}else H=I.uniforms;return H}function k(I,L){let H=g.get(L);return H!==void 0?++H.usedTimes:(H=new Cte(n,L,I,a),p.push(H),g.set(L,H)),H}function B(I){if(--I.usedTimes===0){const L=p.indexOf(I);p[L]=p[p.length-1],p.pop(),g.delete(I.cacheKey),I.destroy()}}function D(I){c.remove(I)}function F(){c.dispose()}return{getParameters:S,getProgramCacheKey:w,getUniforms:O,acquireProgram:k,releaseProgram:B,releaseShaderCache:D,programs:p,dispose:F}}function Ote(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let l=n.get(s);return l===void 0&&(l={},n.set(s,l)),l}function i(s){n.delete(s)}function r(s,l,c){n.get(s)[l]=c}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function Dte(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function rk(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function ak(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function s(g,v,b,_,M,S){let w=n[e];return w===void 0?(w={id:g.id,object:g,geometry:v,material:b,groupOrder:_,renderOrder:g.renderOrder,z:M,group:S},n[e]=w):(w.id=g.id,w.object=g,w.geometry=v,w.material=b,w.groupOrder=_,w.renderOrder=g.renderOrder,w.z=M,w.group=S),e++,w}function l(g,v,b,_,M,S){const w=s(g,v,b,_,M,S);b.transmission>0?i.push(w):b.transparent===!0?r.push(w):t.push(w)}function c(g,v,b,_,M,S){const w=s(g,v,b,_,M,S);b.transmission>0?i.unshift(w):b.transparent===!0?r.unshift(w):t.unshift(w)}function h(g,v){t.length>1&&t.sort(g||Dte),i.length>1&&i.sort(v||rk),r.length>1&&r.sort(v||rk)}function p(){for(let g=e,v=n.length;g<v;g++){const b=n[g];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:l,unshift:c,finish:p,sort:h}}function Lte(){let n=new WeakMap;function e(i,r){const a=n.get(i);let s;return a===void 0?(s=new ak,n.set(i,[s])):r>=a.length?(s=new ak,a.push(s)):s=a[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Ute(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ne,color:new Lt};break;case"SpotLight":t={position:new ne,direction:new ne,color:new Lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ne,color:new Lt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ne,skyColor:new Lt,groundColor:new Lt};break;case"RectAreaLight":t={color:new Lt,position:new ne,halfWidth:new ne,halfHeight:new ne};break}return n[e.id]=t,t}}}function kte(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let zte=0;function Fte(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Bte(n){const e=new Ute,t=kte(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new ne);const r=new ne,a=new pn,s=new pn;function l(h){let p=0,g=0,v=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let b=0,_=0,M=0,S=0,w=0,R=0,P=0,O=0,k=0,B=0,D=0;h.sort(Fte);for(let I=0,L=h.length;I<L;I++){const H=h[I],q=H.color,W=H.intensity,oe=H.distance;let fe=null;if(H.shadow&&H.shadow.map&&(H.shadow.map.texture.format===_m?fe=H.shadow.map.texture:fe=H.shadow.map.depthTexture||H.shadow.map.texture),H.isAmbientLight)p+=q.r*W,g+=q.g*W,v+=q.b*W;else if(H.isLightProbe){for(let te=0;te<9;te++)i.probe[te].addScaledVector(H.sh.coefficients[te],W);D++}else if(H.isDirectionalLight){const te=e.get(H);if(te.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){const re=H.shadow,he=t.get(H);he.shadowIntensity=re.intensity,he.shadowBias=re.bias,he.shadowNormalBias=re.normalBias,he.shadowRadius=re.radius,he.shadowMapSize=re.mapSize,i.directionalShadow[b]=he,i.directionalShadowMap[b]=fe,i.directionalShadowMatrix[b]=H.shadow.matrix,R++}i.directional[b]=te,b++}else if(H.isSpotLight){const te=e.get(H);te.position.setFromMatrixPosition(H.matrixWorld),te.color.copy(q).multiplyScalar(W),te.distance=oe,te.coneCos=Math.cos(H.angle),te.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),te.decay=H.decay,i.spot[M]=te;const re=H.shadow;if(H.map&&(i.spotLightMap[k]=H.map,k++,re.updateMatrices(H),H.castShadow&&B++),i.spotLightMatrix[M]=re.matrix,H.castShadow){const he=t.get(H);he.shadowIntensity=re.intensity,he.shadowBias=re.bias,he.shadowNormalBias=re.normalBias,he.shadowRadius=re.radius,he.shadowMapSize=re.mapSize,i.spotShadow[M]=he,i.spotShadowMap[M]=fe,O++}M++}else if(H.isRectAreaLight){const te=e.get(H);te.color.copy(q).multiplyScalar(W),te.halfWidth.set(H.width*.5,0,0),te.halfHeight.set(0,H.height*.5,0),i.rectArea[S]=te,S++}else if(H.isPointLight){const te=e.get(H);if(te.color.copy(H.color).multiplyScalar(H.intensity),te.distance=H.distance,te.decay=H.decay,H.castShadow){const re=H.shadow,he=t.get(H);he.shadowIntensity=re.intensity,he.shadowBias=re.bias,he.shadowNormalBias=re.normalBias,he.shadowRadius=re.radius,he.shadowMapSize=re.mapSize,he.shadowCameraNear=re.camera.near,he.shadowCameraFar=re.camera.far,i.pointShadow[_]=he,i.pointShadowMap[_]=fe,i.pointShadowMatrix[_]=H.shadow.matrix,P++}i.point[_]=te,_++}else if(H.isHemisphereLight){const te=e.get(H);te.skyColor.copy(H.color).multiplyScalar(W),te.groundColor.copy(H.groundColor).multiplyScalar(W),i.hemi[w]=te,w++}}S>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Nt.LTC_FLOAT_1,i.rectAreaLTC2=Nt.LTC_FLOAT_2):(i.rectAreaLTC1=Nt.LTC_HALF_1,i.rectAreaLTC2=Nt.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=g,i.ambient[2]=v;const F=i.hash;(F.directionalLength!==b||F.pointLength!==_||F.spotLength!==M||F.rectAreaLength!==S||F.hemiLength!==w||F.numDirectionalShadows!==R||F.numPointShadows!==P||F.numSpotShadows!==O||F.numSpotMaps!==k||F.numLightProbes!==D)&&(i.directional.length=b,i.spot.length=M,i.rectArea.length=S,i.point.length=_,i.hemi.length=w,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=P,i.pointShadowMap.length=P,i.spotShadow.length=O,i.spotShadowMap.length=O,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=P,i.spotLightMatrix.length=O+k-B,i.spotLightMap.length=k,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=D,F.directionalLength=b,F.pointLength=_,F.spotLength=M,F.rectAreaLength=S,F.hemiLength=w,F.numDirectionalShadows=R,F.numPointShadows=P,F.numSpotShadows=O,F.numSpotMaps=k,F.numLightProbes=D,i.version=zte++)}function c(h,p){let g=0,v=0,b=0,_=0,M=0;const S=p.matrixWorldInverse;for(let w=0,R=h.length;w<R;w++){const P=h[w];if(P.isDirectionalLight){const O=i.directional[g];O.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(S),g++}else if(P.isSpotLight){const O=i.spot[b];O.position.setFromMatrixPosition(P.matrixWorld),O.position.applyMatrix4(S),O.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(S),b++}else if(P.isRectAreaLight){const O=i.rectArea[_];O.position.setFromMatrixPosition(P.matrixWorld),O.position.applyMatrix4(S),s.identity(),a.copy(P.matrixWorld),a.premultiply(S),s.extractRotation(a),O.halfWidth.set(P.width*.5,0,0),O.halfHeight.set(0,P.height*.5,0),O.halfWidth.applyMatrix4(s),O.halfHeight.applyMatrix4(s),_++}else if(P.isPointLight){const O=i.point[v];O.position.setFromMatrixPosition(P.matrixWorld),O.position.applyMatrix4(S),v++}else if(P.isHemisphereLight){const O=i.hemi[M];O.direction.setFromMatrixPosition(P.matrixWorld),O.direction.transformDirection(S),M++}}}return{setup:l,setupView:c,state:i}}function sk(n){const e=new Bte(n),t=[],i=[];function r(p){h.camera=p,t.length=0,i.length=0}function a(p){t.push(p)}function s(p){i.push(p)}function l(){e.setup(t)}function c(p){e.setupView(t,p)}const h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function Vte(n){let e=new WeakMap;function t(r,a=0){const s=e.get(r);let l;return s===void 0?(l=new sk(n),e.set(r,[l])):a>=s.length?(l=new sk(n),s.push(l)):l=s[a],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const jte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Hte=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Gte=[new ne(1,0,0),new ne(-1,0,0),new ne(0,1,0),new ne(0,-1,0),new ne(0,0,1),new ne(0,0,-1)],qte=[new ne(0,-1,0),new ne(0,-1,0),new ne(0,0,1),new ne(0,0,-1),new ne(0,-1,0),new ne(0,-1,0)],ok=new pn,nb=new ne,IC=new ne;function Wte(n,e,t){let i=new u0;const r=new Je,a=new Je,s=new Pi,l=new tO,c=new nO,h={},p=t.maxTextureSize,g={[Hf]:qs,[qs]:Hf,[_c]:_c},v=new Bl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:jte,fragmentShader:Hte}),b=v.clone();b.defines.HORIZONTAL_PASS=1;const _=new mn;_.setAttribute("position",new fi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Wr(_,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Cv;let w=this.type;this.render=function(B,D,F){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||B.length===0)return;B.type===wb&&(Rt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),B.type=Cv);const I=n.getRenderTarget(),L=n.getActiveCubeFace(),H=n.getActiveMipmapLevel(),q=n.state;q.setBlending(Cc),q.buffers.depth.getReversed()===!0?q.buffers.color.setClear(0,0,0,0):q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);const W=w!==this.type;W&&D.traverse(function(oe){oe.material&&(Array.isArray(oe.material)?oe.material.forEach(fe=>fe.needsUpdate=!0):oe.material.needsUpdate=!0)});for(let oe=0,fe=B.length;oe<fe;oe++){const te=B[oe],re=te.shadow;if(re===void 0){Rt("WebGLShadowMap:",te,"has no shadow.");continue}if(re.autoUpdate===!1&&re.needsUpdate===!1)continue;r.copy(re.mapSize);const he=re.getFrameExtents();if(r.multiply(he),a.copy(re.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(a.x=Math.floor(p/he.x),r.x=a.x*he.x,re.mapSize.x=a.x),r.y>p&&(a.y=Math.floor(p/he.y),r.y=a.y*he.y,re.mapSize.y=a.y)),re.map===null||W===!0){if(re.map!==null&&(re.map.depthTexture!==null&&(re.map.depthTexture.dispose(),re.map.depthTexture=null),re.map.dispose()),this.type===tm){if(te.isPointLight){Rt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}re.map=new Zo(r.x,r.y,{format:_m,type:Dc,minFilter:Xi,magFilter:Xi,generateMipmaps:!1}),re.map.texture.name=te.name+".shadowMap",re.map.depthTexture=new qv(r.x,r.y,js),re.map.depthTexture.name=te.name+".shadowMapDepth",re.map.depthTexture.format=Lc,re.map.depthTexture.compareFunction=null,re.map.depthTexture.minFilter=Or,re.map.depthTexture.magFilter=Or}else{te.isPointLight?(re.map=new VN(r.x),re.map.depthTexture=new O2(r.x,Fl)):(re.map=new Zo(r.x,r.y),re.map.depthTexture=new qv(r.x,r.y,Fl)),re.map.depthTexture.name=te.name+".shadowMap",re.map.depthTexture.format=Lc;const Ne=n.state.buffers.depth.getReversed();this.type===Cv?(re.map.depthTexture.compareFunction=Ne?CM:TM,re.map.depthTexture.minFilter=Xi,re.map.depthTexture.magFilter=Xi):(re.map.depthTexture.compareFunction=null,re.map.depthTexture.minFilter=Or,re.map.depthTexture.magFilter=Or)}re.camera.updateProjectionMatrix()}const Me=re.map.isWebGLCubeRenderTarget?6:1;for(let Ne=0;Ne<Me;Ne++){if(re.map.isWebGLCubeRenderTarget)n.setRenderTarget(re.map,Ne),n.clear();else{Ne===0&&(n.setRenderTarget(re.map),n.clear());const Q=re.getViewport(Ne);s.set(a.x*Q.x,a.y*Q.y,a.x*Q.z,a.y*Q.w),q.viewport(s)}if(te.isPointLight){const Q=re.camera,de=re.matrix,Ae=te.distance||Q.far;Ae!==Q.far&&(Q.far=Ae,Q.updateProjectionMatrix()),nb.setFromMatrixPosition(te.matrixWorld),Q.position.copy(nb),IC.copy(Q.position),IC.add(Gte[Ne]),Q.up.copy(qte[Ne]),Q.lookAt(IC),Q.updateMatrixWorld(),de.makeTranslation(-nb.x,-nb.y,-nb.z),ok.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),re._frustum.setFromProjectionMatrix(ok,Q.coordinateSystem,Q.reversedDepth)}else re.updateMatrices(te);i=re.getFrustum(),O(D,F,re.camera,te,this.type)}re.isPointLightShadow!==!0&&this.type===tm&&R(re,F),re.needsUpdate=!1}w=this.type,S.needsUpdate=!1,n.setRenderTarget(I,L,H)};function R(B,D){const F=e.update(M);v.defines.VSM_SAMPLES!==B.blurSamples&&(v.defines.VSM_SAMPLES=B.blurSamples,b.defines.VSM_SAMPLES=B.blurSamples,v.needsUpdate=!0,b.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Zo(r.x,r.y,{format:_m,type:Dc})),v.uniforms.shadow_pass.value=B.map.depthTexture,v.uniforms.resolution.value=B.mapSize,v.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(D,null,F,v,M,null),b.uniforms.shadow_pass.value=B.mapPass.texture,b.uniforms.resolution.value=B.mapSize,b.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(D,null,F,b,M,null)}function P(B,D,F,I){let L=null;const H=F.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(H!==void 0)L=H;else if(L=F.isPointLight===!0?c:l,n.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0||D.alphaToCoverage===!0){const q=L.uuid,W=D.uuid;let oe=h[q];oe===void 0&&(oe={},h[q]=oe);let fe=oe[W];fe===void 0&&(fe=L.clone(),oe[W]=fe,D.addEventListener("dispose",k)),L=fe}if(L.visible=D.visible,L.wireframe=D.wireframe,I===tm?L.side=D.shadowSide!==null?D.shadowSide:D.side:L.side=D.shadowSide!==null?D.shadowSide:g[D.side],L.alphaMap=D.alphaMap,L.alphaTest=D.alphaToCoverage===!0?.5:D.alphaTest,L.map=D.map,L.clipShadows=D.clipShadows,L.clippingPlanes=D.clippingPlanes,L.clipIntersection=D.clipIntersection,L.displacementMap=D.displacementMap,L.displacementScale=D.displacementScale,L.displacementBias=D.displacementBias,L.wireframeLinewidth=D.wireframeLinewidth,L.linewidth=D.linewidth,F.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const q=n.properties.get(L);q.light=F}return L}function O(B,D,F,I,L){if(B.visible===!1)return;if(B.layers.test(D.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&L===tm)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,B.matrixWorld);const W=e.update(B),oe=B.material;if(Array.isArray(oe)){const fe=W.groups;for(let te=0,re=fe.length;te<re;te++){const he=fe[te],Me=oe[he.materialIndex];if(Me&&Me.visible){const Ne=P(B,Me,I,L);B.onBeforeShadow(n,B,D,F,W,Ne,he),n.renderBufferDirect(F,null,W,Ne,B,he),B.onAfterShadow(n,B,D,F,W,Ne,he)}}}else if(oe.visible){const fe=P(B,oe,I,L);B.onBeforeShadow(n,B,D,F,W,fe,null),n.renderBufferDirect(F,null,W,fe,B,null),B.onAfterShadow(n,B,D,F,W,fe,null)}}const q=B.children;for(let W=0,oe=q.length;W<oe;W++)O(q[W],D,F,I,L)}function k(B){B.target.removeEventListener("dispose",k);for(const F in h){const I=h[F],L=B.target.uuid;L in I&&(I[L].dispose(),delete I[L])}}}const $te={[hw]:dw,[pw]:vw,[mw]:yw,[xm]:gw,[dw]:hw,[vw]:pw,[yw]:mw,[gw]:xm};function Xte(n,e){function t(){let se=!1;const rt=new Pi;let nt=null;const ot=new Pi(0,0,0,0);return{setMask:function(it){nt!==it&&!se&&(n.colorMask(it,it,it,it),nt=it)},setLocked:function(it){se=it},setClear:function(it,$e,lt,Ht,cn){cn===!0&&(it*=Ht,$e*=Ht,lt*=Ht),rt.set(it,$e,lt,Ht),ot.equals(rt)===!1&&(n.clearColor(it,$e,lt,Ht),ot.copy(rt))},reset:function(){se=!1,nt=null,ot.set(-1,0,0,0)}}}function i(){let se=!1,rt=!1,nt=null,ot=null,it=null;return{setReversed:function($e){if(rt!==$e){const lt=e.get("EXT_clip_control");$e?lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.ZERO_TO_ONE_EXT):lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.NEGATIVE_ONE_TO_ONE_EXT),rt=$e;const Ht=it;it=null,this.setClear(Ht)}},getReversed:function(){return rt},setTest:function($e){$e?Te(n.DEPTH_TEST):ut(n.DEPTH_TEST)},setMask:function($e){nt!==$e&&!se&&(n.depthMask($e),nt=$e)},setFunc:function($e){if(rt&&($e=$te[$e]),ot!==$e){switch($e){case hw:n.depthFunc(n.NEVER);break;case dw:n.depthFunc(n.ALWAYS);break;case pw:n.depthFunc(n.LESS);break;case xm:n.depthFunc(n.LEQUAL);break;case mw:n.depthFunc(n.EQUAL);break;case gw:n.depthFunc(n.GEQUAL);break;case vw:n.depthFunc(n.GREATER);break;case yw:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ot=$e}},setLocked:function($e){se=$e},setClear:function($e){it!==$e&&(rt&&($e=1-$e),n.clearDepth($e),it=$e)},reset:function(){se=!1,nt=null,ot=null,it=null,rt=!1}}}function r(){let se=!1,rt=null,nt=null,ot=null,it=null,$e=null,lt=null,Ht=null,cn=null;return{setTest:function(Jt){se||(Jt?Te(n.STENCIL_TEST):ut(n.STENCIL_TEST))},setMask:function(Jt){rt!==Jt&&!se&&(n.stencilMask(Jt),rt=Jt)},setFunc:function(Jt,si,ar){(nt!==Jt||ot!==si||it!==ar)&&(n.stencilFunc(Jt,si,ar),nt=Jt,ot=si,it=ar)},setOp:function(Jt,si,ar){($e!==Jt||lt!==si||Ht!==ar)&&(n.stencilOp(Jt,si,ar),$e=Jt,lt=si,Ht=ar)},setLocked:function(Jt){se=Jt},setClear:function(Jt){cn!==Jt&&(n.clearStencil(Jt),cn=Jt)},reset:function(){se=!1,rt=null,nt=null,ot=null,it=null,$e=null,lt=null,Ht=null,cn=null}}}const a=new t,s=new i,l=new r,c=new WeakMap,h=new WeakMap;let p={},g={},v=new WeakMap,b=[],_=null,M=!1,S=null,w=null,R=null,P=null,O=null,k=null,B=null,D=new Lt(0,0,0),F=0,I=!1,L=null,H=null,q=null,W=null,oe=null;const fe=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,re=0;const he=n.getParameter(n.VERSION);he.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(he)[1]),te=re>=1):he.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(he)[1]),te=re>=2);let Me=null,Ne={};const Q=n.getParameter(n.SCISSOR_BOX),de=n.getParameter(n.VIEWPORT),Ae=new Pi().fromArray(Q),We=new Pi().fromArray(de);function bt(se,rt,nt,ot){const it=new Uint8Array(4),$e=n.createTexture();n.bindTexture(se,$e),n.texParameteri(se,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(se,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let lt=0;lt<nt;lt++)se===n.TEXTURE_3D||se===n.TEXTURE_2D_ARRAY?n.texImage3D(rt,0,n.RGBA,1,1,ot,0,n.RGBA,n.UNSIGNED_BYTE,it):n.texImage2D(rt+lt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,it);return $e}const _e={};_e[n.TEXTURE_2D]=bt(n.TEXTURE_2D,n.TEXTURE_2D,1),_e[n.TEXTURE_CUBE_MAP]=bt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),_e[n.TEXTURE_2D_ARRAY]=bt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),_e[n.TEXTURE_3D]=bt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),l.setClear(0),Te(n.DEPTH_TEST),s.setFunc(xm),je(!1),ht(NP),Te(n.CULL_FACE),Oe(Cc);function Te(se){p[se]!==!0&&(n.enable(se),p[se]=!0)}function ut(se){p[se]!==!1&&(n.disable(se),p[se]=!1)}function ve(se,rt){return g[se]!==rt?(n.bindFramebuffer(se,rt),g[se]=rt,se===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=rt),se===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=rt),!0):!1}function et(se,rt){let nt=b,ot=!1;if(se){nt=v.get(rt),nt===void 0&&(nt=[],v.set(rt,nt));const it=se.textures;if(nt.length!==it.length||nt[0]!==n.COLOR_ATTACHMENT0){for(let $e=0,lt=it.length;$e<lt;$e++)nt[$e]=n.COLOR_ATTACHMENT0+$e;nt.length=it.length,ot=!0}}else nt[0]!==n.BACK&&(nt[0]=n.BACK,ot=!0);ot&&n.drawBuffers(nt)}function At(se){return _!==se?(n.useProgram(se),_=se,!0):!1}const He={[cd]:n.FUNC_ADD,[z5]:n.FUNC_SUBTRACT,[F5]:n.FUNC_REVERSE_SUBTRACT};He[B5]=n.MIN,He[V5]=n.MAX;const Ct={[j5]:n.ZERO,[H5]:n.ONE,[G5]:n.SRC_COLOR,[cw]:n.SRC_ALPHA,[K5]:n.SRC_ALPHA_SATURATE,[X5]:n.DST_COLOR,[W5]:n.DST_ALPHA,[q5]:n.ONE_MINUS_SRC_COLOR,[fw]:n.ONE_MINUS_SRC_ALPHA,[Y5]:n.ONE_MINUS_DST_COLOR,[$5]:n.ONE_MINUS_DST_ALPHA,[Z5]:n.CONSTANT_COLOR,[Q5]:n.ONE_MINUS_CONSTANT_COLOR,[J5]:n.CONSTANT_ALPHA,[e2]:n.ONE_MINUS_CONSTANT_ALPHA};function Oe(se,rt,nt,ot,it,$e,lt,Ht,cn,Jt){if(se===Cc){M===!0&&(ut(n.BLEND),M=!1);return}if(M===!1&&(Te(n.BLEND),M=!0),se!==k5){if(se!==S||Jt!==I){if((w!==cd||O!==cd)&&(n.blendEquation(n.FUNC_ADD),w=cd,O=cd),Jt)switch(se){case fm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case OP:n.blendFunc(n.ONE,n.ONE);break;case DP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case LP:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:Yt("WebGLState: Invalid blending: ",se);break}else switch(se){case fm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case OP:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case DP:Yt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case LP:Yt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Yt("WebGLState: Invalid blending: ",se);break}R=null,P=null,k=null,B=null,D.set(0,0,0),F=0,S=se,I=Jt}return}it=it||rt,$e=$e||nt,lt=lt||ot,(rt!==w||it!==O)&&(n.blendEquationSeparate(He[rt],He[it]),w=rt,O=it),(nt!==R||ot!==P||$e!==k||lt!==B)&&(n.blendFuncSeparate(Ct[nt],Ct[ot],Ct[$e],Ct[lt]),R=nt,P=ot,k=$e,B=lt),(Ht.equals(D)===!1||cn!==F)&&(n.blendColor(Ht.r,Ht.g,Ht.b,cn),D.copy(Ht),F=cn),S=se,I=!1}function Ze(se,rt){se.side===_c?ut(n.CULL_FACE):Te(n.CULL_FACE);let nt=se.side===qs;rt&&(nt=!nt),je(nt),se.blending===fm&&se.transparent===!1?Oe(Cc):Oe(se.blending,se.blendEquation,se.blendSrc,se.blendDst,se.blendEquationAlpha,se.blendSrcAlpha,se.blendDstAlpha,se.blendColor,se.blendAlpha,se.premultipliedAlpha),s.setFunc(se.depthFunc),s.setTest(se.depthTest),s.setMask(se.depthWrite),a.setMask(se.colorWrite);const ot=se.stencilWrite;l.setTest(ot),ot&&(l.setMask(se.stencilWriteMask),l.setFunc(se.stencilFunc,se.stencilRef,se.stencilFuncMask),l.setOp(se.stencilFail,se.stencilZFail,se.stencilZPass)),Mt(se.polygonOffset,se.polygonOffsetFactor,se.polygonOffsetUnits),se.alphaToCoverage===!0?Te(n.SAMPLE_ALPHA_TO_COVERAGE):ut(n.SAMPLE_ALPHA_TO_COVERAGE)}function je(se){L!==se&&(se?n.frontFace(n.CW):n.frontFace(n.CCW),L=se)}function ht(se){se!==D5?(Te(n.CULL_FACE),se!==H&&(se===NP?n.cullFace(n.BACK):se===L5?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ut(n.CULL_FACE),H=se}function ie(se){se!==q&&(te&&n.lineWidth(se),q=se)}function Mt(se,rt,nt){se?(Te(n.POLYGON_OFFSET_FILL),(W!==rt||oe!==nt)&&(n.polygonOffset(rt,nt),W=rt,oe=nt)):ut(n.POLYGON_OFFSET_FILL)}function gt(se){se?Te(n.SCISSOR_TEST):ut(n.SCISSOR_TEST)}function Ut(se){se===void 0&&(se=n.TEXTURE0+fe-1),Me!==se&&(n.activeTexture(se),Me=se)}function vt(se,rt,nt){nt===void 0&&(Me===null?nt=n.TEXTURE0+fe-1:nt=Me);let ot=Ne[nt];ot===void 0&&(ot={type:void 0,texture:void 0},Ne[nt]=ot),(ot.type!==se||ot.texture!==rt)&&(Me!==nt&&(n.activeTexture(nt),Me=nt),n.bindTexture(se,rt||_e[se]),ot.type=se,ot.texture=rt)}function J(){const se=Ne[Me];se!==void 0&&se.type!==void 0&&(n.bindTexture(se.type,null),se.type=void 0,se.texture=void 0)}function X(){try{n.compressedTexImage2D(...arguments)}catch(se){Yt("WebGLState:",se)}}function pe(){try{n.compressedTexImage3D(...arguments)}catch(se){Yt("WebGLState:",se)}}function ke(){try{n.texSubImage2D(...arguments)}catch(se){Yt("WebGLState:",se)}}function Ye(){try{n.texSubImage3D(...arguments)}catch(se){Yt("WebGLState:",se)}}function Le(){try{n.compressedTexSubImage2D(...arguments)}catch(se){Yt("WebGLState:",se)}}function Tt(){try{n.compressedTexSubImage3D(...arguments)}catch(se){Yt("WebGLState:",se)}}function le(){try{n.texStorage2D(...arguments)}catch(se){Yt("WebGLState:",se)}}function Ee(){try{n.texStorage3D(...arguments)}catch(se){Yt("WebGLState:",se)}}function st(){try{n.texImage2D(...arguments)}catch(se){Yt("WebGLState:",se)}}function Ge(){try{n.texImage3D(...arguments)}catch(se){Yt("WebGLState:",se)}}function Xe(se){Ae.equals(se)===!1&&(n.scissor(se.x,se.y,se.z,se.w),Ae.copy(se))}function ft(se){We.equals(se)===!1&&(n.viewport(se.x,se.y,se.z,se.w),We.copy(se))}function ae(se,rt){let nt=h.get(rt);nt===void 0&&(nt=new WeakMap,h.set(rt,nt));let ot=nt.get(se);ot===void 0&&(ot=n.getUniformBlockIndex(rt,se.name),nt.set(se,ot))}function ye(se,rt){const ot=h.get(rt).get(se);c.get(rt)!==ot&&(n.uniformBlockBinding(rt,ot,se.__bindingPointIndex),c.set(rt,ot))}function dt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Me=null,Ne={},g={},v=new WeakMap,b=[],_=null,M=!1,S=null,w=null,R=null,P=null,O=null,k=null,B=null,D=new Lt(0,0,0),F=0,I=!1,L=null,H=null,q=null,W=null,oe=null,Ae.set(0,0,n.canvas.width,n.canvas.height),We.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),l.reset()}return{buffers:{color:a,depth:s,stencil:l},enable:Te,disable:ut,bindFramebuffer:ve,drawBuffers:et,useProgram:At,setBlending:Oe,setMaterial:Ze,setFlipSided:je,setCullFace:ht,setLineWidth:ie,setPolygonOffset:Mt,setScissorTest:gt,activeTexture:Ut,bindTexture:vt,unbindTexture:J,compressedTexImage2D:X,compressedTexImage3D:pe,texImage2D:st,texImage3D:Ge,updateUBOMapping:ae,uniformBlockBinding:ye,texStorage2D:le,texStorage3D:Ee,texSubImage2D:ke,texSubImage3D:Ye,compressedTexSubImage2D:Le,compressedTexSubImage3D:Tt,scissor:Xe,viewport:ft,reset:dt}}function Yte(n,e,t,i,r,a,s){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Je,p=new WeakMap;let g;const v=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(J,X){return b?new OffscreenCanvas(J,X):Yb("canvas")}function M(J,X,pe){let ke=1;const Ye=vt(J);if((Ye.width>pe||Ye.height>pe)&&(ke=pe/Math.max(Ye.width,Ye.height)),ke<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Le=Math.floor(ke*Ye.width),Tt=Math.floor(ke*Ye.height);g===void 0&&(g=_(Le,Tt));const le=X?_(Le,Tt):g;return le.width=Le,le.height=Tt,le.getContext("2d").drawImage(J,0,0,Le,Tt),Rt("WebGLRenderer: Texture has been resized from ("+Ye.width+"x"+Ye.height+") to ("+Le+"x"+Tt+")."),le}else return"data"in J&&Rt("WebGLRenderer: Image in DataTexture is too big ("+Ye.width+"x"+Ye.height+")."),J;return J}function S(J){return J.generateMipmaps}function w(J){n.generateMipmap(J)}function R(J){return J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:J.isWebGL3DRenderTarget?n.TEXTURE_3D:J.isWebGLArrayRenderTarget||J.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function P(J,X,pe,ke,Ye=!1){if(J!==null){if(n[J]!==void 0)return n[J];Rt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Le=X;if(X===n.RED&&(pe===n.FLOAT&&(Le=n.R32F),pe===n.HALF_FLOAT&&(Le=n.R16F),pe===n.UNSIGNED_BYTE&&(Le=n.R8)),X===n.RED_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.R8UI),pe===n.UNSIGNED_SHORT&&(Le=n.R16UI),pe===n.UNSIGNED_INT&&(Le=n.R32UI),pe===n.BYTE&&(Le=n.R8I),pe===n.SHORT&&(Le=n.R16I),pe===n.INT&&(Le=n.R32I)),X===n.RG&&(pe===n.FLOAT&&(Le=n.RG32F),pe===n.HALF_FLOAT&&(Le=n.RG16F),pe===n.UNSIGNED_BYTE&&(Le=n.RG8)),X===n.RG_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.RG8UI),pe===n.UNSIGNED_SHORT&&(Le=n.RG16UI),pe===n.UNSIGNED_INT&&(Le=n.RG32UI),pe===n.BYTE&&(Le=n.RG8I),pe===n.SHORT&&(Le=n.RG16I),pe===n.INT&&(Le=n.RG32I)),X===n.RGB_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.RGB8UI),pe===n.UNSIGNED_SHORT&&(Le=n.RGB16UI),pe===n.UNSIGNED_INT&&(Le=n.RGB32UI),pe===n.BYTE&&(Le=n.RGB8I),pe===n.SHORT&&(Le=n.RGB16I),pe===n.INT&&(Le=n.RGB32I)),X===n.RGBA_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.RGBA8UI),pe===n.UNSIGNED_SHORT&&(Le=n.RGBA16UI),pe===n.UNSIGNED_INT&&(Le=n.RGBA32UI),pe===n.BYTE&&(Le=n.RGBA8I),pe===n.SHORT&&(Le=n.RGBA16I),pe===n.INT&&(Le=n.RGBA32I)),X===n.RGB&&(pe===n.UNSIGNED_INT_5_9_9_9_REV&&(Le=n.RGB9_E5),pe===n.UNSIGNED_INT_10F_11F_11F_REV&&(Le=n.R11F_G11F_B10F)),X===n.RGBA){const Tt=Ye?$b:qn.getTransfer(ke);pe===n.FLOAT&&(Le=n.RGBA32F),pe===n.HALF_FLOAT&&(Le=n.RGBA16F),pe===n.UNSIGNED_BYTE&&(Le=Tt===mi?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)}return(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function O(J,X){let pe;return J?X===null||X===Fl||X===zv?pe=n.DEPTH24_STENCIL8:X===js?pe=n.DEPTH32F_STENCIL8:X===kv&&(pe=n.DEPTH24_STENCIL8,Rt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===Fl||X===zv?pe=n.DEPTH_COMPONENT24:X===js?pe=n.DEPTH_COMPONENT32F:X===kv&&(pe=n.DEPTH_COMPONENT16),pe}function k(J,X){return S(J)===!0||J.isFramebufferTexture&&J.minFilter!==Or&&J.minFilter!==Xi?Math.log2(Math.max(X.width,X.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?X.mipmaps.length:1}function B(J){const X=J.target;X.removeEventListener("dispose",B),F(X),X.isVideoTexture&&p.delete(X)}function D(J){const X=J.target;X.removeEventListener("dispose",D),L(X)}function F(J){const X=i.get(J);if(X.__webglInit===void 0)return;const pe=J.source,ke=v.get(pe);if(ke){const Ye=ke[X.__cacheKey];Ye.usedTimes--,Ye.usedTimes===0&&I(J),Object.keys(ke).length===0&&v.delete(pe)}i.remove(J)}function I(J){const X=i.get(J);n.deleteTexture(X.__webglTexture);const pe=J.source,ke=v.get(pe);delete ke[X.__cacheKey],s.memory.textures--}function L(J){const X=i.get(J);if(J.depthTexture&&(J.depthTexture.dispose(),i.remove(J.depthTexture)),J.isWebGLCubeRenderTarget)for(let ke=0;ke<6;ke++){if(Array.isArray(X.__webglFramebuffer[ke]))for(let Ye=0;Ye<X.__webglFramebuffer[ke].length;Ye++)n.deleteFramebuffer(X.__webglFramebuffer[ke][Ye]);else n.deleteFramebuffer(X.__webglFramebuffer[ke]);X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer[ke])}else{if(Array.isArray(X.__webglFramebuffer))for(let ke=0;ke<X.__webglFramebuffer.length;ke++)n.deleteFramebuffer(X.__webglFramebuffer[ke]);else n.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&n.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let ke=0;ke<X.__webglColorRenderbuffer.length;ke++)X.__webglColorRenderbuffer[ke]&&n.deleteRenderbuffer(X.__webglColorRenderbuffer[ke]);X.__webglDepthRenderbuffer&&n.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const pe=J.textures;for(let ke=0,Ye=pe.length;ke<Ye;ke++){const Le=i.get(pe[ke]);Le.__webglTexture&&(n.deleteTexture(Le.__webglTexture),s.memory.textures--),i.remove(pe[ke])}i.remove(J)}let H=0;function q(){H=0}function W(){const J=H;return J>=r.maxTextures&&Rt("WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+r.maxTextures),H+=1,J}function oe(J){const X=[];return X.push(J.wrapS),X.push(J.wrapT),X.push(J.wrapR||0),X.push(J.magFilter),X.push(J.minFilter),X.push(J.anisotropy),X.push(J.internalFormat),X.push(J.format),X.push(J.type),X.push(J.generateMipmaps),X.push(J.premultiplyAlpha),X.push(J.flipY),X.push(J.unpackAlignment),X.push(J.colorSpace),X.join()}function fe(J,X){const pe=i.get(J);if(J.isVideoTexture&&gt(J),J.isRenderTargetTexture===!1&&J.isExternalTexture!==!0&&J.version>0&&pe.__version!==J.version){const ke=J.image;if(ke===null)Rt("WebGLRenderer: Texture marked for update but no image data found.");else if(ke.complete===!1)Rt("WebGLRenderer: Texture marked for update but image is incomplete");else{_e(pe,J,X);return}}else J.isExternalTexture&&(pe.__webglTexture=J.sourceTexture?J.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+X)}function te(J,X){const pe=i.get(J);if(J.isRenderTargetTexture===!1&&J.version>0&&pe.__version!==J.version){_e(pe,J,X);return}else J.isExternalTexture&&(pe.__webglTexture=J.sourceTexture?J.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+X)}function re(J,X){const pe=i.get(J);if(J.isRenderTargetTexture===!1&&J.version>0&&pe.__version!==J.version){_e(pe,J,X);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+X)}function he(J,X){const pe=i.get(J);if(J.isCubeDepthTexture!==!0&&J.version>0&&pe.__version!==J.version){Te(pe,J,X);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+X)}const Me={[Hb]:n.REPEAT,[Mo]:n.CLAMP_TO_EDGE,[Gb]:n.MIRRORED_REPEAT},Ne={[Or]:n.NEAREST,[RN]:n.NEAREST_MIPMAP_NEAREST,[Sv]:n.NEAREST_MIPMAP_LINEAR,[Xi]:n.LINEAR,[Eb]:n.LINEAR_MIPMAP_NEAREST,[Ec]:n.LINEAR_MIPMAP_LINEAR},Q={[u2]:n.NEVER,[p2]:n.ALWAYS,[c2]:n.LESS,[TM]:n.LEQUAL,[f2]:n.EQUAL,[CM]:n.GEQUAL,[h2]:n.GREATER,[d2]:n.NOTEQUAL};function de(J,X){if(X.type===js&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===Xi||X.magFilter===Eb||X.magFilter===Sv||X.magFilter===Ec||X.minFilter===Xi||X.minFilter===Eb||X.minFilter===Sv||X.minFilter===Ec)&&Rt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(J,n.TEXTURE_WRAP_S,Me[X.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,Me[X.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,Me[X.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,Ne[X.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,Ne[X.minFilter]),X.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,Q[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===Or||X.minFilter!==Sv&&X.minFilter!==Ec||X.type===js&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||i.get(X).__currentAnisotropy){const pe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(J,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,r.getMaxAnisotropy())),i.get(X).__currentAnisotropy=X.anisotropy}}}function Ae(J,X){let pe=!1;J.__webglInit===void 0&&(J.__webglInit=!0,X.addEventListener("dispose",B));const ke=X.source;let Ye=v.get(ke);Ye===void 0&&(Ye={},v.set(ke,Ye));const Le=oe(X);if(Le!==J.__cacheKey){Ye[Le]===void 0&&(Ye[Le]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,pe=!0),Ye[Le].usedTimes++;const Tt=Ye[J.__cacheKey];Tt!==void 0&&(Ye[J.__cacheKey].usedTimes--,Tt.usedTimes===0&&I(X)),J.__cacheKey=Le,J.__webglTexture=Ye[Le].texture}return pe}function We(J,X,pe){return Math.floor(Math.floor(J/pe)/X)}function bt(J,X,pe,ke){const Le=J.updateRanges;if(Le.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,X.width,X.height,pe,ke,X.data);else{Le.sort((Ge,Xe)=>Ge.start-Xe.start);let Tt=0;for(let Ge=1;Ge<Le.length;Ge++){const Xe=Le[Tt],ft=Le[Ge],ae=Xe.start+Xe.count,ye=We(ft.start,X.width,4),dt=We(Xe.start,X.width,4);ft.start<=ae+1&&ye===dt&&We(ft.start+ft.count-1,X.width,4)===ye?Xe.count=Math.max(Xe.count,ft.start+ft.count-Xe.start):(++Tt,Le[Tt]=ft)}Le.length=Tt+1;const le=n.getParameter(n.UNPACK_ROW_LENGTH),Ee=n.getParameter(n.UNPACK_SKIP_PIXELS),st=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,X.width);for(let Ge=0,Xe=Le.length;Ge<Xe;Ge++){const ft=Le[Ge],ae=Math.floor(ft.start/4),ye=Math.ceil(ft.count/4),dt=ae%X.width,se=Math.floor(ae/X.width),rt=ye,nt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,dt),n.pixelStorei(n.UNPACK_SKIP_ROWS,se),t.texSubImage2D(n.TEXTURE_2D,0,dt,se,rt,nt,pe,ke,X.data)}J.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,le),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ee),n.pixelStorei(n.UNPACK_SKIP_ROWS,st)}}function _e(J,X,pe){let ke=n.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(ke=n.TEXTURE_2D_ARRAY),X.isData3DTexture&&(ke=n.TEXTURE_3D);const Ye=Ae(J,X),Le=X.source;t.bindTexture(ke,J.__webglTexture,n.TEXTURE0+pe);const Tt=i.get(Le);if(Le.version!==Tt.__version||Ye===!0){t.activeTexture(n.TEXTURE0+pe);const le=qn.getPrimaries(qn.workingColorSpace),Ee=X.colorSpace===Df?null:qn.getPrimaries(X.colorSpace),st=X.colorSpace===Df||le===Ee?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);let Ge=M(X.image,!1,r.maxTextureSize);Ge=Ut(X,Ge);const Xe=a.convert(X.format,X.colorSpace),ft=a.convert(X.type);let ae=P(X.internalFormat,Xe,ft,X.colorSpace,X.isVideoTexture);de(ke,X);let ye;const dt=X.mipmaps,se=X.isVideoTexture!==!0,rt=Tt.__version===void 0||Ye===!0,nt=Le.dataReady,ot=k(X,Ge);if(X.isDepthTexture)ae=O(X.format===pd,X.type),rt&&(se?t.texStorage2D(n.TEXTURE_2D,1,ae,Ge.width,Ge.height):t.texImage2D(n.TEXTURE_2D,0,ae,Ge.width,Ge.height,0,Xe,ft,null));else if(X.isDataTexture)if(dt.length>0){se&&rt&&t.texStorage2D(n.TEXTURE_2D,ot,ae,dt[0].width,dt[0].height);for(let it=0,$e=dt.length;it<$e;it++)ye=dt[it],se?nt&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,ye.width,ye.height,Xe,ft,ye.data):t.texImage2D(n.TEXTURE_2D,it,ae,ye.width,ye.height,0,Xe,ft,ye.data);X.generateMipmaps=!1}else se?(rt&&t.texStorage2D(n.TEXTURE_2D,ot,ae,Ge.width,Ge.height),nt&&bt(X,Ge,Xe,ft)):t.texImage2D(n.TEXTURE_2D,0,ae,Ge.width,Ge.height,0,Xe,ft,Ge.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){se&&rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ot,ae,dt[0].width,dt[0].height,Ge.depth);for(let it=0,$e=dt.length;it<$e;it++)if(ye=dt[it],X.format!==bs)if(Xe!==null)if(se){if(nt)if(X.layerUpdates.size>0){const lt=WP(ye.width,ye.height,X.format,X.type);for(const Ht of X.layerUpdates){const cn=ye.data.subarray(Ht*lt/ye.data.BYTES_PER_ELEMENT,(Ht+1)*lt/ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,Ht,ye.width,ye.height,1,Xe,cn)}X.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,0,ye.width,ye.height,Ge.depth,Xe,ye.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,it,ae,ye.width,ye.height,Ge.depth,0,ye.data,0,0);else Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else se?nt&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,0,ye.width,ye.height,Ge.depth,Xe,ft,ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,it,ae,ye.width,ye.height,Ge.depth,0,Xe,ft,ye.data)}else{se&&rt&&t.texStorage2D(n.TEXTURE_2D,ot,ae,dt[0].width,dt[0].height);for(let it=0,$e=dt.length;it<$e;it++)ye=dt[it],X.format!==bs?Xe!==null?se?nt&&t.compressedTexSubImage2D(n.TEXTURE_2D,it,0,0,ye.width,ye.height,Xe,ye.data):t.compressedTexImage2D(n.TEXTURE_2D,it,ae,ye.width,ye.height,0,ye.data):Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):se?nt&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,ye.width,ye.height,Xe,ft,ye.data):t.texImage2D(n.TEXTURE_2D,it,ae,ye.width,ye.height,0,Xe,ft,ye.data)}else if(X.isDataArrayTexture)if(se){if(rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ot,ae,Ge.width,Ge.height,Ge.depth),nt)if(X.layerUpdates.size>0){const it=WP(Ge.width,Ge.height,X.format,X.type);for(const $e of X.layerUpdates){const lt=Ge.data.subarray($e*it/Ge.data.BYTES_PER_ELEMENT,($e+1)*it/Ge.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,$e,Ge.width,Ge.height,1,Xe,ft,lt)}X.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,Xe,ft,Ge.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ae,Ge.width,Ge.height,Ge.depth,0,Xe,ft,Ge.data);else if(X.isData3DTexture)se?(rt&&t.texStorage3D(n.TEXTURE_3D,ot,ae,Ge.width,Ge.height,Ge.depth),nt&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,Xe,ft,Ge.data)):t.texImage3D(n.TEXTURE_3D,0,ae,Ge.width,Ge.height,Ge.depth,0,Xe,ft,Ge.data);else if(X.isFramebufferTexture){if(rt)if(se)t.texStorage2D(n.TEXTURE_2D,ot,ae,Ge.width,Ge.height);else{let it=Ge.width,$e=Ge.height;for(let lt=0;lt<ot;lt++)t.texImage2D(n.TEXTURE_2D,lt,ae,it,$e,0,Xe,ft,null),it>>=1,$e>>=1}}else if(dt.length>0){if(se&&rt){const it=vt(dt[0]);t.texStorage2D(n.TEXTURE_2D,ot,ae,it.width,it.height)}for(let it=0,$e=dt.length;it<$e;it++)ye=dt[it],se?nt&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,Xe,ft,ye):t.texImage2D(n.TEXTURE_2D,it,ae,Xe,ft,ye);X.generateMipmaps=!1}else if(se){if(rt){const it=vt(Ge);t.texStorage2D(n.TEXTURE_2D,ot,ae,it.width,it.height)}nt&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Xe,ft,Ge)}else t.texImage2D(n.TEXTURE_2D,0,ae,Xe,ft,Ge);S(X)&&w(ke),Tt.__version=Le.version,X.onUpdate&&X.onUpdate(X)}J.__version=X.version}function Te(J,X,pe){if(X.image.length!==6)return;const ke=Ae(J,X),Ye=X.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+pe);const Le=i.get(Ye);if(Ye.version!==Le.__version||ke===!0){t.activeTexture(n.TEXTURE0+pe);const Tt=qn.getPrimaries(qn.workingColorSpace),le=X.colorSpace===Df?null:qn.getPrimaries(X.colorSpace),Ee=X.colorSpace===Df||Tt===le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ee);const st=X.isCompressedTexture||X.image[0].isCompressedTexture,Ge=X.image[0]&&X.image[0].isDataTexture,Xe=[];for(let $e=0;$e<6;$e++)!st&&!Ge?Xe[$e]=M(X.image[$e],!0,r.maxCubemapSize):Xe[$e]=Ge?X.image[$e].image:X.image[$e],Xe[$e]=Ut(X,Xe[$e]);const ft=Xe[0],ae=a.convert(X.format,X.colorSpace),ye=a.convert(X.type),dt=P(X.internalFormat,ae,ye,X.colorSpace),se=X.isVideoTexture!==!0,rt=Le.__version===void 0||ke===!0,nt=Ye.dataReady;let ot=k(X,ft);de(n.TEXTURE_CUBE_MAP,X);let it;if(st){se&&rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ot,dt,ft.width,ft.height);for(let $e=0;$e<6;$e++){it=Xe[$e].mipmaps;for(let lt=0;lt<it.length;lt++){const Ht=it[lt];X.format!==bs?ae!==null?se?nt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,lt,0,0,Ht.width,Ht.height,ae,Ht.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,lt,dt,Ht.width,Ht.height,0,Ht.data):Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):se?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,lt,0,0,Ht.width,Ht.height,ae,ye,Ht.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,lt,dt,Ht.width,Ht.height,0,ae,ye,Ht.data)}}}else{if(it=X.mipmaps,se&&rt){it.length>0&&ot++;const $e=vt(Xe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ot,dt,$e.width,$e.height)}for(let $e=0;$e<6;$e++)if(Ge){se?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,Xe[$e].width,Xe[$e].height,ae,ye,Xe[$e].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,dt,Xe[$e].width,Xe[$e].height,0,ae,ye,Xe[$e].data);for(let lt=0;lt<it.length;lt++){const cn=it[lt].image[$e].image;se?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,lt+1,0,0,cn.width,cn.height,ae,ye,cn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,lt+1,dt,cn.width,cn.height,0,ae,ye,cn.data)}}else{se?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,ae,ye,Xe[$e]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,dt,ae,ye,Xe[$e]);for(let lt=0;lt<it.length;lt++){const Ht=it[lt];se?nt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,lt+1,0,0,ae,ye,Ht.image[$e]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,lt+1,dt,ae,ye,Ht.image[$e])}}}S(X)&&w(n.TEXTURE_CUBE_MAP),Le.__version=Ye.version,X.onUpdate&&X.onUpdate(X)}J.__version=X.version}function ut(J,X,pe,ke,Ye,Le){const Tt=a.convert(pe.format,pe.colorSpace),le=a.convert(pe.type),Ee=P(pe.internalFormat,Tt,le,pe.colorSpace),st=i.get(X),Ge=i.get(pe);if(Ge.__renderTarget=X,!st.__hasExternalTextures){const Xe=Math.max(1,X.width>>Le),ft=Math.max(1,X.height>>Le);Ye===n.TEXTURE_3D||Ye===n.TEXTURE_2D_ARRAY?t.texImage3D(Ye,Le,Ee,Xe,ft,X.depth,0,Tt,le,null):t.texImage2D(Ye,Le,Ee,Xe,ft,0,Tt,le,null)}t.bindFramebuffer(n.FRAMEBUFFER,J),Mt(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ke,Ye,Ge.__webglTexture,0,ie(X)):(Ye===n.TEXTURE_2D||Ye>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ye<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ke,Ye,Ge.__webglTexture,Le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ve(J,X,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,J),X.depthBuffer){const ke=X.depthTexture,Ye=ke&&ke.isDepthTexture?ke.type:null,Le=O(X.stencilBuffer,Ye),Tt=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;Mt(X)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ie(X),Le,X.width,X.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,ie(X),Le,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,Le,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Tt,n.RENDERBUFFER,J)}else{const ke=X.textures;for(let Ye=0;Ye<ke.length;Ye++){const Le=ke[Ye],Tt=a.convert(Le.format,Le.colorSpace),le=a.convert(Le.type),Ee=P(Le.internalFormat,Tt,le,Le.colorSpace);Mt(X)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ie(X),Ee,X.width,X.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,ie(X),Ee,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,Ee,X.width,X.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function et(J,X,pe){const ke=X.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ye=i.get(X.depthTexture);if(Ye.__renderTarget=X,(!Ye.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),ke){if(Ye.__webglInit===void 0&&(Ye.__webglInit=!0,X.depthTexture.addEventListener("dispose",B)),Ye.__webglTexture===void 0){Ye.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Ye.__webglTexture),de(n.TEXTURE_CUBE_MAP,X.depthTexture);const st=a.convert(X.depthTexture.format),Ge=a.convert(X.depthTexture.type);let Xe;X.depthTexture.format===Lc?Xe=n.DEPTH_COMPONENT24:X.depthTexture.format===pd&&(Xe=n.DEPTH24_STENCIL8);for(let ft=0;ft<6;ft++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0,Xe,X.width,X.height,0,st,Ge,null)}}else fe(X.depthTexture,0);const Le=Ye.__webglTexture,Tt=ie(X),le=ke?n.TEXTURE_CUBE_MAP_POSITIVE_X+pe:n.TEXTURE_2D,Ee=X.depthTexture.format===pd?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(X.depthTexture.format===Lc)Mt(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ee,le,Le,0,Tt):n.framebufferTexture2D(n.FRAMEBUFFER,Ee,le,Le,0);else if(X.depthTexture.format===pd)Mt(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ee,le,Le,0,Tt):n.framebufferTexture2D(n.FRAMEBUFFER,Ee,le,Le,0);else throw new Error("Unknown depthTexture format")}function At(J){const X=i.get(J),pe=J.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==J.depthTexture){const ke=J.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),ke){const Ye=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,ke.removeEventListener("dispose",Ye)};ke.addEventListener("dispose",Ye),X.__depthDisposeCallback=Ye}X.__boundDepthTexture=ke}if(J.depthTexture&&!X.__autoAllocateDepthBuffer)if(pe)for(let ke=0;ke<6;ke++)et(X.__webglFramebuffer[ke],J,ke);else{const ke=J.texture.mipmaps;ke&&ke.length>0?et(X.__webglFramebuffer[0],J,0):et(X.__webglFramebuffer,J,0)}else if(pe){X.__webglDepthbuffer=[];for(let ke=0;ke<6;ke++)if(t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[ke]),X.__webglDepthbuffer[ke]===void 0)X.__webglDepthbuffer[ke]=n.createRenderbuffer(),ve(X.__webglDepthbuffer[ke],J,!1);else{const Ye=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=X.__webglDepthbuffer[ke];n.bindRenderbuffer(n.RENDERBUFFER,Le),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ye,n.RENDERBUFFER,Le)}}else{const ke=J.texture.mipmaps;if(ke&&ke.length>0?t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=n.createRenderbuffer(),ve(X.__webglDepthbuffer,J,!1);else{const Ye=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=X.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Le),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ye,n.RENDERBUFFER,Le)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function He(J,X,pe){const ke=i.get(J);X!==void 0&&ut(ke.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),pe!==void 0&&At(J)}function Ct(J){const X=J.texture,pe=i.get(J),ke=i.get(X);J.addEventListener("dispose",D);const Ye=J.textures,Le=J.isWebGLCubeRenderTarget===!0,Tt=Ye.length>1;if(Tt||(ke.__webglTexture===void 0&&(ke.__webglTexture=n.createTexture()),ke.__version=X.version,s.memory.textures++),Le){pe.__webglFramebuffer=[];for(let le=0;le<6;le++)if(X.mipmaps&&X.mipmaps.length>0){pe.__webglFramebuffer[le]=[];for(let Ee=0;Ee<X.mipmaps.length;Ee++)pe.__webglFramebuffer[le][Ee]=n.createFramebuffer()}else pe.__webglFramebuffer[le]=n.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){pe.__webglFramebuffer=[];for(let le=0;le<X.mipmaps.length;le++)pe.__webglFramebuffer[le]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(Tt)for(let le=0,Ee=Ye.length;le<Ee;le++){const st=i.get(Ye[le]);st.__webglTexture===void 0&&(st.__webglTexture=n.createTexture(),s.memory.textures++)}if(J.samples>0&&Mt(J)===!1){pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let le=0;le<Ye.length;le++){const Ee=Ye[le];pe.__webglColorRenderbuffer[le]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[le]);const st=a.convert(Ee.format,Ee.colorSpace),Ge=a.convert(Ee.type),Xe=P(Ee.internalFormat,st,Ge,Ee.colorSpace,J.isXRRenderTarget===!0),ft=ie(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,ft,Xe,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+le,n.RENDERBUFFER,pe.__webglColorRenderbuffer[le])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),ve(pe.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Le){t.bindTexture(n.TEXTURE_CUBE_MAP,ke.__webglTexture),de(n.TEXTURE_CUBE_MAP,X);for(let le=0;le<6;le++)if(X.mipmaps&&X.mipmaps.length>0)for(let Ee=0;Ee<X.mipmaps.length;Ee++)ut(pe.__webglFramebuffer[le][Ee],J,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+le,Ee);else ut(pe.__webglFramebuffer[le],J,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+le,0);S(X)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Tt){for(let le=0,Ee=Ye.length;le<Ee;le++){const st=Ye[le],Ge=i.get(st);let Xe=n.TEXTURE_2D;(J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(Xe=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Xe,Ge.__webglTexture),de(Xe,st),ut(pe.__webglFramebuffer,J,st,n.COLOR_ATTACHMENT0+le,Xe,0),S(st)&&w(Xe)}t.unbindTexture()}else{let le=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(le=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(le,ke.__webglTexture),de(le,X),X.mipmaps&&X.mipmaps.length>0)for(let Ee=0;Ee<X.mipmaps.length;Ee++)ut(pe.__webglFramebuffer[Ee],J,X,n.COLOR_ATTACHMENT0,le,Ee);else ut(pe.__webglFramebuffer,J,X,n.COLOR_ATTACHMENT0,le,0);S(X)&&w(le),t.unbindTexture()}J.depthBuffer&&At(J)}function Oe(J){const X=J.textures;for(let pe=0,ke=X.length;pe<ke;pe++){const Ye=X[pe];if(S(Ye)){const Le=R(J),Tt=i.get(Ye).__webglTexture;t.bindTexture(Le,Tt),w(Le),t.unbindTexture()}}}const Ze=[],je=[];function ht(J){if(J.samples>0){if(Mt(J)===!1){const X=J.textures,pe=J.width,ke=J.height;let Ye=n.COLOR_BUFFER_BIT;const Le=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Tt=i.get(J),le=X.length>1;if(le)for(let st=0;st<X.length;st++)t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer);const Ee=J.texture.mipmaps;Ee&&Ee.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer);for(let st=0;st<X.length;st++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Ye|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Ye|=n.STENCIL_BUFFER_BIT)),le){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[st]);const Ge=i.get(X[st]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ge,0)}n.blitFramebuffer(0,0,pe,ke,0,0,pe,ke,Ye,n.NEAREST),c===!0&&(Ze.length=0,je.length=0,Ze.push(n.COLOR_ATTACHMENT0+st),J.depthBuffer&&J.resolveDepthBuffer===!1&&(Ze.push(Le),je.push(Le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,je)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ze))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),le)for(let st=0;st<X.length;st++){t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[st]);const Ge=i.get(X[st]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,Ge,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&c){const X=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[X])}}}function ie(J){return Math.min(r.maxSamples,J.samples)}function Mt(J){const X=i.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function gt(J){const X=s.render.frame;p.get(J)!==X&&(p.set(J,X),J.update())}function Ut(J,X){const pe=J.colorSpace,ke=J.format,Ye=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||pe!==Cd&&pe!==Df&&(qn.getTransfer(pe)===mi?(ke!==bs||Ye!==Bs)&&Rt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Yt("WebGLTextures: Unsupported texture color space:",pe)),X}function vt(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(h.width=J.naturalWidth||J.width,h.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(h.width=J.displayWidth,h.height=J.displayHeight):(h.width=J.width,h.height=J.height),h}this.allocateTextureUnit=W,this.resetTextureUnits=q,this.setTexture2D=fe,this.setTexture2DArray=te,this.setTexture3D=re,this.setTextureCube=he,this.rebindTextures=He,this.setupRenderTarget=Ct,this.updateRenderTargetMipmap=Oe,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=At,this.setupFrameBufferTexture=ut,this.useMultisampledRTT=Mt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function E6(n,e){function t(i,r=Df){let a;const s=qn.getTransfer(r);if(i===Bs)return n.UNSIGNED_BYTE;if(i===_M)return n.UNSIGNED_SHORT_4_4_4_4;if(i===SM)return n.UNSIGNED_SHORT_5_5_5_1;if(i===NN)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===ON)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===PN)return n.BYTE;if(i===IN)return n.SHORT;if(i===kv)return n.UNSIGNED_SHORT;if(i===xM)return n.INT;if(i===Fl)return n.UNSIGNED_INT;if(i===js)return n.FLOAT;if(i===Dc)return n.HALF_FLOAT;if(i===DN)return n.ALPHA;if(i===LN)return n.RGB;if(i===bs)return n.RGBA;if(i===Lc)return n.DEPTH_COMPONENT;if(i===pd)return n.DEPTH_STENCIL;if(i===wM)return n.RED;if(i===Ox)return n.RED_INTEGER;if(i===_m)return n.RG;if(i===EM)return n.RG_INTEGER;if(i===MM)return n.RGBA_INTEGER;if(i===Mb||i===Ab||i===Tb||i===Cb)if(s===mi)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===Mb)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Ab)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Tb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Cb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===Mb)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ab)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Tb)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Cb)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===bw||i===xw||i===_w||i===Sw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===bw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===xw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===_w)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Sw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===ww||i===Ew||i===Mw||i===Aw||i===Tw||i===Cw||i===Rw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===ww||i===Ew)return s===mi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===Mw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(i===Aw)return a.COMPRESSED_R11_EAC;if(i===Tw)return a.COMPRESSED_SIGNED_R11_EAC;if(i===Cw)return a.COMPRESSED_RG11_EAC;if(i===Rw)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===Pw||i===Iw||i===Nw||i===Ow||i===Dw||i===Lw||i===Uw||i===kw||i===zw||i===Fw||i===Bw||i===Vw||i===jw||i===Hw)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===Pw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Iw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Nw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Ow)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Dw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Lw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Uw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===kw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===zw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Fw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Bw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Vw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===jw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Hw)return s===mi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Gw||i===qw||i===Ww)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===Gw)return s===mi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===qw)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Ww)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===$w||i===Xw||i===Yw||i===Kw)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===$w)return a.COMPRESSED_RED_RGTC1_EXT;if(i===Xw)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Yw)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Kw)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===zv?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const Kte=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Zte=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Qte{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new WN(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Bl({vertexShader:Kte,fragmentShader:Zte,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Wr(new c0(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Jte extends Gc{constructor(e,t){super();const i=this;let r=null,a=1,s=null,l="local-floor",c=1,h=null,p=null,g=null,v=null,b=null,_=null;const M=typeof XRWebGLBinding<"u",S=new Qte,w={},R=t.getContextAttributes();let P=null,O=null;const k=[],B=[],D=new Je;let F=null;const I=new Nr;I.viewport=new Pi;const L=new Nr;L.viewport=new Pi;const H=[I,L],q=new d6;let W=null,oe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(_e){let Te=k[_e];return Te===void 0&&(Te=new W1,k[_e]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(_e){let Te=k[_e];return Te===void 0&&(Te=new W1,k[_e]=Te),Te.getGripSpace()},this.getHand=function(_e){let Te=k[_e];return Te===void 0&&(Te=new W1,k[_e]=Te),Te.getHandSpace()};function fe(_e){const Te=B.indexOf(_e.inputSource);if(Te===-1)return;const ut=k[Te];ut!==void 0&&(ut.update(_e.inputSource,_e.frame,h||s),ut.dispatchEvent({type:_e.type,data:_e.inputSource}))}function te(){r.removeEventListener("select",fe),r.removeEventListener("selectstart",fe),r.removeEventListener("selectend",fe),r.removeEventListener("squeeze",fe),r.removeEventListener("squeezestart",fe),r.removeEventListener("squeezeend",fe),r.removeEventListener("end",te),r.removeEventListener("inputsourceschange",re);for(let _e=0;_e<k.length;_e++){const Te=B[_e];Te!==null&&(B[_e]=null,k[_e].disconnect(Te))}W=null,oe=null,S.reset();for(const _e in w)delete w[_e];e.setRenderTarget(P),b=null,v=null,g=null,r=null,O=null,bt.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(D.width,D.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(_e){a=_e,i.isPresenting===!0&&Rt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(_e){l=_e,i.isPresenting===!0&&Rt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||s},this.setReferenceSpace=function(_e){h=_e},this.getBaseLayer=function(){return v!==null?v:b},this.getBinding=function(){return g===null&&M&&(g=new XRWebGLBinding(r,t)),g},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(_e){if(r=_e,r!==null){if(P=e.getRenderTarget(),r.addEventListener("select",fe),r.addEventListener("selectstart",fe),r.addEventListener("selectend",fe),r.addEventListener("squeeze",fe),r.addEventListener("squeezestart",fe),r.addEventListener("squeezeend",fe),r.addEventListener("end",te),r.addEventListener("inputsourceschange",re),R.xrCompatible!==!0&&await t.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(D),M&&"createProjectionLayer"in XRWebGLBinding.prototype){let ut=null,ve=null,et=null;R.depth&&(et=R.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ut=R.stencil?pd:Lc,ve=R.stencil?zv:Fl);const At={colorFormat:t.RGBA8,depthFormat:et,scaleFactor:a};g=this.getBinding(),v=g.createProjectionLayer(At),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),O=new Zo(v.textureWidth,v.textureHeight,{format:bs,type:Bs,depthTexture:new qv(v.textureWidth,v.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,ut),stencilBuffer:R.stencil,colorSpace:e.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const ut={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:a};b=new XRWebGLLayer(r,t,ut),r.updateRenderState({baseLayer:b}),e.setPixelRatio(1),e.setSize(b.framebufferWidth,b.framebufferHeight,!1),O=new Zo(b.framebufferWidth,b.framebufferHeight,{format:bs,type:Bs,colorSpace:e.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}O.isXRRenderTarget=!0,this.setFoveation(c),h=null,s=await r.requestReferenceSpace(l),bt.setContext(r),bt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function re(_e){for(let Te=0;Te<_e.removed.length;Te++){const ut=_e.removed[Te],ve=B.indexOf(ut);ve>=0&&(B[ve]=null,k[ve].disconnect(ut))}for(let Te=0;Te<_e.added.length;Te++){const ut=_e.added[Te];let ve=B.indexOf(ut);if(ve===-1){for(let At=0;At<k.length;At++)if(At>=B.length){B.push(ut),ve=At;break}else if(B[At]===null){B[At]=ut,ve=At;break}if(ve===-1)break}const et=k[ve];et&&et.connect(ut)}}const he=new ne,Me=new ne;function Ne(_e,Te,ut){he.setFromMatrixPosition(Te.matrixWorld),Me.setFromMatrixPosition(ut.matrixWorld);const ve=he.distanceTo(Me),et=Te.projectionMatrix.elements,At=ut.projectionMatrix.elements,He=et[14]/(et[10]-1),Ct=et[14]/(et[10]+1),Oe=(et[9]+1)/et[5],Ze=(et[9]-1)/et[5],je=(et[8]-1)/et[0],ht=(At[8]+1)/At[0],ie=He*je,Mt=He*ht,gt=ve/(-je+ht),Ut=gt*-je;if(Te.matrixWorld.decompose(_e.position,_e.quaternion,_e.scale),_e.translateX(Ut),_e.translateZ(gt),_e.matrixWorld.compose(_e.position,_e.quaternion,_e.scale),_e.matrixWorldInverse.copy(_e.matrixWorld).invert(),et[10]===-1)_e.projectionMatrix.copy(Te.projectionMatrix),_e.projectionMatrixInverse.copy(Te.projectionMatrixInverse);else{const vt=He+gt,J=Ct+gt,X=ie-Ut,pe=Mt+(ve-Ut),ke=Oe*Ct/J*vt,Ye=Ze*Ct/J*vt;_e.projectionMatrix.makePerspective(X,pe,ke,Ye,vt,J),_e.projectionMatrixInverse.copy(_e.projectionMatrix).invert()}}function Q(_e,Te){Te===null?_e.matrixWorld.copy(_e.matrix):_e.matrixWorld.multiplyMatrices(Te.matrixWorld,_e.matrix),_e.matrixWorldInverse.copy(_e.matrixWorld).invert()}this.updateCamera=function(_e){if(r===null)return;let Te=_e.near,ut=_e.far;S.texture!==null&&(S.depthNear>0&&(Te=S.depthNear),S.depthFar>0&&(ut=S.depthFar)),q.near=L.near=I.near=Te,q.far=L.far=I.far=ut,(W!==q.near||oe!==q.far)&&(r.updateRenderState({depthNear:q.near,depthFar:q.far}),W=q.near,oe=q.far),q.layers.mask=_e.layers.mask|6,I.layers.mask=q.layers.mask&3,L.layers.mask=q.layers.mask&5;const ve=_e.parent,et=q.cameras;Q(q,ve);for(let At=0;At<et.length;At++)Q(et[At],ve);et.length===2?Ne(q,I,L):q.projectionMatrix.copy(I.projectionMatrix),de(_e,q,ve)};function de(_e,Te,ut){ut===null?_e.matrix.copy(Te.matrixWorld):(_e.matrix.copy(ut.matrixWorld),_e.matrix.invert(),_e.matrix.multiply(Te.matrixWorld)),_e.matrix.decompose(_e.position,_e.quaternion,_e.scale),_e.updateMatrixWorld(!0),_e.projectionMatrix.copy(Te.projectionMatrix),_e.projectionMatrixInverse.copy(Te.projectionMatrixInverse),_e.isPerspectiveCamera&&(_e.fov=Vv*2*Math.atan(1/_e.projectionMatrix.elements[5]),_e.zoom=1)}this.getCamera=function(){return q},this.getFoveation=function(){if(!(v===null&&b===null))return c},this.setFoveation=function(_e){c=_e,v!==null&&(v.fixedFoveation=_e),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=_e)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(q)},this.getCameraTexture=function(_e){return w[_e]};let Ae=null;function We(_e,Te){if(p=Te.getViewerPose(h||s),_=Te,p!==null){const ut=p.views;b!==null&&(e.setRenderTargetFramebuffer(O,b.framebuffer),e.setRenderTarget(O));let ve=!1;ut.length!==q.cameras.length&&(q.cameras.length=0,ve=!0);for(let Ct=0;Ct<ut.length;Ct++){const Oe=ut[Ct];let Ze=null;if(b!==null)Ze=b.getViewport(Oe);else{const ht=g.getViewSubImage(v,Oe);Ze=ht.viewport,Ct===0&&(e.setRenderTargetTextures(O,ht.colorTexture,ht.depthStencilTexture),e.setRenderTarget(O))}let je=H[Ct];je===void 0&&(je=new Nr,je.layers.enable(Ct),je.viewport=new Pi,H[Ct]=je),je.matrix.fromArray(Oe.transform.matrix),je.matrix.decompose(je.position,je.quaternion,je.scale),je.projectionMatrix.fromArray(Oe.projectionMatrix),je.projectionMatrixInverse.copy(je.projectionMatrix).invert(),je.viewport.set(Ze.x,Ze.y,Ze.width,Ze.height),Ct===0&&(q.matrix.copy(je.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale)),ve===!0&&q.cameras.push(je)}const et=r.enabledFeatures;if(et&&et.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&M){g=i.getBinding();const Ct=g.getDepthInformation(ut[0]);Ct&&Ct.isValid&&Ct.texture&&S.init(Ct,r.renderState)}if(et&&et.includes("camera-access")&&M){e.state.unbindTexture(),g=i.getBinding();for(let Ct=0;Ct<ut.length;Ct++){const Oe=ut[Ct].camera;if(Oe){let Ze=w[Oe];Ze||(Ze=new WN,w[Oe]=Ze);const je=g.getCameraImage(Oe);Ze.sourceTexture=je}}}}for(let ut=0;ut<k.length;ut++){const ve=B[ut],et=k[ut];ve!==null&&et!==void 0&&et.update(ve,Te,h||s)}Ae&&Ae(_e,Te),Te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Te}),_=null}const bt=new b6;bt.setAnimationLoop(We),this.setAnimationLoop=function(_e){Ae=_e},this.dispose=function(){}}}const Hp=new Jo,ene=new pn;function tne(n,e){function t(S,w){S.matrixAutoUpdate===!0&&S.updateMatrix(),w.value.copy(S.matrix)}function i(S,w){w.color.getRGB(S.fogColor.value,_2(n)),w.isFog?(S.fogNear.value=w.near,S.fogFar.value=w.far):w.isFogExp2&&(S.fogDensity.value=w.density)}function r(S,w,R,P,O){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(S,w):w.isMeshToonMaterial?(a(S,w),g(S,w)):w.isMeshPhongMaterial?(a(S,w),p(S,w)):w.isMeshStandardMaterial?(a(S,w),v(S,w),w.isMeshPhysicalMaterial&&b(S,w,O)):w.isMeshMatcapMaterial?(a(S,w),_(S,w)):w.isMeshDepthMaterial?a(S,w):w.isMeshDistanceMaterial?(a(S,w),M(S,w)):w.isMeshNormalMaterial?a(S,w):w.isLineBasicMaterial?(s(S,w),w.isLineDashedMaterial&&l(S,w)):w.isPointsMaterial?c(S,w,R,P):w.isSpriteMaterial?h(S,w):w.isShadowMaterial?(S.color.value.copy(w.color),S.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(S,w){S.opacity.value=w.opacity,w.color&&S.diffuse.value.copy(w.color),w.emissive&&S.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.bumpMap&&(S.bumpMap.value=w.bumpMap,t(w.bumpMap,S.bumpMapTransform),S.bumpScale.value=w.bumpScale,w.side===qs&&(S.bumpScale.value*=-1)),w.normalMap&&(S.normalMap.value=w.normalMap,t(w.normalMap,S.normalMapTransform),S.normalScale.value.copy(w.normalScale),w.side===qs&&S.normalScale.value.negate()),w.displacementMap&&(S.displacementMap.value=w.displacementMap,t(w.displacementMap,S.displacementMapTransform),S.displacementScale.value=w.displacementScale,S.displacementBias.value=w.displacementBias),w.emissiveMap&&(S.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,S.emissiveMapTransform)),w.specularMap&&(S.specularMap.value=w.specularMap,t(w.specularMap,S.specularMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest);const R=e.get(w),P=R.envMap,O=R.envMapRotation;P&&(S.envMap.value=P,Hp.copy(O),Hp.x*=-1,Hp.y*=-1,Hp.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Hp.y*=-1,Hp.z*=-1),S.envMapRotation.value.setFromMatrix4(ene.makeRotationFromEuler(Hp)),S.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=w.reflectivity,S.ior.value=w.ior,S.refractionRatio.value=w.refractionRatio),w.lightMap&&(S.lightMap.value=w.lightMap,S.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,S.lightMapTransform)),w.aoMap&&(S.aoMap.value=w.aoMap,S.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,S.aoMapTransform))}function s(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform))}function l(S,w){S.dashSize.value=w.dashSize,S.totalSize.value=w.dashSize+w.gapSize,S.scale.value=w.scale}function c(S,w,R,P){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.size.value=w.size*R,S.scale.value=P*.5,w.map&&(S.map.value=w.map,t(w.map,S.uvTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function h(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.rotation.value=w.rotation,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function p(S,w){S.specular.value.copy(w.specular),S.shininess.value=Math.max(w.shininess,1e-4)}function g(S,w){w.gradientMap&&(S.gradientMap.value=w.gradientMap)}function v(S,w){S.metalness.value=w.metalness,w.metalnessMap&&(S.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,S.metalnessMapTransform)),S.roughness.value=w.roughness,w.roughnessMap&&(S.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,S.roughnessMapTransform)),w.envMap&&(S.envMapIntensity.value=w.envMapIntensity)}function b(S,w,R){S.ior.value=w.ior,w.sheen>0&&(S.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),S.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(S.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,S.sheenColorMapTransform)),w.sheenRoughnessMap&&(S.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,S.sheenRoughnessMapTransform))),w.clearcoat>0&&(S.clearcoat.value=w.clearcoat,S.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(S.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,S.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(S.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===qs&&S.clearcoatNormalScale.value.negate())),w.dispersion>0&&(S.dispersion.value=w.dispersion),w.iridescence>0&&(S.iridescence.value=w.iridescence,S.iridescenceIOR.value=w.iridescenceIOR,S.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(S.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,S.iridescenceMapTransform)),w.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),w.transmission>0&&(S.transmission.value=w.transmission,S.transmissionSamplerMap.value=R.texture,S.transmissionSamplerSize.value.set(R.width,R.height),w.transmissionMap&&(S.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,S.transmissionMapTransform)),S.thickness.value=w.thickness,w.thicknessMap&&(S.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=w.attenuationDistance,S.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(S.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(S.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=w.specularIntensity,S.specularColor.value.copy(w.specularColor),w.specularColorMap&&(S.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,S.specularColorMapTransform)),w.specularIntensityMap&&(S.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,S.specularIntensityMapTransform))}function _(S,w){w.matcap&&(S.matcap.value=w.matcap)}function M(S,w){const R=e.get(w).light;S.referencePosition.value.setFromMatrixPosition(R.matrixWorld),S.nearDistance.value=R.shadow.camera.near,S.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function nne(n,e,t,i){let r={},a={},s=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(R,P){const O=P.program;i.uniformBlockBinding(R,O)}function h(R,P){let O=r[R.id];O===void 0&&(_(R),O=p(R),r[R.id]=O,R.addEventListener("dispose",S));const k=P.program;i.updateUBOMapping(R,k);const B=e.render.frame;a[R.id]!==B&&(v(R),a[R.id]=B)}function p(R){const P=g();R.__bindingPointIndex=P;const O=n.createBuffer(),k=R.__size,B=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,O),n.bufferData(n.UNIFORM_BUFFER,k,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,P,O),O}function g(){for(let R=0;R<l;R++)if(s.indexOf(R)===-1)return s.push(R),R;return Yt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(R){const P=r[R.id],O=R.uniforms,k=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,P);for(let B=0,D=O.length;B<D;B++){const F=Array.isArray(O[B])?O[B]:[O[B]];for(let I=0,L=F.length;I<L;I++){const H=F[I];if(b(H,B,I,k)===!0){const q=H.__offset,W=Array.isArray(H.value)?H.value:[H.value];let oe=0;for(let fe=0;fe<W.length;fe++){const te=W[fe],re=M(te);typeof te=="number"||typeof te=="boolean"?(H.__data[0]=te,n.bufferSubData(n.UNIFORM_BUFFER,q+oe,H.__data)):te.isMatrix3?(H.__data[0]=te.elements[0],H.__data[1]=te.elements[1],H.__data[2]=te.elements[2],H.__data[3]=0,H.__data[4]=te.elements[3],H.__data[5]=te.elements[4],H.__data[6]=te.elements[5],H.__data[7]=0,H.__data[8]=te.elements[6],H.__data[9]=te.elements[7],H.__data[10]=te.elements[8],H.__data[11]=0):(te.toArray(H.__data,oe),oe+=re.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,q,H.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function b(R,P,O,k){const B=R.value,D=P+"_"+O;if(k[D]===void 0)return typeof B=="number"||typeof B=="boolean"?k[D]=B:k[D]=B.clone(),!0;{const F=k[D];if(typeof B=="number"||typeof B=="boolean"){if(F!==B)return k[D]=B,!0}else if(F.equals(B)===!1)return F.copy(B),!0}return!1}function _(R){const P=R.uniforms;let O=0;const k=16;for(let D=0,F=P.length;D<F;D++){const I=Array.isArray(P[D])?P[D]:[P[D]];for(let L=0,H=I.length;L<H;L++){const q=I[L],W=Array.isArray(q.value)?q.value:[q.value];for(let oe=0,fe=W.length;oe<fe;oe++){const te=W[oe],re=M(te),he=O%k,Me=he%re.boundary,Ne=he+Me;O+=Me,Ne!==0&&k-Ne<re.storage&&(O+=k-Ne),q.__data=new Float32Array(re.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=O,O+=re.storage}}}const B=O%k;return B>0&&(O+=k-B),R.__size=O,R.__cache={},this}function M(R){const P={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(P.boundary=4,P.storage=4):R.isVector2?(P.boundary=8,P.storage=8):R.isVector3||R.isColor?(P.boundary=16,P.storage=12):R.isVector4?(P.boundary=16,P.storage=16):R.isMatrix3?(P.boundary=48,P.storage=48):R.isMatrix4?(P.boundary=64,P.storage=64):R.isTexture?Rt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Rt("WebGLRenderer: Unsupported uniform value type.",R),P}function S(R){const P=R.target;P.removeEventListener("dispose",S);const O=s.indexOf(P.__bindingPointIndex);s.splice(O,1),n.deleteBuffer(r[P.id]),delete r[P.id],delete a[P.id]}function w(){for(const R in r)n.deleteBuffer(r[R]);s=[],r={},a={}}return{bind:c,update:h,dispose:w}}const ine=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let pc=null;function rne(){return pc===null&&(pc=new Eu(ine,16,16,_m,Dc),pc.name="DFG_LUT",pc.minFilter=Xi,pc.magFilter=Xi,pc.wrapS=Mo,pc.wrapT=Mo,pc.generateMipmaps=!1,pc.needsUpdate=!0),pc}class M6{constructor(e={}){const{canvas:t=v2(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:v=!1,outputBufferType:b=Bs}=e;this.isWebGLRenderer=!0;let _;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=i.getContextAttributes().alpha}else _=s;const M=b,S=new Set([MM,EM,Ox]),w=new Set([Bs,Fl,kv,zv,_M,SM]),R=new Uint32Array(4),P=new Int32Array(4);let O=null,k=null;const B=[],D=[];let F=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=zl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const I=this;let L=!1;this._outputColorSpace=qa;let H=0,q=0,W=null,oe=-1,fe=null;const te=new Pi,re=new Pi;let he=null;const Me=new Lt(0);let Ne=0,Q=t.width,de=t.height,Ae=1,We=null,bt=null;const _e=new Pi(0,0,Q,de),Te=new Pi(0,0,Q,de);let ut=!1;const ve=new u0;let et=!1,At=!1;const He=new pn,Ct=new ne,Oe=new Pi,Ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let je=!1;function ht(){return W===null?Ae:1}let ie=i;function Mt(K,ge){return t.getContext(K,ge)}try{const K={alpha:!0,depth:r,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${vM}`),t.addEventListener("webglcontextlost",Ht,!1),t.addEventListener("webglcontextrestored",cn,!1),t.addEventListener("webglcontextcreationerror",Jt,!1),ie===null){const ge="webgl2";if(ie=Mt(ge,K),ie===null)throw Mt(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(K){throw Yt("WebGLRenderer: "+K.message),K}let gt,Ut,vt,J,X,pe,ke,Ye,Le,Tt,le,Ee,st,Ge,Xe,ft,ae,ye,dt,se,rt,nt,ot,it;function $e(){gt=new aee(ie),gt.init(),nt=new E6(ie,gt),Ut=new KJ(ie,gt,e,nt),vt=new Xte(ie,gt),Ut.reversedDepthBuffer&&v&&vt.buffers.depth.setReversed(!0),J=new lee(ie),X=new Ote,pe=new Yte(ie,gt,vt,X,Ut,nt,J),ke=new QJ(I),Ye=new ree(I),Le=new hZ(ie),ot=new XJ(ie,Le),Tt=new see(ie,Le,J,ot),le=new cee(ie,Tt,Le,J),dt=new uee(ie,Ut,pe),ft=new ZJ(X),Ee=new Nte(I,ke,Ye,gt,Ut,ot,ft),st=new tne(I,X),Ge=new Lte,Xe=new Vte(gt),ye=new $J(I,ke,Ye,vt,le,_,c),ae=new Wte(I,le,Ut),it=new nne(ie,J,Ut,vt),se=new YJ(ie,gt,J),rt=new oee(ie,gt,J),J.programs=Ee.programs,I.capabilities=Ut,I.extensions=gt,I.properties=X,I.renderLists=Ge,I.shadowMap=ae,I.state=vt,I.info=J}$e(),M!==Bs&&(F=new hee(M,t.width,t.height,r,a));const lt=new Jte(I,ie);this.xr=lt,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const K=gt.get("WEBGL_lose_context");K&&K.loseContext()},this.forceContextRestore=function(){const K=gt.get("WEBGL_lose_context");K&&K.restoreContext()},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(K){K!==void 0&&(Ae=K,this.setSize(Q,de,!1))},this.getSize=function(K){return K.set(Q,de)},this.setSize=function(K,ge,Ue=!0){if(lt.isPresenting){Rt("WebGLRenderer: Can't change size while VR device is presenting.");return}Q=K,de=ge,t.width=Math.floor(K*Ae),t.height=Math.floor(ge*Ae),Ue===!0&&(t.style.width=K+"px",t.style.height=ge+"px"),F!==null&&F.setSize(t.width,t.height),this.setViewport(0,0,K,ge)},this.getDrawingBufferSize=function(K){return K.set(Q*Ae,de*Ae).floor()},this.setDrawingBufferSize=function(K,ge,Ue){Q=K,de=ge,Ae=Ue,t.width=Math.floor(K*Ue),t.height=Math.floor(ge*Ue),this.setViewport(0,0,K,ge)},this.setEffects=function(K){if(M===Bs){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(K){for(let ge=0;ge<K.length;ge++)if(K[ge].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}F.setEffects(K||[])},this.getCurrentViewport=function(K){return K.copy(te)},this.getViewport=function(K){return K.copy(_e)},this.setViewport=function(K,ge,Ue,Re){K.isVector4?_e.set(K.x,K.y,K.z,K.w):_e.set(K,ge,Ue,Re),vt.viewport(te.copy(_e).multiplyScalar(Ae).round())},this.getScissor=function(K){return K.copy(Te)},this.setScissor=function(K,ge,Ue,Re){K.isVector4?Te.set(K.x,K.y,K.z,K.w):Te.set(K,ge,Ue,Re),vt.scissor(re.copy(Te).multiplyScalar(Ae).round())},this.getScissorTest=function(){return ut},this.setScissorTest=function(K){vt.setScissorTest(ut=K)},this.setOpaqueSort=function(K){We=K},this.setTransparentSort=function(K){bt=K},this.getClearColor=function(K){return K.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor(...arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha(...arguments)},this.clear=function(K=!0,ge=!0,Ue=!0){let Re=0;if(K){let xe=!1;if(W!==null){const xt=W.texture.format;xe=S.has(xt)}if(xe){const xt=W.texture.type,Pt=w.has(xt),mt=ye.getClearColor(),Dt=ye.getClearAlpha(),kt=mt.r,Vt=mt.g,It=mt.b;Pt?(R[0]=kt,R[1]=Vt,R[2]=It,R[3]=Dt,ie.clearBufferuiv(ie.COLOR,0,R)):(P[0]=kt,P[1]=Vt,P[2]=It,P[3]=Dt,ie.clearBufferiv(ie.COLOR,0,P))}else Re|=ie.COLOR_BUFFER_BIT}ge&&(Re|=ie.DEPTH_BUFFER_BIT),Ue&&(Re|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ht,!1),t.removeEventListener("webglcontextrestored",cn,!1),t.removeEventListener("webglcontextcreationerror",Jt,!1),ye.dispose(),Ge.dispose(),Xe.dispose(),X.dispose(),ke.dispose(),Ye.dispose(),le.dispose(),ot.dispose(),it.dispose(),Ee.dispose(),lt.dispose(),lt.removeEventListener("sessionstart",Aa),lt.removeEventListener("sessionend",Wl),Ai.stop()};function Ht(K){K.preventDefault(),Kb("WebGLRenderer: Context Lost."),L=!0}function cn(){Kb("WebGLRenderer: Context Restored."),L=!1;const K=J.autoReset,ge=ae.enabled,Ue=ae.autoUpdate,Re=ae.needsUpdate,xe=ae.type;$e(),J.autoReset=K,ae.enabled=ge,ae.autoUpdate=Ue,ae.needsUpdate=Re,ae.type=xe}function Jt(K){Yt("WebGLRenderer: A WebGL context could not be created. Reason: ",K.statusMessage)}function si(K){const ge=K.target;ge.removeEventListener("dispose",si),ar(ge)}function ar(K){ws(K),X.remove(K)}function ws(K){const ge=X.get(K).programs;ge!==void 0&&(ge.forEach(function(Ue){Ee.releaseProgram(Ue)}),K.isShaderMaterial&&Ee.releaseShaderCache(K))}this.renderBufferDirect=function(K,ge,Ue,Re,xe,xt){ge===null&&(ge=Ze);const Pt=xe.isMesh&&xe.matrixWorld.determinant()<0,mt=ua(K,ge,Ue,Re,xe);vt.setMaterial(Re,Pt);let Dt=Ue.index,kt=1;if(Re.wireframe===!0){if(Dt=Tt.getWireframeAttribute(Ue),Dt===void 0)return;kt=2}const Vt=Ue.drawRange,It=Ue.attributes.position;let $t=Vt.start*kt,Pn=(Vt.start+Vt.count)*kt;xt!==null&&($t=Math.max($t,xt.start*kt),Pn=Math.min(Pn,(xt.start+xt.count)*kt)),Dt!==null?($t=Math.max($t,0),Pn=Math.min(Pn,Dt.count)):It!=null&&($t=Math.max($t,0),Pn=Math.min(Pn,It.count));const ni=Pn-$t;if(ni<0||ni===1/0)return;ot.setup(xe,Re,mt,Ue,Dt);let Kt,on=se;if(Dt!==null&&(Kt=Le.get(Dt),on=rt,on.setIndex(Kt)),xe.isMesh)Re.wireframe===!0?(vt.setLineWidth(Re.wireframeLinewidth*ht()),on.setMode(ie.LINES)):on.setMode(ie.TRIANGLES);else if(xe.isLine){let Et=Re.linewidth;Et===void 0&&(Et=1),vt.setLineWidth(Et*ht()),xe.isLineSegments?on.setMode(ie.LINES):xe.isLineLoop?on.setMode(ie.LINE_LOOP):on.setMode(ie.LINE_STRIP)}else xe.isPoints?on.setMode(ie.POINTS):xe.isSprite&&on.setMode(ie.TRIANGLES);if(xe.isBatchedMesh)if(xe._multiDrawInstances!==null)Bv("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),on.renderMultiDrawInstances(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount,xe._multiDrawInstances);else if(gt.get("WEBGL_multi_draw"))on.renderMultiDraw(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount);else{const Et=xe._multiDrawStarts,Mn=xe._multiDrawCounts,tn=xe._multiDrawCount,ki=Dt?Le.get(Dt).bytesPerElement:1,Ms=X.get(Re).currentProgram.getUniforms();for(let vi=0;vi<tn;vi++)Ms.setValue(ie,"_gl_DrawID",vi),on.render(Et[vi]/ki,Mn[vi])}else if(xe.isInstancedMesh)on.renderInstances($t,ni,xe.count);else if(Ue.isInstancedBufferGeometry){const Et=Ue._maxInstanceCount!==void 0?Ue._maxInstanceCount:1/0,Mn=Math.min(Ue.instanceCount,Et);on.renderInstances($t,ni,Mn)}else on.render($t,ni)};function Po(K,ge,Ue){K.transparent===!0&&K.side===_c&&K.forceSinglePass===!1?(K.side=qs,K.needsUpdate=!0,Ta(K,ge,Ue),K.side=Hf,K.needsUpdate=!0,Ta(K,ge,Ue),K.side=_c):Ta(K,ge,Ue)}this.compile=function(K,ge,Ue=null){Ue===null&&(Ue=K),k=Xe.get(Ue),k.init(ge),D.push(k),Ue.traverseVisible(function(xe){xe.isLight&&xe.layers.test(ge.layers)&&(k.pushLight(xe),xe.castShadow&&k.pushShadow(xe))}),K!==Ue&&K.traverseVisible(function(xe){xe.isLight&&xe.layers.test(ge.layers)&&(k.pushLight(xe),xe.castShadow&&k.pushShadow(xe))}),k.setupLights();const Re=new Set;return K.traverse(function(xe){if(!(xe.isMesh||xe.isPoints||xe.isLine||xe.isSprite))return;const xt=xe.material;if(xt)if(Array.isArray(xt))for(let Pt=0;Pt<xt.length;Pt++){const mt=xt[Pt];Po(mt,Ue,xe),Re.add(mt)}else Po(xt,Ue,xe),Re.add(xt)}),k=D.pop(),Re},this.compileAsync=function(K,ge,Ue=null){const Re=this.compile(K,ge,Ue);return new Promise(xe=>{function xt(){if(Re.forEach(function(Pt){X.get(Pt).currentProgram.isReady()&&Re.delete(Pt)}),Re.size===0){xe(K);return}setTimeout(xt,10)}gt.get("KHR_parallel_shader_compile")!==null?xt():setTimeout(xt,10)})};let nl=null;function Ks(K){nl&&nl(K)}function Aa(){Ai.stop()}function Wl(){Ai.start()}const Ai=new b6;Ai.setAnimationLoop(Ks),typeof self<"u"&&Ai.setContext(self),this.setAnimationLoop=function(K){nl=K,lt.setAnimationLoop(K),K===null?Ai.stop():Ai.start()},lt.addEventListener("sessionstart",Aa),lt.addEventListener("sessionend",Wl),this.render=function(K,ge){if(ge!==void 0&&ge.isCamera!==!0){Yt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;const Ue=lt.enabled===!0&&lt.isPresenting===!0,Re=F!==null&&(W===null||Ue)&&F.begin(I,W);if(K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),lt.enabled===!0&&lt.isPresenting===!0&&(F===null||F.isCompositing()===!1)&&(lt.cameraAutoUpdate===!0&&lt.updateCamera(ge),ge=lt.getCamera()),K.isScene===!0&&K.onBeforeRender(I,K,ge,W),k=Xe.get(K,D.length),k.init(ge),D.push(k),He.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),ve.setFromProjectionMatrix(He,$o,ge.reversedDepth),At=this.localClippingEnabled,et=ft.init(this.clippingPlanes,At),O=Ge.get(K,B.length),O.init(),B.push(O),lt.enabled===!0&&lt.isPresenting===!0){const Pt=I.xr.getDepthSensingMesh();Pt!==null&&oa(Pt,ge,-1/0,I.sortObjects)}oa(K,ge,0,I.sortObjects),O.finish(),I.sortObjects===!0&&O.sort(We,bt),je=lt.enabled===!1||lt.isPresenting===!1||lt.hasDepthSensing()===!1,je&&ye.addToRenderList(O,K),this.info.render.frame++,et===!0&&ft.beginShadows();const xe=k.state.shadowsArray;if(ae.render(xe,K,ge),et===!0&&ft.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Re&&F.hasRenderPass())===!1){const Pt=O.opaque,mt=O.transmissive;if(k.setupLights(),ge.isArrayCamera){const Dt=ge.cameras;if(mt.length>0)for(let kt=0,Vt=Dt.length;kt<Vt;kt++){const It=Dt[kt];Ui(Pt,mt,K,It)}je&&ye.render(K);for(let kt=0,Vt=Dt.length;kt<Vt;kt++){const It=Dt[kt];xi(O,K,It,It.viewport)}}else mt.length>0&&Ui(Pt,mt,K,ge),je&&ye.render(K),xi(O,K,ge)}W!==null&&q===0&&(pe.updateMultisampleRenderTarget(W),pe.updateRenderTargetMipmap(W)),Re&&F.end(I),K.isScene===!0&&K.onAfterRender(I,K,ge),ot.resetDefaultState(),oe=-1,fe=null,D.pop(),D.length>0?(k=D[D.length-1],et===!0&&ft.setGlobalState(I.clippingPlanes,k.state.camera)):k=null,B.pop(),B.length>0?O=B[B.length-1]:O=null};function oa(K,ge,Ue,Re){if(K.visible===!1)return;if(K.layers.test(ge.layers)){if(K.isGroup)Ue=K.renderOrder;else if(K.isLOD)K.autoUpdate===!0&&K.update(ge);else if(K.isLight)k.pushLight(K),K.castShadow&&k.pushShadow(K);else if(K.isSprite){if(!K.frustumCulled||ve.intersectsSprite(K)){Re&&Oe.setFromMatrixPosition(K.matrixWorld).applyMatrix4(He);const Pt=le.update(K),mt=K.material;mt.visible&&O.push(K,Pt,mt,Ue,Oe.z,null)}}else if((K.isMesh||K.isLine||K.isPoints)&&(!K.frustumCulled||ve.intersectsObject(K))){const Pt=le.update(K),mt=K.material;if(Re&&(K.boundingSphere!==void 0?(K.boundingSphere===null&&K.computeBoundingSphere(),Oe.copy(K.boundingSphere.center)):(Pt.boundingSphere===null&&Pt.computeBoundingSphere(),Oe.copy(Pt.boundingSphere.center)),Oe.applyMatrix4(K.matrixWorld).applyMatrix4(He)),Array.isArray(mt)){const Dt=Pt.groups;for(let kt=0,Vt=Dt.length;kt<Vt;kt++){const It=Dt[kt],$t=mt[It.materialIndex];$t&&$t.visible&&O.push(K,Pt,$t,Ue,Oe.z,It)}}else mt.visible&&O.push(K,Pt,mt,Ue,Oe.z,null)}}const xt=K.children;for(let Pt=0,mt=xt.length;Pt<mt;Pt++)oa(xt[Pt],ge,Ue,Re)}function xi(K,ge,Ue,Re){const{opaque:xe,transmissive:xt,transparent:Pt}=K;k.setupLightsView(Ue),et===!0&&ft.setGlobalState(I.clippingPlanes,Ue),Re&&vt.viewport(te.copy(Re)),xe.length>0&&$r(xe,ge,Ue),xt.length>0&&$r(xt,ge,Ue),Pt.length>0&&$r(Pt,ge,Ue),vt.buffers.depth.setTest(!0),vt.buffers.depth.setMask(!0),vt.buffers.color.setMask(!0),vt.setPolygonOffset(!1)}function Ui(K,ge,Ue,Re){if((Ue.isScene===!0?Ue.overrideMaterial:null)!==null)return;if(k.state.transmissionRenderTarget[Re.id]===void 0){const $t=gt.has("EXT_color_buffer_half_float")||gt.has("EXT_color_buffer_float");k.state.transmissionRenderTarget[Re.id]=new Zo(1,1,{generateMipmaps:!0,type:$t?Dc:Bs,minFilter:Ec,samples:Ut.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qn.workingColorSpace})}const xt=k.state.transmissionRenderTarget[Re.id],Pt=Re.viewport||te;xt.setSize(Pt.z*I.transmissionResolutionScale,Pt.w*I.transmissionResolutionScale);const mt=I.getRenderTarget(),Dt=I.getActiveCubeFace(),kt=I.getActiveMipmapLevel();I.setRenderTarget(xt),I.getClearColor(Me),Ne=I.getClearAlpha(),Ne<1&&I.setClearColor(16777215,.5),I.clear(),je&&ye.render(Ue);const Vt=I.toneMapping;I.toneMapping=zl;const It=Re.viewport;if(Re.viewport!==void 0&&(Re.viewport=void 0),k.setupLightsView(Re),et===!0&&ft.setGlobalState(I.clippingPlanes,Re),$r(K,Ue,Re),pe.updateMultisampleRenderTarget(xt),pe.updateRenderTargetMipmap(xt),gt.has("WEBGL_multisampled_render_to_texture")===!1){let $t=!1;for(let Pn=0,ni=ge.length;Pn<ni;Pn++){const Kt=ge[Pn],{object:on,geometry:Et,material:Mn,group:tn}=Kt;if(Mn.side===_c&&on.layers.test(Re.layers)){const ki=Mn.side;Mn.side=qs,Mn.needsUpdate=!0,la(on,Ue,Re,Et,Mn,tn),Mn.side=ki,Mn.needsUpdate=!0,$t=!0}}$t===!0&&(pe.updateMultisampleRenderTarget(xt),pe.updateRenderTargetMipmap(xt))}I.setRenderTarget(mt,Dt,kt),I.setClearColor(Me,Ne),It!==void 0&&(Re.viewport=It),I.toneMapping=Vt}function $r(K,ge,Ue){const Re=ge.isScene===!0?ge.overrideMaterial:null;for(let xe=0,xt=K.length;xe<xt;xe++){const Pt=K[xe],{object:mt,geometry:Dt,group:kt}=Pt;let Vt=Pt.material;Vt.allowOverride===!0&&Re!==null&&(Vt=Re),mt.layers.test(Ue.layers)&&la(mt,ge,Ue,Dt,Vt,kt)}}function la(K,ge,Ue,Re,xe,xt){K.onBeforeRender(I,ge,Ue,Re,xe,xt),K.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,K.matrixWorld),K.normalMatrix.getNormalMatrix(K.modelViewMatrix),xe.onBeforeRender(I,ge,Ue,Re,K,xt),xe.transparent===!0&&xe.side===_c&&xe.forceSinglePass===!1?(xe.side=qs,xe.needsUpdate=!0,I.renderBufferDirect(Ue,ge,Re,xe,K,xt),xe.side=Hf,xe.needsUpdate=!0,I.renderBufferDirect(Ue,ge,Re,xe,K,xt),xe.side=_c):I.renderBufferDirect(Ue,ge,Re,xe,K,xt),K.onAfterRender(I,ge,Ue,Re,xe,xt)}function Ta(K,ge,Ue){ge.isScene!==!0&&(ge=Ze);const Re=X.get(K),xe=k.state.lights,xt=k.state.shadowsArray,Pt=xe.state.version,mt=Ee.getParameters(K,xe.state,xt,ge,Ue),Dt=Ee.getProgramCacheKey(mt);let kt=Re.programs;Re.environment=K.isMeshStandardMaterial?ge.environment:null,Re.fog=ge.fog,Re.envMap=(K.isMeshStandardMaterial?Ye:ke).get(K.envMap||Re.environment),Re.envMapRotation=Re.environment!==null&&K.envMap===null?ge.environmentRotation:K.envMapRotation,kt===void 0&&(K.addEventListener("dispose",si),kt=new Map,Re.programs=kt);let Vt=kt.get(Dt);if(Vt!==void 0){if(Re.currentProgram===Vt&&Re.lightsStateVersion===Pt)return $l(K,mt),Vt}else mt.uniforms=Ee.getUniforms(K),K.onBeforeCompile(mt,I),Vt=Ee.acquireProgram(mt,Dt),kt.set(Dt,Vt),Re.uniforms=mt.uniforms;const It=Re.uniforms;return(!K.isShaderMaterial&&!K.isRawShaderMaterial||K.clipping===!0)&&(It.clippingPlanes=ft.uniform),$l(K,mt),Re.needsLights=Es(K),Re.lightsStateVersion=Pt,Re.needsLights&&(It.ambientLightColor.value=xe.state.ambient,It.lightProbe.value=xe.state.probe,It.directionalLights.value=xe.state.directional,It.directionalLightShadows.value=xe.state.directionalShadow,It.spotLights.value=xe.state.spot,It.spotLightShadows.value=xe.state.spotShadow,It.rectAreaLights.value=xe.state.rectArea,It.ltc_1.value=xe.state.rectAreaLTC1,It.ltc_2.value=xe.state.rectAreaLTC2,It.pointLights.value=xe.state.point,It.pointLightShadows.value=xe.state.pointShadow,It.hemisphereLights.value=xe.state.hemi,It.directionalShadowMap.value=xe.state.directionalShadowMap,It.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,It.spotShadowMap.value=xe.state.spotShadowMap,It.spotLightMatrix.value=xe.state.spotLightMatrix,It.spotLightMap.value=xe.state.spotLightMap,It.pointShadowMap.value=xe.state.pointShadowMap,It.pointShadowMatrix.value=xe.state.pointShadowMatrix),Re.currentProgram=Vt,Re.uniformsList=null,Vt}function Io(K){if(K.uniformsList===null){const ge=K.currentProgram.getUniforms();K.uniformsList=$1.seqWithValue(ge.seq,K.uniforms)}return K.uniformsList}function $l(K,ge){const Ue=X.get(K);Ue.outputColorSpace=ge.outputColorSpace,Ue.batching=ge.batching,Ue.batchingColor=ge.batchingColor,Ue.instancing=ge.instancing,Ue.instancingColor=ge.instancingColor,Ue.instancingMorph=ge.instancingMorph,Ue.skinning=ge.skinning,Ue.morphTargets=ge.morphTargets,Ue.morphNormals=ge.morphNormals,Ue.morphColors=ge.morphColors,Ue.morphTargetsCount=ge.morphTargetsCount,Ue.numClippingPlanes=ge.numClippingPlanes,Ue.numIntersection=ge.numClipIntersection,Ue.vertexAlphas=ge.vertexAlphas,Ue.vertexTangents=ge.vertexTangents,Ue.toneMapping=ge.toneMapping}function ua(K,ge,Ue,Re,xe){ge.isScene!==!0&&(ge=Ze),pe.resetTextureUnits();const xt=ge.fog,Pt=Re.isMeshStandardMaterial?ge.environment:null,mt=W===null?I.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:Cd,Dt=(Re.isMeshStandardMaterial?Ye:ke).get(Re.envMap||Pt),kt=Re.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,Vt=!!Ue.attributes.tangent&&(!!Re.normalMap||Re.anisotropy>0),It=!!Ue.morphAttributes.position,$t=!!Ue.morphAttributes.normal,Pn=!!Ue.morphAttributes.color;let ni=zl;Re.toneMapped&&(W===null||W.isXRRenderTarget===!0)&&(ni=I.toneMapping);const Kt=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,on=Kt!==void 0?Kt.length:0,Et=X.get(Re),Mn=k.state.lights;if(et===!0&&(At===!0||K!==fe)){const sr=K===fe&&Re.id===oe;ft.setState(Re,K,sr)}let tn=!1;Re.version===Et.__version?(Et.needsLights&&Et.lightsStateVersion!==Mn.state.version||Et.outputColorSpace!==mt||xe.isBatchedMesh&&Et.batching===!1||!xe.isBatchedMesh&&Et.batching===!0||xe.isBatchedMesh&&Et.batchingColor===!0&&xe.colorTexture===null||xe.isBatchedMesh&&Et.batchingColor===!1&&xe.colorTexture!==null||xe.isInstancedMesh&&Et.instancing===!1||!xe.isInstancedMesh&&Et.instancing===!0||xe.isSkinnedMesh&&Et.skinning===!1||!xe.isSkinnedMesh&&Et.skinning===!0||xe.isInstancedMesh&&Et.instancingColor===!0&&xe.instanceColor===null||xe.isInstancedMesh&&Et.instancingColor===!1&&xe.instanceColor!==null||xe.isInstancedMesh&&Et.instancingMorph===!0&&xe.morphTexture===null||xe.isInstancedMesh&&Et.instancingMorph===!1&&xe.morphTexture!==null||Et.envMap!==Dt||Re.fog===!0&&Et.fog!==xt||Et.numClippingPlanes!==void 0&&(Et.numClippingPlanes!==ft.numPlanes||Et.numIntersection!==ft.numIntersection)||Et.vertexAlphas!==kt||Et.vertexTangents!==Vt||Et.morphTargets!==It||Et.morphNormals!==$t||Et.morphColors!==Pn||Et.toneMapping!==ni||Et.morphTargetsCount!==on)&&(tn=!0):(tn=!0,Et.__version=Re.version);let ki=Et.currentProgram;tn===!0&&(ki=Ta(Re,ge,xe));let Ms=!1,vi=!1,Xr=!1;const Yn=ki.getUniforms(),Ti=Et.uniforms;if(vt.useProgram(ki.program)&&(Ms=!0,vi=!0,Xr=!0),Re.id!==oe&&(oe=Re.id,vi=!0),Ms||fe!==K){vt.buffers.depth.getReversed()&&K.reversedDepth!==!0&&(K._reversedDepth=!0,K.updateProjectionMatrix()),Yn.setValue(ie,"projectionMatrix",K.projectionMatrix),Yn.setValue(ie,"viewMatrix",K.matrixWorldInverse);const or=Yn.map.cameraPosition;or!==void 0&&or.setValue(ie,Ct.setFromMatrixPosition(K.matrixWorld)),Ut.logarithmicDepthBuffer&&Yn.setValue(ie,"logDepthBufFC",2/(Math.log(K.far+1)/Math.LN2)),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&Yn.setValue(ie,"isOrthographic",K.isOrthographicCamera===!0),fe!==K&&(fe=K,vi=!0,Xr=!0)}if(Et.needsLights&&(Mn.state.directionalShadowMap.length>0&&Yn.setValue(ie,"directionalShadowMap",Mn.state.directionalShadowMap,pe),Mn.state.spotShadowMap.length>0&&Yn.setValue(ie,"spotShadowMap",Mn.state.spotShadowMap,pe),Mn.state.pointShadowMap.length>0&&Yn.setValue(ie,"pointShadowMap",Mn.state.pointShadowMap,pe)),xe.isSkinnedMesh){Yn.setOptional(ie,xe,"bindMatrix"),Yn.setOptional(ie,xe,"bindMatrixInverse");const sr=xe.skeleton;sr&&(sr.boneTexture===null&&sr.computeBoneTexture(),Yn.setValue(ie,"boneTexture",sr.boneTexture,pe))}xe.isBatchedMesh&&(Yn.setOptional(ie,xe,"batchingTexture"),Yn.setValue(ie,"batchingTexture",xe._matricesTexture,pe),Yn.setOptional(ie,xe,"batchingIdTexture"),Yn.setValue(ie,"batchingIdTexture",xe._indirectTexture,pe),Yn.setOptional(ie,xe,"batchingColorTexture"),xe._colorsTexture!==null&&Yn.setValue(ie,"batchingColorTexture",xe._colorsTexture,pe));const hi=Ue.morphAttributes;if((hi.position!==void 0||hi.normal!==void 0||hi.color!==void 0)&&dt.update(xe,Ue,ki),(vi||Et.receiveShadow!==xe.receiveShadow)&&(Et.receiveShadow=xe.receiveShadow,Yn.setValue(ie,"receiveShadow",xe.receiveShadow)),Re.isMeshGouraudMaterial&&Re.envMap!==null&&(Ti.envMap.value=Dt,Ti.flipEnvMap.value=Dt.isCubeTexture&&Dt.isRenderTargetTexture===!1?-1:1),Re.isMeshStandardMaterial&&Re.envMap===null&&ge.environment!==null&&(Ti.envMapIntensity.value=ge.environmentIntensity),Ti.dfgLUT!==void 0&&(Ti.dfgLUT.value=rne()),vi&&(Yn.setValue(ie,"toneMappingExposure",I.toneMappingExposure),Et.needsLights&&Zs(Ti,Xr),xt&&Re.fog===!0&&st.refreshFogUniforms(Ti,xt),st.refreshMaterialUniforms(Ti,Re,Ae,de,k.state.transmissionRenderTarget[K.id]),$1.upload(ie,Io(Et),Ti,pe)),Re.isShaderMaterial&&Re.uniformsNeedUpdate===!0&&($1.upload(ie,Io(Et),Ti,pe),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&Yn.setValue(ie,"center",xe.center),Yn.setValue(ie,"modelViewMatrix",xe.modelViewMatrix),Yn.setValue(ie,"normalMatrix",xe.normalMatrix),Yn.setValue(ie,"modelMatrix",xe.matrixWorld),Re.isShaderMaterial||Re.isRawShaderMaterial){const sr=Re.uniformsGroups;for(let or=0,il=sr.length;or<il;or++){const Ra=sr[or];it.update(Ra,ki),it.bind(Ra,ki)}}return ki}function Zs(K,ge){K.ambientLightColor.needsUpdate=ge,K.lightProbe.needsUpdate=ge,K.directionalLights.needsUpdate=ge,K.directionalLightShadows.needsUpdate=ge,K.pointLights.needsUpdate=ge,K.pointLightShadows.needsUpdate=ge,K.spotLights.needsUpdate=ge,K.spotLightShadows.needsUpdate=ge,K.rectAreaLights.needsUpdate=ge,K.hemisphereLights.needsUpdate=ge}function Es(K){return K.isMeshLambertMaterial||K.isMeshToonMaterial||K.isMeshPhongMaterial||K.isMeshStandardMaterial||K.isShadowMaterial||K.isShaderMaterial&&K.lights===!0}this.getActiveCubeFace=function(){return H},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return W},this.setRenderTargetTextures=function(K,ge,Ue){const Re=X.get(K);Re.__autoAllocateDepthBuffer=K.resolveDepthBuffer===!1,Re.__autoAllocateDepthBuffer===!1&&(Re.__useRenderToTexture=!1),X.get(K.texture).__webglTexture=ge,X.get(K.depthTexture).__webglTexture=Re.__autoAllocateDepthBuffer?void 0:Ue,Re.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(K,ge){const Ue=X.get(K);Ue.__webglFramebuffer=ge,Ue.__useDefaultFramebuffer=ge===void 0};const Ca=ie.createFramebuffer();this.setRenderTarget=function(K,ge=0,Ue=0){W=K,H=ge,q=Ue;let Re=null,xe=!1,xt=!1;if(K){const mt=X.get(K);if(mt.__useDefaultFramebuffer!==void 0){vt.bindFramebuffer(ie.FRAMEBUFFER,mt.__webglFramebuffer),te.copy(K.viewport),re.copy(K.scissor),he=K.scissorTest,vt.viewport(te),vt.scissor(re),vt.setScissorTest(he),oe=-1;return}else if(mt.__webglFramebuffer===void 0)pe.setupRenderTarget(K);else if(mt.__hasExternalTextures)pe.rebindTextures(K,X.get(K.texture).__webglTexture,X.get(K.depthTexture).__webglTexture);else if(K.depthBuffer){const Vt=K.depthTexture;if(mt.__boundDepthTexture!==Vt){if(Vt!==null&&X.has(Vt)&&(K.width!==Vt.image.width||K.height!==Vt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");pe.setupDepthRenderbuffer(K)}}const Dt=K.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(xt=!0);const kt=X.get(K).__webglFramebuffer;K.isWebGLCubeRenderTarget?(Array.isArray(kt[ge])?Re=kt[ge][Ue]:Re=kt[ge],xe=!0):K.samples>0&&pe.useMultisampledRTT(K)===!1?Re=X.get(K).__webglMultisampledFramebuffer:Array.isArray(kt)?Re=kt[Ue]:Re=kt,te.copy(K.viewport),re.copy(K.scissor),he=K.scissorTest}else te.copy(_e).multiplyScalar(Ae).floor(),re.copy(Te).multiplyScalar(Ae).floor(),he=ut;if(Ue!==0&&(Re=Ca),vt.bindFramebuffer(ie.FRAMEBUFFER,Re)&&vt.drawBuffers(K,Re),vt.viewport(te),vt.scissor(re),vt.setScissorTest(he),xe){const mt=X.get(K.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+ge,mt.__webglTexture,Ue)}else if(xt){const mt=ge;for(let Dt=0;Dt<K.textures.length;Dt++){const kt=X.get(K.textures[Dt]);ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0+Dt,kt.__webglTexture,Ue,mt)}}else if(K!==null&&Ue!==0){const mt=X.get(K.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,mt.__webglTexture,Ue)}oe=-1},this.readRenderTargetPixels=function(K,ge,Ue,Re,xe,xt,Pt,mt=0){if(!(K&&K.isWebGLRenderTarget)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Dt=X.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&Pt!==void 0&&(Dt=Dt[Pt]),Dt){vt.bindFramebuffer(ie.FRAMEBUFFER,Dt);try{const kt=K.textures[mt],Vt=kt.format,It=kt.type;if(!Ut.textureFormatReadable(Vt)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ut.textureTypeReadable(It)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=K.width-Re&&Ue>=0&&Ue<=K.height-xe&&(K.textures.length>1&&ie.readBuffer(ie.COLOR_ATTACHMENT0+mt),ie.readPixels(ge,Ue,Re,xe,nt.convert(Vt),nt.convert(It),xt))}finally{const kt=W!==null?X.get(W).__webglFramebuffer:null;vt.bindFramebuffer(ie.FRAMEBUFFER,kt)}}},this.readRenderTargetPixelsAsync=async function(K,ge,Ue,Re,xe,xt,Pt,mt=0){if(!(K&&K.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Dt=X.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&Pt!==void 0&&(Dt=Dt[Pt]),Dt)if(ge>=0&&ge<=K.width-Re&&Ue>=0&&Ue<=K.height-xe){vt.bindFramebuffer(ie.FRAMEBUFFER,Dt);const kt=K.textures[mt],Vt=kt.format,It=kt.type;if(!Ut.textureFormatReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ut.textureTypeReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const $t=ie.createBuffer();ie.bindBuffer(ie.PIXEL_PACK_BUFFER,$t),ie.bufferData(ie.PIXEL_PACK_BUFFER,xt.byteLength,ie.STREAM_READ),K.textures.length>1&&ie.readBuffer(ie.COLOR_ATTACHMENT0+mt),ie.readPixels(ge,Ue,Re,xe,nt.convert(Vt),nt.convert(It),0);const Pn=W!==null?X.get(W).__webglFramebuffer:null;vt.bindFramebuffer(ie.FRAMEBUFFER,Pn);const ni=ie.fenceSync(ie.SYNC_GPU_COMMANDS_COMPLETE,0);return ie.flush(),await pX(ie,ni,4),ie.bindBuffer(ie.PIXEL_PACK_BUFFER,$t),ie.getBufferSubData(ie.PIXEL_PACK_BUFFER,0,xt),ie.deleteBuffer($t),ie.deleteSync(ni),xt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(K,ge=null,Ue=0){const Re=Math.pow(2,-Ue),xe=Math.floor(K.image.width*Re),xt=Math.floor(K.image.height*Re),Pt=ge!==null?ge.x:0,mt=ge!==null?ge.y:0;pe.setTexture2D(K,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,Ue,0,0,Pt,mt,xe,xt),vt.unbindTexture()};const ca=ie.createFramebuffer(),Qa=ie.createFramebuffer();this.copyTextureToTexture=function(K,ge,Ue=null,Re=null,xe=0,xt=null){xt===null&&(xe!==0?(Bv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),xt=xe,xe=0):xt=0);let Pt,mt,Dt,kt,Vt,It,$t,Pn,ni;const Kt=K.isCompressedTexture?K.mipmaps[xt]:K.image;if(Ue!==null)Pt=Ue.max.x-Ue.min.x,mt=Ue.max.y-Ue.min.y,Dt=Ue.isBox3?Ue.max.z-Ue.min.z:1,kt=Ue.min.x,Vt=Ue.min.y,It=Ue.isBox3?Ue.min.z:0;else{const hi=Math.pow(2,-xe);Pt=Math.floor(Kt.width*hi),mt=Math.floor(Kt.height*hi),K.isDataArrayTexture?Dt=Kt.depth:K.isData3DTexture?Dt=Math.floor(Kt.depth*hi):Dt=1,kt=0,Vt=0,It=0}Re!==null?($t=Re.x,Pn=Re.y,ni=Re.z):($t=0,Pn=0,ni=0);const on=nt.convert(ge.format),Et=nt.convert(ge.type);let Mn;ge.isData3DTexture?(pe.setTexture3D(ge,0),Mn=ie.TEXTURE_3D):ge.isDataArrayTexture||ge.isCompressedArrayTexture?(pe.setTexture2DArray(ge,0),Mn=ie.TEXTURE_2D_ARRAY):(pe.setTexture2D(ge,0),Mn=ie.TEXTURE_2D),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,ge.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,ge.unpackAlignment);const tn=ie.getParameter(ie.UNPACK_ROW_LENGTH),ki=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),Ms=ie.getParameter(ie.UNPACK_SKIP_PIXELS),vi=ie.getParameter(ie.UNPACK_SKIP_ROWS),Xr=ie.getParameter(ie.UNPACK_SKIP_IMAGES);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Kt.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Kt.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,kt),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,Vt),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,It);const Yn=K.isDataArrayTexture||K.isData3DTexture,Ti=ge.isDataArrayTexture||ge.isData3DTexture;if(K.isDepthTexture){const hi=X.get(K),sr=X.get(ge),or=X.get(hi.__renderTarget),il=X.get(sr.__renderTarget);vt.bindFramebuffer(ie.READ_FRAMEBUFFER,or.__webglFramebuffer),vt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,il.__webglFramebuffer);for(let Ra=0;Ra<Dt;Ra++)Yn&&(ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,X.get(K).__webglTexture,xe,It+Ra),ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,X.get(ge).__webglTexture,xt,ni+Ra)),ie.blitFramebuffer(kt,Vt,Pt,mt,$t,Pn,Pt,mt,ie.DEPTH_BUFFER_BIT,ie.NEAREST);vt.bindFramebuffer(ie.READ_FRAMEBUFFER,null),vt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else if(xe!==0||K.isRenderTargetTexture||X.has(K)){const hi=X.get(K),sr=X.get(ge);vt.bindFramebuffer(ie.READ_FRAMEBUFFER,ca),vt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,Qa);for(let or=0;or<Dt;or++)Yn?ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,hi.__webglTexture,xe,It+or):ie.framebufferTexture2D(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,hi.__webglTexture,xe),Ti?ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,sr.__webglTexture,xt,ni+or):ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,sr.__webglTexture,xt),xe!==0?ie.blitFramebuffer(kt,Vt,Pt,mt,$t,Pn,Pt,mt,ie.COLOR_BUFFER_BIT,ie.NEAREST):Ti?ie.copyTexSubImage3D(Mn,xt,$t,Pn,ni+or,kt,Vt,Pt,mt):ie.copyTexSubImage2D(Mn,xt,$t,Pn,kt,Vt,Pt,mt);vt.bindFramebuffer(ie.READ_FRAMEBUFFER,null),vt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else Ti?K.isDataTexture||K.isData3DTexture?ie.texSubImage3D(Mn,xt,$t,Pn,ni,Pt,mt,Dt,on,Et,Kt.data):ge.isCompressedArrayTexture?ie.compressedTexSubImage3D(Mn,xt,$t,Pn,ni,Pt,mt,Dt,on,Kt.data):ie.texSubImage3D(Mn,xt,$t,Pn,ni,Pt,mt,Dt,on,Et,Kt):K.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,xt,$t,Pn,Pt,mt,on,Et,Kt.data):K.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,xt,$t,Pn,Kt.width,Kt.height,on,Kt.data):ie.texSubImage2D(ie.TEXTURE_2D,xt,$t,Pn,Pt,mt,on,Et,Kt);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,tn),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,ki),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,Ms),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,vi),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,Xr),xt===0&&ge.generateMipmaps&&ie.generateMipmap(Mn),vt.unbindTexture()},this.initRenderTarget=function(K){X.get(K).__webglFramebuffer===void 0&&pe.setupRenderTarget(K)},this.initTexture=function(K){K.isCubeTexture?pe.setTextureCube(K,0):K.isData3DTexture?pe.setTexture3D(K,0):K.isDataArrayTexture||K.isCompressedArrayTexture?pe.setTexture2DArray(K,0):pe.setTexture2D(K,0),vt.unbindTexture()},this.resetState=function(){H=0,q=0,W=null,vt.reset(),ot.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return $o}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=qn._getDrawingBufferColorSpace(e),t.unpackColorSpace=qn._getUnpackColorSpace()}}const ane=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:yM,AddEquation:cd,AddOperation:n2,AdditiveAnimationBlendMode:UN,AdditiveBlending:OP,AgXToneMapping:TN,AlphaFormat:DN,AlwaysCompare:p2,AlwaysDepth:dw,AlwaysStencilFunc:kP,AmbientLight:l6,AnimationAction:g6,AnimationClip:nx,AnimationLoader:iK,AnimationMixer:NK,AnimationObjectGroup:PK,AnimationUtils:JY,ArcCurve:L2,ArrayCamera:d6,ArrowHelper:iZ,AttachedBindMode:UP,Audio:p6,AudioAnalyser:xK,AudioContext:uO,AudioListener:vK,AudioLoader:pK,AxesHelper:rZ,BackSide:qs,BasicDepthPacking:o2,BasicShadowMap:U5,BatchedMesh:R2,Bone:GN,BooleanKeyframeTrack:Fm,Box2:VK,Box3:Xa,Box3Helper:tZ,BoxGeometry:zm,BoxHelper:eZ,BufferAttribute:fi,BufferGeometry:mn,BufferGeometryLoader:h6,ByteType:PN,Cache:Mc,Camera:IM,CameraHelper:JK,CanvasTexture:SY,CapsuleGeometry:zM,CatmullRomCurve3:U2,CineonToneMapping:MN,CircleGeometry:FM,ClampToEdgeWrapping:Mo,Clock:cO,Color:Lt,ColorKeyframeTrack:aO,ColorManagement:qn,CompressedArrayTexture:xY,CompressedCubeTexture:_Y,CompressedTexture:kM,CompressedTextureLoader:rK,ConeGeometry:Ux,ConstantAlphaFactor:J5,ConstantColorFactor:Z5,Controls:sZ,CubeCamera:w2,CubeDepthTexture:O2,CubeReflectionMapping:Oc,CubeRefractionMapping:Td,CubeTexture:Dx,CubeTextureLoader:aK,CubeUVReflectionMapping:l0,CubicBezierCurve:XN,CubicBezierCurve3:k2,CubicInterpolant:e6,CullFaceBack:NP,CullFaceFront:L5,CullFaceFrontBack:E$,CullFaceNone:D5,Curve:Iu,CurvePath:F2,CustomBlending:k5,CustomToneMapping:AN,CylinderGeometry:Lx,Cylindrical:BK,Data3DTexture:PM,DataArrayTexture:RM,DataTexture:Eu,DataTextureLoader:sK,DataUtils:qX,DecrementStencilOp:j$,DecrementWrapStencilOp:G$,DefaultLoadingManager:i6,DepthFormat:Lc,DepthStencilFormat:pd,DepthTexture:qv,DetachedBindMode:i2,DirectionalLight:o6,DirectionalLightHelper:QK,DiscreteInterpolant:t6,DodecahedronGeometry:BM,DoubleSide:_c,DstAlphaFactor:W5,DstColorFactor:X5,DynamicCopyUsage:aX,DynamicDrawUsage:J$,DynamicReadUsage:nX,EdgesGeometry:D2,EllipseCurve:VM,EqualCompare:f2,EqualDepth:mw,EqualStencilFunc:X$,EquirectangularReflectionMapping:Vb,EquirectangularRefractionMapping:jb,Euler:Jo,EventDispatcher:Gc,ExternalTexture:WN,ExtrudeGeometry:jM,FileLoader:Uc,Float16BufferAttribute:QX,Float32BufferAttribute:Ft,FloatType:js,Fog:OM,FogExp2:NM,FramebufferTexture:bY,FrontSide:Hf,Frustum:u0,FrustumArray:UM,GLBufferAttribute:kK,GLSL1:oX,GLSL3:zP,GreaterCompare:h2,GreaterDepth:vw,GreaterEqualCompare:CM,GreaterEqualDepth:gw,GreaterEqualStencilFunc:Q$,GreaterStencilFunc:K$,GridHelper:KK,Group:Ev,HalfFloatType:Dc,HemisphereLight:r6,HemisphereLightHelper:YK,IcosahedronGeometry:HM,ImageBitmapLoader:dK,ImageLoader:ix,ImageUtils:b2,IncrementStencilOp:V$,IncrementWrapStencilOp:H$,InstancedBufferAttribute:Gv,InstancedBufferGeometry:f6,InstancedInterleavedBuffer:UK,InstancedMesh:C2,Int16BufferAttribute:KX,Int32BufferAttribute:ZX,Int8BufferAttribute:$X,IntType:xM,InterleavedBuffer:DM,InterleavedBufferAttribute:Sm,Interpolant:Fx,InterpolateDiscrete:qb,InterpolateLinear:Zw,InterpolateSmooth:q1,InterpolationSamplingMode:cX,InterpolationSamplingType:uX,InvertStencilOp:q$,KeepStencilOp:Xp,KeyframeTrack:Gl,LOD:A2,LatheGeometry:GM,Layers:jv,LessCompare:c2,LessDepth:pw,LessEqualCompare:TM,LessEqualDepth:xm,LessEqualStencilFunc:Y$,LessStencilFunc:$$,Light:jd,LightProbe:c6,Line:Pd,Line3:GK,LineBasicMaterial:$s,LineCurve:YN,LineCurve3:z2,LineDashedMaterial:Q2,LineLoop:P2,LineSegments:qc,LinearFilter:Xi,LinearInterpolant:rO,LinearMipMapLinearFilter:C$,LinearMipMapNearestFilter:T$,LinearMipmapLinearFilter:Ec,LinearMipmapNearestFilter:Eb,LinearSRGBColorSpace:Cd,LinearToneMapping:wN,LinearTransfer:$b,Loader:Xs,LoaderUtils:HP,LoadingManager:sO,LoopOnce:r2,LoopPingPong:s2,LoopRepeat:a2,MOUSE:Wp,Material:Ss,MaterialLoader:ZM,MathUtils:y2,Matrix2:pO,Matrix3:En,Matrix4:pn,MaxEquation:V5,Mesh:Wr,MeshBasicMaterial:Bd,MeshDepthMaterial:tO,MeshDistanceMaterial:nO,MeshLambertMaterial:K2,MeshMatcapMaterial:Z2,MeshNormalMaterial:Y2,MeshPhongMaterial:$2,MeshPhysicalMaterial:W2,MeshStandardMaterial:eO,MeshToonMaterial:X2,MinEquation:B5,MirroredRepeatWrapping:Gb,MixOperation:t2,MultiplyBlending:LP,MultiplyOperation:Nx,NearestFilter:Or,NearestMipMapLinearFilter:A$,NearestMipMapNearestFilter:M$,NearestMipmapLinearFilter:Sv,NearestMipmapNearestFilter:RN,NeutralToneMapping:CN,NeverCompare:u2,NeverDepth:hw,NeverStencilFunc:W$,NoBlending:Cc,NoColorSpace:Df,NoNormalPacking:U$,NoToneMapping:zl,NormalAnimationBlendMode:AM,NormalBlending:fm,NormalGAPacking:z$,NormalRGPacking:k$,NotEqualCompare:d2,NotEqualDepth:yw,NotEqualStencilFunc:Z$,NumberKeyframeTrack:ex,Object3D:ti,ObjectLoader:fK,ObjectSpaceNormalMap:l2,OctahedronGeometry:kx,OneFactor:H5,OneMinusConstantAlphaFactor:e2,OneMinusConstantColorFactor:Q5,OneMinusDstAlphaFactor:$5,OneMinusDstColorFactor:Y5,OneMinusSrcAlphaFactor:fw,OneMinusSrcColorFactor:q5,OrthographicCamera:Bf,PCFShadowMap:Cv,PCFSoftShadowMap:wb,PMREMGenerator:$P,Path:tE,PerspectiveCamera:Nr,Plane:Nf,PlaneGeometry:c0,PlaneHelper:nZ,PointLight:s6,PointLightHelper:$K,Points:I2,PointsMaterial:qN,PolarGridHelper:ZK,PolyhedronGeometry:Vd,PositionalAudio:bK,PropertyBinding:ei,PropertyMixer:m6,QuadraticBezierCurve:KN,QuadraticBezierCurve3:ZN,Quaternion:xs,QuaternionKeyframeTrack:Bx,QuaternionLinearInterpolant:n6,R11_EAC_Format:Aw,RED_GREEN_RGTC2_Format:Yw,RED_RGTC1_Format:$w,REVISION:vM,RG11_EAC_Format:Cw,RGBADepthPacking:O$,RGBAFormat:bs,RGBAIntegerFormat:MM,RGBA_ASTC_10x10_Format:Vw,RGBA_ASTC_10x5_Format:zw,RGBA_ASTC_10x6_Format:Fw,RGBA_ASTC_10x8_Format:Bw,RGBA_ASTC_12x10_Format:jw,RGBA_ASTC_12x12_Format:Hw,RGBA_ASTC_4x4_Format:Pw,RGBA_ASTC_5x4_Format:Iw,RGBA_ASTC_5x5_Format:Nw,RGBA_ASTC_6x5_Format:Ow,RGBA_ASTC_6x6_Format:Dw,RGBA_ASTC_8x5_Format:Lw,RGBA_ASTC_8x6_Format:Uw,RGBA_ASTC_8x8_Format:kw,RGBA_BPTC_Format:Gw,RGBA_ETC2_EAC_Format:Mw,RGBA_PVRTC_2BPPV1_Format:Sw,RGBA_PVRTC_4BPPV1_Format:_w,RGBA_S3TC_DXT1_Format:Ab,RGBA_S3TC_DXT3_Format:Tb,RGBA_S3TC_DXT5_Format:Cb,RGBDepthPacking:D$,RGBFormat:LN,RGBIntegerFormat:R$,RGB_BPTC_SIGNED_Format:qw,RGB_BPTC_UNSIGNED_Format:Ww,RGB_ETC1_Format:ww,RGB_ETC2_Format:Ew,RGB_PVRTC_2BPPV1_Format:xw,RGB_PVRTC_4BPPV1_Format:bw,RGB_S3TC_DXT1_Format:Mb,RGDepthPacking:L$,RGFormat:_m,RGIntegerFormat:EM,RawShaderMaterial:JN,Ray:km,Raycaster:v6,RectAreaLight:u6,RedFormat:wM,RedIntegerFormat:Ox,ReinhardToneMapping:EN,RenderTarget:zN,RenderTarget3D:OK,RepeatWrapping:Hb,ReplaceStencilOp:B$,ReverseSubtractEquation:F5,RingGeometry:qM,SIGNED_R11_EAC_Format:Tw,SIGNED_RED_GREEN_RGTC2_Format:Kw,SIGNED_RED_RGTC1_Format:Xw,SIGNED_RG11_EAC_Format:Rw,SRGBColorSpace:qa,SRGBTransfer:mi,Scene:jN,ShaderChunk:Nn,ShaderLib:bu,ShaderMaterial:Bl,ShadowMaterial:q2,Shape:dm,ShapeGeometry:WM,ShapePath:aZ,ShapeUtils:wu,ShortType:IN,Skeleton:LM,SkeletonHelper:WK,SkinnedMesh:T2,Source:md,Sphere:_a,SphereGeometry:zx,Spherical:qP,SphericalHarmonics3:lO,SplineCurve:QN,SpotLight:a6,SpotLightHelper:qK,Sprite:M2,SpriteMaterial:HN,SrcAlphaFactor:cw,SrcAlphaSaturateFactor:K5,SrcColorFactor:G5,StaticCopyUsage:rX,StaticDrawUsage:Xb,StaticReadUsage:tX,StereoCamera:mK,StreamCopyUsage:sX,StreamDrawUsage:eX,StreamReadUsage:iX,StringKeyframeTrack:Bm,SubtractEquation:z5,SubtractiveBlending:DP,TOUCH:$p,TangentSpaceNormalMap:Fd,TetrahedronGeometry:$M,Texture:wr,TextureLoader:oK,TextureUtils:fZ,Timer:zK,TimestampQuery:lX,TorusGeometry:XM,TorusKnotGeometry:YM,Triangle:wo,TriangleFanDrawMode:N$,TriangleStripDrawMode:I$,TrianglesDrawMode:P$,TubeGeometry:KM,UVMapping:bM,Uint16BufferAttribute:FN,Uint32BufferAttribute:BN,Uint8BufferAttribute:XX,Uint8ClampedBufferAttribute:YX,Uniform:dO,UniformsGroup:LK,UniformsLib:Nt,UniformsUtils:S2,UnsignedByteType:Bs,UnsignedInt101111Type:ON,UnsignedInt248Type:zv,UnsignedInt5999Type:NN,UnsignedIntType:Fl,UnsignedShort4444Type:_M,UnsignedShort5551Type:SM,UnsignedShortType:kv,VSMShadowMap:tm,Vector2:Je,Vector3:ne,Vector4:Pi,VectorKeyframeTrack:tx,VideoFrameTexture:yY,VideoTexture:N2,WebGL3DRenderTarget:LX,WebGLArrayRenderTarget:DX,WebGLCoordinateSystem:$o,WebGLCubeRenderTarget:VN,WebGLRenderTarget:Zo,WebGLRenderer:M6,WebGLUtils:E6,WebGPUCoordinateSystem:Fv,WebXRController:W1,WireframeGeometry:G2,WrapAroundEnding:Wb,ZeroCurvatureEnding:nm,ZeroFactor:j5,ZeroSlopeEnding:im,ZeroStencilOp:F$,createCanvasElement:v2,error:Yt,getConsoleFunction:dX,log:Kb,setConsoleFunction:hX,warn:Rt,warnOnce:Bv},Symbol.toStringTag,{value:"Module"}));var NC={exports:{}},OC={},DC={exports:{}},LC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lk;function sne(){if(lk)return LC;lk=1;var n=s0();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function l(g,v){var b=v(),_=i({inst:{value:b,getSnapshot:v}}),M=_[0].inst,S=_[1];return a(function(){M.value=b,M.getSnapshot=v,c(M)&&S({inst:M})},[g,b,v]),r(function(){return c(M)&&S({inst:M}),g(function(){c(M)&&S({inst:M})})},[g]),s(b),b}function c(g){var v=g.getSnapshot;g=g.value;try{var b=v();return!t(g,b)}catch{return!0}}function h(g,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return LC.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,LC}var uk;function one(){return uk||(uk=1,DC.exports=sne()),DC.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ck;function lne(){if(ck)return OC;ck=1;var n=s0(),e=one();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,l=n.useMemo,c=n.useDebugValue;return OC.useSyncExternalStoreWithSelector=function(h,p,g,v,b){var _=a(null);if(_.current===null){var M={hasValue:!1,value:null};_.current=M}else M=_.current;_=l(function(){function w(B){if(!R){if(R=!0,P=B,B=v(B),b!==void 0&&M.hasValue){var D=M.value;if(b(D,B))return O=D}return O=B}if(D=O,i(P,B))return D;var F=v(B);return b!==void 0&&b(D,F)?(P=B,D):(P=B,O=F)}var R=!1,P,O,k=g===void 0?null:g;return[function(){return w(p())},k===null?void 0:function(){return w(k())}]},[p,g,v,b]);var S=r(h,_[0],_[1]);return s(function(){M.hasValue=!0,M.value=S},[S]),c(S),S},OC}var fk;function une(){return fk||(fk=1,NC.exports=lne()),NC.exports}var A6=une();const cne=Pu(A6),hk=n=>{let e;const t=new Set,i=(h,p)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const v=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(b=>b(e,v))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:h=>(t.add(h),()=>t.delete(h))},c=e=n(i,r,l);return l},fne=(n=>n?hk(n):hk),{useSyncExternalStoreWithSelector:hne}=cne,dne=n=>n;function pne(n,e=dne,t){const i=hne(n.subscribe,n.getState,n.getInitialState,e,t);return Dm.useDebugValue(i),i}const dk=(n,e)=>{const t=fne(n),i=(r,a=e)=>pne(t,r,a);return Object.assign(i,t),i},mne=((n,e)=>n?dk(n,e):dk),gne=n=>typeof n=="object"&&typeof n.then=="function",am=[];function T6(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function C6(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const a of am)if(T6(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=am.indexOf(r);a!==-1&&am.splice(a,1)},promise:(gne(n)?n:n(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(am.push(r),!t)throw r.promise}const vne=(n,e,t)=>C6(n,e,!1,t),yne=(n,e,t)=>void C6(n,e,!0,t),bne=n=>{if(n===void 0||n.length===0)am.splice(0,am.length);else{const e=am.find(t=>T6(n,t.keys,t.equal));e&&e.remove()}};var KP=b5();const xne=Pu(KP);function mO(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=mO(i,e,t);if(r)return r;i=e?null:i.sibling}}function R6(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const gO=R6(j.createContext(null));class P6 extends j.Component{render(){return j.createElement(gO.Provider,{value:this._reactInternals},this.props.children)}}function I6(){const n=j.useContext(gO);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=j.useId();return j.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=mO(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const _ne=Symbol.for("react.context"),Sne=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===_ne;function wne(){const n=I6(),[e]=j.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;Sne(i)&&i!==gO&&!e.has(i)&&e.set(i,j.use(R6(i))),t=t.return}return e}function Ene(){const n=wne();return j.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>j.createElement(e,null,j.createElement(t.Provider,{...i,value:n.get(t)})),e=>j.createElement(P6,{...e})),[n])}function N6(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const O6=n=>n&&n.isOrthographicCamera,Mne=n=>n&&n.hasOwnProperty("current"),Ane=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),Vx=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?j.useLayoutEffect:j.useEffect;function D6(n){const e=j.useRef(n);return Vx(()=>void(e.current=n),[n]),e}function Tne(){const n=I6(),e=Ene();return j.useMemo(()=>({children:t})=>{const r=!!mO(n,!0,a=>a.type===j.StrictMode)?j.StrictMode:j.Fragment;return U.jsx(r,{children:U.jsx(e,{children:t})})},[n,e])}function Cne({set:n}){return Vx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const Rne=(n=>(n=class extends j.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function L6(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function ov(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const tr={obj:n=>n===Object(n)&&!tr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(tr.str(n)||tr.num(n)||tr.boo(n))return n===e;const a=tr.obj(n);if(a&&i==="reference")return n===e;const s=tr.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!tr.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(tr.und(l)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Pne(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Ine(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const U6=["children","key","ref"];function Nne(n){const e={};for(const t in n)U6.includes(t)||(e[t]=n[t]);return e}function nE(n,e,t,i){const r=n;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:Nne(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function rx(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:t,key:a,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const pk=/-\d+$/;function iE(n,e){if(tr.str(e.props.attach)){if(pk.test(e.props.attach)){const r=e.props.attach.replace(pk,""),{root:a,key:s}=rx(n.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:i}=rx(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else tr.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function rE(n,e){if(tr.str(e.props.attach)){const{root:t,key:i}=rx(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const ZP=[...U6,"args","dispose","attach","object","onUpdate","dispose"],mk=new Map;function One(n){let e=mk.get(n.constructor);try{e||(e=new n.constructor,mk.set(n.constructor,e))}catch{}return e}function Dne(n,e){const t={};for(const i in e)if(!ZP.includes(i)&&!tr.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(ZP.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=rx(n.object,i);if(r.constructor&&r.constructor.length===0){const s=One(r);tr.und(s)||(t[a]=s[a])}else t[a]=0}return t}const Lne=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Une=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function fd(n,e){var t;const i=n.__r3f,r=i&&N6(i).getState(),a=i==null?void 0:i.eventCount;for(const l in e){let c=e[l];if(ZP.includes(l))continue;if(i&&Une.test(l)){typeof c=="function"?i.handlers[l]=c:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:h,key:p,target:g}=rx(n,l);if(g===void 0&&(typeof h!="object"||h===null))throw Error(`R3F: Cannot set "${l}". Ensure it is an object before setting "${p}".`);if(g instanceof jv&&c instanceof jv)g.mask=c.mask;else if(g instanceof Lt&&Ane(c))g.set(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&c!=null&&c.constructor&&g.constructor===c.constructor)g.copy(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(c))typeof g.fromArray=="function"?g.fromArray(c):g.set(...c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof c=="number")typeof g.setScalar=="function"?g.setScalar(c):g.set(c);else{var s;h[p]=c,r&&!r.linear&&Lne.includes(p)&&(s=h[p])!=null&&s.isTexture&&h[p].format===bs&&h[p].type===Bs&&(h[p].colorSpace=qa)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const l=i.object,c=r.internal.interaction.indexOf(l);c>-1&&r.internal.interaction.splice(c,1),i.eventCount&&l.raycast!==null&&r.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&h0(i),n}function h0(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function kne(n,e){n.manual||(O6(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Fs=n=>n==null?void 0:n.isObject3D;function b1(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function k6(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function zne(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{k6(t.capturedMap,e,i,r)})}function Fne(n){function e(c){const{internal:h}=n.getState(),p=c.offsetX-h.initialClick[0],g=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(c){return c.filter(h=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=h.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function i(c,h){const p=n.getState(),g=new Set,v=[],b=h?h(p.internal.interaction):p.internal.interaction;for(let w=0;w<b.length;w++){const R=ov(b[w]);R&&(R.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function _(w){const R=ov(w);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var P;R.events.compute==null||R.events.compute(c,R,(P=R.previousRoot)==null?void 0:P.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(w,!0):[]}let M=b.flatMap(_).sort((w,R)=>{const P=ov(w.object),O=ov(R.object);return!P||!O?w.distance-R.distance:O.events.priority-P.events.priority||w.distance-R.distance}).filter(w=>{const R=b1(w);return g.has(R)?!1:(g.add(R),!0)});p.events.filter&&(M=p.events.filter(M,p));for(const w of M){let R=w.object;for(;R;){var S;(S=R.__r3f)!=null&&S.eventCount&&v.push({...w,eventObject:R}),R=R.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let w of p.internal.capturedMap.get(c.pointerId).values())g.has(b1(w.intersection))||v.push(w.intersection);return v}function r(c,h,p,g){if(c.length){const v={stopped:!1};for(const b of c){let _=ov(b.object);if(_||b.object.traverseAncestors(M=>{const S=ov(M);if(S)return _=S,!1}),_){const{raycaster:M,pointer:S,camera:w,internal:R}=_,P=new ne(S.x,S.y,0).unproject(w),O=I=>{var L,H;return(L=(H=R.capturedMap.get(I))==null?void 0:H.has(b.eventObject))!=null?L:!1},k=I=>{const L={intersection:b,target:h.target};R.capturedMap.has(I)?R.capturedMap.get(I).set(b.eventObject,L):R.capturedMap.set(I,new Map([[b.eventObject,L]])),h.target.setPointerCapture(I)},B=I=>{const L=R.capturedMap.get(I);L&&k6(R.capturedMap,b.eventObject,L,I)};let D={};for(let I in h){let L=h[I];typeof L!="function"&&(D[I]=L)}let F={...b,...D,pointer:S,intersections:c,stopped:v.stopped,delta:p,unprojectedPoint:P,ray:M.ray,camera:w,stopPropagation(){const I="pointerId"in h&&R.capturedMap.get(h.pointerId);if((!I||I.has(b.eventObject))&&(F.stopped=v.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(L=>L.eventObject===b.eventObject))){const L=c.slice(0,c.indexOf(b));a([...L,b])}},target:{hasPointerCapture:O,setPointerCapture:k,releasePointerCapture:B},currentTarget:{hasPointerCapture:O,setPointerCapture:k,releasePointerCapture:B},nativeEvent:h};if(g(F),v.stopped===!0)break}}}return c}function a(c){const{internal:h}=n.getState();for(const p of h.hovered.values())if(!c.length||!c.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const v=p.eventObject.__r3f;if(h.hovered.delete(b1(p)),v!=null&&v.eventCount){const b=v.handlers,_={...p,intersections:c};b.onPointerOut==null||b.onPointerOut(_),b.onPointerLeave==null||b.onPointerLeave(_)}}}function s(c,h){for(let p=0;p<h.length;p++){const g=h[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return h=>{const{internal:p}=n.getState();"pointerId"in h&&p.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(h.pointerId)&&(p.capturedMap.delete(h.pointerId),a([]))})}}return function(p){const{onPointerMissed:g,internal:v}=n.getState();v.lastEvent.current=p;const b=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=i(p,b?t:void 0),w=_?e(p):0;c==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=S.map(P=>P.eventObject)),_&&!S.length&&w<=2&&(s(p,v.interaction),g&&g(p)),b&&a(S);function R(P){const O=P.eventObject,k=O.__r3f;if(!(k!=null&&k.eventCount))return;const B=k.handlers;if(b){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const D=b1(P),F=v.hovered.get(D);F?F.stopped&&P.stopPropagation():(v.hovered.set(D,P),B.onPointerOver==null||B.onPointerOver(P),B.onPointerEnter==null||B.onPointerEnter(P))}B.onPointerMove==null||B.onPointerMove(P)}else{const D=B[c];D?(!_||v.initialHits.includes(O))&&(s(p,v.interaction.filter(F=>!v.initialHits.includes(F))),D(P)):_&&v.initialHits.includes(O)&&s(p,v.interaction.filter(F=>!v.initialHits.includes(F)))}}r(S,p,w,R)}}return{handlePointer:l}}const gk=n=>!!(n!=null&&n.render),z6=j.createContext(null),Bne=(n,e)=>{const t=mne((l,c)=>{const h=new ne,p=new ne,g=new ne;function v(w=c().camera,R=p,P=c().size){const{width:O,height:k,top:B,left:D}=P,F=O/k;R.isVector3?g.copy(R):g.set(...R);const I=w.getWorldPosition(h).distanceTo(g);if(O6(w))return{width:O/w.zoom,height:k/w.zoom,top:B,left:D,factor:1,distance:I,aspect:F};{const L=w.fov*Math.PI/180,H=2*Math.tan(L/2)*I,q=H*(O/k);return{width:q,height:H,top:B,left:D,factor:O/q,distance:I,aspect:F}}}let b;const _=w=>l(R=>({performance:{...R.performance,current:w}})),M=new Je;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(w=1)=>n(c(),w),advance:(w,R)=>e(w,R,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new cO,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=c();b&&clearTimeout(b),w.performance.current!==w.performance.min&&_(w.performance.min),b=setTimeout(()=>_(c().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:w=>l(R=>({...R,events:{...R.events,...w}})),setSize:(w,R,P=0,O=0)=>{const k=c().camera,B={width:w,height:R,top:P,left:O};l(D=>({size:B,viewport:{...D.viewport,...v(k,p,B)}}))},setDpr:w=>l(R=>{const P=L6(w);return{viewport:{...R.viewport,dpr:P,initialDpr:R.viewport.initialDpr||P}}}),setFrameloop:(w="always")=>{const R=c().clock;R.stop(),R.elapsedTime=0,w!=="never"&&(R.start(),R.elapsedTime=0),l(()=>({frameloop:w}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:j.createRef(),active:!1,frames:0,priority:0,subscribe:(w,R,P)=>{const O=c().internal;return O.priority=O.priority+(R>0?1:0),O.subscribers.push({ref:w,priority:R,store:P}),O.subscribers=O.subscribers.sort((k,B)=>k.priority-B.priority),()=>{const k=c().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(R>0?1:0),k.subscribers=k.subscribers.filter(B=>B.ref!==w))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:h,gl:p,set:g}=t.getState();if(c.width!==r.width||c.height!==r.height||h.dpr!==a){r=c,a=h.dpr,kne(l,c),h.dpr>0&&p.setPixelRatio(h.dpr);const v=typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,v)}l!==s&&(s=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function F6(){const n=j.useContext(z6);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function ad(n=t=>t,e){return F6()(n,e)}function vO(n,e=0){const t=F6(),i=t.getState().internal.subscribe,r=D6(n);return Vx(()=>i(r,e,t),[e,i,t]),null}const vk=new WeakMap,Vne=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function B6(n,e){return function(t,...i){let r;return Vne(t)?(r=vk.get(t),r||(r=new t,vk.set(t,r))):r=t,n&&n(r),Promise.all(i.map(a=>new Promise((s,l)=>r.load(a,c=>{Fs(c==null?void 0:c.scene)&&Object.assign(c,Pne(c.scene)),s(c)},e,c=>l(new Error(`Could not load ${a}: ${c==null?void 0:c.message}`))))))}}function yO(n,e,t,i){const r=Array.isArray(e)?e:[e],a=vne(B6(t,i),[n,...r],{equal:tr.equ});return Array.isArray(e)?a:a[0]}yO.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return yne(B6(t),[n,...i])};yO.clear=function(n,e){const t=Array.isArray(e)?e:[e];return bne([n,...t])};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const jne=1,Hne=8,Gne=32,qne=2;var Wne={version:"9.5.0"};function $ne(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yk={exports:{}},bk={exports:{}},xk;function Xne(){return xk||(xk=1,(function(n){n.exports=function(e){function t(f,d,x,A){return new j0(f,d,x,A)}function i(){}function r(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(f){var d=f,x=f;if(f.alternate)for(;d.return;)d=d.return;else{f=d;do d=f,(d.flags&4098)!==0&&(x=d.return),f=d.return;while(f)}return d.tag===3?x:null}function s(f){if(a(f)!==f)throw Error(r(188))}function l(f){var d=f.alternate;if(!d){if(d=a(f),d===null)throw Error(r(188));return d!==f?null:f}for(var x=f,A=d;;){var N=x.return;if(N===null)break;var z=N.alternate;if(z===null){if(A=N.return,A!==null){x=A;continue}break}if(N.child===z.child){for(z=N.child;z;){if(z===x)return s(N),f;if(z===A)return s(N),d;z=z.sibling}throw Error(r(188))}if(x.return!==A.return)x=N,A=z;else{for(var Y=!1,ce=N.child;ce;){if(ce===x){Y=!0,x=N,A=z;break}if(ce===A){Y=!0,A=N,x=z;break}ce=ce.sibling}if(!Y){for(ce=z.child;ce;){if(ce===x){Y=!0,x=z,A=N;break}if(ce===A){Y=!0,A=z,x=N;break}ce=ce.sibling}if(!Y)throw Error(r(189))}}if(x.alternate!==A)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?f:d}function c(f){var d=f.tag;if(d===5||d===26||d===27||d===6)return f;for(f=f.child;f!==null;){if(d=c(f),d!==null)return d;f=f.sibling}return null}function h(f){var d=f.tag;if(d===5||d===26||d===27||d===6)return f;for(f=f.child;f!==null;){if(f.tag!==4&&(d=h(f),d!==null))return d;f=f.sibling}return null}function p(f){return f===null||typeof f!="object"?null:(f=su&&f[su]||f["@@iterator"],typeof f=="function"?f:null)}function g(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===Ku?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case lf:return"Fragment";case cf:return"Profiler";case uf:return"StrictMode";case lg:return"Suspense";case au:return"SuspenseList";case fp:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case of:return"Portal";case oo:return f.displayName||"Context";case cp:return(f._context.displayName||"Context")+".Consumer";case Rh:var d=f.render;return f=f.displayName,f||(f=d.displayName||d.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case ug:return d=f.displayName||null,d!==null?d:g(f.type)||"Memo";case Da:d=f._payload,f=f._init;try{return g(f(d))}catch{}}return null}function v(f){return{current:f}}function b(f){0>mf||(f.current=Sg[mf],Sg[mf]=null,mf--)}function _(f,d){mf++,Sg[mf]=f.current,f.current=d}function M(f){return f>>>=0,f===0?32:31-(wg(f)/lS|0)|0}function S(f){var d=f&42;if(d!==0)return d;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function w(f,d,x){var A=f.pendingLanes;if(A===0)return 0;var N=0,z=f.suspendedLanes,Y=f.pingedLanes;f=f.warmLanes;var ce=A&134217727;return ce!==0?(A=ce&~z,A!==0?N=S(A):(Y&=ce,Y!==0?N=S(Y):x||(x=ce&~f,x!==0&&(N=S(x))))):(ce=A&~z,ce!==0?N=S(ce):Y!==0?N=S(Y):x||(x=A&~f,x!==0&&(N=S(x)))),N===0?0:d!==0&&d!==N&&(d&z)===0&&(z=N&-N,x=d&-d,z>=x||z===32&&(x&4194048)!==0)?d:N}function R(f,d){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&d)===0}function P(f,d){switch(f){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O(){var f=Uh;return Uh<<=1,(Uh&62914560)===0&&(Uh=4194304),f}function k(f){for(var d=[],x=0;31>x;x++)d.push(f);return d}function B(f,d){f.pendingLanes|=d,d!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function D(f,d,x,A,N,z){var Y=f.pendingLanes;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=x,f.entangledLanes&=x,f.errorRecoveryDisabledLanes&=x,f.shellSuspendCounter=0;var ce=f.entanglements,Be=f.expirationTimes,ct=f.hiddenUpdates;for(x=Y&~x;0<x;){var St=31-as(x),yt=1<<St;ce[St]=0,Be[St]=-1;var Ot=ct[St];if(Ot!==null)for(ct[St]=null,St=0;St<Ot.length;St++){var vn=Ot[St];vn!==null&&(vn.lane&=-536870913)}x&=~yt}A!==0&&F(f,A,0),z!==0&&N===0&&f.tag!==0&&(f.suspendedLanes|=z&~(Y&~d))}function F(f,d,x){f.pendingLanes|=d,f.suspendedLanes&=~d;var A=31-as(d);f.entangledLanes|=d,f.entanglements[A]=f.entanglements[A]|1073741824|x&261930}function I(f,d){var x=f.entangledLanes|=d;for(f=f.entanglements;x;){var A=31-as(x),N=1<<A;N&d|f[A]&d&&(f[A]|=d),x&=~N}}function L(f,d){var x=d&-d;return x=(x&42)!==0?1:H(x),(x&(f.suspendedLanes|d))!==0?0:x}function H(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function q(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function W(f){if(typeof Ty=="function"&&fS(f),ss&&typeof ss.setStrictMode=="function")try{ss.setStrictMode(vf,f)}catch{}}function oe(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}function fe(f){if(Rg===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);Rg=d&&d[1]||"",wl=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rg+f+wl}function te(f,d){if(!f||xp)return"";xp=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(d){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(vn){var Ot=vn}Reflect.construct(f,[],yt)}else{try{yt.call()}catch(vn){Ot=vn}f.call(yt.prototype)}}else{try{throw Error()}catch(vn){Ot=vn}(yt=f())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(vn){if(vn&&Ot&&typeof vn.stack=="string")return[vn.stack,Ot.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=A.DetermineComponentFrameRoot(),Y=z[0],ce=z[1];if(Y&&ce){var Be=Y.split(`
`),ct=ce.split(`
`);for(N=A=0;A<Be.length&&!Be[A].includes("DetermineComponentFrameRoot");)A++;for(;N<ct.length&&!ct[N].includes("DetermineComponentFrameRoot");)N++;if(A===Be.length||N===ct.length)for(A=Be.length-1,N=ct.length-1;1<=A&&0<=N&&Be[A]!==ct[N];)N--;for(;1<=A&&0<=N;A--,N--)if(Be[A]!==ct[N]){if(A!==1||N!==1)do if(A--,N--,0>N||Be[A]!==ct[N]){var St=`
`+Be[A].replace(" at new "," at ");return f.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",f.displayName)),St}while(1<=A&&0<=N);break}}}finally{xp=!1,Error.prepareStackTrace=x}return(x=f?f.displayName||f.name:"")?fe(x):""}function re(f,d){switch(f.tag){case 26:case 27:case 5:return fe(f.type);case 16:return fe("Lazy");case 13:return f.child!==d&&d!==null?fe("Suspense Fallback"):fe("Suspense");case 19:return fe("SuspenseList");case 0:case 15:return te(f.type,!1);case 11:return te(f.type.render,!1);case 1:return te(f.type,!0);case 31:return fe("Activity");default:return""}}function he(f){try{var d="",x=null;do d+=re(f,x),x=f,f=f.return;while(f);return d}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function Me(f,d){if(typeof f=="object"&&f!==null){var x=Cy.get(f);return x!==void 0?x:(d={value:f,source:d,stack:he(d)},Cy.set(f,d),d)}return{value:f,source:d,stack:he(d)}}function Ne(f,d){uu[El++]=_p,uu[El++]=pi,pi=f,_p=d}function Q(f,d,x){co[Ns++]=Yr,co[Ns++]=Bo,co[Ns++]=fo,fo=f;var A=Yr;f=Bo;var N=32-as(A)-1;A&=~(1<<N),x+=1;var z=32-as(d)+N;if(30<z){var Y=N-N%5;z=(A&(1<<Y)-1).toString(32),A>>=Y,N-=Y,Yr=1<<32-as(d)+N|x<<N|A,Bo=z+f}else Yr=1<<z|x<<N|A,Bo=f}function de(f){f.return!==null&&(Ne(f,1),Q(f,1,0))}function Ae(f){for(;f===pi;)pi=uu[--El],uu[El]=null,_p=uu[--El],uu[El]=null;for(;f===fo;)fo=co[--Ns],co[Ns]=null,Bo=co[--Ns],co[Ns]=null,Yr=co[--Ns],co[Ns]=null}function We(f,d){co[Ns++]=Yr,co[Ns++]=Bo,co[Ns++]=fo,Yr=d.id,Bo=d.overflow,fo=f}function bt(f,d){_(Kr,d),_(cu,f),_(zr,null),f=E_(d),b(zr),_(zr,f)}function _e(){b(zr),b(cu),b(Kr)}function Te(f){f.memoizedState!==null&&_(Sp,f);var d=zr.current,x=Nh(d,f.type);d!==x&&(_(cu,f),_(zr,x))}function ut(f){cu.current===f&&(b(zr),b(cu)),Sp.current===f&&(b(Sp),lr?df._currentValue=hf:df._currentValue2=hf)}function ve(f){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ze(Me(d,f)),Pg}function et(f,d){if(!Oi)throw Error(r(175));K_(f.stateNode,f.type,f.memoizedProps,d,f)||ve(f,!0)}function At(f){for(Tr=f.return;Tr;)switch(Tr.tag){case 5:case 31:case 13:Ua=!1;return;case 27:case 3:Ua=!0;return;default:Tr=Tr.return}}function He(f){if(!Oi||f!==Tr)return!1;if(!Un)return At(f),Un=!0,!1;var d=f.tag;if(Ar?d!==3&&d!==27&&(d!==5||Lh(f.type)&&!La(f.type,f.memoizedProps))&&Di&&ve(f):d!==3&&(d!==5||Lh(f.type)&&!La(f.type,f.memoizedProps))&&Di&&ve(f),At(f),d===13){if(!Oi)throw Error(r(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));Di=gy(f)}else if(d===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));Di=Q_(f)}else Di=Ar&&d===27?j_(f.type,Di):Tr?V_(f.stateNode):null;return!0}function Ct(){Oi&&(Di=Tr=null,Un=!1)}function Oe(){var f=Ml;return f!==null&&(us===null?us=f:us.push.apply(us,f),Ml=null),f}function Ze(f){Ml===null?Ml=[f]:Ml.push(f)}function je(f,d,x){lr?(_(ho,d._currentValue),d._currentValue=x):(_(ho,d._currentValue2),d._currentValue2=x)}function ht(f){var d=ho.current;lr?f._currentValue=d:f._currentValue2=d,b(ho)}function ie(f,d,x){for(;f!==null;){var A=f.alternate;if((f.childLanes&d)!==d?(f.childLanes|=d,A!==null&&(A.childLanes|=d)):A!==null&&(A.childLanes&d)!==d&&(A.childLanes|=d),f===x)break;f=f.return}}function Mt(f,d,x,A){var N=f.child;for(N!==null&&(N.return=f);N!==null;){var z=N.dependencies;if(z!==null){var Y=N.child;z=z.firstContext;e:for(;z!==null;){var ce=z;z=N;for(var Be=0;Be<d.length;Be++)if(ce.context===d[Be]){z.lanes|=x,ce=z.alternate,ce!==null&&(ce.lanes|=x),ie(z.return,x,f),A||(Y=null);break e}z=ce.next}}else if(N.tag===18){if(Y=N.return,Y===null)throw Error(r(341));Y.lanes|=x,z=Y.alternate,z!==null&&(z.lanes|=x),ie(Y,x,f),Y=null}else Y=N.child;if(Y!==null)Y.return=N;else for(Y=N;Y!==null;){if(Y===f){Y=null;break}if(N=Y.sibling,N!==null){N.return=Y.return,Y=N;break}Y=Y.return}N=Y}}function gt(f,d,x,A){f=null;for(var N=d,z=!1;N!==null;){if(!z){if((N.flags&524288)!==0)z=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var Y=N.alternate;if(Y===null)throw Error(r(387));if(Y=Y.memoizedProps,Y!==null){var ce=N.type;cr(N.pendingProps.value,Y.value)||(f!==null?f.push(ce):f=[ce])}}else if(N===Sp.current){if(Y=N.alternate,Y===null)throw Error(r(387));Y.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(f!==null?f.push(df):f=[df])}N=N.return}f!==null&&Mt(d,f,x,A),d.flags|=262144}function Ut(f){for(f=f.firstContext;f!==null;){var d=f.context;if(!cr(lr?d._currentValue:d._currentValue2,f.memoizedValue))return!0;f=f.next}return!1}function vt(f){wi=f,Vo=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function J(f){return pe(wi,f)}function X(f,d){return wi===null&&vt(f),pe(f,d)}function pe(f,d){var x=lr?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:x,next:null},Vo===null){if(f===null)throw Error(r(308));Vo=d,f.dependencies={lanes:0,firstContext:d},f.flags|=524288}else Vo=Vo.next=d;return x}function ke(){return{controller:new hS,data:new Map,refCount:0}}function Ye(f){f.refCount--,f.refCount===0&&Fr(hT,function(){f.controller.abort()})}function Le(){}function Tt(f){f!==li&&f.next===null&&(li===null?wp=li=f:li=li.next=f),po=!0,pa||(pa=!0,ae())}function le(f,d){if(!Ig&&po){Ig=!0;do for(var x=!1,A=wp;A!==null;){if(f!==0){var N=A.pendingLanes;if(N===0)var z=0;else{var Y=A.suspendedLanes,ce=A.pingedLanes;z=(1<<31-as(42|f)+1)-1,z&=N&~(Y&~ce),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(x=!0,ft(A,z))}else z=kn,z=w(A,A===Cn?z:0,A.cancelPendingCommit!==null||A.timeoutHandle!==rs),(z&3)===0||R(A,z)||(x=!0,ft(A,z));A=A.next}while(x);Ig=!1}}function Ee(){st()}function st(){po=pa=!1;var f=0;tc!==0&&ff()&&(f=tc);for(var d=da(),x=null,A=wp;A!==null;){var N=A.next,z=Ge(A,d);z===0?(A.next=null,x===null?wp=N:x.next=N,N===null&&(li=x)):(x=A,(f!==0||(z&3)!==0)&&(po=!0)),A=N}br!==0&&br!==5||le(f),tc!==0&&(tc=0)}function Ge(f,d){for(var x=f.suspendedLanes,A=f.pingedLanes,N=f.expirationTimes,z=f.pendingLanes&-62914561;0<z;){var Y=31-as(z),ce=1<<Y,Be=N[Y];Be===-1?((ce&x)===0||(ce&A)!==0)&&(N[Y]=P(ce,d)):Be<=d&&(f.expiredLanes|=ce),z&=~ce}if(d=Cn,x=kn,x=w(f,f===d?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==rs),A=f.callbackNode,x===0||f===d&&(ci===2||ci===9)||f.cancelPendingCommit!==null)return A!==null&&A!==null&&Mg(A),f.callbackNode=null,f.callbackPriority=0;if((x&3)===0||R(f,x)){if(d=x&-x,d===f.callbackPriority)return d;switch(A!==null&&Mg(A),q(x)){case 2:case 8:x=cS;break;case 32:x=bp;break;case 268435456:x=Tg;break;default:x=bp}return A=Xe.bind(null,f),x=yp(x,A),f.callbackPriority=d,f.callbackNode=x,d}return A!==null&&A!==null&&Mg(A),f.callbackPriority=2,f.callbackNode=null,2}function Xe(f,d){if(br!==0&&br!==5)return f.callbackNode=null,f.callbackPriority=0,null;var x=f.callbackNode;if(xl()&&f.callbackNode!==x)return null;var A=kn;return A=w(f,f===Cn?A:0,f.cancelPendingCommit!==null||f.timeoutHandle!==rs),A===0?null:(Fo(f,A,d),Ge(f,da()),f.callbackNode!=null&&f.callbackNode===x?Xe.bind(null,f):null)}function ft(f,d){if(xl())return null;Fo(f,d,!0)}function ae(){ey?ty(function(){(On&6)!==0?yp(Ag,Ee):st()}):yp(Ag,Ee)}function ye(){if(tc===0){var f=fu;f===0&&(f=Eg,Eg<<=1,(Eg&261888)===0&&(Eg=256)),tc=f}return tc}function dt(f,d){if(kh===null){var x=kh=[];Ry=0,fu=ye(),Cr={status:"pending",value:void 0,then:function(A){x.push(A)}}}return Ry++,d.then(se,se),d}function se(){if(--Ry===0&&kh!==null){Cr!==null&&(Cr.status="fulfilled");var f=kh;kh=null,fu=0,Cr=null;for(var d=0;d<f.length;d++)(0,f[d])()}}function rt(f,d){var x=[],A={status:"pending",value:null,reason:null,then:function(N){x.push(N)}};return f.then(function(){A.status="fulfilled",A.value=d;for(var N=0;N<x.length;N++)(0,x[N])(d)},function(N){for(A.status="rejected",A.reason=N,N=0;N<x.length;N++)(0,x[N])(void 0)}),A}function nt(){var f=nc.current;return f!==null?f:Cn.pooledCache}function ot(f,d){d===null?_(nc,nc.current):_(nc,d.pool)}function it(){var f=nt();return f===null?null:{parent:lr?Li._currentValue:Li._currentValue2,pool:f}}function $e(f,d){if(cr(f,d))return!0;if(typeof f!="object"||f===null||typeof d!="object"||d===null)return!1;var x=Object.keys(f),A=Object.keys(d);if(x.length!==A.length)return!1;for(A=0;A<x.length;A++){var N=x[A];if(!fT.call(d,N)||!cr(f[N],d[N]))return!1}return!0}function lt(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Ht(f,d,x){switch(x=f[x],x===void 0?f.push(d):x!==d&&(d.then(Le,Le),d=x),d.status){case"fulfilled":return d.value;case"rejected":throw f=d.reason,si(f),f;default:if(typeof d.status=="string")d.then(Le,Le);else{if(f=Cn,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=d,f.status="pending",f.then(function(A){if(d.status==="pending"){var N=d;N.status="fulfilled",N.value=A}},function(A){if(d.status==="pending"){var N=d;N.status="rejected",N.reason=A}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw f=d.reason,si(f),f}throw ka=d,Rr}}function cn(f){try{var d=f._init;return d(f._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(ka=x,Rr):x}}function Jt(){if(ka===null)throw Error(r(459));var f=ka;return ka=null,f}function si(f){if(f===Rr||f===go)throw Error(r(483))}function ar(f){var d=yf;return yf+=1,ic===null&&(ic=[]),Ht(ic,f,d)}function ws(f,d){d=d.props.ref,f.ref=d!==void 0?d:null}function Po(f,d){throw d.$$typeof===sf?Error(r(525)):(f=Object.prototype.toString.call(d),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":f)))}function nl(f){function d(Ie,we){if(f){var Fe=Ie.deletions;Fe===null?(Ie.deletions=[we],Ie.flags|=16):Fe.push(we)}}function x(Ie,we){if(!f)return null;for(;we!==null;)d(Ie,we),we=we.sibling;return null}function A(Ie){for(var we=new Map;Ie!==null;)Ie.key!==null?we.set(Ie.key,Ie):we.set(Ie.index,Ie),Ie=Ie.sibling;return we}function N(Ie,we){return Ie=Ps(Ie,we),Ie.index=0,Ie.sibling=null,Ie}function z(Ie,we,Fe){return Ie.index=Fe,f?(Fe=Ie.alternate,Fe!==null?(Fe=Fe.index,Fe<we?(Ie.flags|=67108866,we):Fe):(Ie.flags|=67108866,we)):(Ie.flags|=1048576,we)}function Y(Ie){return f&&Ie.alternate===null&&(Ie.flags|=67108866),Ie}function ce(Ie,we,Fe,_t){return we===null||we.tag!==6?(we=H0(Fe,Ie.mode,_t),we.return=Ie,we):(we=N(we,Fe),we.return=Ie,we)}function Be(Ie,we,Fe,_t){var en=Fe.type;return en===lf?St(Ie,we,Fe.props.children,_t,Fe.key):we!==null&&(we.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===Da&&cn(en)===we.type)?(we=N(we,Fe.props),ws(we,Fe),we.return=Ie,we):(we=ru(Fe.type,Fe.key,Fe.props,null,Ie.mode,_t),ws(we,Fe),we.return=Ie,we)}function ct(Ie,we,Fe,_t){return we===null||we.tag!==4||we.stateNode.containerInfo!==Fe.containerInfo||we.stateNode.implementation!==Fe.implementation?(we=q0(Fe,Ie.mode,_t),we.return=Ie,we):(we=N(we,Fe.children||[]),we.return=Ie,we)}function St(Ie,we,Fe,_t,en){return we===null||we.tag!==7?(we=so(Fe,Ie.mode,_t,en),we.return=Ie,we):(we=N(we,Fe),we.return=Ie,we)}function yt(Ie,we,Fe){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=H0(""+we,Ie.mode,Fe),we.return=Ie,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case _l:return Fe=ru(we.type,we.key,we.props,null,Ie.mode,Fe),ws(Fe,we),Fe.return=Ie,Fe;case of:return we=q0(we,Ie.mode,Fe),we.return=Ie,we;case Da:return we=cn(we),yt(Ie,we,Fe)}if(Zu(we)||p(we))return we=so(we,Ie.mode,Fe,null),we.return=Ie,we;if(typeof we.then=="function")return yt(Ie,ar(we),Fe);if(we.$$typeof===oo)return yt(Ie,X(Ie,we),Fe);Po(Ie,we)}return null}function Ot(Ie,we,Fe,_t){var en=we!==null?we.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return en!==null?null:ce(Ie,we,""+Fe,_t);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case _l:return Fe.key===en?Be(Ie,we,Fe,_t):null;case of:return Fe.key===en?ct(Ie,we,Fe,_t):null;case Da:return Fe=cn(Fe),Ot(Ie,we,Fe,_t)}if(Zu(Fe)||p(Fe))return en!==null?null:St(Ie,we,Fe,_t,null);if(typeof Fe.then=="function")return Ot(Ie,we,ar(Fe),_t);if(Fe.$$typeof===oo)return Ot(Ie,we,X(Ie,Fe),_t);Po(Ie,Fe)}return null}function vn(Ie,we,Fe,_t,en){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ie=Ie.get(Fe)||null,ce(we,Ie,""+_t,en);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case _l:return Ie=Ie.get(_t.key===null?Fe:_t.key)||null,Be(we,Ie,_t,en);case of:return Ie=Ie.get(_t.key===null?Fe:_t.key)||null,ct(we,Ie,_t,en);case Da:return _t=cn(_t),vn(Ie,we,Fe,_t,en)}if(Zu(_t)||p(_t))return Ie=Ie.get(Fe)||null,St(we,Ie,_t,en,null);if(typeof _t.then=="function")return vn(Ie,we,Fe,ar(_t),en);if(_t.$$typeof===oo)return vn(Ie,we,Fe,X(we,_t),en);Po(we,_t)}return null}function dr(Ie,we,Fe,_t){for(var en=null,Gi=null,rn=we,Hn=we=0,Br=null;rn!==null&&Hn<Fe.length;Hn++){rn.index>Hn?(Br=rn,rn=null):Br=rn.sibling;var Zn=Ot(Ie,rn,Fe[Hn],_t);if(Zn===null){rn===null&&(rn=Br);break}f&&rn&&Zn.alternate===null&&d(Ie,rn),we=z(Zn,we,Hn),Gi===null?en=Zn:Gi.sibling=Zn,Gi=Zn,rn=Br}if(Hn===Fe.length)return x(Ie,rn),Un&&Ne(Ie,Hn),en;if(rn===null){for(;Hn<Fe.length;Hn++)rn=yt(Ie,Fe[Hn],_t),rn!==null&&(we=z(rn,we,Hn),Gi===null?en=rn:Gi.sibling=rn,Gi=rn);return Un&&Ne(Ie,Hn),en}for(rn=A(rn);Hn<Fe.length;Hn++)Br=vn(rn,Ie,Hn,Fe[Hn],_t),Br!==null&&(f&&Br.alternate!==null&&rn.delete(Br.key===null?Hn:Br.key),we=z(Br,we,Hn),Gi===null?en=Br:Gi.sibling=Br,Gi=Br);return f&&rn.forEach(function(bo){return d(Ie,bo)}),Un&&Ne(Ie,Hn),en}function qh(Ie,we,Fe,_t){if(Fe==null)throw Error(r(151));for(var en=null,Gi=null,rn=we,Hn=we=0,Br=null,Zn=Fe.next();rn!==null&&!Zn.done;Hn++,Zn=Fe.next()){rn.index>Hn?(Br=rn,rn=null):Br=rn.sibling;var bo=Ot(Ie,rn,Zn.value,_t);if(bo===null){rn===null&&(rn=Br);break}f&&rn&&bo.alternate===null&&d(Ie,rn),we=z(bo,we,Hn),Gi===null?en=bo:Gi.sibling=bo,Gi=bo,rn=Br}if(Zn.done)return x(Ie,rn),Un&&Ne(Ie,Hn),en;if(rn===null){for(;!Zn.done;Hn++,Zn=Fe.next())Zn=yt(Ie,Zn.value,_t),Zn!==null&&(we=z(Zn,we,Hn),Gi===null?en=Zn:Gi.sibling=Zn,Gi=Zn);return Un&&Ne(Ie,Hn),en}for(rn=A(rn);!Zn.done;Hn++,Zn=Fe.next())Zn=vn(rn,Ie,Hn,Zn.value,_t),Zn!==null&&(f&&Zn.alternate!==null&&rn.delete(Zn.key===null?Hn:Zn.key),we=z(Zn,we,Hn),Gi===null?en=Zn:Gi.sibling=Zn,Gi=Zn);return f&&rn.forEach(function(dT){return d(Ie,dT)}),Un&&Ne(Ie,Hn),en}function fc(Ie,we,Fe,_t){if(typeof Fe=="object"&&Fe!==null&&Fe.type===lf&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case _l:e:{for(var en=Fe.key;we!==null;){if(we.key===en){if(en=Fe.type,en===lf){if(we.tag===7){x(Ie,we.sibling),_t=N(we,Fe.props.children),_t.return=Ie,Ie=_t;break e}}else if(we.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===Da&&cn(en)===we.type){x(Ie,we.sibling),_t=N(we,Fe.props),ws(_t,Fe),_t.return=Ie,Ie=_t;break e}x(Ie,we);break}else d(Ie,we);we=we.sibling}Fe.type===lf?(_t=so(Fe.props.children,Ie.mode,_t,Fe.key),_t.return=Ie,Ie=_t):(_t=ru(Fe.type,Fe.key,Fe.props,null,Ie.mode,_t),ws(_t,Fe),_t.return=Ie,Ie=_t)}return Y(Ie);case of:e:{for(en=Fe.key;we!==null;){if(we.key===en)if(we.tag===4&&we.stateNode.containerInfo===Fe.containerInfo&&we.stateNode.implementation===Fe.implementation){x(Ie,we.sibling),_t=N(we,Fe.children||[]),_t.return=Ie,Ie=_t;break e}else{x(Ie,we);break}else d(Ie,we);we=we.sibling}_t=q0(Fe,Ie.mode,_t),_t.return=Ie,Ie=_t}return Y(Ie);case Da:return Fe=cn(Fe),fc(Ie,we,Fe,_t)}if(Zu(Fe))return dr(Ie,we,Fe,_t);if(p(Fe)){if(en=p(Fe),typeof en!="function")throw Error(r(150));return Fe=en.call(Fe),qh(Ie,we,Fe,_t)}if(typeof Fe.then=="function")return fc(Ie,we,ar(Fe),_t);if(Fe.$$typeof===oo)return fc(Ie,we,X(Ie,Fe),_t);Po(Ie,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint"?(Fe=""+Fe,we!==null&&we.tag===6?(x(Ie,we.sibling),_t=N(we,Fe),_t.return=Ie,Ie=_t):(x(Ie,we),_t=H0(Fe,Ie.mode,_t),_t.return=Ie,Ie=_t),Y(Ie)):x(Ie,we)}return function(Ie,we,Fe,_t){try{yf=0;var en=fc(Ie,we,Fe,_t);return ic=null,en}catch(rn){if(rn===Rr||rn===go)throw rn;var Gi=t(29,rn,null,Ie.mode);return Gi.lanes=_t,Gi.return=Ie,Gi}finally{}}}function Ks(){for(var f=Tl,d=bf=Tl=0;d<f;){var x=Qr[d];Qr[d++]=null;var A=Qr[d];Qr[d++]=null;var N=Qr[d];Qr[d++]=null;var z=Qr[d];if(Qr[d++]=null,A!==null&&N!==null){var Y=A.pending;Y===null?N.next=N:(N.next=Y.next,Y.next=N),A.pending=N}z!==0&&oa(x,N,z)}}function Aa(f,d,x,A){Qr[Tl++]=f,Qr[Tl++]=d,Qr[Tl++]=x,Qr[Tl++]=A,bf|=A,f.lanes|=A,f=f.alternate,f!==null&&(f.lanes|=A)}function Wl(f,d,x,A){return Aa(f,d,x,A),xi(f)}function Ai(f,d){return Aa(f,null,null,d),xi(f)}function oa(f,d,x){f.lanes|=x;var A=f.alternate;A!==null&&(A.lanes|=x);for(var N=!1,z=f.return;z!==null;)z.childLanes|=x,A=z.alternate,A!==null&&(A.childLanes|=x),z.tag===22&&(f=z.stateNode,f===null||f._visibility&1||(N=!0)),f=z,z=z.return;return f.tag===3?(z=f.stateNode,N&&d!==null&&(N=31-as(x),f=z.hiddenUpdates,A=f[N],A===null?f[N]=[d]:A.push(d),d.lane=x|536870912),z):null}function xi(f){if(50<Kn)throw Kn=0,Rp=null,Error(r(185));for(var d=f.return;d!==null;)f=d,d=f.return;return f.tag===3?f.stateNode:null}function Ui(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $r(f,d){f=f.updateQueue,d.updateQueue===f&&(d.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function la(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Ta(f,d,x){var A=f.updateQueue;if(A===null)return null;if(A=A.shared,(On&2)!==0){var N=A.pending;return N===null?d.next=d:(d.next=N.next,N.next=d),A.pending=d,d=xi(f),oa(f,null,x),d}return Aa(f,A,d,x),xi(f)}function Io(f,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194048)!==0)){var A=d.lanes;A&=f.pendingLanes,x|=A,d.lanes=x,I(f,x)}}function $l(f,d){var x=f.updateQueue,A=f.alternate;if(A!==null&&(A=A.updateQueue,x===A)){var N=null,z=null;if(x=x.firstBaseUpdate,x!==null){do{var Y={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};z===null?N=z=Y:z=z.next=Y,x=x.next}while(x!==null);z===null?N=z=d:z=z.next=d}else N=z=d;x={baseState:A.baseState,firstBaseUpdate:N,lastBaseUpdate:z,shared:A.shared,callbacks:A.callbacks},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=d:f.next=d,x.lastBaseUpdate=d}function ua(){if(Og){var f=Cr;if(f!==null)throw f}}function Zs(f,d,x,A){Og=!1;var N=f.updateQueue;Os=!1;var z=N.firstBaseUpdate,Y=N.lastBaseUpdate,ce=N.shared.pending;if(ce!==null){N.shared.pending=null;var Be=ce,ct=Be.next;Be.next=null,Y===null?z=ct:Y.next=ct,Y=Be;var St=f.alternate;St!==null&&(St=St.updateQueue,ce=St.lastBaseUpdate,ce!==Y&&(ce===null?St.firstBaseUpdate=ct:ce.next=ct,St.lastBaseUpdate=Be))}if(z!==null){var yt=N.baseState;Y=0,St=ct=Be=null,ce=z;do{var Ot=ce.lane&-536870913,vn=Ot!==ce.lane;if(vn?(kn&Ot)===Ot:(A&Ot)===Ot){Ot!==0&&Ot===fu&&(Og=!0),St!==null&&(St=St.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var dr=f,qh=ce;Ot=d;var fc=x;switch(qh.tag){case 1:if(dr=qh.payload,typeof dr=="function"){yt=dr.call(fc,yt,Ot);break e}yt=dr;break e;case 3:dr.flags=dr.flags&-65537|128;case 0:if(dr=qh.payload,Ot=typeof dr=="function"?dr.call(fc,yt,Ot):dr,Ot==null)break e;yt=og({},yt,Ot);break e;case 2:Os=!0}}Ot=ce.callback,Ot!==null&&(f.flags|=64,vn&&(f.flags|=8192),vn=N.callbacks,vn===null?N.callbacks=[Ot]:vn.push(Ot))}else vn={lane:Ot,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},St===null?(ct=St=vn,Be=yt):St=St.next=vn,Y|=Ot;if(ce=ce.next,ce===null){if(ce=N.shared.pending,ce===null)break;vn=ce,ce=vn.next,vn.next=null,N.lastBaseUpdate=vn,N.shared.pending=null}}while(!0);St===null&&(Be=yt),N.baseState=Be,N.firstBaseUpdate=ct,N.lastBaseUpdate=St,z===null&&(N.shared.lanes=0),du|=Y,f.lanes=Y,f.memoizedState=yt}}function Es(f,d){if(typeof f!="function")throw Error(r(191,f));f.call(d)}function Ca(f,d){var x=f.callbacks;if(x!==null)for(f.callbacks=null,f=0;f<x.length;f++)Es(x[f],d)}function ca(f,d){f=Rl,_(rc,f),_(xf,d),Rl=f|d.baseLanes}function Qa(){_(rc,Rl),_(xf,xf.current)}function K(){Rl=rc.current,b(xf),b(rc)}function ge(f){var d=f.alternate;_(Qi,Qi.current&1),_(os,f),ls===null&&(d===null||xf.current!==null||d.memoizedState!==null)&&(ls=f)}function Ue(f){_(Qi,Qi.current),_(os,f),ls===null&&(ls=f)}function Re(f){f.tag===22?(_(Qi,Qi.current),_(os,f),ls===null&&(ls=f)):xe()}function xe(){_(Qi,Qi.current),_(os,os.current)}function xt(f){b(os),ls===f&&(ls=null),b(Qi)}function Pt(f){for(var d=f;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Ju(x)||mg(x)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function mt(){throw Error(r(321))}function Dt(f,d){if(d===null)return!1;for(var x=0;x<d.length&&x<f.length;x++)if(!cr(f[x],d[x]))return!1;return!0}function kt(f,d,x,A,N,z){return hu=z,xn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Zt.H=f===null||f.memoizedState===null?Vi:Cl,Vn=!1,z=x(A,N),Vn=!1,wn&&(z=It(d,x,A,N)),Vt(f),z}function Vt(f){Zt.H=Ds;var d=qt!==null&&qt.next!==null;if(hu=0,dn=qt=xn=null,Tn=!1,vo=0,jo=null,d)throw Error(r(300));f===null||Ri||(f=f.dependencies,f!==null&&Ut(f)&&(Ri=!0))}function It(f,d,x,A){xn=f;var N=0;do{if(wn&&(jo=null),vo=0,wn=!1,25<=N)throw Error(r(301));if(N+=1,dn=qt=null,f.updateQueue!=null){var z=f.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}Zt.H=ac,z=d(x,A)}while(wn);return z}function $t(){var f=Zt.H,d=f.useState()[0];return d=typeof d.then=="function"?tn(d):d,f=f.useState()[0],(qt!==null?qt.memoizedState:null)!==f&&(xn.flags|=1024),d}function Pn(){var f=ma!==0;return ma=0,f}function ni(f,d,x){d.updateQueue=f.updateQueue,d.flags&=-2053,f.lanes&=~x}function Kt(f){if(Tn){for(f=f.memoizedState;f!==null;){var d=f.queue;d!==null&&(d.pending=null),f=f.next}Tn=!1}hu=0,dn=qt=xn=null,wn=!1,vo=ma=0,jo=null}function on(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?xn.memoizedState=dn=f:dn=dn.next=f,dn}function Et(){if(qt===null){var f=xn.alternate;f=f!==null?f.memoizedState:null}else f=qt.next;var d=dn===null?xn.memoizedState:dn.next;if(d!==null)dn=d,qt=f;else{if(f===null)throw xn.alternate===null?Error(r(467)):Error(r(310));qt=f,f={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},dn===null?xn.memoizedState=dn=f:dn=dn.next=f}return dn}function Mn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tn(f){var d=vo;return vo+=1,jo===null&&(jo=[]),f=Ht(jo,f,d),d=xn,(dn===null?d.memoizedState:dn.next)===null&&(d=d.alternate,Zt.H=d===null||d.memoizedState===null?Vi:Cl),f}function ki(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return tn(f);if(f.$$typeof===oo)return J(f)}throw Error(r(438,String(f)))}function Ms(f){var d=null,x=xn.updateQueue;if(x!==null&&(d=x.memoCache),d==null){var A=xn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(d={data:A.data.map(function(N){return N.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),x===null&&(x=Mn(),xn.updateQueue=x),x.memoCache=d,x=d.data[d.index],x===void 0)for(x=d.data[d.index]=Array(f),A=0;A<f;A++)x[A]=$0;return d.index++,x}function vi(f,d){return typeof d=="function"?d(f):d}function Xr(f){var d=Et();return Yn(d,qt,f)}function Yn(f,d,x){var A=f.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=x;var N=f.baseQueue,z=A.pending;if(z!==null){if(N!==null){var Y=N.next;N.next=z.next,z.next=Y}d.baseQueue=N=z,A.pending=null}if(z=f.baseState,N===null)f.memoizedState=z;else{d=N.next;var ce=Y=null,Be=null,ct=d,St=!1;do{var yt=ct.lane&-536870913;if(yt!==ct.lane?(kn&yt)===yt:(hu&yt)===yt){var Ot=ct.revertLane;if(Ot===0)Be!==null&&(Be=Be.next={lane:0,revertLane:0,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),yt===fu&&(St=!0);else if((hu&Ot)===Ot){ct=ct.next,Ot===fu&&(St=!0);continue}else yt={lane:0,revertLane:ct.revertLane,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Be===null?(ce=Be=yt,Y=z):Be=Be.next=yt,xn.lanes|=Ot,du|=Ot;yt=ct.action,Vn&&x(z,yt),z=ct.hasEagerState?ct.eagerState:x(z,yt)}else Ot={lane:yt,revertLane:ct.revertLane,gesture:ct.gesture,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Be===null?(ce=Be=Ot,Y=z):Be=Be.next=Ot,xn.lanes|=yt,du|=yt;ct=ct.next}while(ct!==null&&ct!==d);if(Be===null?Y=z:Be.next=ce,!cr(z,f.memoizedState)&&(Ri=!0,St&&(x=Cr,x!==null)))throw x;f.memoizedState=z,f.baseState=Y,f.baseQueue=Be,A.lastRenderedState=z}return N===null&&(A.lanes=0),[f.memoizedState,A.dispatch]}function Ti(f){var d=Et(),x=d.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=f;var A=x.dispatch,N=x.pending,z=d.memoizedState;if(N!==null){x.pending=null;var Y=N=N.next;do z=f(z,Y.action),Y=Y.next;while(Y!==N);cr(z,d.memoizedState)||(Ri=!0),d.memoizedState=z,d.baseQueue===null&&(d.baseState=z),x.lastRenderedState=z}return[z,A]}function hi(f,d,x){var A=xn,N=Et(),z=Un;if(z){if(x===void 0)throw Error(r(407));x=x()}else x=d();var Y=!cr((qt||N).memoizedState,x);if(Y&&(N.memoizedState=x,Ri=!0),N=N.queue,Oo(il.bind(null,A,N,f),[f]),N.getSnapshot!==d||Y||dn!==null&&dn.memoizedState.tag&1){if(A.flags|=2048,Pa(9,{destroy:void 0},or.bind(null,A,N,x,d),null),Cn===null)throw Error(r(349));z||(hu&127)!==0||sr(A,d,x)}return x}function sr(f,d,x){f.flags|=16384,f={getSnapshot:d,value:x},d=xn.updateQueue,d===null?(d=Mn(),xn.updateQueue=d,d.stores=[f]):(x=d.stores,x===null?d.stores=[f]:x.push(f))}function or(f,d,x,A){d.value=x,d.getSnapshot=A,Ra(d)&&$d(f)}function il(f,d,x){return x(function(){Ra(d)&&$d(f)})}function Ra(f){var d=f.getSnapshot;f=f.value;try{var x=d();return!cr(f,x)}catch{return!0}}function $d(f){var d=Ai(f,2);d!==null&&Fi(d,f,2)}function rl(f){var d=on();if(typeof f=="function"){var x=f;if(f=x(),Vn){W(!0);try{x()}finally{W(!1)}}}return d.memoizedState=d.baseState=f,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:f},d}function $c(f,d,x,A){return f.baseState=x,Yn(f,qt,typeof A=="function"?A:vi)}function No(f,d,x,A,N){if(Zc(f))throw Error(r(485));if(f=d.action,f!==null){var z={payload:N,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){z.listeners.push(Y)}};Zt.T!==null?x(!0):z.isTransition=!1,A(z),x=d.pending,x===null?(z.next=d.pending=z,lh(d,z)):(z.next=x.next,d.pending=x.next=z)}}function lh(f,d){var x=d.action,A=d.payload,N=f.state;if(d.isTransition){var z=Zt.T,Y={};Zt.T=Y;try{var ce=x(N,A),Be=Zt.S;Be!==null&&Be(Y,ce),As(f,d,ce)}catch(ct){Qs(f,d,ct)}finally{z!==null&&Y.types!==null&&(z.types=Y.types),Zt.T=z}}else try{z=x(N,A),As(f,d,z)}catch(ct){Qs(f,d,ct)}}function As(f,d,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(A){Xl(f,d,A)},function(A){return Qs(f,d,A)}):Xl(f,d,x)}function Xl(f,d,x){d.status="fulfilled",d.value=x,Ou(d),f.state=x,d=f.pending,d!==null&&(x=d.next,x===d?f.pending=null:(x=x.next,d.next=x,lh(f,x)))}function Qs(f,d,x){var A=f.pending;if(f.pending=null,A!==null){A=A.next;do d.status="rejected",d.reason=x,Ou(d),d=d.next;while(d!==A)}f.action=null}function Ou(f){f=f.listeners;for(var d=0;d<f.length;d++)(0,f[d])()}function Xc(f,d){return d}function Yl(f,d){if(Un){var x=Cn.formState;if(x!==null){e:{var A=xn;if(Un){if(Di){var N=B_(Di,Ua);if(N){Di=V_(N),A=hy(N);break e}}ve(A)}A=!1}A&&(d=x[0])}}x=on(),x.memoizedState=x.baseState=d,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:d},x.queue=A,x=Yd.bind(null,xn,A),A.dispatch=x,A=rl(!1);var z=eo.bind(null,xn,!1,A.queue);return A=on(),N={state:d,dispatch:null,action:f,pending:null},A.queue=N,x=No.bind(null,xn,N,z,x),N.dispatch=x,A.memoizedState=f,[d,x,!1]}function Js(f){var d=Et();return Ts(d,qt,f)}function Ts(f,d,x){if(d=Yn(f,d,Xc)[0],f=Xr(vi)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var A=tn(d)}catch(Y){throw Y===Rr?go:Y}else A=d;d=Et();var N=d.queue,z=N.dispatch;return x!==d.memoizedState&&(xn.flags|=2048,Pa(9,{destroy:void 0},Yc.bind(null,N,x),null)),[A,z,f]}function Yc(f,d){f.action=d}function oi(f){var d=Et(),x=qt;if(x!==null)return Ts(d,x,f);Et(),d=d.memoizedState,x=Et();var A=x.queue.dispatch;return x.memoizedState=f,[d,A,!1]}function Pa(f,d,x,A){return f={tag:f,create:x,deps:A,inst:d,next:null},d=xn.updateQueue,d===null&&(d=Mn(),xn.updateQueue=d),x=d.lastEffect,x===null?d.lastEffect=f.next=f:(A=x.next,x.next=f,f.next=A,d.lastEffect=f),f}function uh(){return Et().memoizedState}function al(f,d,x,A){var N=on();xn.flags|=f,N.memoizedState=Pa(1|d,{destroy:void 0},x,A===void 0?null:A)}function Du(f,d,x,A){var N=Et();A=A===void 0?null:A;var z=N.memoizedState.inst;qt!==null&&A!==null&&Dt(A,qt.memoizedState.deps)?N.memoizedState=Pa(d,z,x,A):(xn.flags|=f,N.memoizedState=Pa(1|d,z,x,A))}function Lu(f,d){al(8390656,8,f,d)}function Oo(f,d){Du(2048,8,f,d)}function Do(f){xn.flags|=4;var d=xn.updateQueue;if(d===null)d=Mn(),xn.updateQueue=d,d.events=[f];else{var x=d.events;x===null?d.events=[f]:x.push(f)}}function Dr(f){var d=Et().memoizedState;return Do({ref:d,nextImpl:f}),function(){if((On&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function sl(f,d){return Du(4,2,f,d)}function Lo(f,d){return Du(4,4,f,d)}function Kl(f,d){if(typeof d=="function"){f=f();var x=d(f);return function(){typeof x=="function"?x():d(null)}}if(d!=null)return f=f(),d.current=f,function(){d.current=null}}function ch(f,d,x){x=x!=null?x.concat([f]):null,Du(4,4,Kl.bind(null,d,f),x)}function ol(){}function Kc(f,d){var x=Et();d=d===void 0?null:d;var A=x.memoizedState;return d!==null&&Dt(d,A[1])?A[0]:(x.memoizedState=[f,d],f)}function Uo(f,d){var x=Et();d=d===void 0?null:d;var A=x.memoizedState;if(d!==null&&Dt(d,A[1]))return A[0];if(A=f(),Vn){W(!0);try{f()}finally{W(!1)}}return x.memoizedState=[A,d],A}function Uu(f,d,x){return x===void 0||(hu&1073741824)!==0&&(kn&261930)===0?f.memoizedState=d:(f.memoizedState=x,f=tu(),xn.lanes|=f,du|=f,x)}function fh(f,d,x,A){return cr(x,d)?x:xf.current!==null?(f=Uu(f,x,A),cr(f,d)||(Ri=!0),f):(hu&42)===0||(hu&1073741824)!==0&&(kn&261930)===0?(Ri=!0,f.memoizedState=x):(f=tu(),xn.lanes|=f,du|=f,d)}function ku(f,d,x,A,N){var z=lo();Ln(z!==0&&8>z?z:8);var Y=Zt.T,ce={};Zt.T=ce,eo(f,!1,d,x);try{var Be=N(),ct=Zt.S;if(ct!==null&&ct(ce,Be),Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var St=rt(Be,A);Fu(f,d,St,Ni(f))}else Fu(f,d,A,Ni(f))}catch(yt){Fu(f,d,{then:function(){},status:"rejected",reason:yt},Ni())}finally{Ln(z),Y!==null&&ce.types!==null&&(Y.types=ce.types),Zt.T=Y}}function Xd(f){var d=f.memoizedState;if(d!==null)return d;d={memoizedState:hf,baseState:hf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:hf},next:null};var x={};return d.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:x},next:null},f.memoizedState=d,f=f.alternate,f!==null&&(f.memoizedState=d),d}function hh(){return J(df)}function zu(){return Et().memoizedState}function dh(){return Et().memoizedState}function qm(f){for(var d=f.return;d!==null;){switch(d.tag){case 24:case 3:var x=Ni();f=la(x);var A=Ta(d,f,x);A!==null&&(Fi(A,d,x),Io(A,d,x)),d={cache:ke()},f.payload=d;return}d=d.return}}function ph(f,d,x){var A=Ni();x={lane:A,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Zc(f)?Kd(d,x):(x=Wl(f,d,x,A),x!==null&&(Fi(x,f,A),Zd(x,d,A)))}function Yd(f,d,x){var A=Ni();Fu(f,d,x,A)}function Fu(f,d,x,A){var N={lane:A,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(Zc(f))Kd(d,N);else{var z=f.alternate;if(f.lanes===0&&(z===null||z.lanes===0)&&(z=d.lastRenderedReducer,z!==null))try{var Y=d.lastRenderedState,ce=z(Y,x);if(N.hasEagerState=!0,N.eagerState=ce,cr(ce,Y))return Aa(f,d,N,0),Cn===null&&Ks(),!1}catch{}finally{}if(x=Wl(f,d,N,A),x!==null)return Fi(x,f,A),Zd(x,d,A),!0}return!1}function eo(f,d,x,A){if(A={lane:2,revertLane:ye(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},Zc(f)){if(d)throw Error(r(479))}else d=Wl(f,x,A,2),d!==null&&Fi(d,f,2)}function Zc(f){var d=f.alternate;return f===xn||d!==null&&d===xn}function Kd(f,d){wn=Tn=!0;var x=f.pending;x===null?d.next=d:(d.next=x.next,x.next=d),f.pending=d}function Zd(f,d,x){if((x&4194048)!==0){var A=d.lanes;A&=f.pendingLanes,x|=A,d.lanes=x,I(f,x)}}function mh(f,d,x,A){d=f.memoizedState,x=x(A,d),x=x==null?d:og({},d,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}function Zl(f,d,x,A,N,z,Y){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(A,z,Y):d.prototype&&d.prototype.isPureReactComponent?!$e(x,A)||!$e(N,z):!0}function fa(f,d,x,A){f=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,A),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,A),d.state!==f&&Ep.enqueueReplaceState(d,d.state,null)}function ll(f,d){var x=d;if("ref"in d){x={};for(var A in d)A!=="ref"&&(x[A]=d[A])}if(f=f.defaultProps){x===d&&(x=og({},x));for(var N in f)x[N]===void 0&&(x[N]=f[N])}return x}function Qc(f,d){try{var x=f.onUncaughtError;x(d.value,{componentStack:d.stack})}catch(A){setTimeout(function(){throw A})}}function ul(f,d,x){try{var A=f.onCaughtError;A(x.value,{componentStack:x.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function E(f,d,x){return x=la(x),x.tag=3,x.payload={element:null},x.callback=function(){Qc(f,d)},x}function V(f){return f=la(f),f.tag=3,f}function $(f,d,x,A){var N=x.type.getDerivedStateFromError;if(typeof N=="function"){var z=A.value;f.payload=function(){return N(z)},f.callback=function(){ul(d,x,A)}}var Y=x.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(f.callback=function(){ul(d,x,A),typeof N!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var ce=A.stack;this.componentDidCatch(A.value,{componentStack:ce!==null?ce:""})})}function ee(f,d,x,A,N){if(x.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(d=x.alternate,d!==null&&gt(d,x,N,!0),x=os.current,x!==null){switch(x.tag){case 31:case 13:return ls===null?Mh():x.alternate===null&&Hi===0&&(Hi=3),x.flags&=-257,x.flags|=65536,x.lanes=N,A===Al?x.flags|=16384:(d=x.updateQueue,d===null?x.updateQueue=new Set([A]):d.add(A),Ch(f,A,N)),!1;case 22:return x.flags|=65536,A===Al?x.flags|=16384:(d=x.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([A])},x.updateQueue=d):(x=d.retryQueue,x===null?d.retryQueue=new Set([A]):x.add(A)),Ch(f,A,N)),!1}throw Error(r(435,x.tag))}return Ch(f,A,N),Mh(),!1}if(Un)return d=os.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=N,A!==Pg&&(f=Error(r(422),{cause:A}),Ze(Me(f,x)))):(A!==Pg&&(d=Error(r(423),{cause:A}),Ze(Me(d,x))),f=f.current.alternate,f.flags|=65536,N&=-N,f.lanes|=N,A=Me(A,x),N=E(f.stateNode,A,N),$l(f,N),Hi!==4&&(Hi=2)),!1;var z=Error(r(520),{cause:A});if(z=Me(z,x),Ap===null?Ap=[z]:Ap.push(z),Hi!==4&&(Hi=2),d===null)return!0;A=Me(A,x),x=d;do{switch(x.tag){case 3:return x.flags|=65536,f=N&-N,x.lanes|=f,f=E(x.stateNode,A,f),$l(x,f),!1;case 1:if(d=x.type,z=x.stateNode,(x.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(pu===null||!pu.has(z))))return x.flags|=65536,N&=-N,x.lanes|=N,N=V(N),$(N,f,x,A),$l(x,N),!1}x=x.return}while(x!==null);return!1}function be(f,d,x,A){d.child=f===null?Py(d,null,x,A):Zr(d,f.child,x,A)}function ze(f,d,x,A,N){x=x.render;var z=d.ref;if("ref"in A){var Y={};for(var ce in A)ce!=="ref"&&(Y[ce]=A[ce])}else Y=A;return vt(d),A=kt(f,d,x,Y,z,N),ce=Pn(),f!==null&&!Ri?(ni(f,d,N),cl(f,d,N)):(Un&&ce&&de(d),d.flags|=1,be(f,d,A,N),d.child)}function wt(f,d,x,A,N){if(f===null){var z=x.type;return typeof z=="function"&&!rf(z)&&z.defaultProps===void 0&&x.compare===null?(d.tag=15,d.type=z,gn(f,d,z,A,N)):(f=ru(x.type,null,A,d,d.mode,N),f.ref=d.ref,f.return=d,d.child=f)}if(z=f.child,!Qd(f,N)){var Y=z.memoizedProps;if(x=x.compare,x=x!==null?x:$e,x(Y,A)&&f.ref===d.ref)return cl(f,d,N)}return d.flags|=1,f=Ps(z,A),f.ref=d.ref,f.return=d,d.child=f}function gn(f,d,x,A,N){if(f!==null){var z=f.memoizedProps;if($e(z,A)&&f.ref===d.ref)if(Ri=!1,d.pendingProps=A=z,Qd(f,N))(f.flags&131072)!==0&&(Ri=!0);else return d.lanes=f.lanes,cl(f,d,N)}return Ql(f,d,x,A,N)}function Ki(f,d,x,A){var N=A.children,z=f!==null?f.memoizedState:null;if(f===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((d.flags&128)!==0){if(z=z!==null?z.baseLanes|x:x,f!==null){for(A=d.child=f.child,N=0;A!==null;)N=N|A.lanes|A.childLanes,A=A.sibling;A=N&~z}else A=0,d.child=null;return Ci(f,d,z,x,A)}if((x&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},f!==null&&ot(d,z!==null?z.cachePool:null),z!==null?ca(d,z):Qa(),Re(d);else return A=d.lanes=536870912,Ci(f,d,z!==null?z.baseLanes|x:x,x,A)}else z!==null?(ot(d,z.cachePool),ca(d,z),xe(),d.memoizedState=null):(f!==null&&ot(d,null),Qa(),xe());return be(f,d,N,x),d.child}function Bn(f,d){return f!==null&&f.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Ci(f,d,x,A,N){var z=nt();return z=z===null?null:{parent:lr?Li._currentValue:Li._currentValue2,pool:z},d.memoizedState={baseLanes:x,cachePool:z},f!==null&&ot(d,null),Qa(),Re(d),f!==null&&gt(f,d,A,!0),d.childLanes=N,null}function Ia(f,d){return d=Bu({mode:d.mode,children:d.children},f.mode),d.ref=f.ref,f.child=d,d.return=f,d}function ko(f,d,x){return Zr(d,f.child,null,x),f=Ia(d,d.pendingProps),f.flags|=2,xt(d),d.memoizedState=null,f}function zo(f,d,x){var A=d.pendingProps,N=(d.flags&128)!==0;if(d.flags&=-129,f===null){if(Un){if(A.mode==="hidden")return f=Ia(d,A),d.lanes=536870912,Bn(null,f);if(Ue(d),(f=Di)?(f=py(f,Ua),f!==null&&(d.memoizedState={dehydrated:f,treeContext:fo!==null?{id:Yr,overflow:Bo}:null,retryLane:536870912,hydrationErrors:null},x=G0(f),x.return=d,d.child=x,Tr=d,Di=null)):f=null,f===null)throw ve(d);return d.lanes=536870912,null}return Ia(d,A)}var z=f.memoizedState;if(z!==null){var Y=z.dehydrated;if(Ue(d),N)if(d.flags&256)d.flags&=-257,d=ko(f,d,x);else if(d.memoizedState!==null)d.child=f.child,d.flags|=128,d=null;else throw Error(r(558));else if(Ri||gt(f,d,x,!1),N=(x&f.childLanes)!==0,Ri||N){if(A=Cn,A!==null&&(Y=L(A,x),Y!==0&&Y!==z.retryLane))throw z.retryLane=Y,Ai(f,Y),Fi(A,f,Y),za;Mh(),d=ko(f,d,x)}else f=z.treeContext,Oi&&(Di=q_(Y),Tr=d,Un=!0,Ml=null,Ua=!1,f!==null&&We(d,f)),d=Ia(d,A),d.flags|=4096;return d}return f=Ps(f.child,{mode:A.mode,children:A.children}),f.ref=d.ref,d.child=f,f.return=d,f}function Ja(f,d){var x=d.ref;if(x===null)f!==null&&f.ref!==null&&(d.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(f===null||f.ref!==x)&&(d.flags|=4194816)}}function Ql(f,d,x,A,N){return vt(d),x=kt(f,d,x,A,void 0,N),A=Pn(),f!==null&&!Ri?(ni(f,d,N),cl(f,d,N)):(Un&&A&&de(d),d.flags|=1,be(f,d,x,N),d.child)}function Jc(f,d,x,A,N,z){return vt(d),d.updateQueue=null,x=It(d,A,x,N),Vt(f),A=Pn(),f!==null&&!Ri?(ni(f,d,z),cl(f,d,z)):(Un&&A&&de(d),d.flags|=1,be(f,d,x,z),d.child)}function ef(f,d,x,A,N){if(vt(d),d.stateNode===null){var z=Sl,Y=x.contextType;typeof Y=="object"&&Y!==null&&(z=J(Y)),z=new x(A,z),d.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=Ep,d.stateNode=z,z._reactInternals=d,z=d.stateNode,z.props=A,z.state=d.memoizedState,z.refs={},Ui(d),Y=x.contextType,z.context=typeof Y=="object"&&Y!==null?J(Y):Sl,z.state=d.memoizedState,Y=x.getDerivedStateFromProps,typeof Y=="function"&&(mh(d,x,Y,A),z.state=d.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(Y=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),Y!==z.state&&Ep.enqueueReplaceState(z,z.state,null),Zs(d,A,z,N),ua(),z.state=d.memoizedState),typeof z.componentDidMount=="function"&&(d.flags|=4194308),A=!0}else if(f===null){z=d.stateNode;var ce=d.memoizedProps,Be=ll(x,ce);z.props=Be;var ct=z.context,St=x.contextType;Y=Sl,typeof St=="object"&&St!==null&&(Y=J(St));var yt=x.getDerivedStateFromProps;St=typeof yt=="function"||typeof z.getSnapshotBeforeUpdate=="function",ce=d.pendingProps!==ce,St||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ce||ct!==Y)&&fa(d,z,A,Y),Os=!1;var Ot=d.memoizedState;z.state=Ot,Zs(d,A,z,N),ua(),ct=d.memoizedState,ce||Ot!==ct||Os?(typeof yt=="function"&&(mh(d,x,yt,A),ct=d.memoizedState),(Be=Os||Zl(d,x,Be,A,Ot,ct,Y))?(St||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(d.flags|=4194308)):(typeof z.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=A,d.memoizedState=ct),z.props=A,z.state=ct,z.context=Y,A=Be):(typeof z.componentDidMount=="function"&&(d.flags|=4194308),A=!1)}else{z=d.stateNode,$r(f,d),Y=d.memoizedProps,St=ll(x,Y),z.props=St,yt=d.pendingProps,Ot=z.context,ct=x.contextType,Be=Sl,typeof ct=="object"&&ct!==null&&(Be=J(ct)),ce=x.getDerivedStateFromProps,(ct=typeof ce=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==yt||Ot!==Be)&&fa(d,z,A,Be),Os=!1,Ot=d.memoizedState,z.state=Ot,Zs(d,A,z,N),ua();var vn=d.memoizedState;Y!==yt||Ot!==vn||Os||f!==null&&f.dependencies!==null&&Ut(f.dependencies)?(typeof ce=="function"&&(mh(d,x,ce,A),vn=d.memoizedState),(St=Os||Zl(d,x,St,A,Ot,vn,Be)||f!==null&&f.dependencies!==null&&Ut(f.dependencies))?(ct||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(A,vn,Be),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(A,vn,Be)),typeof z.componentDidUpdate=="function"&&(d.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof z.componentDidUpdate!="function"||Y===f.memoizedProps&&Ot===f.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===f.memoizedProps&&Ot===f.memoizedState||(d.flags|=1024),d.memoizedProps=A,d.memoizedState=vn),z.props=A,z.state=vn,z.context=Be,A=St):(typeof z.componentDidUpdate!="function"||Y===f.memoizedProps&&Ot===f.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===f.memoizedProps&&Ot===f.memoizedState||(d.flags|=1024),A=!1)}return z=A,Ja(f,d),A=(d.flags&128)!==0,z||A?(z=d.stateNode,x=A&&typeof x.getDerivedStateFromError!="function"?null:z.render(),d.flags|=1,f!==null&&A?(d.child=Zr(d,f.child,null,N),d.child=Zr(d,null,x,N)):be(f,d,x,N),d.memoizedState=z.state,f=d.child):f=cl(f,d,N),f}function u_(f,d,x,A){return Ct(),d.flags|=256,be(f,d,x,A),d.child}function R0(f){return{baseLanes:f,cachePool:it()}}function P0(f,d,x){return f=f!==null?f.childLanes&~x:0,d&&(f|=Fa),f}function I0(f,d,x){var A=d.pendingProps,N=!1,z=(d.flags&128)!==0,Y;if((Y=z)||(Y=f!==null&&f.memoizedState===null?!1:(Qi.current&2)!==0),Y&&(N=!0,d.flags&=-129),Y=(d.flags&32)!==0,d.flags&=-33,f===null){if(Un){if(N?ge(d):xe(),(f=Di)?(f=Y_(f,Ua),f!==null&&(d.memoizedState={dehydrated:f,treeContext:fo!==null?{id:Yr,overflow:Bo}:null,retryLane:536870912,hydrationErrors:null},x=G0(f),x.return=d,d.child=x,Tr=d,Di=null)):f=null,f===null)throw ve(d);return mg(f)?d.lanes=32:d.lanes=536870912,null}var ce=A.children;return A=A.fallback,N?(xe(),N=d.mode,ce=Bu({mode:"hidden",children:ce},N),A=so(A,N,x,null),ce.return=d,A.return=d,ce.sibling=A,d.child=ce,A=d.child,A.memoizedState=R0(x),A.childLanes=P0(f,Y,x),d.memoizedState=_f,Bn(null,A)):(ge(d),Wm(d,ce))}var Be=f.memoizedState;if(Be!==null&&(ce=Be.dehydrated,ce!==null)){if(z)d.flags&256?(ge(d),d.flags&=-257,d=tf(f,d,x)):d.memoizedState!==null?(xe(),d.child=f.child,d.flags|=128,d=null):(xe(),ce=A.fallback,N=d.mode,A=Bu({mode:"visible",children:A.children},N),ce=so(ce,N,x,null),ce.flags|=2,A.return=d,ce.return=d,A.sibling=ce,d.child=A,Zr(d,f.child,null,x),A=d.child,A.memoizedState=R0(x),A.childLanes=P0(f,Y,x),d.memoizedState=_f,d=Bn(null,A));else if(ge(d),mg(ce))Y=gg(ce).digest,A=Error(r(419)),A.stack="",A.digest=Y,Ze({value:A,source:null,stack:null}),d=tf(f,d,x);else if(Ri||gt(f,d,x,!1),Y=(x&f.childLanes)!==0,Ri||Y){if(Y=Cn,Y!==null&&(A=L(Y,x),A!==0&&A!==Be.retryLane))throw Be.retryLane=A,Ai(f,A),Fi(Y,f,A),za;Ju(ce)||Mh(),d=tf(f,d,x)}else Ju(ce)?(d.flags|=192,d.child=f.child,d=null):(f=Be.treeContext,Oi&&(Di=W_(ce),Tr=d,Un=!0,Ml=null,Ua=!1,f!==null&&We(d,f)),d=Wm(d,A.children),d.flags|=4096);return d}return N?(xe(),ce=A.fallback,N=d.mode,Be=f.child,z=Be.sibling,A=Ps(Be,{mode:"hidden",children:A.children}),A.subtreeFlags=Be.subtreeFlags&65011712,z!==null?ce=Ps(z,ce):(ce=so(ce,N,x,null),ce.flags|=2),ce.return=d,A.return=d,A.sibling=ce,d.child=A,Bn(null,A),A=d.child,ce=f.child.memoizedState,ce===null?ce=R0(x):(N=ce.cachePool,N!==null?(Be=lr?Li._currentValue:Li._currentValue2,N=N.parent!==Be?{parent:Be,pool:Be}:N):N=it(),ce={baseLanes:ce.baseLanes|x,cachePool:N}),A.memoizedState=ce,A.childLanes=P0(f,Y,x),d.memoizedState=_f,Bn(f.child,A)):(ge(d),x=f.child,f=x.sibling,x=Ps(x,{mode:"visible",children:A.children}),x.return=d,x.sibling=null,f!==null&&(Y=d.deletions,Y===null?(d.deletions=[f],d.flags|=16):Y.push(f)),d.child=x,d.memoizedState=null,x)}function Wm(f,d){return d=Bu({mode:"visible",children:d},f.mode),d.return=f,f.child=d}function Bu(f,d){return f=t(22,f,null,d),f.lanes=0,f}function tf(f,d,x){return Zr(d,f.child,null,x),f=Wm(d,d.pendingProps.children),f.flags|=2,d.memoizedState=null,f}function c_(f,d,x){f.lanes|=d;var A=f.alternate;A!==null&&(A.lanes|=d),ie(f.return,d,x)}function gh(f,d,x,A,N,z){var Y=f.memoizedState;Y===null?f.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:A,tail:x,tailMode:N,treeForkCount:z}:(Y.isBackwards=d,Y.rendering=null,Y.renderingStartTime=0,Y.last=A,Y.tail=x,Y.tailMode=N,Y.treeForkCount=z)}function N0(f,d,x){var A=d.pendingProps,N=A.revealOrder,z=A.tail;A=A.children;var Y=Qi.current,ce=(Y&2)!==0;if(ce?(Y=Y&1|2,d.flags|=128):Y&=1,_(Qi,Y),be(f,d,A,x),A=Un?_p:0,!ce&&f!==null&&(f.flags&128)!==0)e:for(f=d.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&c_(f,x,d);else if(f.tag===19)c_(f,x,d);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(N){case"forwards":for(x=d.child,N=null;x!==null;)f=x.alternate,f!==null&&Pt(f)===null&&(N=x),x=x.sibling;x=N,x===null?(N=d.child,d.child=null):(N=x.sibling,x.sibling=null),gh(d,!1,N,x,z,A);break;case"backwards":case"unstable_legacy-backwards":for(x=null,N=d.child,d.child=null;N!==null;){if(f=N.alternate,f!==null&&Pt(f)===null){d.child=N;break}f=N.sibling,N.sibling=x,x=N,N=f}gh(d,!0,x,null,z,A);break;case"together":gh(d,!1,null,null,void 0,A);break;default:d.memoizedState=null}return d.child}function cl(f,d,x){if(f!==null&&(d.dependencies=f.dependencies),du|=d.lanes,(x&d.childLanes)===0)if(f!==null){if(gt(f,d,x,!1),(x&d.childLanes)===0)return null}else return null;if(f!==null&&d.child!==f.child)throw Error(r(153));if(d.child!==null){for(f=d.child,x=Ps(f,f.pendingProps),d.child=x,x.return=d;f.sibling!==null;)f=f.sibling,x=x.sibling=Ps(f,f.pendingProps),x.return=d;x.sibling=null}return d.child}function Qd(f,d){return(f.lanes&d)!==0?!0:(f=f.dependencies,!!(f!==null&&Ut(f)))}function O0(f,d,x){switch(d.tag){case 3:bt(d,d.stateNode.containerInfo),je(d,Li,f.memoizedState.cache),Ct();break;case 27:case 5:Te(d);break;case 4:bt(d,d.stateNode.containerInfo);break;case 10:je(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,Ue(d),null;break;case 13:var A=d.memoizedState;if(A!==null)return A.dehydrated!==null?(ge(d),d.flags|=128,null):(x&d.child.childLanes)!==0?I0(f,d,x):(ge(d),f=cl(f,d,x),f!==null?f.sibling:null);ge(d);break;case 19:var N=(f.flags&128)!==0;if(A=(x&d.childLanes)!==0,A||(gt(f,d,x,!1),A=(x&d.childLanes)!==0),N){if(A)return N0(f,d,x);d.flags|=128}if(N=d.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),_(Qi,Qi.current),A)break;return null;case 22:return d.lanes=0,Ki(f,d,x,d.pendingProps);case 24:je(d,Li,f.memoizedState.cache)}return cl(f,d,x)}function D0(f,d,x){if(f!==null)if(f.memoizedProps!==d.pendingProps)Ri=!0;else{if(!Qd(f,x)&&(d.flags&128)===0)return Ri=!1,O0(f,d,x);Ri=(f.flags&131072)!==0}else Ri=!1,Un&&(d.flags&1048576)!==0&&Q(d,_p,d.index);switch(d.lanes=0,d.tag){case 16:e:{var A=d.pendingProps;if(f=cn(d.elementType),d.type=f,typeof f=="function")rf(f)?(A=ll(f,A),d.tag=1,d=ef(null,d,f,A,x)):(d.tag=0,d=Ql(null,d,f,A,x));else{if(f!=null){var N=f.$$typeof;if(N===Rh){d.tag=11,d=ze(null,d,f,A,x);break e}else if(N===ug){d.tag=14,d=wt(null,d,f,A,x);break e}}throw d=g(f)||f,Error(r(306,d,""))}}return d;case 0:return Ql(f,d,d.type,d.pendingProps,x);case 1:return A=d.type,N=ll(A,d.pendingProps),ef(f,d,A,N,x);case 3:e:{if(bt(d,d.stateNode.containerInfo),f===null)throw Error(r(387));var z=d.pendingProps;N=d.memoizedState,A=N.element,$r(f,d),Zs(d,z,null,x);var Y=d.memoizedState;if(z=Y.cache,je(d,Li,z),z!==N.cache&&Mt(d,[Li],x,!0),ua(),z=Y.element,Oi&&N.isDehydrated)if(N={element:z,isDehydrated:!1,cache:Y.cache},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){d=u_(f,d,z,x);break e}else if(z!==A){A=Me(Error(r(424)),d),Ze(A),d=u_(f,d,z,x);break e}else for(Oi&&(Di=G_(d.stateNode.containerInfo),Tr=d,Un=!0,Ml=null,Ua=!0),x=Py(d,null,z,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Ct(),z===A){d=cl(f,d,x);break e}be(f,d,z,x)}d=d.child}return d;case 26:if(uo)return Ja(f,d),f===null?(x=by(d.type,null,d.pendingProps,null))?d.memoizedState=x:Un||(d.stateNode=xg(d.type,d.pendingProps,Kr.current,d)):d.memoizedState=by(d.type,f.memoizedProps,d.pendingProps,f.memoizedState),null;case 27:if(Ar)return Te(d),f===null&&Ar&&Un&&(A=d.stateNode=_g(d.type,d.pendingProps,Kr.current,zr.current,!1),Tr=d,Ua=!0,Di=dy(d.type,A,Di)),be(f,d,d.pendingProps.children,x),Ja(f,d),f===null&&(d.flags|=4194304),d.child;case 5:return f===null&&Un&&(rS(d.type,d.pendingProps,zr.current),(N=A=Di)&&(A=$_(A,d.type,d.pendingProps,Ua),A!==null?(d.stateNode=A,Tr=d,Di=H_(A),Ua=!1,N=!0):N=!1),N||ve(d)),Te(d),N=d.type,z=d.pendingProps,Y=f!==null?f.memoizedProps:null,A=z.children,La(N,z)?A=null:Y!==null&&La(N,Y)&&(d.flags|=32),d.memoizedState!==null&&(N=kt(f,d,$t,null,null,x),lr?df._currentValue=N:df._currentValue2=N),Ja(f,d),be(f,d,A,x),d.child;case 6:return f===null&&Un&&(yy(d.pendingProps,zr.current),(f=x=Di)&&(x=X_(x,d.pendingProps,Ua),x!==null?(d.stateNode=x,Tr=d,Di=null,f=!0):f=!1),f||ve(d)),null;case 13:return I0(f,d,x);case 4:return bt(d,d.stateNode.containerInfo),A=d.pendingProps,f===null?d.child=Zr(d,null,A,x):be(f,d,A,x),d.child;case 11:return ze(f,d,d.type,d.pendingProps,x);case 7:return be(f,d,d.pendingProps,x),d.child;case 8:return be(f,d,d.pendingProps.children,x),d.child;case 12:return be(f,d,d.pendingProps.children,x),d.child;case 10:return A=d.pendingProps,je(d,d.type,A.value),be(f,d,A.children,x),d.child;case 9:return N=d.type._context,A=d.pendingProps.children,vt(d),N=J(N),A=A(N),d.flags|=1,be(f,d,A,x),d.child;case 14:return wt(f,d,d.type,d.pendingProps,x);case 15:return gn(f,d,d.type,d.pendingProps,x);case 19:return N0(f,d,x);case 31:return zo(f,d,x);case 22:return Ki(f,d,x,d.pendingProps);case 24:return vt(d),A=J(Li),f===null?(N=nt(),N===null&&(N=Cn,z=ke(),N.pooledCache=z,z.refCount++,z!==null&&(N.pooledCacheLanes|=x),N=z),d.memoizedState={parent:A,cache:N},Ui(d),je(d,Li,N)):((f.lanes&x)!==0&&($r(f,d),Zs(d,null,null,x),ua()),N=f.memoizedState,z=d.memoizedState,N.parent!==A?(N={parent:A,cache:A},d.memoizedState=N,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=N),je(d,Li,A)):(A=z.cache,je(d,Li,A),A!==N.cache&&Mt(d,[Li],x,!0))),be(f,d,d.pendingProps.children,x),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function to(f){f.flags|=4}function Jd(f){Is&&(f.flags|=8)}function f_(f,d){if(f!==null&&f.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(f=d.child;f!==null;){if((f.flags&8218)!==0||(f.subtreeFlags&8218)!==0)return!0;f=f.sibling}return!1}function L0(f,d,x,A){if(Fn)for(x=d.child;x!==null;){if(x.tag===5||x.tag===6)dp(f,x.stateNode);else if(!(x.tag===4||Ar&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(Is)for(var N=d.child;N!==null;){if(N.tag===5){var z=N.stateNode;x&&A&&(z=F_(z,N.type,N.memoizedProps)),dp(f,z)}else if(N.tag===6)z=N.stateNode,x&&A&&(z=fy(z,N.memoizedProps)),dp(f,z);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)z=N.child,z!==null&&(z.return=N),L0(f,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===d)break;for(;N.sibling===null;){if(N.return===null||N.return===d)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function h_(f,d,x,A){var N=!1;if(Is)for(var z=d.child;z!==null;){if(z.tag===5){var Y=z.stateNode;x&&A&&(Y=F_(Y,z.type,z.memoizedProps)),uy(f,Y)}else if(z.tag===6)Y=z.stateNode,x&&A&&(Y=fy(Y,z.memoizedProps)),uy(f,Y);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)N=z.child,N!==null&&(N.return=z),h_(f,z,!0,!0),N=!0;else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===d)break;for(;z.sibling===null;){if(z.return===null||z.return===d)return N;z=z.return}z.sibling.return=z.return,z=z.sibling}return N}function d_(f,d){if(Is&&f_(f,d)){f=d.stateNode;var x=f.containerInfo,A=ly();h_(A,d,!1,!1),f.pendingChildren=A,to(d),z_(x,A)}}function U0(f,d,x,A){if(Fn)f.memoizedProps!==A&&to(d);else if(Is){var N=f.stateNode,z=f.memoizedProps;if((f=f_(f,d))||z!==A){var Y=zr.current;z=k_(N,x,z,A,!f,null),z===N?d.stateNode=N:(Jd(d),is(z,x,A,Y)&&to(d),d.stateNode=z,f&&L0(z,d,!1,!1))}else d.stateNode=N}}function Na(f,d,x,A,N){if((f.mode&32)!==0&&(x===null?pp(d,A):Dh(d,x,A))){if(f.flags|=16777216,(N&335544128)===N||Z0(d,A))if(Bi(f.stateNode,d,A))f.flags|=8192;else if(zn())f.flags|=8192;else throw ka=Al,Ng}else f.flags&=-16777217}function vh(f,d){if(wy(d)){if(f.flags|=16777216,!Ey(d))if(zn())f.flags|=8192;else throw ka=Al,Ng}else f.flags&=-16777217}function ep(f,d){d!==null&&(f.flags|=4),f.flags&16384&&(d=f.tag!==22?O():536870912,f.lanes|=d,Hh|=d)}function yh(f,d){if(!Un)switch(f.tailMode){case"hidden":d=f.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?d||f.tail===null?f.tail=null:f.tail.sibling=null:A.sibling=null}}function _i(f){var d=f.alternate!==null&&f.alternate.child===f.child,x=0,A=0;if(d)for(var N=f.child;N!==null;)x|=N.lanes|N.childLanes,A|=N.subtreeFlags&65011712,A|=N.flags&65011712,N.return=f,N=N.sibling;else for(N=f.child;N!==null;)x|=N.lanes|N.childLanes,A|=N.subtreeFlags,A|=N.flags,N.return=f,N=N.sibling;return f.subtreeFlags|=A,f.childLanes=x,d}function p_(f,d,x){var A=d.pendingProps;switch(Ae(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(d),null;case 1:return _i(d),null;case 3:return x=d.stateNode,A=null,f!==null&&(A=f.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),ht(Li),_e(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(He(d)?to(d):f===null||f.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Oe())),d_(f,d),_i(d),null;case 26:if(uo){var N=d.type,z=d.memoizedState;return f===null?(to(d),z!==null?(_i(d),vh(d,z)):(_i(d),Na(d,N,null,A,x))):z?z!==f.memoizedState?(to(d),_i(d),vh(d,z)):(_i(d),d.flags&=-16777217):(z=f.memoizedProps,Fn?z!==A&&to(d):U0(f,d,N,A),_i(d),Na(d,N,z,A,x)),null}case 27:if(Ar){if(ut(d),x=Kr.current,N=d.type,f!==null&&d.stateNode!=null)Fn?f.memoizedProps!==A&&to(d):U0(f,d,N,A);else{if(!A){if(d.stateNode===null)throw Error(r(166));return _i(d),null}f=zr.current,He(d)?et(d,f):(f=_g(N,A,x,f,!0),d.stateNode=f,to(d))}return _i(d),null}case 5:if(ut(d),N=d.type,f!==null&&d.stateNode!=null)U0(f,d,N,A);else{if(!A){if(d.stateNode===null)throw Error(r(166));return _i(d),null}if(z=zr.current,He(d))et(d,z),tS(d.stateNode,N,A,z)&&(d.flags|=64);else{var Y=Y0(N,A,Kr.current,z,d);Jd(d),L0(Y,d,!1,!1),d.stateNode=Y,is(Y,N,A,z)&&to(d)}}return _i(d),Na(d,d.type,f===null?null:f.memoizedProps,d.pendingProps,x),null;case 6:if(f&&d.stateNode!=null)x=f.memoizedProps,Fn?x!==A&&to(d):Is&&(x!==A?(f=Kr.current,x=zr.current,Jd(d),d.stateNode=ou(A,f,x,d)):d.stateNode=f.stateNode);else{if(typeof A!="string"&&d.stateNode===null)throw Error(r(166));if(f=Kr.current,x=zr.current,He(d)){if(!Oi)throw Error(r(176));if(f=d.stateNode,x=d.memoizedProps,A=null,N=Tr,N!==null)switch(N.tag){case 27:case 5:A=N.memoizedProps}lT(f,x,d,A)||ve(d,!0)}else Jd(d),d.stateNode=ou(A,f,x,d)}return _i(d),null;case 31:if(x=d.memoizedState,f===null||f.memoizedState!==null){if(A=He(d),x!==null){if(f===null){if(!A)throw Error(r(318));if(!Oi)throw Error(r(556));if(f=d.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(557));my(f,d)}else Ct(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;_i(d),f=!1}else x=Oe(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=x),f=!0;if(!f)return d.flags&256?(xt(d),d):(xt(d),null);if((d.flags&128)!==0)throw Error(r(558))}return _i(d),null;case 13:if(A=d.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(N=He(d),A!==null&&A.dehydrated!==null){if(f===null){if(!N)throw Error(r(318));if(!Oi)throw Error(r(344));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));Z_(N,d)}else Ct(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;_i(d),N=!1}else N=Oe(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=N),N=!0;if(!N)return d.flags&256?(xt(d),d):(xt(d),null)}return xt(d),(d.flags&128)!==0?(d.lanes=x,d):(x=A!==null,f=f!==null&&f.memoizedState!==null,x&&(A=d.child,N=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(N=A.alternate.memoizedState.cachePool.pool),z=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(z=A.memoizedState.cachePool.pool),z!==N&&(A.flags|=2048)),x!==f&&x&&(d.child.flags|=8192),ep(d,d.updateQueue),_i(d),null);case 4:return _e(),d_(f,d),f===null&&di(d.stateNode.containerInfo),_i(d),null;case 10:return ht(d.type),_i(d),null;case 19:if(b(Qi),A=d.memoizedState,A===null)return _i(d),null;if(N=(d.flags&128)!==0,z=A.rendering,z===null)if(N)yh(A,!1);else{if(Hi!==0||f!==null&&(f.flags&128)!==0)for(f=d.child;f!==null;){if(z=Pt(f),z!==null){for(d.flags|=128,yh(A,!1),f=z.updateQueue,d.updateQueue=f,ep(d,f),d.subtreeFlags=0,f=x,x=d.child;x!==null;)rg(x,f),x=x.sibling;return _(Qi,Qi.current&1|2),Un&&Ne(d,A.treeForkCount),d.child}f=f.sibling}A.tail!==null&&da()>cc&&(d.flags|=128,N=!0,yh(A,!1),d.lanes=4194304)}else{if(!N)if(f=Pt(z),f!==null){if(d.flags|=128,N=!0,f=f.updateQueue,d.updateQueue=f,ep(d,f),yh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!z.alternate&&!Un)return _i(d),null}else 2*da()-A.renderingStartTime>cc&&x!==536870912&&(d.flags|=128,N=!0,yh(A,!1),d.lanes=4194304);A.isBackwards?(z.sibling=d.child,d.child=z):(f=A.last,f!==null?f.sibling=z:d.child=z,A.last=z)}return A.tail!==null?(f=A.tail,A.rendering=f,A.tail=f.sibling,A.renderingStartTime=da(),f.sibling=null,x=Qi.current,_(Qi,N?x&1|2:x&1),Un&&Ne(d,A.treeForkCount),f):(_i(d),null);case 22:case 23:return xt(d),K(),A=d.memoizedState!==null,f!==null?f.memoizedState!==null!==A&&(d.flags|=8192):A&&(d.flags|=8192),A?(x&536870912)!==0&&(d.flags&128)===0&&(_i(d),d.subtreeFlags&6&&(d.flags|=8192)):_i(d),x=d.updateQueue,x!==null&&ep(d,x.retryQueue),x=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==x&&(d.flags|=2048),f!==null&&b(nc),null;case 24:return x=null,f!==null&&(x=f.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),ht(Li),_i(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function k0(f,d){switch(Ae(d),d.tag){case 1:return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 3:return ht(Li),_e(),f=d.flags,(f&65536)!==0&&(f&128)===0?(d.flags=f&-65537|128,d):null;case 26:case 27:case 5:return ut(d),null;case 31:if(d.memoizedState!==null){if(xt(d),d.alternate===null)throw Error(r(340));Ct()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 13:if(xt(d),f=d.memoizedState,f!==null&&f.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Ct()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 19:return b(Qi),null;case 4:return _e(),null;case 10:return ht(d.type),null;case 22:case 23:return xt(d),K(),f!==null&&b(nc),f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 24:return ht(Li),null;case 25:return null;default:return null}}function m_(f,d){switch(Ae(d),d.tag){case 3:ht(Li),_e();break;case 26:case 27:case 5:ut(d);break;case 4:_e();break;case 31:d.memoizedState!==null&&xt(d);break;case 13:xt(d);break;case 19:b(Qi);break;case 10:ht(d.type);break;case 22:case 23:xt(d),K(),f!==null&&b(nc);break;case 24:ht(Li)}}function fl(f,d){try{var x=d.updateQueue,A=x!==null?x.lastEffect:null;if(A!==null){var N=A.next;x=N;do{if((x.tag&f)===f){A=void 0;var z=x.create,Y=x.inst;A=z(),Y.destroy=A}x=x.next}while(x!==N)}}catch(ce){un(d,d.return,ce)}}function hl(f,d,x){try{var A=d.updateQueue,N=A!==null?A.lastEffect:null;if(N!==null){var z=N.next;A=z;do{if((A.tag&f)===f){var Y=A.inst,ce=Y.destroy;if(ce!==void 0){Y.destroy=void 0,N=d;var Be=x,ct=ce;try{ct()}catch(St){un(N,Be,St)}}}A=A.next}while(A!==z)}}catch(St){un(d,d.return,St)}}function bh(f){var d=f.updateQueue;if(d!==null){var x=f.stateNode;try{Ca(d,x)}catch(A){un(f,f.return,A)}}}function $m(f,d,x){x.props=ll(f.type,f.memoizedProps),x.state=f.memoizedState;try{x.componentWillUnmount()}catch(A){un(f,d,A)}}function xh(f,d){try{var x=f.ref;if(x!==null){switch(f.tag){case 26:case 27:case 5:var A=Ih(f.stateNode);break;case 30:A=f.stateNode;break;default:A=f.stateNode}typeof x=="function"?f.refCleanup=x(A):x.current=A}}catch(N){un(f,d,N)}}function ha(f,d){var x=f.ref,A=f.refCleanup;if(x!==null)if(typeof A=="function")try{A()}catch(N){un(f,d,N)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(N){un(f,d,N)}else x.current=null}function nf(f){var d=f.type,x=f.memoizedProps,A=f.stateNode;try{R_(A,d,x,f)}catch(N){un(f,f.return,N)}}function tp(f,d,x){try{P_(f.stateNode,f.type,x,d,f)}catch(A){un(f,f.return,A)}}function z0(f){return f.tag===5||f.tag===3||(uo?f.tag===26:!1)||(Ar?f.tag===27&&pf(f.type):!1)||f.tag===4}function Jl(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||z0(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(Ar&&f.tag===27&&pf(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Xm(f,d,x){var A=f.tag;if(A===5||A===6)f=f.stateNode,d?N_(x,f,d):ry(x,f);else if(A!==4&&(Ar&&A===27&&pf(f.type)&&(x=f.stateNode,d=null),f=f.child,f!==null))for(Xm(f,d,x),f=f.sibling;f!==null;)Xm(f,d,x),f=f.sibling}function np(f,d,x){var A=f.tag;if(A===5||A===6)f=f.stateNode,d?I_(x,f,d):iy(x,f);else if(A!==4&&(Ar&&A===27&&pf(f.type)&&(x=f.stateNode),f=f.child,f!==null))for(np(f,d,x),f=f.sibling;f!==null;)np(f,d,x),f=f.sibling}function F0(f,d,x){f=f.containerInfo;try{cy(f,x)}catch(A){un(d,d.return,A)}}function g_(f){var d=f.stateNode,x=f.memoizedProps;try{vr(f.type,x,d,f)}catch(A){un(f,f.return,A)}}function rT(f,d){for(cg(f.containerInfo),fr=d;fr!==null;)if(f=fr,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,fr=d;else for(;fr!==null;){f=fr;var x=f.alternate;switch(d=f.flags,f.tag){case 0:if((d&4)!==0&&(d=f.updateQueue,d=d!==null?d.events:null,d!==null))for(var A=0;A<d.length;A++){var N=d[A];N.ref.impl=N.nextImpl}break;case 11:case 15:break;case 1:if((d&1024)!==0&&x!==null){d=void 0,A=f,N=x.memoizedProps,x=x.memoizedState;var z=A.stateNode;try{var Y=ll(A.type,N);d=z.getSnapshotBeforeUpdate(Y,x),z.__reactInternalSnapshotBeforeUpdate=d}catch(ce){un(A,A.return,ce)}}break;case 3:(d&1024)!==0&&Fn&&oy(f.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=f.sibling,d!==null){d.return=f.return,fr=d;break}fr=f.return}}function v_(f,d,x){var A=x.flags;switch(x.tag){case 0:case 11:case 15:Oa(f,x),A&4&&fl(5,x);break;case 1:if(Oa(f,x),A&4)if(f=x.stateNode,d===null)try{f.componentDidMount()}catch(Y){un(x,x.return,Y)}else{var N=ll(x.type,d.memoizedProps);d=d.memoizedState;try{f.componentDidUpdate(N,d,f.__reactInternalSnapshotBeforeUpdate)}catch(Y){un(x,x.return,Y)}}A&64&&bh(x),A&512&&xh(x,x.return);break;case 3:if(Oa(f,x),A&64&&(A=x.updateQueue,A!==null)){if(f=null,x.child!==null)switch(x.child.tag){case 27:case 5:f=Ih(x.child.stateNode);break;case 1:f=x.child.stateNode}try{Ca(A,f)}catch(Y){un(x,x.return,Y)}}break;case 27:Ar&&d===null&&A&4&&g_(x);case 26:case 5:if(Oa(f,x),d===null){if(A&4)nf(x);else if(A&64){f=x.type,d=x.memoizedProps,N=x.stateNode;try{J_(N,f,d,x)}catch(Y){un(x,x.return,Y)}}}A&512&&xh(x,x.return);break;case 12:Oa(f,x);break;case 31:Oa(f,x),A&4&&io(f,x);break;case 13:Oa(f,x),A&4&&rp(f,x),A&64&&(A=x.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(x=aT.bind(null,x),vg(A,x))));break;case 22:if(A=x.memoizedState!==null||Ji,!A){d=d!==null&&d.memoizedState!==null||er,N=Ji;var z=er;Ji=A,(er=d)&&!z?ao(f,x,(x.subtreeFlags&8772)!==0):Oa(f,x),Ji=N,er=z}break;case 30:break;default:Oa(f,x)}}function B0(f){var d=f.alternate;d!==null&&(f.alternate=null,B0(d)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(d=f.stateNode,d!==null&&fg(d)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function no(f,d,x){for(x=x.child;x!==null;)ip(f,d,x),x=x.sibling}function ip(f,d,x){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(vf,x)}catch{}switch(x.tag){case 26:if(uo){er||ha(x,d),no(f,d,x),x.memoizedState?ec(x.memoizedState):x.stateNode&&Sy(x.stateNode);break}case 27:if(Ar){er||ha(x,d);var A=ji,N=hr;pf(x.type)&&(ji=x.stateNode,hr=!1),no(f,d,x),kr(x.stateNode),ji=A,hr=N;break}case 5:er||ha(x,d);case 6:if(Fn){if(A=ji,N=hr,ji=null,no(f,d,x),ji=A,hr=N,ji!==null)if(hr)try{ay(ji,x.stateNode)}catch(z){un(x,d,z)}else try{O_(ji,x.stateNode)}catch(z){un(x,d,z)}}else no(f,d,x);break;case 18:Fn&&ji!==null&&(hr?yg(ji,x.stateNode):vy(ji,x.stateNode));break;case 4:Fn?(A=ji,N=hr,ji=x.stateNode.containerInfo,hr=!0,no(f,d,x),ji=A,hr=N):(Is&&F0(x.stateNode,x,ly()),no(f,d,x));break;case 0:case 11:case 14:case 15:hl(2,x,d),er||hl(4,x,d),no(f,d,x);break;case 1:er||(ha(x,d),A=x.stateNode,typeof A.componentWillUnmount=="function"&&$m(x,d,A)),no(f,d,x);break;case 21:no(f,d,x);break;case 22:er=(A=er)||x.memoizedState!==null,no(f,d,x),er=A;break;default:no(f,d,x)}}function io(f,d){if(Oi&&d.memoizedState===null&&(f=d.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{uT(f)}catch(x){un(d,d.return,x)}}}function rp(f,d){if(Oi&&d.memoizedState===null&&(f=d.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{cT(f)}catch(x){un(d,d.return,x)}}function ro(f){switch(f.tag){case 31:case 13:case 19:var d=f.stateNode;return d===null&&(d=f.stateNode=new Ny),d;case 22:return f=f.stateNode,d=f._retryCache,d===null&&(d=f._retryCache=new Ny),d;default:throw Error(r(435,f.tag))}}function eu(f,d){var x=ro(f);d.forEach(function(A){if(!x.has(A)){x.add(A);var N=sT.bind(null,f,A);A.then(N,N)}})}function Lr(f,d){var x=d.deletions;if(x!==null)for(var A=0;A<x.length;A++){var N=x[A],z=f,Y=d;if(Fn){var ce=Y;e:for(;ce!==null;){switch(ce.tag){case 27:if(Ar){if(pf(ce.type)){ji=ce.stateNode,hr=!1;break e}break}case 5:ji=ce.stateNode,hr=!1;break e;case 3:case 4:ji=ce.stateNode.containerInfo,hr=!0;break e}ce=ce.return}if(ji===null)throw Error(r(160));ip(z,Y,N),ji=null,hr=!1}else ip(z,Y,N);z=N.alternate,z!==null&&(z.return=null),N.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)ap(d,f),d=d.sibling}function ap(f,d){var x=f.alternate,A=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Lr(d,f),Ur(f),A&4&&(hl(3,f,f.return),fl(3,f),hl(5,f,f.return));break;case 1:Lr(d,f),Ur(f),A&512&&(er||x===null||ha(x,x.return)),A&64&&Ji&&(f=f.updateQueue,f!==null&&(A=f.callbacks,A!==null&&(x=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=x===null?A:x.concat(A))));break;case 26:if(uo){var N=ui;if(Lr(d,f),Ur(f),A&512&&(er||x===null||ha(x,x.return)),A&4){A=x!==null?x.memoizedState:null;var z=f.memoizedState;x===null?z===null?f.stateNode===null?f.stateNode=aS(N,f.type,f.memoizedProps,f):_y(N,f.type,f.stateNode):f.stateNode=xy(N,z,f.memoizedProps):A!==z?(A===null?x.stateNode!==null&&Sy(x.stateNode):ec(A),z===null?_y(N,f.type,f.stateNode):xy(N,z,f.memoizedProps)):z===null&&f.stateNode!==null&&tp(f,f.memoizedProps,x.memoizedProps)}break}case 27:if(Ar){Lr(d,f),Ur(f),A&512&&(er||x===null||ha(x,x.return)),x!==null&&A&4&&tp(f,f.memoizedProps,x.memoizedProps);break}case 5:if(Lr(d,f),Ur(f),A&512&&(er||x===null||ha(x,x.return)),Fn){if(f.flags&32){N=f.stateNode;try{sy(N)}catch(yt){un(f,f.return,yt)}}A&4&&f.stateNode!=null&&(N=f.memoizedProps,tp(f,N,x!==null?x.memoizedProps:N)),A&1024&&(zh=!0)}else Is&&f.alternate!==null&&(f.alternate.stateNode=f.stateNode);break;case 6:if(Lr(d,f),Ur(f),A&4&&Fn){if(f.stateNode===null)throw Error(r(162));A=f.memoizedProps,x=x!==null?x.memoizedProps:A,N=f.stateNode;try{C_(N,x,A)}catch(yt){un(f,f.return,yt)}}break;case 3:if(uo?(sS(),N=ui,ui=vp(d.containerInfo),Lr(d,f),ui=N):Lr(d,f),Ur(f),A&4){if(Fn&&Oi&&x!==null&&x.memoizedState.isDehydrated)try{eS(d.containerInfo)}catch(yt){un(f,f.return,yt)}if(Is){A=d.containerInfo,x=d.pendingChildren;try{cy(A,x)}catch(yt){un(f,f.return,yt)}}}zh&&(zh=!1,Ym(f));break;case 4:uo?(x=ui,ui=vp(f.stateNode.containerInfo),Lr(d,f),Ur(f),ui=x):(Lr(d,f),Ur(f)),A&4&&Is&&F0(f.stateNode,f,f.stateNode.pendingChildren);break;case 12:Lr(d,f),Ur(f);break;case 31:Lr(d,f),Ur(f),A&4&&(A=f.updateQueue,A!==null&&(f.updateQueue=null,eu(f,A)));break;case 13:Lr(d,f),Ur(f),f.child.flags&8192&&f.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Tp=da()),A&4&&(A=f.updateQueue,A!==null&&(f.updateQueue=null,eu(f,A)));break;case 22:N=f.memoizedState!==null;var Y=x!==null&&x.memoizedState!==null,ce=Ji,Be=er;if(Ji=ce||N,er=Be||Y,Lr(d,f),er=Be,Ji=ce,Ur(f),A&8192&&(d=f.stateNode,d._visibility=N?d._visibility&-2:d._visibility|1,N&&(x===null||Y||Ji||er||Vu(f)),Fn)){e:if(x=null,Fn)for(d=f;;){if(d.tag===5||uo&&d.tag===26){if(x===null){Y=x=d;try{z=Y.stateNode,N?oT(z):L_(Y.stateNode,Y.memoizedProps)}catch(yt){un(Y,Y.return,yt)}}}else if(d.tag===6){if(x===null){Y=d;try{var ct=Y.stateNode;N?D_(ct):U_(ct,Y.memoizedProps)}catch(yt){un(Y,Y.return,yt)}}}else if(d.tag===18){if(x===null){Y=d;try{var St=Y.stateNode;N?nS(St):iS(Y.stateNode)}catch(yt){un(Y,Y.return,yt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===f)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;x===d&&(x=null),d=d.return}x===d&&(x=null),d.sibling.return=d.return,d=d.sibling}}A&4&&(A=f.updateQueue,A!==null&&(x=A.retryQueue,x!==null&&(A.retryQueue=null,eu(f,x))));break;case 19:Lr(d,f),Ur(f),A&4&&(A=f.updateQueue,A!==null&&(f.updateQueue=null,eu(f,A)));break;case 30:break;case 21:break;default:Lr(d,f),Ur(f)}}function Ur(f){var d=f.flags;if(d&2){try{for(var x,A=f.return;A!==null;){if(z0(A)){x=A;break}A=A.return}if(Fn){if(x==null)throw Error(r(160));switch(x.tag){case 27:if(Ar){var N=x.stateNode,z=Jl(f);np(f,z,N);break}case 5:var Y=x.stateNode;x.flags&32&&(sy(Y),x.flags&=-33);var ce=Jl(f);np(f,ce,Y);break;case 3:case 4:var Be=x.stateNode.containerInfo,ct=Jl(f);Xm(f,ct,Be);break;default:throw Error(r(161))}}}catch(St){un(f,f.return,St)}f.flags&=-3}d&4096&&(f.flags&=-4097)}function Ym(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var d=f;Ym(d),d.tag===5&&d.flags&1024&&J0(d.stateNode),f=f.sibling}}function Oa(f,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)v_(f,d.alternate,d),d=d.sibling}function Vu(f){for(f=f.child;f!==null;){var d=f;switch(d.tag){case 0:case 11:case 14:case 15:hl(4,d,d.return),Vu(d);break;case 1:ha(d,d.return);var x=d.stateNode;typeof x.componentWillUnmount=="function"&&$m(d,d.return,x),Vu(d);break;case 27:Ar&&kr(d.stateNode);case 26:case 5:ha(d,d.return),Vu(d);break;case 22:d.memoizedState===null&&Vu(d);break;case 30:Vu(d);break;default:Vu(d)}f=f.sibling}}function ao(f,d,x){for(x=x&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var A=d.alternate,N=f,z=d,Y=z.flags;switch(z.tag){case 0:case 11:case 15:ao(N,z,x),fl(4,z);break;case 1:if(ao(N,z,x),A=z,N=A.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(ct){un(A,A.return,ct)}if(A=z,N=A.updateQueue,N!==null){var ce=A.stateNode;try{var Be=N.shared.hiddenCallbacks;if(Be!==null)for(N.shared.hiddenCallbacks=null,N=0;N<Be.length;N++)Es(Be[N],ce)}catch(ct){un(A,A.return,ct)}}x&&Y&64&&bh(z),xh(z,z.return);break;case 27:Ar&&g_(z);case 26:case 5:ao(N,z,x),x&&A===null&&Y&4&&nf(z),xh(z,z.return);break;case 12:ao(N,z,x);break;case 31:ao(N,z,x),x&&Y&4&&io(N,z);break;case 13:ao(N,z,x),x&&Y&4&&rp(N,z);break;case 22:z.memoizedState===null&&ao(N,z,x),xh(z,z.return);break;case 30:break;default:ao(N,z,x)}d=d.sibling}}function ju(f,d){var x=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),f=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(f=d.memoizedState.cachePool.pool),f!==x&&(f!=null&&f.refCount++,x!=null&&Ye(x))}function V0(f,d){f=null,d.alternate!==null&&(f=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==f&&(d.refCount++,f!=null&&Ye(f))}function zi(f,d,x,A){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Km(f,d,x,A),d=d.sibling}function Km(f,d,x,A){var N=d.flags;switch(d.tag){case 0:case 11:case 15:zi(f,d,x,A),N&2048&&fl(9,d);break;case 1:zi(f,d,x,A);break;case 3:zi(f,d,x,A),N&2048&&(f=null,d.alternate!==null&&(f=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==f&&(d.refCount++,f!=null&&Ye(f)));break;case 12:if(N&2048){zi(f,d,x,A),f=d.stateNode;try{var z=d.memoizedProps,Y=z.id,ce=z.onPostCommit;typeof ce=="function"&&ce(Y,d.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Be){un(d,d.return,Be)}}else zi(f,d,x,A);break;case 31:zi(f,d,x,A);break;case 13:zi(f,d,x,A);break;case 23:break;case 22:z=d.stateNode,Y=d.alternate,d.memoizedState!==null?z._visibility&2?zi(f,d,x,A):_h(f,d):z._visibility&2?zi(f,d,x,A):(z._visibility|=2,es(f,d,x,A,(d.subtreeFlags&10256)!==0||!1)),N&2048&&ju(Y,d);break;case 24:zi(f,d,x,A),N&2048&&V0(d.alternate,d);break;default:zi(f,d,x,A)}}function es(f,d,x,A,N){for(N=N&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var z=f,Y=d,ce=x,Be=A,ct=Y.flags;switch(Y.tag){case 0:case 11:case 15:es(z,Y,ce,Be,N),fl(8,Y);break;case 23:break;case 22:var St=Y.stateNode;Y.memoizedState!==null?St._visibility&2?es(z,Y,ce,Be,N):_h(z,Y):(St._visibility|=2,es(z,Y,ce,Be,N)),N&&ct&2048&&ju(Y.alternate,Y);break;case 24:es(z,Y,ce,Be,N),N&&ct&2048&&V0(Y.alternate,Y);break;default:es(z,Y,ce,Be,N)}d=d.sibling}}function _h(f,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var x=f,A=d,N=A.flags;switch(A.tag){case 22:_h(x,A),N&2048&&ju(A.alternate,A);break;case 24:_h(x,A),N&2048&&V0(A.alternate,A);break;default:_h(x,A)}d=d.sibling}}function dl(f,d,x){if(f.subtreeFlags&Ls)for(f=f.child;f!==null;)Hu(f,d,x),f=f.sibling}function Hu(f,d,x){switch(f.tag){case 26:if(dl(f,d,x),f.flags&Ls)if(f.memoizedState!==null)oS(x,ui,f.memoizedState,f.memoizedProps);else{var A=f.stateNode,N=f.type;f=f.memoizedProps,((d&335544128)===d||Z0(N,f))&&hg(x,A,N,f)}break;case 5:dl(f,d,x),f.flags&Ls&&(A=f.stateNode,N=f.type,f=f.memoizedProps,((d&335544128)===d||Z0(N,f))&&hg(x,A,N,f));break;case 3:case 4:uo?(A=ui,ui=vp(f.stateNode.containerInfo),dl(f,d,x),ui=A):dl(f,d,x);break;case 22:f.memoizedState===null&&(A=f.alternate,A!==null&&A.memoizedState!==null?(A=Ls,Ls=16777216,dl(f,d,x),Ls=A):dl(f,d,x));break;default:dl(f,d,x)}}function Zm(f){var d=f.alternate;if(d!==null&&(f=d.child,f!==null)){d.child=null;do d=f.sibling,f.sibling=null,f=d;while(f!==null)}}function Sh(f){var d=f.deletions;if((f.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var A=d[x];fr=A,Cs(A,f)}Zm(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Qm(f),f=f.sibling}function Qm(f){switch(f.tag){case 0:case 11:case 15:Sh(f),f.flags&2048&&hl(9,f,f.return);break;case 3:Sh(f);break;case 12:Sh(f);break;case 22:var d=f.stateNode;f.memoizedState!==null&&d._visibility&2&&(f.return===null||f.return.tag!==13)?(d._visibility&=-3,sp(f)):Sh(f);break;default:Sh(f)}}function sp(f){var d=f.deletions;if((f.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var A=d[x];fr=A,Cs(A,f)}Zm(f)}for(f=f.child;f!==null;){switch(d=f,d.tag){case 0:case 11:case 15:hl(8,d,d.return),sp(d);break;case 22:x=d.stateNode,x._visibility&2&&(x._visibility&=-3,sp(d));break;default:sp(d)}f=f.sibling}}function Cs(f,d){for(;fr!==null;){var x=fr;switch(x.tag){case 0:case 11:case 15:hl(8,x,d);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var A=x.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:Ye(x.memoizedState.cache)}if(A=x.child,A!==null)A.return=x,fr=A;else e:for(x=f;fr!==null;){A=fr;var N=A.sibling,z=A.return;if(B0(A),A===x){fr=null;break e}if(N!==null){N.return=z,fr=N;break e}fr=z}}}function Gu(f){var d=bn(f);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(r(364));return d}if(f=ur(f),f===null)throw Error(r(362));return f.stateNode.current}function qu(f,d){var x=f.tag;switch(d.$$typeof){case yo:if(f.type===d.value)return!0;break;case Bh:e:{for(d=d.value,f=[f,0],x=0;x<f.length;){var A=f[x++],N=A.tag,z=f[x++],Y=d[z];if(N!==5&&N!==26&&N!==27||!Qu(A)){for(;Y!=null&&qu(A,Y);)z++,Y=d[z];if(z===d.length){d=!0;break e}else for(A=A.child;A!==null;)f.push(A,z),A=A.sibling}}d=!1}return d;case Vh:if((x===5||x===26||x===27)&&ny(f.stateNode,d.value))return!0;break;case sc:if((x===5||x===6||x===26||x===27)&&(f=mp(f),f!==null&&0<=f.indexOf(d.value)))return!0;break;case Mp:if((x===5||x===26||x===27)&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function wh(f){switch(f.$$typeof){case yo:return"<"+(g(f.value)||"Unknown")+">";case Bh:return":has("+(wh(f)||"")+")";case Vh:return'[role="'+f.value+'"]';case sc:return'"'+f.value+'"';case Mp:return'[data-testname="'+f.value+'"]';default:throw Error(r(365))}}function Eh(f,d){var x=[];f=[f,0];for(var A=0;A<f.length;){var N=f[A++],z=N.tag,Y=f[A++],ce=d[Y];if(z!==5&&z!==26&&z!==27||!Qu(N)){for(;ce!=null&&qu(N,ce);)Y++,ce=d[Y];if(Y===d.length)x.push(N);else for(N=N.child;N!==null;)f.push(N,Y),N=N.sibling}}return x}function ts(f,d){if(!Mr)throw Error(r(363));f=Gu(f),f=Eh(f,d),d=[],f=Array.from(f);for(var x=0;x<f.length;){var A=f[x++],N=A.tag;if(N===5||N===26||N===27)Qu(A)||d.push(A.stateNode);else for(A=A.child;A!==null;)f.push(A),A=A.sibling}return d}function Ni(){return(On&2)!==0&&kn!==0?kn&-kn:Zt.T!==null?ye():Oh()}function tu(){if(Fa===0)if((kn&536870912)===0||Un){var f=gf;gf<<=1,(gf&3932160)===0&&(gf=262144),Fa=f}else Fa=536870912;return f=os.current,f!==null&&(f.flags|=32),Fa}function Fi(f,d,x){(f===Cn&&(ci===2||ci===9)||f.cancelPendingCommit!==null)&&(Zi(f,0),ml(f,kn,Fa,!1)),B(f,x),((On&2)===0||f!==Cn)&&(f===Cn&&((On&2)===0&&(uc|=x),Hi===4&&ml(f,kn,Fa,!1)),Tt(f))}function Fo(f,d,x){if((On&6)!==0)throw Error(r(327));var A=!x&&(d&127)===0&&(d&f.expiredLanes)===0||R(f,d),N=A?x_(f,d):gl(f,d,!0),z=A;do{if(N===0){oc&&!A&&ml(f,d,0,!1);break}else{if(x=f.current.alternate,z&&!y_(x)){N=gl(f,d,!1),z=!1;continue}if(N===2){if(z=d,f.errorRecoveryDisabledLanes&z)var Y=0;else Y=f.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){d=Y;e:{var ce=f;N=Ap;var Be=Oi&&ce.current.memoizedState.isDehydrated;if(Be&&(Zi(ce,Y).flags|=256),Y=gl(ce,Y,!1),Y!==2){if(lc&&!Be){ce.errorRecoveryDisabledLanes|=z,uc|=z,N=4;break e}z=us,us=N,z!==null&&(us===null?us=z:us.push.apply(us,z))}N=Y}if(z=!1,N!==2)continue}}if(N===1){Zi(f,0),ml(f,d,0,!0);break}e:{switch(A=f,z=N,z){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:ml(A,d,Fa,!Ho);break e;case 2:us=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(N=Tp+300-da(),10<N)){if(ml(A,d,Fa,!Ho),w(A,0,!0)!==0)break e;Pl=d,A.timeoutHandle=K0(pl.bind(null,A,x,us,Cp,Dg,d,Fa,uc,Hh,Ho,z,"Throttled",-0,0),N);break e}pl(A,x,us,Cp,Dg,d,Fa,uc,Hh,Ho,z,null,-0,0)}}break}while(!0);Tt(f)}function pl(f,d,x,A,N,z,Y,ce,Be,ct,St,yt,Ot,vn){if(f.timeoutHandle=rs,yt=d.subtreeFlags,yt&8192||(yt&16785408)===16785408){yt=Q0(),Hu(d,z,yt);var dr=(z&62914560)===z?Tp-da():(z&4194048)===z?wf-da():0;if(dr=T_(yt,dr),dr!==null){Pl=z,f.cancelPendingCommit=dr(yl.bind(null,f,d,z,x,A,N,Y,ce,Be,St,yt,null,Ot,vn)),ml(f,z,Y,!ct);return}}yl(f,d,z,x,A,N,Y,ce,Be)}function y_(f){for(var d=f;;){var x=d.tag;if((x===0||x===11||x===15)&&d.flags&16384&&(x=d.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var A=0;A<x.length;A++){var N=x[A],z=N.getSnapshot;N=N.value;try{if(!cr(z(),N))return!1}catch{return!1}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ml(f,d,x,A){d&=~jh,d&=~uc,f.suspendedLanes|=d,f.pingedLanes&=~d,A&&(f.warmLanes|=d),A=f.expirationTimes;for(var N=d;0<N;){var z=31-as(N),Y=1<<z;A[z]=-1,N&=~Y}x!==0&&F(f,x,d)}function Jm(){return(On&6)===0?(le(0),!1):!0}function eg(){if(Dn!==null){if(ci===0)var f=Dn.return;else f=Dn,Vo=wi=null,Kt(f),ic=null,yf=0,f=Dn;for(;f!==null;)m_(f.alternate,f),f=f.return;Dn=null}}function Zi(f,d){var x=f.timeoutHandle;x!==rs&&(f.timeoutHandle=rs,A_(x)),x=f.cancelPendingCommit,x!==null&&(f.cancelPendingCommit=null,x()),Pl=0,eg(),Cn=f,Dn=x=Ps(f.current,null),kn=d,ci=0,yr=null,Ho=!1,oc=R(f,d),lc=!1,Hh=Fa=jh=uc=du=Hi=0,us=Ap=null,Dg=!1,(d&8)!==0&&(d|=d&32);var A=f.entangledLanes;if(A!==0)for(f=f.entanglements,A&=d;0<A;){var N=31-as(A),z=1<<N;d|=f[N],A&=~z}return Rl=d,Ks(),x}function Si(f,d){xn=null,Zt.H=Ds,d===Rr||d===go?(d=Jt(),ci=3):d===Ng?(d=Jt(),ci=4):ci=d===za?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,yr=d,Dn===null&&(Hi=1,Qc(f,Me(d,f.current)))}function zn(){var f=os.current;return f===null?!0:(kn&4194048)===kn?ls===null:(kn&62914560)===kn||(kn&536870912)!==0?f===ls:!1}function nu(){var f=Zt.H;return Zt.H=Ds,f===null?Ds:f}function Rs(){var f=Zt.A;return Zt.A=Fh,f}function Mh(){Hi=4,Ho||(kn&4194048)!==kn&&os.current!==null||(oc=!0),(du&134217727)===0&&(uc&134217727)===0||Cn===null||ml(Cn,kn,Fa,!1)}function gl(f,d,x){var A=On;On|=2;var N=nu(),z=Rs();(Cn!==f||kn!==d)&&(Cp=null,Zi(f,d)),d=!1;var Y=Hi;e:do try{if(ci!==0&&Dn!==null){var ce=Dn,Be=yr;switch(ci){case 8:eg(),Y=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(d=!0);var ct=ci;if(ci=0,yr=null,vl(f,ce,Be,ct),x&&oc){Y=0;break e}break;default:ct=ci,ci=0,yr=null,vl(f,ce,Be,ct)}}b_(),Y=Hi;break}catch(St){Si(f,St)}while(!0);return d&&f.shellSuspendCounter++,Vo=wi=null,On=A,Zt.H=N,Zt.A=z,Dn===null&&(Cn=null,kn=0,Ks()),Y}function b_(){for(;Dn!==null;)Wu(Dn)}function x_(f,d){var x=On;On|=2;var A=nu(),N=Rs();Cn!==f||kn!==d?(Cp=null,cc=da()+500,Zi(f,d)):oc=R(f,d);e:do try{if(ci!==0&&Dn!==null){d=Dn;var z=yr;t:switch(ci){case 1:ci=0,yr=null,vl(f,d,z,1);break;case 2:case 9:if(lt(z)){ci=0,yr=null,tg(d);break}d=function(){ci!==2&&ci!==9||Cn!==f||(ci=7),Tt(f)},z.then(d,d);break e;case 3:ci=7;break e;case 4:ci=5;break e;case 7:lt(z)?(ci=0,yr=null,tg(d)):(ci=0,yr=null,vl(f,d,z,7));break;case 5:var Y=null;switch(Dn.tag){case 26:Y=Dn.memoizedState;case 5:case 27:var ce=Dn,Be=ce.type,ct=ce.pendingProps;if(Y?Ey(Y):Bi(ce.stateNode,Be,ct)){ci=0,yr=null;var St=ce.sibling;if(St!==null)Dn=St;else{var yt=ce.return;yt!==null?(Dn=yt,Th(yt)):Dn=null}break t}}ci=0,yr=null,vl(f,d,z,5);break;case 6:ci=0,yr=null,vl(f,d,z,6);break;case 8:eg(),Hi=6;break e;default:throw Error(r(462))}}Ah();break}catch(Ot){Si(f,Ot)}while(!0);return Vo=wi=null,Zt.H=A,Zt.A=N,On=x,Dn!==null?0:(Cn=null,kn=0,Ks(),Hi)}function Ah(){for(;Dn!==null&&!uS();)Wu(Dn)}function Wu(f){var d=D0(f.alternate,f,Rl);f.memoizedProps=f.pendingProps,d===null?Th(f):Dn=d}function tg(f){var d=f,x=d.alternate;switch(d.tag){case 15:case 0:d=Jc(x,d,d.pendingProps,d.type,void 0,kn);break;case 11:d=Jc(x,d,d.pendingProps,d.type.render,d.ref,kn);break;case 5:Kt(d);default:m_(x,d),d=Dn=rg(d,Rl),d=D0(x,d,Rl)}f.memoizedProps=f.pendingProps,d===null?Th(f):Dn=d}function vl(f,d,x,A){Vo=wi=null,Kt(d),ic=null,yf=0;var N=d.return;try{if(ee(f,N,d,x,kn)){Hi=1,Qc(f,Me(x,f.current)),Dn=null;return}}catch(z){if(N!==null)throw Dn=N,z;Hi=1,Qc(f,Me(x,f.current)),Dn=null;return}d.flags&32768?(Un||A===1?f=!0:oc||(kn&536870912)!==0?f=!1:(Ho=f=!0,(A===2||A===9||A===3||A===6)&&(A=os.current,A!==null&&A.tag===13&&(A.flags|=16384))),$u(d,f)):Th(d)}function Th(f){var d=f;do{if((d.flags&32768)!==0){$u(d,Ho);return}f=d.return;var x=p_(d.alternate,d,Rl);if(x!==null){Dn=x;return}if(d=d.sibling,d!==null){Dn=d;return}Dn=d=f}while(d!==null);Hi===0&&(Hi=5)}function $u(f,d){do{var x=k0(f.alternate,f);if(x!==null){x.flags&=32767,Dn=x;return}if(x=f.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!d&&(f=f.sibling,f!==null)){Dn=f;return}Dn=f=x}while(f!==null);Hi=6,Dn=null}function yl(f,d,x,A,N,z,Y,ce,Be){f.cancelPendingCommit=null;do xl();while(br!==0);if((On&6)!==0)throw Error(r(327));if(d!==null){if(d===f.current)throw Error(r(177));if(z=d.lanes|d.childLanes,z|=bf,D(f,x,z,Y,ce,Be),f===Cn&&(Dn=Cn=null,kn=0),Ef=d,mu=f,Pl=x,Gh=z,Lg=N,Oy=A,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,gr(bp,function(){return op(),null})):(f.callbackNode=null,f.callbackPriority=0),A=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||A){A=Zt.T,Zt.T=null,N=lo(),Ln(2),Y=On,On|=4;try{rT(f,d,x)}finally{On=Y,Ln(N),Zt.T=A}}br=1,iu(),bl(),ng()}}function iu(){if(br===1){br=0;var f=mu,d=Ef,x=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||x){x=Zt.T,Zt.T=null;var A=lo();Ln(2);var N=On;On|=4;try{ap(d,f),M_(f.containerInfo)}finally{On=N,Ln(A),Zt.T=x}}f.current=d,br=2}}function bl(){if(br===2){br=0;var f=mu,d=Ef,x=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||x){x=Zt.T,Zt.T=null;var A=lo();Ln(2);var N=On;On|=4;try{v_(f,d.alternate,d)}finally{On=N,Ln(A),Zt.T=x}}br=3}}function ng(){if(br===4||br===3){br=0,Ay();var f=mu,d=Ef,x=Pl,A=Oy;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?br=5:(br=0,Ef=mu=null,ig(f,f.pendingLanes));var N=f.pendingLanes;if(N===0&&(pu=null),q(x),d=d.stateNode,ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(vf,d,void 0,(d.current.flags&128)===128)}catch{}if(A!==null){d=Zt.T,N=lo(),Ln(2),Zt.T=null;try{for(var z=f.onRecoverableError,Y=0;Y<A.length;Y++){var ce=A[Y];z(ce.value,{componentStack:ce.stack})}}finally{Zt.T=d,Ln(N)}}(Pl&3)!==0&&xl(),Tt(f),N=f.pendingLanes,(x&261930)!==0&&(N&42)!==0?f===Rp?Kn++:(Kn=0,Rp=f):Kn=0,Oi&&gp(),le(0)}}function ig(f,d){(f.pooledCacheLanes&=d)===0&&(d=f.pooledCache,d!=null&&(f.pooledCache=null,Ye(d)))}function xl(){return iu(),bl(),ng(),op()}function op(){if(br!==5)return!1;var f=mu,d=Gh;Gh=0;var x=q(Pl),A=32>x?32:x;x=Zt.T;var N=lo();try{Ln(A),Zt.T=null,A=Lg,Lg=null;var z=mu,Y=Pl;if(br=0,Ef=mu=null,Pl=0,(On&6)!==0)throw Error(r(331));var ce=On;if(On|=4,Qm(z.current),Km(z,z.current,Y,A),On=ce,le(0,!1),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(vf,z)}catch{}return!0}finally{Ln(N),Zt.T=x,ig(f,d)}}function Xu(f,d,x){d=Me(x,d),d=E(f.stateNode,d,2),f=Ta(f,d,2),f!==null&&(B(f,2),Tt(f))}function un(f,d,x){if(f.tag===3)Xu(f,f,x);else for(;d!==null;){if(d.tag===3){Xu(d,f,x);break}else if(d.tag===1){var A=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(pu===null||!pu.has(A))){f=Me(x,f),x=V(2),A=Ta(d,x,2),A!==null&&($(x,A,d,f),B(A,2),Tt(A));break}}d=d.return}}function Ch(f,d,x){var A=f.pingCache;if(A===null){A=f.pingCache=new Us;var N=new Set;A.set(d,N)}else N=A.get(d),N===void 0&&(N=new Set,A.set(d,N));N.has(x)||(lc=!0,N.add(x),f=__.bind(null,f,d,x),d.then(f,f))}function __(f,d,x){var A=f.pingCache;A!==null&&A.delete(d),f.pingedLanes|=f.suspendedLanes&x,f.warmLanes&=~x,Cn===f&&(kn&x)===x&&(Hi===4||Hi===3&&(kn&62914560)===kn&&300>da()-Tp?(On&2)===0&&Zi(f,0):jh|=x,Hh===kn&&(Hh=0)),Tt(f)}function S_(f,d){d===0&&(d=O()),f=Ai(f,d),f!==null&&(B(f,d),Tt(f))}function aT(f){var d=f.memoizedState,x=0;d!==null&&(x=d.retryLane),S_(f,x)}function sT(f,d){var x=0;switch(f.tag){case 31:case 13:var A=f.stateNode,N=f.memoizedState;N!==null&&(x=N.retryLane);break;case 19:A=f.stateNode;break;case 22:A=f.stateNode._retryCache;break;default:throw Error(r(314))}A!==null&&A.delete(d),S_(f,x)}function gr(f,d){return yp(f,d)}function j0(f,d,x,A){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rf(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Ps(f,d){var x=f.alternate;return x===null?(x=t(f.tag,d,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=d,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&65011712,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,d=f.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x.refCleanup=f.refCleanup,x}function rg(f,d){f.flags&=65011714;var x=f.alternate;return x===null?(f.childLanes=0,f.lanes=d,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,d=x.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),f}function ru(f,d,x,A,N,z){var Y=0;if(A=f,typeof f=="function")rf(f)&&(Y=1);else if(typeof f=="string")Y=uo&&Ar?bg(f,x,zr.current)?26:My(f)?27:5:uo?bg(f,x,zr.current)?26:5:Ar&&My(f)?27:5;else e:switch(f){case fp:return f=t(31,x,d,N),f.elementType=fp,f.lanes=z,f;case lf:return so(x.children,N,z,d);case uf:Y=8,N|=24;break;case cf:return f=t(12,x,d,N|2),f.elementType=cf,f.lanes=z,f;case lg:return f=t(13,x,d,N),f.elementType=lg,f.lanes=z,f;case au:return f=t(19,x,d,N),f.elementType=au,f.lanes=z,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case oo:Y=10;break e;case cp:Y=9;break e;case Rh:Y=11;break e;case ug:Y=14;break e;case Da:Y=16,A=null;break e}Y=29,x=Error(r(130,f===null?"null":typeof f,"")),A=null}return d=t(Y,x,d,N),d.elementType=f,d.type=A,d.lanes=z,d}function so(f,d,x,A){return f=t(7,f,A,d),f.lanes=x,f}function H0(f,d,x){return f=t(6,f,null,d),f.lanes=x,f}function G0(f){var d=t(18,null,null,0);return d.stateNode=f,d}function q0(f,d,x){return d=t(4,f.children!==null?f.children:[],f.key,d),d.lanes=x,d.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},d}function w_(f,d,x,A,N,z,Y,ce,Be){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=k(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k(0),this.hiddenUpdates=k(null),this.identifierPrefix=A,this.onUncaughtError=N,this.onCaughtError=z,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Be,this.incompleteTransitions=new Map}function Yu(f,d,x,A,N,z,Y,ce,Be,ct,St,yt){return f=new w_(f,d,x,Y,Be,ct,St,yt,ce),d=1,z===!0&&(d|=24),z=t(3,null,null,d),f.current=z,z.stateNode=f,d=ke(),d.refCount++,f.pooledCache=d,d.refCount++,z.memoizedState={element:A,isDehydrated:x,cache:d},Ui(z),f}function ag(f){return f?(f=Sl,f):Sl}function lp(f){var d=f._reactInternals;if(d===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=l(d),f=f!==null?c(f):null,f===null?null:Ih(f.stateNode)}function W0(f,d,x,A,N,z){N=ag(N),A.context===null?A.context=N:A.pendingContext=N,A=la(d),A.payload={element:x},z=z===void 0?null:z,z!==null&&(A.callback=z),x=Ta(f,A,d),x!==null&&(Fi(x,f,d),Io(x,f,d))}function af(f,d){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<d?x:d}}function up(f,d){af(f,d),(f=f.alternate)&&af(f,d)}var An={},sg=Dm,ns=xne,og=Object.assign,sf=Symbol.for("react.element"),_l=Symbol.for("react.transitional.element"),of=Symbol.for("react.portal"),lf=Symbol.for("react.fragment"),uf=Symbol.for("react.strict_mode"),cf=Symbol.for("react.profiler"),cp=Symbol.for("react.consumer"),oo=Symbol.for("react.context"),Rh=Symbol.for("react.forward_ref"),lg=Symbol.for("react.suspense"),au=Symbol.for("react.suspense_list"),ug=Symbol.for("react.memo"),Da=Symbol.for("react.lazy"),fp=Symbol.for("react.activity"),$0=Symbol.for("react.memo_cache_sentinel"),su=Symbol.iterator,Ku=Symbol.for("react.client.reference"),Zu=Array.isArray,Zt=sg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X0=e.rendererVersion,hp=e.rendererPackageName,Ph=e.extraDevToolsConfig,Ih=e.getPublicInstance,E_=e.getRootHostContext,Nh=e.getChildHostContext,cg=e.prepareForCommit,M_=e.resetAfterCommit,Y0=e.createInstance;e.cloneMutableInstance;var dp=e.appendInitialChild,is=e.finalizeInitialChildren,La=e.shouldSetTextContent,ou=e.createTextInstance;e.cloneMutableTextInstance;var K0=e.scheduleTimeout,A_=e.cancelTimeout,rs=e.noTimeout,lr=e.isPrimaryRenderer;e.warnsIfNotActing;var Fn=e.supportsMutation,Is=e.supportsPersistence,Oi=e.supportsHydration,bn=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var di=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ln=e.setCurrentUpdatePriority,lo=e.getCurrentUpdatePriority,Oh=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var ff=e.shouldAttemptEagerTransition,fg=e.detachDeletedInstance;e.requestPostPaintCallback;var pp=e.maySuspendCommit,Dh=e.maySuspendCommitOnUpdate,Z0=e.maySuspendCommitInSyncRender,Bi=e.preloadInstance,Q0=e.startSuspendingCommit,hg=e.suspendInstance;e.suspendOnActiveViewTransition;var T_=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var hf=e.NotPendingTransition,df=e.HostTransitionContext,J0=e.resetFormInstance;e.bindToConsole;var ey=e.supportsMicrotasks,ty=e.scheduleMicrotask,Mr=e.supportsTestSelectors,ur=e.findFiberRoot,dg=e.getBoundingRect,mp=e.getTextContent,Qu=e.isHiddenSubtree,ny=e.matchAccessibilityRole,lu=e.setFocusIfFocusable,pg=e.setupIntersectionObserver,iy=e.appendChild,ry=e.appendChildToContainer,C_=e.commitTextUpdate,R_=e.commitMount,P_=e.commitUpdate,I_=e.insertBefore,N_=e.insertInContainerBefore,O_=e.removeChild,ay=e.removeChildFromContainer,sy=e.resetTextContent,oT=e.hideInstance,D_=e.hideTextInstance,L_=e.unhideInstance,U_=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var oy=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var k_=e.cloneInstance,ly=e.createContainerChildSet,uy=e.appendChildToContainerChildSet,z_=e.finalizeContainerChildren,cy=e.replaceContainerChildren,F_=e.cloneHiddenInstance,fy=e.cloneHiddenTextInstance,Ju=e.isSuspenseInstancePending,mg=e.isSuspenseInstanceFallback,gg=e.getSuspenseInstanceFallbackErrorDetails,vg=e.registerSuspenseInstanceRetry,B_=e.canHydrateFormStateMarker,hy=e.isFormStateMarkerMatching,V_=e.getNextHydratableSibling,j_=e.getNextHydratableSiblingAfterSingleton,H_=e.getFirstHydratableChild,G_=e.getFirstHydratableChildWithinContainer,q_=e.getFirstHydratableChildWithinActivityInstance,W_=e.getFirstHydratableChildWithinSuspenseInstance,dy=e.getFirstHydratableChildWithinSingleton,$_=e.canHydrateInstance,X_=e.canHydrateTextInstance,py=e.canHydrateActivityInstance,Y_=e.canHydrateSuspenseInstance,K_=e.hydrateInstance,lT=e.hydrateTextInstance,my=e.hydrateActivityInstance,Z_=e.hydrateSuspenseInstance,Q_=e.getNextHydratableInstanceAfterActivityInstance,gy=e.getNextHydratableInstanceAfterSuspenseInstance,J_=e.commitHydratedInstance,eS=e.commitHydratedContainer,uT=e.commitHydratedActivityInstance,cT=e.commitHydratedSuspenseInstance,tS=e.finalizeHydratedChildren,gp=e.flushHydrationEvents;e.clearActivityBoundary;var vy=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var yg=e.clearSuspenseBoundaryFromContainer,nS=e.hideDehydratedBoundary,iS=e.unhideDehydratedBoundary,Lh=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var rS=e.validateHydratableInstance,yy=e.validateHydratableTextInstance,uo=e.supportsResources,bg=e.isHostHoistableType,vp=e.getHoistableRoot,by=e.getResource,xy=e.acquireResource,ec=e.releaseResource,aS=e.hydrateHoistable,_y=e.mountHoistable,Sy=e.unmountHoistable,xg=e.createHoistableInstance,sS=e.prepareToCommitHoistables,wy=e.mayResourceSuspendCommit,Ey=e.preloadResource,oS=e.suspendResource,Ar=e.supportsSingletons,_g=e.resolveSingletonInstance,vr=e.acquireSingletonInstance,kr=e.releaseSingletonInstance,My=e.isHostSingletonType,pf=e.isSingletonScope,Sg=[],mf=-1,Sl={},as=Math.clz32?Math.clz32:M,wg=Math.log,lS=Math.LN2,Eg=256,gf=262144,Uh=4194304,yp=ns.unstable_scheduleCallback,Mg=ns.unstable_cancelCallback,uS=ns.unstable_shouldYield,Ay=ns.unstable_requestPaint,da=ns.unstable_now,Ag=ns.unstable_ImmediatePriority,cS=ns.unstable_UserBlockingPriority,bp=ns.unstable_NormalPriority,Tg=ns.unstable_IdlePriority,Ty=ns.log,fS=ns.unstable_setDisableYieldValue,vf=null,ss=null,cr=typeof Object.is=="function"?Object.is:oe,Cg=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},fT=Object.prototype.hasOwnProperty,Rg,wl,xp=!1,Cy=new WeakMap,uu=[],El=0,pi=null,_p=0,co=[],Ns=0,fo=null,Yr=1,Bo="",zr=v(null),cu=v(null),Kr=v(null),Sp=v(null),Tr=null,Di=null,Un=!1,Ml=null,Ua=!1,Pg=Error(r(519)),ho=v(null),wi=null,Vo=null,hS=typeof AbortController<"u"?AbortController:function(){var f=[],d=this.signal={aborted:!1,addEventListener:function(x,A){f.push(A)}};this.abort=function(){d.aborted=!0,f.forEach(function(x){return x()})}},Fr=ns.unstable_scheduleCallback,hT=ns.unstable_NormalPriority,Li={$$typeof:oo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},wp=null,li=null,pa=!1,po=!1,Ig=!1,tc=0,kh=null,Ry=0,fu=0,Cr=null,mo=Zt.S;Zt.S=function(f,d){wf=da(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&dt(f,d),mo!==null&&mo(f,d)};var nc=v(null),Rr=Error(r(460)),Ng=Error(r(474)),go=Error(r(542)),Al={then:function(){}},ka=null,ic=null,yf=0,Zr=nl(!0),Py=nl(!1),Qr=[],Tl=0,bf=0,Os=!1,Og=!1,xf=v(null),rc=v(0),os=v(null),ls=null,Qi=v(0),hu=0,xn=null,qt=null,dn=null,Tn=!1,wn=!1,Vn=!1,ma=0,vo=0,jo=null,Iy=0,Ds={readContext:J,use:ki,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};Ds.useEffectEvent=mt;var Vi={readContext:J,use:ki,useCallback:function(f,d){return on().memoizedState=[f,d===void 0?null:d],f},useContext:J,useEffect:Lu,useImperativeHandle:function(f,d,x){x=x!=null?x.concat([f]):null,al(4194308,4,Kl.bind(null,d,f),x)},useLayoutEffect:function(f,d){return al(4194308,4,f,d)},useInsertionEffect:function(f,d){al(4,2,f,d)},useMemo:function(f,d){var x=on();d=d===void 0?null:d;var A=f();if(Vn){W(!0);try{f()}finally{W(!1)}}return x.memoizedState=[A,d],A},useReducer:function(f,d,x){var A=on();if(x!==void 0){var N=x(d);if(Vn){W(!0);try{x(d)}finally{W(!1)}}}else N=d;return A.memoizedState=A.baseState=N,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:N},A.queue=f,f=f.dispatch=ph.bind(null,xn,f),[A.memoizedState,f]},useRef:function(f){var d=on();return f={current:f},d.memoizedState=f},useState:function(f){f=rl(f);var d=f.queue,x=Yd.bind(null,xn,d);return d.dispatch=x,[f.memoizedState,x]},useDebugValue:ol,useDeferredValue:function(f,d){var x=on();return Uu(x,f,d)},useTransition:function(){var f=rl(!1);return f=ku.bind(null,xn,f.queue,!0,!1),on().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,d,x){var A=xn,N=on();if(Un){if(x===void 0)throw Error(r(407));x=x()}else{if(x=d(),Cn===null)throw Error(r(349));(kn&127)!==0||sr(A,d,x)}N.memoizedState=x;var z={value:x,getSnapshot:d};return N.queue=z,Lu(il.bind(null,A,z,f),[f]),A.flags|=2048,Pa(9,{destroy:void 0},or.bind(null,A,z,x,d),null),x},useId:function(){var f=on(),d=Cn.identifierPrefix;if(Un){var x=Bo,A=Yr;x=(A&~(1<<32-as(A)-1)).toString(32)+x,d="_"+d+"R_"+x,x=ma++,0<x&&(d+="H"+x.toString(32)),d+="_"}else x=Iy++,d="_"+d+"r_"+x.toString(32)+"_";return f.memoizedState=d},useHostTransitionStatus:hh,useFormState:Yl,useActionState:Yl,useOptimistic:function(f){var d=on();d.memoizedState=d.baseState=f;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=x,d=eo.bind(null,xn,!0,x),x.dispatch=d,[f,d]},useMemoCache:Ms,useCacheRefresh:function(){return on().memoizedState=qm.bind(null,xn)},useEffectEvent:function(f){var d=on(),x={impl:f};return d.memoizedState=x,function(){if((On&2)!==0)throw Error(r(440));return x.impl.apply(void 0,arguments)}}},Cl={readContext:J,use:ki,useCallback:Kc,useContext:J,useEffect:Oo,useImperativeHandle:ch,useInsertionEffect:sl,useLayoutEffect:Lo,useMemo:Uo,useReducer:Xr,useRef:uh,useState:function(){return Xr(vi)},useDebugValue:ol,useDeferredValue:function(f,d){var x=Et();return fh(x,qt.memoizedState,f,d)},useTransition:function(){var f=Xr(vi)[0],d=Et().memoizedState;return[typeof f=="boolean"?f:tn(f),d]},useSyncExternalStore:hi,useId:zu,useHostTransitionStatus:hh,useFormState:Js,useActionState:Js,useOptimistic:function(f,d){var x=Et();return $c(x,qt,f,d)},useMemoCache:Ms,useCacheRefresh:dh};Cl.useEffectEvent=Dr;var ac={readContext:J,use:ki,useCallback:Kc,useContext:J,useEffect:Oo,useImperativeHandle:ch,useInsertionEffect:sl,useLayoutEffect:Lo,useMemo:Uo,useReducer:Ti,useRef:uh,useState:function(){return Ti(vi)},useDebugValue:ol,useDeferredValue:function(f,d){var x=Et();return qt===null?Uu(x,f,d):fh(x,qt.memoizedState,f,d)},useTransition:function(){var f=Ti(vi)[0],d=Et().memoizedState;return[typeof f=="boolean"?f:tn(f),d]},useSyncExternalStore:hi,useId:zu,useHostTransitionStatus:hh,useFormState:oi,useActionState:oi,useOptimistic:function(f,d){var x=Et();return qt!==null?$c(x,qt,f,d):(x.baseState=f,[f,x.queue.dispatch])},useMemoCache:Ms,useCacheRefresh:dh};ac.useEffectEvent=Dr;var Ep={enqueueSetState:function(f,d,x){f=f._reactInternals;var A=Ni(),N=la(A);N.payload=d,x!=null&&(N.callback=x),d=Ta(f,N,A),d!==null&&(Fi(d,f,A),Io(d,f,A))},enqueueReplaceState:function(f,d,x){f=f._reactInternals;var A=Ni(),N=la(A);N.tag=1,N.payload=d,x!=null&&(N.callback=x),d=Ta(f,N,A),d!==null&&(Fi(d,f,A),Io(d,f,A))},enqueueForceUpdate:function(f,d){f=f._reactInternals;var x=Ni(),A=la(x);A.tag=2,d!=null&&(A.callback=d),d=Ta(f,A,x),d!==null&&(Fi(d,f,x),Io(d,f,x))}},za=Error(r(461)),Ri=!1,_f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Ji=!1,er=!1,zh=!1,Ny=typeof WeakSet=="function"?WeakSet:Set,fr=null,ji=null,hr=!1,ui=null,Ls=8192,Fh={getCacheForType:function(f){var d=J(Li),x=d.data.get(f);return x===void 0&&(x=f(),d.data.set(f,x)),x},cacheSignal:function(){return J(Li).controller.signal}},yo=0,Bh=1,Vh=2,Mp=3,sc=4;if(typeof Symbol=="function"&&Symbol.for){var Sf=Symbol.for;yo=Sf("selector.component"),Bh=Sf("selector.has_pseudo_class"),Vh=Sf("selector.role"),Mp=Sf("selector.test_id"),sc=Sf("selector.text")}var Us=typeof WeakMap=="function"?WeakMap:Map,On=0,Cn=null,Dn=null,kn=0,ci=0,yr=null,Ho=!1,oc=!1,lc=!1,Rl=0,Hi=0,du=0,uc=0,jh=0,Fa=0,Hh=0,Ap=null,us=null,Dg=!1,Tp=0,wf=0,cc=1/0,Cp=null,pu=null,br=0,mu=null,Ef=null,Pl=0,Gh=0,Lg=null,Oy=null,Kn=0,Rp=null;return An.attemptContinuousHydration=function(f){if(f.tag===13||f.tag===31){var d=Ai(f,67108864);d!==null&&Fi(d,f,67108864),up(f,67108864)}},An.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13||f.tag===31){var d=Ni();d=H(d);var x=Ai(f,d);x!==null&&Fi(x,f,d),up(f,d)}},An.attemptSynchronousHydration=function(f){switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var d=S(f.pendingLanes);if(d!==0){for(f.pendingLanes|=2,f.entangledLanes|=2;d;){var x=1<<31-as(d);f.entanglements[1]|=x,d&=~x}Tt(f),(On&6)===0&&(cc=da()+500,le(0))}}break;case 31:case 13:d=Ai(f,2),d!==null&&Fi(d,f,2),Jm(),up(f,2)}},An.batchedUpdates=function(f,d){return f(d)},An.createComponentSelector=function(f){return{$$typeof:yo,value:f}},An.createContainer=function(f,d,x,A,N,z,Y,ce,Be,ct){return Yu(f,d,!1,null,x,A,z,null,Y,ce,Be,ct)},An.createHasPseudoClassSelector=function(f){return{$$typeof:Bh,value:f}},An.createHydrationContainer=function(f,d,x,A,N,z,Y,ce,Be,ct,St,yt,Ot,vn){var dr;return f=Yu(x,A,!0,f,N,z,ce,vn,Be,ct,St,yt),f.context=ag(null),x=f.current,A=Ni(),A=H(A),N=la(A),N.callback=(dr=d)!=null?dr:null,Ta(x,N,A),d=A,f.current.lanes=d,B(f,d),Tt(f),f},An.createPortal=function(f,d,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:of,key:A==null?null:""+A,children:f,containerInfo:d,implementation:x}},An.createRoleSelector=function(f){return{$$typeof:Vh,value:f}},An.createTestNameSelector=function(f){return{$$typeof:Mp,value:f}},An.createTextSelector=function(f){return{$$typeof:sc,value:f}},An.defaultOnCaughtError=function(f){console.error(f)},An.defaultOnRecoverableError=function(f){Cg(f)},An.defaultOnUncaughtError=function(f){Cg(f)},An.deferredUpdates=function(f){var d=Zt.T,x=lo();try{return Ln(32),Zt.T=null,f()}finally{Ln(x),Zt.T=d}},An.discreteUpdates=function(f,d,x,A,N){var z=Zt.T,Y=lo();try{return Ln(2),Zt.T=null,f(d,x,A,N)}finally{Ln(Y),Zt.T=z,On===0&&(cc=da()+500)}},An.findAllNodes=ts,An.findBoundingRects=function(f,d){if(!Mr)throw Error(r(363));d=ts(f,d),f=[];for(var x=0;x<d.length;x++)f.push(dg(d[x]));for(d=f.length-1;0<d;d--){x=f[d];for(var A=x.x,N=A+x.width,z=x.y,Y=z+x.height,ce=d-1;0<=ce;ce--)if(d!==ce){var Be=f[ce],ct=Be.x,St=ct+Be.width,yt=Be.y,Ot=yt+Be.height;if(A>=ct&&z>=yt&&N<=St&&Y<=Ot){f.splice(d,1);break}else if(A!==ct||x.width!==Be.width||Ot<z||yt>Y){if(!(z!==yt||x.height!==Be.height||St<A||ct>N)){ct>A&&(Be.width+=ct-A,Be.x=A),St<N&&(Be.width=N-ct),f.splice(d,1);break}}else{yt>z&&(Be.height+=yt-z,Be.y=z),Ot<Y&&(Be.height=Y-yt),f.splice(d,1);break}}}return f},An.findHostInstance=lp,An.findHostInstanceWithNoPortals=function(f){return f=l(f),f=f!==null?h(f):null,f===null?null:Ih(f.stateNode)},An.findHostInstanceWithWarning=function(f){return lp(f)},An.flushPassiveEffects=xl,An.flushSyncFromReconciler=function(f){var d=On;On|=1;var x=Zt.T,A=lo();try{if(Ln(2),Zt.T=null,f)return f()}finally{Ln(A),Zt.T=x,On=d,(On&6)===0&&le(0)}},An.flushSyncWork=Jm,An.focusWithin=function(f,d){if(!Mr)throw Error(r(363));for(f=Gu(f),d=Eh(f,d),d=Array.from(d),f=0;f<d.length;){var x=d[f++],A=x.tag;if(!Qu(x)){if((A===5||A===26||A===27)&&lu(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},An.getFindAllNodesFailureDescription=function(f,d){if(!Mr)throw Error(r(363));var x=0,A=[];f=[Gu(f),0];for(var N=0;N<f.length;){var z=f[N++],Y=z.tag,ce=f[N++],Be=d[ce];if((Y!==5&&Y!==26&&Y!==27||!Qu(z))&&(qu(z,Be)&&(A.push(wh(Be)),ce++,ce>x&&(x=ce)),ce<d.length))for(z=z.child;z!==null;)f.push(z,ce),z=z.sibling}if(x<d.length){for(f=[];x<d.length;x++)f.push(wh(d[x]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},An.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 27:case 5:return Ih(f.child.stateNode);default:return f.child.stateNode}},An.injectIntoDevTools=function(){var f={bundleType:0,version:X0,rendererPackageName:hp,currentDispatcherRef:Zt,reconcilerVersion:"19.2.0"};if(Ph!==null&&(f.rendererConfig=Ph),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)f=!0;else{try{vf=d.inject(f),ss=d}catch{}f=!!d.checkDCE}}return f},An.isAlreadyRendering=function(){return(On&6)!==0},An.observeVisibleRects=function(f,d,x,A){if(!Mr)throw Error(r(363));f=ts(f,d);var N=pg(f,x,A).disconnect;return{disconnect:function(){N()}}},An.shouldError=function(){return null},An.shouldSuspend=function(){return!1},An.startHostTransition=function(f,d,x,A){if(f.tag!==5)throw Error(r(476));var N=Xd(f).queue;ku(f,N,d,hf,x===null?i:function(){var z=Xd(f);return z.next===null&&(z=f.alternate.memoizedState),Fu(f,z.next.queue,{},Ni()),x(A)})},An.updateContainer=function(f,d,x,A){var N=d.current,z=Ni();return W0(N,z,f,d,x,A),z},An.updateContainerSync=function(f,d,x,A){return W0(d.current,2,f,d,x,A),2},An},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(bk)),bk.exports}var _k;function Yne(){return _k||(_k=1,yk.exports=Xne()),yk.exports}var Kne=Yne();const Zne=$ne(Kne);function Qne(n){const e=Zne(n);return e.injectIntoDevTools(),e}const V6=0,$v={},Jne=/^three(?=[A-Z])/,eA=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let eie=0;const tie=n=>typeof n=="function";function nie(n){if(tie(n)){const e=`${eie++}`;return $v[e]=n,e}else Object.assign($v,n)}function j6(n,e){const t=eA(n),i=$v[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function iie(n,e,t){var i;return n=eA(n)in $v?n:n.replace(Jne,""),j6(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,nE(e.object,t,n,e)}function rie(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?rE(n.parent,n):Fs(n.object)&&(n.object.visible=!1),n.isHidden=!0,h0(n)}}function H6(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?iE(n.parent,n):Fs(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,h0(n)}}function bO(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const s=$v[eA(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(fd(e.object,e.props),e.props.attach)iE(n,e);else if(Fs(e.object)&&Fs(n.object)){const s=n.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const l=n.object.children.indexOf(e.object);if(l!==-1){n.object.children.splice(l,1);const c=l<s?s-1:s;n.object.children.splice(c,0,e.object)}else e.object.parent=n.object,n.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const s of e.children)bO(e,s);h0(e)}}function UC(n,e){e&&(e.parent=n,n.children.push(e),bO(n,e))}function Sk(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),bO(n,e,t)}function G6(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():KP.unstable_scheduleCallback(KP.unstable_IdlePriority,e)}}function QP(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?rE(n,e):Fs(e.object)&&Fs(n.object)&&(n.object.remove(e.object),zne(N6(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];QP(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&G6(e.object),t===void 0&&h0(e)}function aie(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const X1=[];function sie(){for(const[t]of X1){const i=t.parent;if(i){t.props.attach?rE(i,t):Fs(t.object)&&Fs(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?rE(t,r):Fs(r.object)&&Fs(t.object)&&t.object.remove(r.object)}t.isHidden&&H6(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&G6(t.object)}for(const[t,i,r]of X1){t.props=i;const a=t.parent;if(a){var n,e;const s=$v[eA(t.type)];t.object=(n=t.props.object)!=null?n:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,aie(r,t.object),fd(t.object,t.props),t.props.attach?iE(a,t):Fs(t.object)&&Fs(a.object)&&a.object.add(t.object);for(const l of t.children)l.props.attach?iE(t,l):Fs(l.object)&&Fs(t.object)&&t.object.add(l.object);h0(t)}}X1.length=0}const kC=()=>{},wk={};let x1=V6;const oie=0,lie=4,JP=Qne({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:iie,removeChild:QP,appendChild:UC,appendInitialChild:UC,insertBefore:Sk,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||UC(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||QP(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||Sk(i,e,t)},getRootHostContext:()=>wk,getChildHostContext:()=>wk,commitUpdate(n,e,t,i,r){var a,s,l;j6(e,i);let c=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(l=i.args)!=null&&l.some((p,g)=>{var v;return p!==((v=t.args)==null?void 0:v[g])}))&&(c=!0),c)X1.push([n,{...i},r]);else{const p=Dne(n,i);Object.keys(p).length&&(Object.assign(n.props,p),fd(n.object,p))}(r.sibling===null||(r.flags&lie)===oie)&&sie()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>nE(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:rie,unhideInstance:H6,createTextInstance:kC,hideTextInstance:kC,unhideTextInstance:kC,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:j.createContext(null),setCurrentUpdatePriority(n){x1=n},getCurrentUpdatePriority(){return x1},resolveUpdatePriority(){var n;if(x1!==V6)return x1;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return qne;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Hne;default:return Gne}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:Wne.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),Em=new Map,lv={objects:"shallow",strict:!1};function uie(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function cie(n){const e=Em.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||Bne(nI,Mk),s=t||JP.createContainer(a,jne,null,!1,null,"",r,r,r,null);e||Em.set(n,{fiber:s,store:a});let l,c,h=!1,p=null;return{async configure(g={}){let v;p=new Promise(Q=>v=Q);let{gl:b,size:_,scene:M,events:S,onCreated:w,shadows:R=!1,linear:P=!1,flat:O=!1,legacy:k=!1,orthographic:B=!1,frameloop:D="always",dpr:F=[1,2],performance:I,raycaster:L,camera:H,onPointerMissed:q}=g,W=a.getState(),oe=W.gl;if(!W.gl){const Q={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},de=typeof b=="function"?await b(Q):b;gk(de)?oe=de:oe=new M6({...Q,...b}),W.set({gl:oe})}let fe=W.raycaster;fe||W.set({raycaster:fe=new v6});const{params:te,...re}=L||{};if(tr.equ(re,fe,lv)||fd(fe,{...re}),tr.equ(te,fe.params,lv)||fd(fe,{params:{...fe.params,...te}}),!W.camera||W.camera===c&&!tr.equ(c,H,lv)){c=H;const Q=H==null?void 0:H.isCamera,de=Q?H:B?new Bf(0,0,0,0,.1,1e3):new Nr(75,0,.1,1e3);Q||(de.position.z=5,H&&(fd(de,H),de.manual||("aspect"in H||"left"in H||"right"in H||"bottom"in H||"top"in H)&&(de.manual=!0,de.updateProjectionMatrix())),!W.camera&&!(H!=null&&H.rotation)&&de.lookAt(0,0,0)),W.set({camera:de}),fe.camera=de}if(!W.scene){let Q;M!=null&&M.isScene?(Q=M,nE(Q,a,"",{})):(Q=new jN,nE(Q,a,"",{}),M&&fd(Q,M)),W.set({scene:Q})}S&&!W.events.handlers&&W.set({events:S(a)});const he=uie(n,_);if(tr.equ(he,W.size,lv)||W.setSize(he.width,he.height,he.top,he.left),F&&W.viewport.dpr!==L6(F)&&W.setDpr(F),W.frameloop!==D&&W.setFrameloop(D),W.onPointerMissed||W.set({onPointerMissed:q}),I&&!tr.equ(I,W.performance,lv)&&W.set(Q=>({performance:{...Q.performance,...I}})),!W.xr){var Me;const Q=(We,bt)=>{const _e=a.getState();_e.frameloop!=="never"&&Mk(We,!0,_e,bt)},de=()=>{const We=a.getState();We.gl.xr.enabled=We.gl.xr.isPresenting,We.gl.xr.setAnimationLoop(We.gl.xr.isPresenting?Q:null),We.gl.xr.isPresenting||nI(We)},Ae={connect(){const We=a.getState().gl;We.xr.addEventListener("sessionstart",de),We.xr.addEventListener("sessionend",de)},disconnect(){const We=a.getState().gl;We.xr.removeEventListener("sessionstart",de),We.xr.removeEventListener("sessionend",de)}};typeof((Me=oe.xr)==null?void 0:Me.addEventListener)=="function"&&Ae.connect(),W.set({xr:Ae})}if(oe.shadowMap){const Q=oe.shadowMap.enabled,de=oe.shadowMap.type;if(oe.shadowMap.enabled=!!R,tr.boo(R))oe.shadowMap.type=wb;else if(tr.str(R)){var Ne;const Ae={basic:U5,percentage:Cv,soft:wb,variance:tm};oe.shadowMap.type=(Ne=Ae[R])!=null?Ne:wb}else tr.obj(R)&&Object.assign(oe.shadowMap,R);(Q!==oe.shadowMap.enabled||de!==oe.shadowMap.type)&&(oe.shadowMap.needsUpdate=!0)}return qn.enabled=!k,h||(oe.outputColorSpace=P?Cd:qa,oe.toneMapping=O?zl:yM),W.legacy!==k&&W.set(()=>({legacy:k})),W.linear!==P&&W.set(()=>({linear:P})),W.flat!==O&&W.set(()=>({flat:O})),b&&!tr.fun(b)&&!gk(b)&&!tr.equ(b,oe,lv)&&fd(oe,b),l=w,h=!0,v(),this},render(g){return!h&&!p&&this.configure(),p.then(()=>{JP.updateContainer(U.jsx(fie,{store:a,children:g,onCreated:l,rootElement:n}),s,null,()=>{})}),a},unmount(){q6(n)}}}function fie({store:n,children:e,onCreated:t,rootElement:i}){return Vx(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),U.jsx(z6.Provider,{value:n,children:e})}function q6(n,e){const t=Em.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),JP.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,l,c;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),Ine(r.scene),Em.delete(n)}catch{}},500)})}}const hie=new Set,die=new Set,pie=new Set;function zC(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Nb(n,e){switch(n){case"before":return zC(hie,e);case"after":return zC(die,e);case"tail":return zC(pie,e)}}let FC,BC;function eI(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),FC=e.internal.subscribers;for(let r=0;r<FC.length;r++)BC=FC[r],BC.ref.current(BC.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let aE=!1,tI=!1,VC,Ek,uv;function W6(n){Ek=requestAnimationFrame(W6),aE=!0,VC=0,Nb("before",n),tI=!0;for(const t of Em.values()){var e;uv=t.store.getState(),uv.internal.active&&(uv.frameloop==="always"||uv.internal.frames>0)&&!((e=uv.gl.xr)!=null&&e.isPresenting)&&(VC+=eI(n,uv))}if(tI=!1,Nb("after",n),VC===0)return Nb("tail",n),aE=!1,cancelAnimationFrame(Ek)}function nI(n,e=1){var t;if(!n)return Em.forEach(i=>nI(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):tI?n.internal.frames=2:n.internal.frames=1,aE||(aE=!0,requestAnimationFrame(W6)))}function Mk(n,e=!0,t,i){if(e&&Nb("before",n),t)eI(n,t,i);else for(const r of Em.values())eI(n,r.store.getState());e&&Nb("after",n)}const jC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function mie(n){const{handlePointer:e}=Fne(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(jC).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[l,c]=jC[a];t.addEventListener(l,s,{passive:c})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=jC[r];i.connected.removeEventListener(s,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function Ak(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function gie({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=j.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=j.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,h=n?typeof n=="number"?n:n.resize:null,p=j.useRef(!1);j.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,b]=j.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:R,top:P,width:O,height:k,bottom:B,right:D,x:F,y:I}=l.current.element.getBoundingClientRect(),L={left:R,top:P,width:O,height:k,bottom:B,right:D,x:F,y:I};l.current.element instanceof HTMLElement&&i&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),p.current&&!xie(l.current.lastBounds,L)&&s(l.current.lastBounds=L)};return[w,h?Ak(w,h):w,c?Ak(w,c):w]},[s,i,c,h]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",b,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function M(){l.current.element&&(l.current.resizeObserver=new r(b),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",b,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const S=w=>{!w||w===l.current.element||(_(),l.current.element=w,l.current.scrollContainers=$6(w),M())};return yie(b,!!e),vie(v),j.useEffect(()=>{_(),M()},[e,b,v]),j.useEffect(()=>_,[]),[S,a,g]}function vie(n){j.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function yie(n,e){j.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function $6(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...$6(n.parentElement)]}const bie=["x","y","top","bottom","left","right","width","height"],xie=(n,e)=>bie.every(t=>n[t]===e[t]);function _ie({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:s=mie,eventSource:l,eventPrefix:c,shadows:h,linear:p,flat:g,legacy:v,orthographic:b,frameloop:_,dpr:M,performance:S,raycaster:w,camera:R,scene:P,onPointerMissed:O,onCreated:k,...B}){j.useMemo(()=>nie(ane),[]);const D=Tne(),[F,I]=gie({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=j.useRef(null),H=j.useRef(null);j.useImperativeHandle(n,()=>L.current);const q=D6(O),[W,oe]=j.useState(!1),[fe,te]=j.useState(!1);if(W)throw W;if(fe)throw fe;const re=j.useRef(null);Vx(()=>{const Me=L.current;if(I.width>0&&I.height>0&&Me){re.current||(re.current=cie(Me));async function Ne(){await re.current.configure({gl:a,scene:P,events:s,shadows:h,linear:p,flat:g,legacy:v,orthographic:b,frameloop:_,dpr:M,performance:S,raycaster:w,camera:R,size:I,onPointerMissed:(...Q)=>q.current==null?void 0:q.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(l?Mne(l)?l.current:l:H.current),c&&Q.setEvents({compute:(de,Ae)=>{const We=de[c+"X"],bt=de[c+"Y"];Ae.pointer.set(We/Ae.size.width*2-1,-(bt/Ae.size.height)*2+1),Ae.raycaster.setFromCamera(Ae.pointer,Ae.camera)}}),k==null||k(Q)}}),re.current.render(U.jsx(D,{children:U.jsx(Rne,{set:te,children:U.jsx(j.Suspense,{fallback:U.jsx(Cne,{set:oe}),children:e??null})})}))}Ne()}}),j.useEffect(()=>{const Me=L.current;if(Me)return()=>q6(Me)},[]);const he=l?"none":"auto";return U.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:he,...r},...B,children:U.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:U.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function Sie(n){return U.jsx(P6,{children:U.jsx(_ie,{...n})})}class wie extends Xs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Uc(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{t(a.parse(l))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},i,r)}parse(e){function t(h){const p=new DataView(h),g=32/8*3+32/8*3*3+16/8,v=p.getUint32(80,!0);if(80+32/8+v*g===p.byteLength)return!0;const _=[115,111,108,105,100];for(let M=0;M<5;M++)if(i(_,p,M))return!1;return!0}function i(h,p,g){for(let v=0,b=h.length;v<b;v++)if(h[v]!==p.getUint8(g+v))return!1;return!0}function r(h){const p=new DataView(h),g=p.getUint32(80,!0);let v,b,_,M=!1,S,w,R,P,O;for(let H=0;H<70;H++)p.getUint32(H,!1)==1129270351&&p.getUint8(H+4)==82&&p.getUint8(H+5)==61&&(M=!0,S=new Float32Array(g*3*3),w=p.getUint8(H+6)/255,R=p.getUint8(H+7)/255,P=p.getUint8(H+8)/255,O=p.getUint8(H+9)/255);const k=84,B=50,D=new mn,F=new Float32Array(g*3*3),I=new Float32Array(g*3*3),L=new Lt;for(let H=0;H<g;H++){const q=k+H*B,W=p.getFloat32(q,!0),oe=p.getFloat32(q+4,!0),fe=p.getFloat32(q+8,!0);if(M){const te=p.getUint16(q+48,!0);(te&32768)===0?(v=(te&31)/31,b=(te>>5&31)/31,_=(te>>10&31)/31):(v=w,b=R,_=P)}for(let te=1;te<=3;te++){const re=q+te*12,he=H*3*3+(te-1)*3;F[he]=p.getFloat32(re,!0),F[he+1]=p.getFloat32(re+4,!0),F[he+2]=p.getFloat32(re+8,!0),I[he]=W,I[he+1]=oe,I[he+2]=fe,M&&(L.setRGB(v,b,_,qa),S[he]=L.r,S[he+1]=L.g,S[he+2]=L.b)}}return D.setAttribute("position",new fi(F,3)),D.setAttribute("normal",new fi(I,3)),M&&(D.setAttribute("color",new fi(S,3)),D.hasColors=!0,D.alpha=O),D}function a(h){const p=new mn,g=/solid([\s\S]*?)endsolid/g,v=/facet([\s\S]*?)endfacet/g,b=/solid\s(.+)/;let _=0;const M=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,S=new RegExp("vertex"+M+M+M,"g"),w=new RegExp("normal"+M+M+M,"g"),R=[],P=[],O=[],k=new ne;let B,D=0,F=0,I=0;for(;(B=g.exec(h))!==null;){F=I;const L=B[0],H=(B=b.exec(L))!==null?B[1]:"";for(O.push(H);(B=v.exec(L))!==null;){let oe=0,fe=0;const te=B[0];for(;(B=w.exec(te))!==null;)k.x=parseFloat(B[1]),k.y=parseFloat(B[2]),k.z=parseFloat(B[3]),fe++;for(;(B=S.exec(te))!==null;)R.push(parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3])),P.push(k.x,k.y,k.z),oe++,I++;fe!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+_),oe!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+_),_++}const q=F,W=I-F;p.userData.groupNames=O,p.addGroup(q,W,D),D++}return p.setAttribute("position",new Ft(R,3)),p.setAttribute("normal",new Ft(P,3)),p}function s(h){return typeof h!="string"?new TextDecoder().decode(h):h}function l(h){if(typeof h=="string"){const p=new Uint8Array(h.length);for(let g=0;g<h.length;g++)p[g]=h.charCodeAt(g)&255;return p.buffer||p}else return h}const c=l(e);return t(c)?r(c):a(s(e))}}function sE(){return sE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},sE.apply(null,arguments)}var Eie=Object.defineProperty,Mie=(n,e,t)=>e in n?Eie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Aie=(n,e,t)=>(Mie(n,e+"",t),t);class Tie{constructor(){Aie(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}}var Cie=Object.defineProperty,Rie=(n,e,t)=>e in n?Cie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,an=(n,e,t)=>(Rie(n,typeof e!="symbol"?e+"":e,t),t);const _1=new km,Tk=new Nf,Pie=Math.cos(70*(Math.PI/180)),Ck=(n,e)=>(n%e+e)%e;let Iie=class extends Tie{constructor(e,t){super(),an(this,"object"),an(this,"domElement"),an(this,"enabled",!0),an(this,"target",new ne),an(this,"minDistance",0),an(this,"maxDistance",1/0),an(this,"minZoom",0),an(this,"maxZoom",1/0),an(this,"minPolarAngle",0),an(this,"maxPolarAngle",Math.PI),an(this,"minAzimuthAngle",-1/0),an(this,"maxAzimuthAngle",1/0),an(this,"enableDamping",!1),an(this,"dampingFactor",.05),an(this,"enableZoom",!0),an(this,"zoomSpeed",1),an(this,"enableRotate",!0),an(this,"rotateSpeed",1),an(this,"enablePan",!0),an(this,"panSpeed",1),an(this,"screenSpacePanning",!0),an(this,"keyPanSpeed",7),an(this,"zoomToCursor",!1),an(this,"autoRotate",!1),an(this,"autoRotateSpeed",2),an(this,"reverseOrbit",!1),an(this,"reverseHorizontalOrbit",!1),an(this,"reverseVerticalOrbit",!1),an(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),an(this,"mouseButtons",{LEFT:Wp.ROTATE,MIDDLE:Wp.DOLLY,RIGHT:Wp.PAN}),an(this,"touches",{ONE:$p.ROTATE,TWO:$p.DOLLY_PAN}),an(this,"target0"),an(this,"position0"),an(this,"zoom0"),an(this,"_domElementKeyEvents",null),an(this,"getPolarAngle"),an(this,"getAzimuthalAngle"),an(this,"setPolarAngle"),an(this,"setAzimuthalAngle"),an(this,"getDistance"),an(this,"getZoomScale"),an(this,"listenToKeyEvents"),an(this,"stopListenToKeyEvents"),an(this,"saveState"),an(this,"reset"),an(this,"update"),an(this,"connect"),an(this,"dispose"),an(this,"dollyIn"),an(this,"dollyOut"),an(this,"getScale"),an(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=ae=>{let ye=Ck(ae,2*Math.PI),dt=p.phi;dt<0&&(dt+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let se=Math.abs(ye-dt);2*Math.PI-se<se&&(ye<dt?ye+=2*Math.PI:dt+=2*Math.PI),g.phi=ye-dt,i.update()},this.setAzimuthalAngle=ae=>{let ye=Ck(ae,2*Math.PI),dt=p.theta;dt<0&&(dt+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let se=Math.abs(ye-dt);2*Math.PI-se<se&&(ye<dt?ye+=2*Math.PI:dt+=2*Math.PI),g.theta=ye-dt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ae=>{ae.addEventListener("keydown",Le),this._domElementKeyEvents=ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Le),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),c=l.NONE},this.update=(()=>{const ae=new ne,ye=new ne(0,1,0),dt=new xs().setFromUnitVectors(e.up,ye),se=dt.clone().invert(),rt=new ne,nt=new xs,ot=2*Math.PI;return function(){const $e=i.object.position;dt.setFromUnitVectors(e.up,ye),se.copy(dt).invert(),ae.copy($e).sub(i.target),ae.applyQuaternion(dt),p.setFromVector3(ae),i.autoRotate&&c===l.NONE&&oe(q()),i.enableDamping?(p.theta+=g.theta*i.dampingFactor,p.phi+=g.phi*i.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let lt=i.minAzimuthAngle,Ht=i.maxAzimuthAngle;isFinite(lt)&&isFinite(Ht)&&(lt<-Math.PI?lt+=ot:lt>Math.PI&&(lt-=ot),Ht<-Math.PI?Ht+=ot:Ht>Math.PI&&(Ht-=ot),lt<=Ht?p.theta=Math.max(lt,Math.min(Ht,p.theta)):p.theta=p.theta>(lt+Ht)/2?Math.max(lt,p.theta):Math.min(Ht,p.theta)),p.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,p.phi)),p.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(b,i.dampingFactor):i.target.add(b),i.zoomToCursor&&I||i.object.isOrthographicCamera?p.radius=Ae(p.radius):p.radius=Ae(p.radius*v),ae.setFromSpherical(p),ae.applyQuaternion(se),$e.copy(i.target).add(ae),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,b.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),b.set(0,0,0));let cn=!1;if(i.zoomToCursor&&I){let Jt=null;if(i.object instanceof Nr&&i.object.isPerspectiveCamera){const si=ae.length();Jt=Ae(si*v);const ar=si-Jt;i.object.position.addScaledVector(D,ar),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const si=new ne(F.x,F.y,0);si.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix(),cn=!0;const ar=new ne(F.x,F.y,0);ar.unproject(i.object),i.object.position.sub(ar).add(si),i.object.updateMatrixWorld(),Jt=ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Jt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Jt).add(i.object.position):(_1.origin.copy(i.object.position),_1.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(_1.direction))<Pie?e.lookAt(i.target):(Tk.setFromNormalAndCoplanarPoint(i.object.up,i.target),_1.intersectPlane(Tk,i.target))))}else i.object instanceof Bf&&i.object.isOrthographicCamera&&(cn=v!==1,cn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix()));return v=1,I=!1,cn||rt.distanceToSquared(i.object.position)>h||8*(1-nt.dot(i.object.quaternion))>h?(i.dispatchEvent(r),rt.copy(i.object.position),nt.copy(i.object.quaternion),cn=!1,!0):!1}})(),this.connect=ae=>{i.domElement=ae,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ee),i.domElement.addEventListener("pointerdown",vt),i.domElement.addEventListener("pointercancel",X),i.domElement.addEventListener("wheel",Ye)},this.dispose=()=>{var ae,ye,dt,se,rt,nt;i.domElement&&(i.domElement.style.touchAction="auto"),(ae=i.domElement)==null||ae.removeEventListener("contextmenu",Ee),(ye=i.domElement)==null||ye.removeEventListener("pointerdown",vt),(dt=i.domElement)==null||dt.removeEventListener("pointercancel",X),(se=i.domElement)==null||se.removeEventListener("wheel",Ye),(rt=i.domElement)==null||rt.ownerDocument.removeEventListener("pointermove",J),(nt=i.domElement)==null||nt.ownerDocument.removeEventListener("pointerup",X),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Le)};const i=this,r={type:"change"},a={type:"start"},s={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const h=1e-6,p=new qP,g=new qP;let v=1;const b=new ne,_=new Je,M=new Je,S=new Je,w=new Je,R=new Je,P=new Je,O=new Je,k=new Je,B=new Je,D=new ne,F=new Je;let I=!1;const L=[],H={};function q(){return 2*Math.PI/60/60*i.autoRotateSpeed}function W(){return Math.pow(.95,i.zoomSpeed)}function oe(ae){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=ae:g.theta-=ae}function fe(ae){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=ae:g.phi-=ae}const te=(()=>{const ae=new ne;return function(dt,se){ae.setFromMatrixColumn(se,0),ae.multiplyScalar(-dt),b.add(ae)}})(),re=(()=>{const ae=new ne;return function(dt,se){i.screenSpacePanning===!0?ae.setFromMatrixColumn(se,1):(ae.setFromMatrixColumn(se,0),ae.crossVectors(i.object.up,ae)),ae.multiplyScalar(dt),b.add(ae)}})(),he=(()=>{const ae=new ne;return function(dt,se){const rt=i.domElement;if(rt&&i.object instanceof Nr&&i.object.isPerspectiveCamera){const nt=i.object.position;ae.copy(nt).sub(i.target);let ot=ae.length();ot*=Math.tan(i.object.fov/2*Math.PI/180),te(2*dt*ot/rt.clientHeight,i.object.matrix),re(2*se*ot/rt.clientHeight,i.object.matrix)}else rt&&i.object instanceof Bf&&i.object.isOrthographicCamera?(te(dt*(i.object.right-i.object.left)/i.object.zoom/rt.clientWidth,i.object.matrix),re(se*(i.object.top-i.object.bottom)/i.object.zoom/rt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Me(ae){i.object instanceof Nr&&i.object.isPerspectiveCamera||i.object instanceof Bf&&i.object.isOrthographicCamera?v=ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Ne(ae){Me(v/ae)}function Q(ae){Me(v*ae)}function de(ae){if(!i.zoomToCursor||!i.domElement)return;I=!0;const ye=i.domElement.getBoundingClientRect(),dt=ae.clientX-ye.left,se=ae.clientY-ye.top,rt=ye.width,nt=ye.height;F.x=dt/rt*2-1,F.y=-(se/nt)*2+1,D.set(F.x,F.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ae(ae){return Math.max(i.minDistance,Math.min(i.maxDistance,ae))}function We(ae){_.set(ae.clientX,ae.clientY)}function bt(ae){de(ae),O.set(ae.clientX,ae.clientY)}function _e(ae){w.set(ae.clientX,ae.clientY)}function Te(ae){M.set(ae.clientX,ae.clientY),S.subVectors(M,_).multiplyScalar(i.rotateSpeed);const ye=i.domElement;ye&&(oe(2*Math.PI*S.x/ye.clientHeight),fe(2*Math.PI*S.y/ye.clientHeight)),_.copy(M),i.update()}function ut(ae){k.set(ae.clientX,ae.clientY),B.subVectors(k,O),B.y>0?Ne(W()):B.y<0&&Q(W()),O.copy(k),i.update()}function ve(ae){R.set(ae.clientX,ae.clientY),P.subVectors(R,w).multiplyScalar(i.panSpeed),he(P.x,P.y),w.copy(R),i.update()}function et(ae){de(ae),ae.deltaY<0?Q(W()):ae.deltaY>0&&Ne(W()),i.update()}function At(ae){let ye=!1;switch(ae.code){case i.keys.UP:he(0,i.keyPanSpeed),ye=!0;break;case i.keys.BOTTOM:he(0,-i.keyPanSpeed),ye=!0;break;case i.keys.LEFT:he(i.keyPanSpeed,0),ye=!0;break;case i.keys.RIGHT:he(-i.keyPanSpeed,0),ye=!0;break}ye&&(ae.preventDefault(),i.update())}function He(){if(L.length==1)_.set(L[0].pageX,L[0].pageY);else{const ae=.5*(L[0].pageX+L[1].pageX),ye=.5*(L[0].pageY+L[1].pageY);_.set(ae,ye)}}function Ct(){if(L.length==1)w.set(L[0].pageX,L[0].pageY);else{const ae=.5*(L[0].pageX+L[1].pageX),ye=.5*(L[0].pageY+L[1].pageY);w.set(ae,ye)}}function Oe(){const ae=L[0].pageX-L[1].pageX,ye=L[0].pageY-L[1].pageY,dt=Math.sqrt(ae*ae+ye*ye);O.set(0,dt)}function Ze(){i.enableZoom&&Oe(),i.enablePan&&Ct()}function je(){i.enableZoom&&Oe(),i.enableRotate&&He()}function ht(ae){if(L.length==1)M.set(ae.pageX,ae.pageY);else{const dt=ft(ae),se=.5*(ae.pageX+dt.x),rt=.5*(ae.pageY+dt.y);M.set(se,rt)}S.subVectors(M,_).multiplyScalar(i.rotateSpeed);const ye=i.domElement;ye&&(oe(2*Math.PI*S.x/ye.clientHeight),fe(2*Math.PI*S.y/ye.clientHeight)),_.copy(M)}function ie(ae){if(L.length==1)R.set(ae.pageX,ae.pageY);else{const ye=ft(ae),dt=.5*(ae.pageX+ye.x),se=.5*(ae.pageY+ye.y);R.set(dt,se)}P.subVectors(R,w).multiplyScalar(i.panSpeed),he(P.x,P.y),w.copy(R)}function Mt(ae){const ye=ft(ae),dt=ae.pageX-ye.x,se=ae.pageY-ye.y,rt=Math.sqrt(dt*dt+se*se);k.set(0,rt),B.set(0,Math.pow(k.y/O.y,i.zoomSpeed)),Ne(B.y),O.copy(k)}function gt(ae){i.enableZoom&&Mt(ae),i.enablePan&&ie(ae)}function Ut(ae){i.enableZoom&&Mt(ae),i.enableRotate&&ht(ae)}function vt(ae){var ye,dt;i.enabled!==!1&&(L.length===0&&((ye=i.domElement)==null||ye.ownerDocument.addEventListener("pointermove",J),(dt=i.domElement)==null||dt.ownerDocument.addEventListener("pointerup",X)),st(ae),ae.pointerType==="touch"?Tt(ae):pe(ae))}function J(ae){i.enabled!==!1&&(ae.pointerType==="touch"?le(ae):ke(ae))}function X(ae){var ye,dt,se;Ge(ae),L.length===0&&((ye=i.domElement)==null||ye.releasePointerCapture(ae.pointerId),(dt=i.domElement)==null||dt.ownerDocument.removeEventListener("pointermove",J),(se=i.domElement)==null||se.ownerDocument.removeEventListener("pointerup",X)),i.dispatchEvent(s),c=l.NONE}function pe(ae){let ye;switch(ae.button){case 0:ye=i.mouseButtons.LEFT;break;case 1:ye=i.mouseButtons.MIDDLE;break;case 2:ye=i.mouseButtons.RIGHT;break;default:ye=-1}switch(ye){case Wp.DOLLY:if(i.enableZoom===!1)return;bt(ae),c=l.DOLLY;break;case Wp.ROTATE:if(ae.ctrlKey||ae.metaKey||ae.shiftKey){if(i.enablePan===!1)return;_e(ae),c=l.PAN}else{if(i.enableRotate===!1)return;We(ae),c=l.ROTATE}break;case Wp.PAN:if(ae.ctrlKey||ae.metaKey||ae.shiftKey){if(i.enableRotate===!1)return;We(ae),c=l.ROTATE}else{if(i.enablePan===!1)return;_e(ae),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(a)}function ke(ae){if(i.enabled!==!1)switch(c){case l.ROTATE:if(i.enableRotate===!1)return;Te(ae);break;case l.DOLLY:if(i.enableZoom===!1)return;ut(ae);break;case l.PAN:if(i.enablePan===!1)return;ve(ae);break}}function Ye(ae){i.enabled===!1||i.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(ae.preventDefault(),i.dispatchEvent(a),et(ae),i.dispatchEvent(s))}function Le(ae){i.enabled===!1||i.enablePan===!1||At(ae)}function Tt(ae){switch(Xe(ae),L.length){case 1:switch(i.touches.ONE){case $p.ROTATE:if(i.enableRotate===!1)return;He(),c=l.TOUCH_ROTATE;break;case $p.PAN:if(i.enablePan===!1)return;Ct(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(i.touches.TWO){case $p.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ze(),c=l.TOUCH_DOLLY_PAN;break;case $p.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;je(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(a)}function le(ae){switch(Xe(ae),c){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;ht(ae),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;ie(ae),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;gt(ae),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ut(ae),i.update();break;default:c=l.NONE}}function Ee(ae){i.enabled!==!1&&ae.preventDefault()}function st(ae){L.push(ae)}function Ge(ae){delete H[ae.pointerId];for(let ye=0;ye<L.length;ye++)if(L[ye].pointerId==ae.pointerId){L.splice(ye,1);return}}function Xe(ae){let ye=H[ae.pointerId];ye===void 0&&(ye=new Je,H[ae.pointerId]=ye),ye.set(ae.pageX,ae.pageY)}function ft(ae){const ye=ae.pointerId===L[0].pointerId?L[1]:L[0];return H[ye.pointerId]}this.dollyIn=(ae=W())=>{Q(ae),i.update()},this.dollyOut=(ae=W())=>{Ne(ae),i.update()},this.getScale=()=>v,this.setScale=ae=>{Me(ae),i.update()},this.getZoomScale=()=>W(),t!==void 0&&this.connect(t),this.update()}};const Nie=j.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:s,onStart:l,onEnd:c,...h},p)=>{const g=ad(B=>B.invalidate),v=ad(B=>B.camera),b=ad(B=>B.gl),_=ad(B=>B.events),M=ad(B=>B.setEvents),S=ad(B=>B.set),w=ad(B=>B.get),R=ad(B=>B.performance),P=e||v,O=i||_.connected||b.domElement,k=j.useMemo(()=>new Iie(P),[P]);return vO(()=>{k.enabled&&k.update()},-1),j.useEffect(()=>(a&&k.connect(a===!0?O:a),k.connect(O),()=>void k.dispose()),[a,O,t,k,g]),j.useEffect(()=>{const B=I=>{g(),t&&R.regress(),s&&s(I)},D=I=>{l&&l(I)},F=I=>{c&&c(I)};return k.addEventListener("change",B),k.addEventListener("start",D),k.addEventListener("end",F),()=>{k.removeEventListener("start",D),k.removeEventListener("end",F),k.removeEventListener("change",B)}},[s,l,c,k,g,M]),j.useEffect(()=>{if(n){const B=w().controls;return S({controls:k}),()=>S({controls:B})}},[n,k]),j.createElement("primitive",sE({ref:p,object:k,enableDamping:r},h))}),Oie=j.forwardRef(function({children:e,object:t,disable:i,disableX:r,disableY:a,disableZ:s,left:l,right:c,top:h,bottom:p,front:g,back:v,onCentered:b,precise:_=!0,cacheKey:M=0,...S},w){const R=j.useRef(null),P=j.useRef(null),O=j.useRef(null),[k]=j.useState(()=>new Xa),[B]=j.useState(()=>new ne),[D]=j.useState(()=>new _a);return j.useLayoutEffect(()=>{P.current.matrixWorld.identity(),k.setFromObject(t??O.current,_);const F=k.max.x-k.min.x,I=k.max.y-k.min.y,L=k.max.z-k.min.z;k.getCenter(B),k.getBoundingSphere(D);const H=h?I/2:p?-I/2:0,q=l?-F/2:c?F/2:0,W=g?L/2:v?-L/2:0;P.current.position.set(i||r?0:-B.x+q,i||a?0:-B.y+H,i||s?0:-B.z+W),b==null||b({parent:R.current.parent,container:R.current,width:F,height:I,depth:L,boundingBox:k,boundingSphere:D,center:B,verticalAlignment:H,horizontalAlignment:q,depthAlignment:W})},[M,b,h,l,g,i,r,a,s,t,_,c,p,v,k,B,D]),j.useImperativeHandle(w,()=>R.current,[]),j.createElement("group",sE({ref:R},S),j.createElement("group",{ref:P},j.createElement("group",{ref:O},e)))}),Die=j.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:a=[-.1,.1],autoInvalidate:s=!1,...l},c)=>{const h=j.useRef(null);j.useImperativeHandle(c,()=>h.current,[]);const p=j.useRef(Math.random()*1e4);return vO(g=>{var v,b;if(!e||t===0)return;s&&g.invalidate();const _=p.current+g.clock.elapsedTime;h.current.rotation.x=Math.cos(_/4*t)/8*i,h.current.rotation.y=Math.sin(_/4*t)/8*i,h.current.rotation.z=Math.sin(_/4*t)/20*i;let M=Math.sin(_/4*t)/10;M=y2.mapLinear(M,-.1,.1,(v=a==null?void 0:a[0])!==null&&v!==void 0?v:-.1,(b=a==null?void 0:a[1])!==null&&b!==void 0?b:.1),h.current.position.y=M*r,h.current.updateMatrix()}),j.createElement("group",l,j.createElement("group",{ref:h,matrixAutoUpdate:!1},n))});function Lie({url:n}){const e=yO(wie,n),t=j.useRef();return vO((i,r)=>{t.current&&(t.current.rotation.z+=r*.5)}),U.jsx("mesh",{ref:t,geometry:e,rotation:[-Math.PI/2,0,0],scale:[.5,.5,.5],children:U.jsx("meshPhongMaterial",{color:16777215,specular:1118481,shininess:200})})}function Uie(){return U.jsx("div",{className:"w-full h-full",children:U.jsxs(Sie,{camera:{position:[0,0,150],fov:50},children:[U.jsx("ambientLight",{intensity:.6}),U.jsx("directionalLight",{position:[10,10,10],intensity:1}),U.jsx("pointLight",{position:[-20,0,20],color:"#F59E0B",intensity:2,distance:100}),U.jsx("pointLight",{position:[20,0,20],color:"#2563EB",intensity:2,distance:100}),U.jsx(Die,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:U.jsx(Oie,{children:U.jsx(Dm.Suspense,{fallback:null,children:U.jsx(Lie,{url:"/images/Tuna-s_craft.stl"})})})}),U.jsx(Nie,{enableZoom:!1,autoRotate:!1})]})})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kie=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zie=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=n=>{const e=zie(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bie=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vie=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:s,...l},c)=>j.createElement("svg",{ref:c,...Fie,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:X6("lucide",r),...!a&&!Bie(l)&&{"aria-hidden":"true"},...l},[...s.map(([h,p])=>j.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=(n,e)=>{const t=j.forwardRef(({className:i,...r},a)=>j.createElement(Vie,{ref:a,iconNode:e,className:X6(`lucide-${kie(Rk(n))}`,`lucide-${n}`,i),...r}));return t.displayName=Rk(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jie=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xO=Er("arrow-left",jie);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gie=Er("circle-alert",Hie);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qie=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],oE=Er("circle-check-big",qie);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wie=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$ie=Er("clock",Wie);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xie=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Yie=Er("dollar-sign",Xie);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kie=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zie=Er("eye",Kie);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qie=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Jie=Er("facebook",Qie);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ere=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tre=Er("file-text",ere);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nre=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Pk=Er("house",nre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ire=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],rre=Er("instagram",ire);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const are=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],sre=Er("menu",are);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ore=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],iI=Er("package",ore);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lre=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],ure=Er("palette",lre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mb=Er("plus",cre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fre=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Ik=Er("ruler",fre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hre=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dre=Er("search",hre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pre=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Y6=Er("shopping-bag",pre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mre=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Nk=Er("square-pen",mre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gre=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Y1=Er("trash-2",gre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vre=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rI=Er("upload",vre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bre=Er("users",yre);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xre=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ok=Er("x",xre),_re=()=>{const[n,e]=j.useState(!1),[t,i]=j.useState(null),[r,a]=j.useState("all"),[s,l]=j.useState([{name:"Figura Anime",price:"$450",color:"#2563EB",quantity:5,image:"/images/anime-figure.png",category:"Figuras"},{name:"Maceta Geomtrica",price:"$120",color:"#F59E0B",quantity:10,image:"/images/planter.png",category:"Decoracin"},{name:"Soporte Audfonos",price:"$250",color:"#1E40AF",quantity:0,image:"/images/headphone-stand.png",category:"Accesorios"}]);j.useEffect(()=>{const M="https://docs.google.com/spreadsheets/d/e/2PACX-1vSZQKUeUWpxU8XNWtif8j4aEKN0InJpbxQFpK4Q4Ci5zVI1ZIlUlKTU42AomgXFPfa73Rb0w1CT1mU-/pub?output=csv";(async()=>{try{const R=await(await fetch(M)).text(),P=h(R);P.length>0&&l(P)}catch(w){console.error("Error fetching gallery:",w)}})()},[]);const c=M=>{if(!M)return"";const S=/(?:\/d\/|id=)([a-zA-Z0-9_-]+)/,w=M.match(S);return w&&w[1]?`https://drive.google.com/thumbnail?id=${w[1]}&sz=w800`:M},h=M=>{const S=M.split(`
`),w=S[0].split(",").map(P=>P.trim().toLowerCase()),R=[];for(let P=1;P<S.length;P++){const O=S[P].split(",");if(O.length<w.length)continue;const k={};w.forEach((B,D)=>{let F=O[D]?O[D].trim():"";k[B]=F}),k.name&&R.push({name:k.name,price:k.price||"$0",quantity:parseInt(k.quantity||k.availability||0),category:k.category||"Otros",image:c(k.photo||k.image),color:"#2563EB"})}return R},p=["Todos",...new Set(s.map(M=>M.category).filter(Boolean))],g=r==="Todos"||r==="all"?s:s.filter(M=>M.category===r),[v,b]=j.useState(!1);j.useEffect(()=>{const M=()=>b(window.scrollY>20);return window.addEventListener("scroll",M),()=>window.removeEventListener("scroll",M)},[]);const _=()=>e(!n);return U.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans",children:[U.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${v?"bg-brand-dark/90 backdrop-blur-md border-b border-white/10":"bg-transparent"}`,children:[U.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:U.jsxs("div",{className:"flex justify-between items-center h-20",children:[U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("img",{className:"h-12 w-auto",src:"/logo.png",alt:"Tuna's Craft"}),U.jsx("span",{className:"font-display font-bold text-2xl tracking-tight text-white",children:"Tuna's Craft"})]}),U.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[U.jsx("a",{href:"#services",className:"text-gray-300 hover:text-brand-orange transition-colors font-medium",children:"Servicios"}),U.jsx("a",{href:"#delivery",className:"text-gray-300 hover:text-brand-orange transition-colors font-medium",children:"Entregas"}),U.jsx("a",{href:"#gallery",className:"text-gray-300 hover:text-brand-orange transition-colors font-medium",children:"Galera"}),U.jsx(xc,{to:"/quote",className:"bg-brand-blue hover:bg-blue-600 text-white px-6 py-2.5 rounded-full font-bold shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-0.5",children:"Cotizar Ahora"})]}),U.jsx("div",{className:"md:hidden",children:U.jsx("button",{onClick:_,className:"text-gray-300 hover:text-white p-2",children:n?U.jsx(Ok,{size:24}):U.jsx(sre,{size:24})})})]})}),n&&U.jsxs("div",{className:"md:hidden bg-brand-dark border-t border-white/10 absolute w-full p-4 flex flex-col gap-4 items-center",children:[U.jsx("a",{href:"#services",onClick:_,className:"text-gray-300",children:"Servicios"}),U.jsx("a",{href:"#delivery",onClick:_,className:"text-gray-300",children:"Entregas"}),U.jsx("a",{href:"#gallery",onClick:_,className:"text-gray-300",children:"Galera"}),U.jsx(xc,{to:"/quote",onClick:_,className:"text-brand-blue font-bold",children:"Cotizar"})]})]}),U.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[U.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[U.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-brand-blue/20 rounded-full blur-3xl animate-pulse"}),U.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),U.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-12 w-full",children:[U.jsxs("div",{className:"flex-1 text-center md:text-left z-10",children:[U.jsxs("h1",{className:"font-display text-5xl md:text-7xl font-extrabold leading-tight mb-6",children:["Tus ideas, impresas en ",U.jsx("br",{}),U.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-blue to-brand-orange",children:"3D Realidad"})]}),U.jsx("p",{className:"text-xl text-gray-400 mb-8 max-w-2xl mx-auto md:mx-0",children:"Creamos figuras, adornos y piezas personalizadas con la mejor calidad. Si lo imaginas, lo podemos imprimir!"}),U.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center md:justify-start",children:[U.jsx(xc,{to:"/quote",className:"bg-brand-blue hover:bg-blue-600 text-white text-lg px-8 py-4 rounded-xl font-bold shadow-xl shadow-blue-500/20 transition-all hover:-translate-y-1",children:"Hacer un Pedido"}),U.jsx("a",{href:"#gallery",className:"glass hover:bg-white/10 text-white text-lg px-8 py-4 rounded-xl font-semibold transition-all flex items-center justify-center",children:"Ver Catlogo"})]})]}),U.jsx("div",{className:"flex-1 w-full h-[400px] md:h-[600px] relative z-10",children:U.jsx(Uie,{})})]})]}),U.jsx("section",{id:"services",className:"py-24 bg-brand-dark/50",children:U.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[U.jsxs("div",{className:"text-center mb-16",children:[U.jsxs("h2",{className:"font-display text-4xl font-bold mb-4",children:["Nuestros ",U.jsx("span",{className:"text-brand-blue",children:"Servicios"})]}),U.jsx("p",{className:"text-gray-400",children:"Calidad premium en cada capa."})]}),U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[U.jsx(HC,{icon:U.jsx(Ik,{size:40,className:"text-brand-blue"}),title:"Impresin a Medida",desc:"Prototipos, refacciones y piezas tcnicas diseadas especficamente para tus necesidades."}),U.jsx(HC,{icon:U.jsx(ure,{size:40,className:"text-brand-orange"}),title:"Figuras y Arte",desc:"Coleccionables de anime, videojuegos y miniaturas de alta resolucin para pintar."}),U.jsx(HC,{icon:U.jsx(Pk,{size:40,className:"text-purple-500"}),title:"Decoracin",desc:"Macetas, lmparas, litofanas y regalos nicos para darle vida a tus espacios."})]})]})}),U.jsx("section",{id:"delivery",className:"py-24 relative",children:U.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:U.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-[2rem] p-8 md:p-12 shadow-2xl flex flex-col md:flex-row gap-12",children:[U.jsxs("div",{className:"flex-1 space-y-8",children:[U.jsxs("h2",{className:"text-3xl font-display font-bold text-white",children:["Informacin de ",U.jsx("span",{className:"text-brand-orange",children:"Entregas"})]}),U.jsxs("div",{className:"space-y-6",children:[U.jsxs("div",{className:"flex gap-4",children:[U.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:U.jsx(Pk,{size:24})}),U.jsxs("div",{children:[U.jsx("h4",{className:"font-bold text-white text-lg",children:"Punto de Entrega Principal"}),U.jsx("p",{className:"text-gray-400",children:"Metro Chabacano, CDMX"}),U.jsx("a",{href:"https://maps.google.com/?q=Metro+Chabacano",target:"_blank",rel:"noreferrer",className:"inline-block mt-3 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition-colors",children:"Ver Ubicacin en Mapa"}),U.jsx("p",{className:"text-blue-400 text-xs font-bold mt-2",children:"Sbados: 11:00 am - 3:00 pm"})]})]}),U.jsxs("div",{className:"flex items-center gap-4",children:[U.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center text-slate-300",children:U.jsx(Ik,{size:24})}),U.jsxs("div",{children:[U.jsx("h4",{className:"font-bold text-white",children:"Entregas Urgentes / Entre Semana"}),U.jsx("p",{className:"text-sm text-gray-500",children:"Punto a convenir (Con costo extra)"})]})]}),U.jsxs("div",{className:"flex items-center gap-4",children:[U.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-brand-orange rounded-full flex items-center justify-center text-black font-bold shadow-lg shadow-orange-500/20",children:U.jsx(iI,{size:24})}),U.jsxs("div",{children:[U.jsx("h4",{className:"font-bold text-white",children:"Envos a todo Mxico"}),U.jsx("p",{className:"text-sm text-gray-500",children:"Paquetera segura (Con costo adicional)"})]})]})]})]}),U.jsxs("div",{className:"flex-1 bg-black/20 rounded-2xl p-8 border border-white/5",children:[U.jsx("h3",{className:"text-xl font-bold text-center mb-8 text-white",children:"Mtodos de Pago"}),U.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[U.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Tarjeta / MSI"}),U.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Transferencia"}),U.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Efectivo"}),U.jsx("div",{className:"bg-white p-4 rounded-xl flex items-center justify-center shadow-lg hover:scale-105 transition-transform cursor-pointer",children:U.jsx("span",{className:"text-blue-500 font-bold italic",children:"mercadopago"})})]}),U.jsx("div",{className:"mt-8 text-center",children:U.jsx(xc,{to:"/status",className:"inline-flex items-center gap-2 text-brand-blue font-bold hover:text-white transition-colors",children:"Revisa estatus de tu pedido "})})]})]})})}),U.jsxs("section",{id:"gallery",className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[U.jsxs("h2",{className:"font-display text-4xl font-bold mb-6 text-center text-white",children:["Galera de ",U.jsx("span",{className:"text-brand-orange",children:"Trabajos"})]}),U.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-10",children:p.map(M=>U.jsx("button",{onClick:()=>a(M),className:`px-6 py-2 rounded-full font-bold text-sm transition-all border-2 
                        ${r===M||M==="Todos"&&r==="all"?"bg-brand-orange text-white border-brand-orange shadow-lg shadow-orange-500/30":"bg-transparent text-gray-300 border-gray-600 hover:border-gray-400 hover:text-white"}`,children:M},M))}),U.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:g.map((M,S)=>U.jsxs("div",{onClick:()=>i(M.image),className:"group relative overflow-hidden rounded-2xl shadow-lg aspect-square bg-gray-900 cursor-pointer hover:shadow-2xl transition-all hover:scale-[1.02]",children:[U.jsx("div",{className:"w-full h-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500",style:{backgroundImage:`url('${M.image}')`}}),U.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2 z-10",children:U.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-sm ${M.quantity>0?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:M.quantity>0?"Disponible":"Agotado"})}),U.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent",children:[U.jsx("h3",{className:"text-white font-bold text-lg drop-shadow-md leading-tight",children:M.name}),U.jsx("p",{className:"text-brand-orange font-bold text-xl mt-1",children:M.price})]})]},S))})]}),t&&U.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4",onClick:()=>i(null),children:[U.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-brand-orange p-2",children:U.jsx(Ok,{size:32})}),U.jsx("img",{src:t,alt:"Full view",className:"max-h-[90vh] max-w-[90vw] rounded-lg shadow-2xl",onClick:M=>M.stopPropagation()})]}),U.jsxs("footer",{className:"bg-black py-16 border-t border-white/10 text-center relative overflow-hidden",children:[U.jsxs("div",{className:"flex justify-center gap-10 mb-10",children:[U.jsx(Dk,{href:"https://facebook.com/tunascraft3d",icon:U.jsx(Jie,{}),label:"Facebook"}),U.jsx(Dk,{href:"https://instagram.com/tunas_craft",icon:U.jsx(rre,{}),label:"Instagram"})]}),U.jsx("p",{className:"text-gray-500 font-medium text-sm",children:" 2024 Tuna's Craft. Hecho con  y ."}),U.jsx("div",{className:"mt-4",children:U.jsx(xc,{to:"/admin",className:"text-xs text-gray-700 hover:text-brand-blue",children:"Admin Access"})})]})]})},HC=({icon:n,title:e,desc:t})=>U.jsxs("div",{className:"glass p-8 rounded-2xl hover:bg-white/5 transition-all cursor-default group",children:[U.jsx("div",{className:"w-14 h-14 bg-white/5 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:n}),U.jsx("h3",{className:"font-display text-2xl font-bold mb-3",children:e}),U.jsx("p",{className:"text-gray-400 leading-relaxed",children:t})]}),Dk=({href:n,icon:e,label:t})=>U.jsxs("a",{href:n,target:"_blank",rel:"noreferrer",className:"group flex flex-col items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[U.jsx("div",{className:"p-4 bg-white/5 rounded-2xl group-hover:bg-brand-blue/10 group-hover:scale-110 transition-all border border-white/5 shadow-lg",children:Dm.cloneElement(e,{size:24})}),U.jsx("span",{className:"text-xs font-medium",children:t})]}),Sre=()=>{};var Lk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},wre=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],s=n[t++],l=n[t++],c=((r&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|s&63)}}return e.join("")},Z6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],s=r+1<n.length,l=s?n[r+1]:0,c=r+2<n.length,h=c?n[r+2]:0,p=a>>2,g=(a&3)<<4|l>>4;let v=(l&15)<<2|h>>6,b=h&63;c||(b=64,s||(v=64)),i.push(t[p],t[g],t[v],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(K6(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wre(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const g=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||l==null||h==null||g==null)throw new Ere;const v=a<<2|l>>4;if(i.push(v),h!==64){const b=l<<4&240|h>>2;if(i.push(b),g!==64){const _=h<<6&192|g;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ere extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mre=function(n){const e=K6(n);return Z6.encodeByteArray(e,!0)},lE=function(n){return Mre(n).replace(/\./g,"")},Are=function(n){try{return Z6.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cre=()=>Tre().__FIREBASE_DEFAULTS__,Rre=()=>{if(typeof process>"u"||typeof Lk>"u")return;const n=Lk.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Pre=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Are(n[1]);return e&&JSON.parse(e)},_O=()=>{try{return Sre()||Cre()||Rre()||Pre()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ire=n=>{var e,t;return(t=(e=_O())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Nre=n=>{const e=Ire(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Q6=()=>{var n;return(n=_O())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dre(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lre(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[lE(JSON.stringify(t)),lE(JSON.stringify(s)),""].join(".")}const Ob={};function Ure(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ob))Ob[e]?n.emulator.push(e):n.prod.push(e);return n}function kre(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Uk=!1;function zre(n,e){if(typeof window>"u"||typeof document>"u"||!SO(window.location.host)||Ob[n]===e||Ob[n]||Uk)return;Ob[n]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",a=Ure().prod.length>0;function s(){const v=document.getElementById(i);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Uk=!0,s()},v}function p(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=kre(i),b=t("text"),_=document.getElementById(b)||document.createElement("span"),M=t("learnmore"),S=document.getElementById(M)||document.createElement("a"),w=t("preprendIcon"),R=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const P=v.element;l(P),p(S,M);const O=h();c(R,w),P.append(R,_,S,O),document.body.appendChild(P)}a?(_.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bre(){var e;const n=(e=_O())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vre(){return!Bre()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jre(){try{return typeof indexedDB=="object"}catch{return!1}}function Hre(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gre="FirebaseError";class d0 extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Gre,Object.setPrototypeOf(this,d0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,J6.prototype.create)}}class J6{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],s=a?qre(a,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new d0(r,l,i)}}function qre(n,e){return n.replace(Wre,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Wre=/\{\$([^}]+)}/g;function uE(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],s=e[r];if(kk(a)&&kk(s)){if(!uE(a,s))return!1}else if(a!==s)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function kk(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n){return n&&n._delegate?n._delegate:n}class ax{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $re=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Ore;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yre(e))try{this.getOrInitializeService({instanceIdentifier:Yp})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=Yp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yp){return this.instances.has(e)}getOptions(e=Yp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&s.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Xre(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Yp){return this.component?this.component.multipleInstances?e:Yp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Xre(n){return n===Yp?void 0:n}function Yre(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $re(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Jn||(Jn={}));const Zre={debug:Jn.DEBUG,verbose:Jn.VERBOSE,info:Jn.INFO,warn:Jn.WARN,error:Jn.ERROR,silent:Jn.SILENT},Qre=Jn.INFO,Jre={[Jn.DEBUG]:"log",[Jn.VERBOSE]:"log",[Jn.INFO]:"info",[Jn.WARN]:"warn",[Jn.ERROR]:"error"},eae=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Jre[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ej{constructor(e){this.name=e,this._logLevel=Qre,this._logHandler=eae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jn.DEBUG,...e),this._logHandler(this,Jn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jn.VERBOSE,...e),this._logHandler(this,Jn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jn.INFO,...e),this._logHandler(this,Jn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jn.WARN,...e),this._logHandler(this,Jn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jn.ERROR,...e),this._logHandler(this,Jn.ERROR,...e)}}const tae=(n,e)=>e.some(t=>n instanceof t);let zk,Fk;function nae(){return zk||(zk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iae(){return Fk||(Fk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tj=new WeakMap,aI=new WeakMap,nj=new WeakMap,GC=new WeakMap,wO=new WeakMap;function rae(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(xd(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&tj.set(t,n)}).catch(()=>{}),wO.set(e,n),e}function aae(n){if(aI.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});aI.set(n,e)}let sI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return aI.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nj.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xd(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function sae(n){sI=n(sI)}function oae(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(qC(this),e,...t);return nj.set(i,e.sort?e.sort():[e]),xd(i)}:iae().includes(n)?function(...e){return n.apply(qC(this),e),xd(tj.get(this))}:function(...e){return xd(n.apply(qC(this),e))}}function lae(n){return typeof n=="function"?oae(n):(n instanceof IDBTransaction&&aae(n),tae(n,nae())?new Proxy(n,sI):n)}function xd(n){if(n instanceof IDBRequest)return rae(n);if(GC.has(n))return GC.get(n);const e=lae(n);return e!==n&&(GC.set(n,e),wO.set(e,n)),e}const qC=n=>wO.get(n);function uae(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const s=indexedDB.open(n,e),l=xd(s);return i&&s.addEventListener("upgradeneeded",c=>{i(xd(s.result),c.oldVersion,c.newVersion,xd(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const cae=["get","getKey","getAll","getAllKeys","count"],fae=["put","add","delete","clear"],WC=new Map;function Bk(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(WC.get(e))return WC.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=fae.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||cae.includes(t)))return;const a=async function(s,...l){const c=this.transaction(s,r?"readwrite":"readonly");let h=c.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),r&&c.done]))[0]};return WC.set(e,a),a}sae(n=>({...n,get:(e,t,i)=>Bk(e,t)||n.get(e,t,i),has:(e,t)=>!!Bk(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dae(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function dae(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oI="@firebase/app",Vk="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new ej("@firebase/app"),pae="@firebase/app-compat",mae="@firebase/analytics-compat",gae="@firebase/analytics",vae="@firebase/app-check-compat",yae="@firebase/app-check",bae="@firebase/auth",xae="@firebase/auth-compat",_ae="@firebase/database",Sae="@firebase/data-connect",wae="@firebase/database-compat",Eae="@firebase/functions",Mae="@firebase/functions-compat",Aae="@firebase/installations",Tae="@firebase/installations-compat",Cae="@firebase/messaging",Rae="@firebase/messaging-compat",Pae="@firebase/performance",Iae="@firebase/performance-compat",Nae="@firebase/remote-config",Oae="@firebase/remote-config-compat",Dae="@firebase/storage",Lae="@firebase/storage-compat",Uae="@firebase/firestore",kae="@firebase/ai",zae="@firebase/firestore-compat",Fae="firebase",Bae="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="[DEFAULT]",Vae={[oI]:"fire-core",[pae]:"fire-core-compat",[gae]:"fire-analytics",[mae]:"fire-analytics-compat",[yae]:"fire-app-check",[vae]:"fire-app-check-compat",[bae]:"fire-auth",[xae]:"fire-auth-compat",[_ae]:"fire-rtdb",[Sae]:"fire-data-connect",[wae]:"fire-rtdb-compat",[Eae]:"fire-fn",[Mae]:"fire-fn-compat",[Aae]:"fire-iid",[Tae]:"fire-iid-compat",[Cae]:"fire-fcm",[Rae]:"fire-fcm-compat",[Pae]:"fire-perf",[Iae]:"fire-perf-compat",[Nae]:"fire-rc",[Oae]:"fire-rc-compat",[Dae]:"fire-gcs",[Lae]:"fire-gcs-compat",[Uae]:"fire-fst",[zae]:"fire-fst-compat",[kae]:"fire-vertex","fire-js":"fire-js",[Fae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Map,jae=new Map,uI=new Map;function jk(n,e){try{n.container.addComponent(e)}catch(t){qf.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function fE(n){const e=n.name;if(uI.has(e))return qf.debug(`There were multiple attempts to register component ${e}.`),!1;uI.set(e,n);for(const t of cE.values())jk(t,n);for(const t of jae.values())jk(t,n);return!0}function Hae(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gae(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_d=new J6("app","Firebase",qae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wae{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ax("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _d.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ae=Bae;function ij(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:lI,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw _d.create("bad-app-name",{appName:String(r)});if(t||(t=Q6()),!t)throw _d.create("no-options");const a=cE.get(r);if(a){if(uE(t,a.options)&&uE(i,a.config))return a;throw _d.create("duplicate-app",{appName:r})}const s=new Kre(r);for(const c of uI.values())s.addComponent(c);const l=new Wae(t,i,s);return cE.set(r,l),l}function Xae(n=lI){const e=cE.get(n);if(!e&&n===lI&&Q6())return ij();if(!e)throw _d.create("no-app",{appName:n});return e}function Pv(n,e,t){let i=Vae[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const s=[`Unable to register library "${i}" with version "${e}":`];r&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qf.warn(s.join(" "));return}fE(new ax(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yae="firebase-heartbeat-database",Kae=1,sx="firebase-heartbeat-store";let $C=null;function rj(){return $C||($C=uae(Yae,Kae,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sx)}catch(t){console.warn(t)}}}}).catch(n=>{throw _d.create("idb-open",{originalErrorMessage:n.message})})),$C}async function Zae(n){try{const t=(await rj()).transaction(sx),i=await t.objectStore(sx).get(aj(n));return await t.done,i}catch(e){if(e instanceof d0)qf.warn(e.message);else{const t=_d.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qf.warn(t.message)}}}async function Hk(n,e){try{const i=(await rj()).transaction(sx,"readwrite");await i.objectStore(sx).put(e,aj(n)),await i.done}catch(t){if(t instanceof d0)qf.warn(t.message);else{const i=_d.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qf.warn(i.message)}}}function aj(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qae=1024,Jae=30;class ese{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nse(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Gk();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Jae){const s=ise(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){qf.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gk(),{heartbeatsToSend:i,unsentEntries:r}=tse(this._heartbeatsCache.heartbeats),a=lE(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return qf.warn(t),""}}}function Gk(){return new Date().toISOString().substring(0,10)}function tse(n,e=Qae){const t=[];let i=n.slice();for(const r of n){const a=t.find(s=>s.agent===r.agent);if(a){if(a.dates.push(r.date),qk(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),qk(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class nse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jre()?Hre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Zae(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qk(n){return lE(JSON.stringify({version:2,heartbeats:n})).length}function ise(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rse(n){fE(new ax("platform-logger",e=>new hae(e),"PRIVATE")),fE(new ax("heartbeat",e=>new ese(e),"PRIVATE")),Pv(oI,Vk,n),Pv(oI,Vk,"esm2020"),Pv("fire-js","")}rse("");var ase="firebase",sse="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pv(ase,sse,"app");var Wk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sd,sj;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,F){function I(){}I.prototype=F.prototype,D.F=F.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(L,H,q){for(var W=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)W[oe-2]=arguments[oe];return F.prototype[H].apply(L,W)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,F,I){I||(I=0);const L=Array(16);if(typeof F=="string")for(var H=0;H<16;++H)L[H]=F.charCodeAt(I++)|F.charCodeAt(I++)<<8|F.charCodeAt(I++)<<16|F.charCodeAt(I++)<<24;else for(H=0;H<16;++H)L[H]=F[I++]|F[I++]<<8|F[I++]<<16|F[I++]<<24;F=D.g[0],I=D.g[1],H=D.g[2];let q=D.g[3],W;W=F+(q^I&(H^q))+L[0]+3614090360&4294967295,F=I+(W<<7&4294967295|W>>>25),W=q+(H^F&(I^H))+L[1]+3905402710&4294967295,q=F+(W<<12&4294967295|W>>>20),W=H+(I^q&(F^I))+L[2]+606105819&4294967295,H=q+(W<<17&4294967295|W>>>15),W=I+(F^H&(q^F))+L[3]+3250441966&4294967295,I=H+(W<<22&4294967295|W>>>10),W=F+(q^I&(H^q))+L[4]+4118548399&4294967295,F=I+(W<<7&4294967295|W>>>25),W=q+(H^F&(I^H))+L[5]+1200080426&4294967295,q=F+(W<<12&4294967295|W>>>20),W=H+(I^q&(F^I))+L[6]+2821735955&4294967295,H=q+(W<<17&4294967295|W>>>15),W=I+(F^H&(q^F))+L[7]+4249261313&4294967295,I=H+(W<<22&4294967295|W>>>10),W=F+(q^I&(H^q))+L[8]+1770035416&4294967295,F=I+(W<<7&4294967295|W>>>25),W=q+(H^F&(I^H))+L[9]+2336552879&4294967295,q=F+(W<<12&4294967295|W>>>20),W=H+(I^q&(F^I))+L[10]+4294925233&4294967295,H=q+(W<<17&4294967295|W>>>15),W=I+(F^H&(q^F))+L[11]+2304563134&4294967295,I=H+(W<<22&4294967295|W>>>10),W=F+(q^I&(H^q))+L[12]+1804603682&4294967295,F=I+(W<<7&4294967295|W>>>25),W=q+(H^F&(I^H))+L[13]+4254626195&4294967295,q=F+(W<<12&4294967295|W>>>20),W=H+(I^q&(F^I))+L[14]+2792965006&4294967295,H=q+(W<<17&4294967295|W>>>15),W=I+(F^H&(q^F))+L[15]+1236535329&4294967295,I=H+(W<<22&4294967295|W>>>10),W=F+(H^q&(I^H))+L[1]+4129170786&4294967295,F=I+(W<<5&4294967295|W>>>27),W=q+(I^H&(F^I))+L[6]+3225465664&4294967295,q=F+(W<<9&4294967295|W>>>23),W=H+(F^I&(q^F))+L[11]+643717713&4294967295,H=q+(W<<14&4294967295|W>>>18),W=I+(q^F&(H^q))+L[0]+3921069994&4294967295,I=H+(W<<20&4294967295|W>>>12),W=F+(H^q&(I^H))+L[5]+3593408605&4294967295,F=I+(W<<5&4294967295|W>>>27),W=q+(I^H&(F^I))+L[10]+38016083&4294967295,q=F+(W<<9&4294967295|W>>>23),W=H+(F^I&(q^F))+L[15]+3634488961&4294967295,H=q+(W<<14&4294967295|W>>>18),W=I+(q^F&(H^q))+L[4]+3889429448&4294967295,I=H+(W<<20&4294967295|W>>>12),W=F+(H^q&(I^H))+L[9]+568446438&4294967295,F=I+(W<<5&4294967295|W>>>27),W=q+(I^H&(F^I))+L[14]+3275163606&4294967295,q=F+(W<<9&4294967295|W>>>23),W=H+(F^I&(q^F))+L[3]+4107603335&4294967295,H=q+(W<<14&4294967295|W>>>18),W=I+(q^F&(H^q))+L[8]+1163531501&4294967295,I=H+(W<<20&4294967295|W>>>12),W=F+(H^q&(I^H))+L[13]+2850285829&4294967295,F=I+(W<<5&4294967295|W>>>27),W=q+(I^H&(F^I))+L[2]+4243563512&4294967295,q=F+(W<<9&4294967295|W>>>23),W=H+(F^I&(q^F))+L[7]+1735328473&4294967295,H=q+(W<<14&4294967295|W>>>18),W=I+(q^F&(H^q))+L[12]+2368359562&4294967295,I=H+(W<<20&4294967295|W>>>12),W=F+(I^H^q)+L[5]+4294588738&4294967295,F=I+(W<<4&4294967295|W>>>28),W=q+(F^I^H)+L[8]+2272392833&4294967295,q=F+(W<<11&4294967295|W>>>21),W=H+(q^F^I)+L[11]+1839030562&4294967295,H=q+(W<<16&4294967295|W>>>16),W=I+(H^q^F)+L[14]+4259657740&4294967295,I=H+(W<<23&4294967295|W>>>9),W=F+(I^H^q)+L[1]+2763975236&4294967295,F=I+(W<<4&4294967295|W>>>28),W=q+(F^I^H)+L[4]+1272893353&4294967295,q=F+(W<<11&4294967295|W>>>21),W=H+(q^F^I)+L[7]+4139469664&4294967295,H=q+(W<<16&4294967295|W>>>16),W=I+(H^q^F)+L[10]+3200236656&4294967295,I=H+(W<<23&4294967295|W>>>9),W=F+(I^H^q)+L[13]+681279174&4294967295,F=I+(W<<4&4294967295|W>>>28),W=q+(F^I^H)+L[0]+3936430074&4294967295,q=F+(W<<11&4294967295|W>>>21),W=H+(q^F^I)+L[3]+3572445317&4294967295,H=q+(W<<16&4294967295|W>>>16),W=I+(H^q^F)+L[6]+76029189&4294967295,I=H+(W<<23&4294967295|W>>>9),W=F+(I^H^q)+L[9]+3654602809&4294967295,F=I+(W<<4&4294967295|W>>>28),W=q+(F^I^H)+L[12]+3873151461&4294967295,q=F+(W<<11&4294967295|W>>>21),W=H+(q^F^I)+L[15]+530742520&4294967295,H=q+(W<<16&4294967295|W>>>16),W=I+(H^q^F)+L[2]+3299628645&4294967295,I=H+(W<<23&4294967295|W>>>9),W=F+(H^(I|~q))+L[0]+4096336452&4294967295,F=I+(W<<6&4294967295|W>>>26),W=q+(I^(F|~H))+L[7]+1126891415&4294967295,q=F+(W<<10&4294967295|W>>>22),W=H+(F^(q|~I))+L[14]+2878612391&4294967295,H=q+(W<<15&4294967295|W>>>17),W=I+(q^(H|~F))+L[5]+4237533241&4294967295,I=H+(W<<21&4294967295|W>>>11),W=F+(H^(I|~q))+L[12]+1700485571&4294967295,F=I+(W<<6&4294967295|W>>>26),W=q+(I^(F|~H))+L[3]+2399980690&4294967295,q=F+(W<<10&4294967295|W>>>22),W=H+(F^(q|~I))+L[10]+4293915773&4294967295,H=q+(W<<15&4294967295|W>>>17),W=I+(q^(H|~F))+L[1]+2240044497&4294967295,I=H+(W<<21&4294967295|W>>>11),W=F+(H^(I|~q))+L[8]+1873313359&4294967295,F=I+(W<<6&4294967295|W>>>26),W=q+(I^(F|~H))+L[15]+4264355552&4294967295,q=F+(W<<10&4294967295|W>>>22),W=H+(F^(q|~I))+L[6]+2734768916&4294967295,H=q+(W<<15&4294967295|W>>>17),W=I+(q^(H|~F))+L[13]+1309151649&4294967295,I=H+(W<<21&4294967295|W>>>11),W=F+(H^(I|~q))+L[4]+4149444226&4294967295,F=I+(W<<6&4294967295|W>>>26),W=q+(I^(F|~H))+L[11]+3174756917&4294967295,q=F+(W<<10&4294967295|W>>>22),W=H+(F^(q|~I))+L[2]+718787259&4294967295,H=q+(W<<15&4294967295|W>>>17),W=I+(q^(H|~F))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+F&4294967295,D.g[1]=D.g[1]+(H+(W<<21&4294967295|W>>>11))&4294967295,D.g[2]=D.g[2]+H&4294967295,D.g[3]=D.g[3]+q&4294967295}i.prototype.v=function(D,F){F===void 0&&(F=D.length);const I=F-this.blockSize,L=this.C;let H=this.h,q=0;for(;q<F;){if(H==0)for(;q<=I;)r(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<F;)if(L[H++]=D.charCodeAt(q++),H==this.blockSize){r(this,L),H=0;break}}else for(;q<F;)if(L[H++]=D[q++],H==this.blockSize){r(this,L),H=0;break}}this.h=H,this.o+=F},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var F=1;F<D.length-8;++F)D[F]=0;F=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=F&255,F/=256;for(this.v(D),D=Array(16),F=0,I=0;I<4;++I)for(let L=0;L<32;L+=8)D[F++]=this.g[I]>>>L&255;return D};function a(D,F){var I=l;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=F(D)}function s(D,F){this.h=F;const I=[];let L=!0;for(let H=D.length-1;H>=0;H--){const q=D[H]|0;L&&q==F||(I[H]=q,L=!1)}this.g=I}var l={};function c(D){return-128<=D&&D<128?a(D,function(F){return new s([F|0],F<0?-1:0)}):new s([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return S(h(-D));const F=[];let I=1;for(let L=0;D>=I;L++)F[L]=D/I|0,I*=4294967296;return new s(F,0)}function p(D,F){if(D.length==0)throw Error("number format error: empty string");if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(D.charAt(0)=="-")return S(p(D.substring(1),F));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(F,8));let L=g;for(let q=0;q<D.length;q+=8){var H=Math.min(8,D.length-q);const W=parseInt(D.substring(q,q+H),F);H<8?(H=h(Math.pow(F,H)),L=L.j(H).add(h(W))):(L=L.j(I),L=L.add(h(W)))}return L}var g=c(0),v=c(1),b=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-S(this).m();let D=0,F=1;for(let I=0;I<this.g.length;I++){const L=this.i(I);D+=(L>=0?L:4294967296+L)*F,F*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(_(this))return"0";if(M(this))return"-"+S(this).toString(D);const F=h(Math.pow(D,6));var I=this;let L="";for(;;){const H=O(I,F).g;I=w(I,H.j(F));let q=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=H,_(I))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function _(D){if(D.h!=0)return!1;for(let F=0;F<D.g.length;F++)if(D.g[F]!=0)return!1;return!0}function M(D){return D.h==-1}n.l=function(D){return D=w(this,D),M(D)?-1:_(D)?0:1};function S(D){const F=D.g.length,I=[];for(let L=0;L<F;L++)I[L]=~D.g[L];return new s(I,~D.h).add(v)}n.abs=function(){return M(this)?S(this):this},n.add=function(D){const F=Math.max(this.g.length,D.g.length),I=[];let L=0;for(let H=0;H<=F;H++){let q=L+(this.i(H)&65535)+(D.i(H)&65535),W=(q>>>16)+(this.i(H)>>>16)+(D.i(H)>>>16);L=W>>>16,q&=65535,W&=65535,I[H]=W<<16|q}return new s(I,I[I.length-1]&-2147483648?-1:0)};function w(D,F){return D.add(S(F))}n.j=function(D){if(_(this)||_(D))return g;if(M(this))return M(D)?S(this).j(S(D)):S(S(this).j(D));if(M(D))return S(this.j(S(D)));if(this.l(b)<0&&D.l(b)<0)return h(this.m()*D.m());const F=this.g.length+D.g.length,I=[];for(var L=0;L<2*F;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(let H=0;H<D.g.length;H++){const q=this.i(L)>>>16,W=this.i(L)&65535,oe=D.i(H)>>>16,fe=D.i(H)&65535;I[2*L+2*H]+=W*fe,R(I,2*L+2*H),I[2*L+2*H+1]+=q*fe,R(I,2*L+2*H+1),I[2*L+2*H+1]+=W*oe,R(I,2*L+2*H+1),I[2*L+2*H+2]+=q*oe,R(I,2*L+2*H+2)}for(D=0;D<F;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=F;D<2*F;D++)I[D]=0;return new s(I,0)};function R(D,F){for(;(D[F]&65535)!=D[F];)D[F+1]+=D[F]>>>16,D[F]&=65535,F++}function P(D,F){this.g=D,this.h=F}function O(D,F){if(_(F))throw Error("division by zero");if(_(D))return new P(g,g);if(M(D))return F=O(S(D),F),new P(S(F.g),S(F.h));if(M(F))return F=O(D,S(F)),new P(S(F.g),F.h);if(D.g.length>30){if(M(D)||M(F))throw Error("slowDivide_ only works with positive integers.");for(var I=v,L=F;L.l(D)<=0;)I=k(I),L=k(L);var H=B(I,1),q=B(L,1);for(L=B(L,2),I=B(I,2);!_(L);){var W=q.add(L);W.l(D)<=0&&(H=H.add(I),q=W),L=B(L,1),I=B(I,1)}return F=w(D,H.j(F)),new P(H,F)}for(H=g;D.l(F)>=0;){for(I=Math.max(1,Math.floor(D.m()/F.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=h(I),W=q.j(F);M(W)||W.l(D)>0;)I-=L,q=h(I),W=q.j(F);_(q)&&(q=v),H=H.add(q),D=w(D,W)}return new P(H,D)}n.B=function(D){return O(this,D).h},n.and=function(D){const F=Math.max(this.g.length,D.g.length),I=[];for(let L=0;L<F;L++)I[L]=this.i(L)&D.i(L);return new s(I,this.h&D.h)},n.or=function(D){const F=Math.max(this.g.length,D.g.length),I=[];for(let L=0;L<F;L++)I[L]=this.i(L)|D.i(L);return new s(I,this.h|D.h)},n.xor=function(D){const F=Math.max(this.g.length,D.g.length),I=[];for(let L=0;L<F;L++)I[L]=this.i(L)^D.i(L);return new s(I,this.h^D.h)};function k(D){const F=D.g.length+1,I=[];for(let L=0;L<F;L++)I[L]=D.i(L)<<1|D.i(L-1)>>>31;return new s(I,D.h)}function B(D,F){const I=F>>5;F%=32;const L=D.g.length-I,H=[];for(let q=0;q<L;q++)H[q]=F>0?D.i(q+I)>>>F|D.i(q+I+1)<<32-F:D.i(q+I);return new s(H,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,sj=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,Sd=s}).apply(typeof Wk<"u"?Wk:typeof self<"u"?self:typeof window<"u"?window:{});var S1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oj,gb,lj,K1,cI,uj,cj,fj;(function(){var n,e=Object.defineProperty;function t(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof S1=="object"&&S1];for(var V=0;V<E.length;++V){var $=E[V];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var i=t(this);function r(E,V){if(V)e:{var $=i;E=E.split(".");for(var ee=0;ee<E.length-1;ee++){var be=E[ee];if(!(be in $))break e;$=$[be]}E=E[E.length-1],ee=$[E],V=V(ee),V!=ee&&V!=null&&e($,E,{configurable:!0,writable:!0,value:V})}}r("Symbol.dispose",function(E){return E||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(E){return E||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(E){return E||function(V){var $=[],ee;for(ee in V)Object.prototype.hasOwnProperty.call(V,ee)&&$.push([ee,V[ee]]);return $}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function l(E){var V=typeof E;return V=="object"&&E!=null||V=="function"}function c(E,V,$){return E.call.apply(E.bind,arguments)}function h(E,V,$){return h=c,h.apply(null,arguments)}function p(E,V){var $=Array.prototype.slice.call(arguments,1);return function(){var ee=$.slice();return ee.push.apply(ee,arguments),E.apply(this,ee)}}function g(E,V){function $(){}$.prototype=V.prototype,E.Z=V.prototype,E.prototype=new $,E.prototype.constructor=E,E.Ob=function(ee,be,ze){for(var wt=Array(arguments.length-2),gn=2;gn<arguments.length;gn++)wt[gn-2]=arguments[gn];return V.prototype[be].apply(ee,wt)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?E=>E&&AsyncContext.Snapshot.wrap(E):E=>E;function b(E){const V=E.length;if(V>0){const $=Array(V);for(let ee=0;ee<V;ee++)$[ee]=E[ee];return $}return[]}function _(E,V){for(let ee=1;ee<arguments.length;ee++){const be=arguments[ee];var $=typeof be;if($=$!="object"?$:be?Array.isArray(be)?"array":$:"null",$=="array"||$=="object"&&typeof be.length=="number"){$=E.length||0;const ze=be.length||0;E.length=$+ze;for(let wt=0;wt<ze;wt++)E[$+wt]=be[wt]}else E.push(be)}}class M{constructor(V,$){this.i=V,this.j=$,this.h=0,this.g=null}get(){let V;return this.h>0?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function S(E){s.setTimeout(()=>{throw E},0)}function w(){var E=D;let V=null;return E.g&&(V=E.g,E.g=E.g.next,E.g||(E.h=null),V.next=null),V}class R{constructor(){this.h=this.g=null}add(V,$){const ee=P.get();ee.set(V,$),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var P=new M(()=>new O,E=>E.reset());class O{constructor(){this.next=this.g=this.h=null}set(V,$){this.h=V,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let k,B=!1,D=new R,F=()=>{const E=Promise.resolve(void 0);k=()=>{E.then(I)}};function I(){for(var E;E=w();){try{E.h.call(E.g)}catch($){S($)}var V=P;V.j(E),V.h<100&&(V.h++,E.next=V.g,V.g=E)}B=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(E,V){this.type=E,this.g=this.target=V,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var E=!1,V=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const $=()=>{};s.addEventListener("test",$,V),s.removeEventListener("test",$,V)}catch{}return E})();function W(E){return/^[\s\xa0]*$/.test(E)}function oe(E,V){H.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E&&this.init(E,V)}g(oe,H),oe.prototype.init=function(E,V){const $=this.type=E.type,ee=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;this.target=E.target||E.srcElement,this.g=V,V=E.relatedTarget,V||($=="mouseover"?V=E.fromElement:$=="mouseout"&&(V=E.toElement)),this.relatedTarget=V,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=E.pointerType,this.state=E.state,this.i=E,E.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),te=0;function re(E,V,$,ee,be){this.listener=E,this.proxy=null,this.src=V,this.type=$,this.capture=!!ee,this.ha=be,this.key=++te,this.da=this.fa=!1}function he(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function Me(E,V,$){for(const ee in E)V.call($,E[ee],ee,E)}function Ne(E,V){for(const $ in E)V.call(void 0,E[$],$,E)}function Q(E){const V={};for(const $ in E)V[$]=E[$];return V}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(E,V){let $,ee;for(let be=1;be<arguments.length;be++){ee=arguments[be];for($ in ee)E[$]=ee[$];for(let ze=0;ze<de.length;ze++)$=de[ze],Object.prototype.hasOwnProperty.call(ee,$)&&(E[$]=ee[$])}}function We(E){this.src=E,this.g={},this.h=0}We.prototype.add=function(E,V,$,ee,be){const ze=E.toString();E=this.g[ze],E||(E=this.g[ze]=[],this.h++);const wt=_e(E,V,ee,be);return wt>-1?(V=E[wt],$||(V.fa=!1)):(V=new re(V,this.src,ze,!!ee,be),V.fa=$,E.push(V)),V};function bt(E,V){const $=V.type;if($ in E.g){var ee=E.g[$],be=Array.prototype.indexOf.call(ee,V,void 0),ze;(ze=be>=0)&&Array.prototype.splice.call(ee,be,1),ze&&(he(V),E.g[$].length==0&&(delete E.g[$],E.h--))}}function _e(E,V,$,ee){for(let be=0;be<E.length;++be){const ze=E[be];if(!ze.da&&ze.listener==V&&ze.capture==!!$&&ze.ha==ee)return be}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),ut={};function ve(E,V,$,ee,be){if(Array.isArray(V)){for(let ze=0;ze<V.length;ze++)ve(E,V[ze],$,ee,be);return null}return $=ie($),E&&E[fe]?E.J(V,$,l(ee)?!!ee.capture:!1,be):et(E,V,$,!1,ee,be)}function et(E,V,$,ee,be,ze){if(!V)throw Error("Invalid event type");const wt=l(be)?!!be.capture:!!be;let gn=je(E);if(gn||(E[Te]=gn=new We(E)),$=gn.add(V,$,ee,wt,ze),$.proxy)return $;if(ee=At(),$.proxy=ee,ee.src=E,ee.listener=$,E.addEventListener)q||(be=wt),be===void 0&&(be=!1),E.addEventListener(V.toString(),ee,be);else if(E.attachEvent)E.attachEvent(Oe(V.toString()),ee);else if(E.addListener&&E.removeListener)E.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return $}function At(){function E($){return V.call(E.src,E.listener,$)}const V=Ze;return E}function He(E,V,$,ee,be){if(Array.isArray(V))for(var ze=0;ze<V.length;ze++)He(E,V[ze],$,ee,be);else ee=l(ee)?!!ee.capture:!!ee,$=ie($),E&&E[fe]?(E=E.i,ze=String(V).toString(),ze in E.g&&(V=E.g[ze],$=_e(V,$,ee,be),$>-1&&(he(V[$]),Array.prototype.splice.call(V,$,1),V.length==0&&(delete E.g[ze],E.h--)))):E&&(E=je(E))&&(V=E.g[V.toString()],E=-1,V&&(E=_e(V,$,ee,be)),($=E>-1?V[E]:null)&&Ct($))}function Ct(E){if(typeof E!="number"&&E&&!E.da){var V=E.src;if(V&&V[fe])bt(V.i,E);else{var $=E.type,ee=E.proxy;V.removeEventListener?V.removeEventListener($,ee,E.capture):V.detachEvent?V.detachEvent(Oe($),ee):V.addListener&&V.removeListener&&V.removeListener(ee),($=je(V))?(bt($,E),$.h==0&&($.src=null,V[Te]=null)):he(E)}}}function Oe(E){return E in ut?ut[E]:ut[E]="on"+E}function Ze(E,V){if(E.da)E=!0;else{V=new oe(V,this);const $=E.listener,ee=E.ha||E.src;E.fa&&Ct(E),E=$.call(ee,V)}return E}function je(E){return E=E[Te],E instanceof We?E:null}var ht="__closure_events_fn_"+(Math.random()*1e9>>>0);function ie(E){return typeof E=="function"?E:(E[ht]||(E[ht]=function(V){return E.handleEvent(V)}),E[ht])}function Mt(){L.call(this),this.i=new We(this),this.M=this,this.G=null}g(Mt,L),Mt.prototype[fe]=!0,Mt.prototype.removeEventListener=function(E,V,$,ee){He(this,E,V,$,ee)};function gt(E,V){var $,ee=E.G;if(ee)for($=[];ee;ee=ee.G)$.push(ee);if(E=E.M,ee=V.type||V,typeof V=="string")V=new H(V,E);else if(V instanceof H)V.target=V.target||E;else{var be=V;V=new H(ee,E),Ae(V,be)}be=!0;let ze,wt;if($)for(wt=$.length-1;wt>=0;wt--)ze=V.g=$[wt],be=Ut(ze,ee,!0,V)&&be;if(ze=V.g=E,be=Ut(ze,ee,!0,V)&&be,be=Ut(ze,ee,!1,V)&&be,$)for(wt=0;wt<$.length;wt++)ze=V.g=$[wt],be=Ut(ze,ee,!1,V)&&be}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var E=this.i;for(const V in E.g){const $=E.g[V];for(let ee=0;ee<$.length;ee++)he($[ee]);delete E.g[V],E.h--}}this.G=null},Mt.prototype.J=function(E,V,$,ee){return this.i.add(String(E),V,!1,$,ee)},Mt.prototype.K=function(E,V,$,ee){return this.i.add(String(E),V,!0,$,ee)};function Ut(E,V,$,ee){if(V=E.i.g[String(V)],!V)return!0;V=V.concat();let be=!0;for(let ze=0;ze<V.length;++ze){const wt=V[ze];if(wt&&!wt.da&&wt.capture==$){const gn=wt.listener,Ki=wt.ha||wt.src;wt.fa&&bt(E.i,wt),be=gn.call(Ki,ee)!==!1&&be}}return be&&!ee.defaultPrevented}function vt(E,V){if(typeof E!="function")if(E&&typeof E.handleEvent=="function")E=h(E.handleEvent,E);else throw Error("Invalid listener argument");return Number(V)>2147483647?-1:s.setTimeout(E,V||0)}function J(E){E.g=vt(()=>{E.g=null,E.i&&(E.i=!1,J(E))},E.l);const V=E.h;E.h=null,E.m.apply(null,V)}class X extends L{constructor(V,$){super(),this.m=V,this.l=$,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(E){L.call(this),this.h=E,this.g={}}g(pe,L);var ke=[];function Ye(E){Me(E.g,function(V,$){this.g.hasOwnProperty($)&&Ct(V)},E),E.g={}}pe.prototype.N=function(){pe.Z.N.call(this),Ye(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=s.JSON.stringify,Tt=s.JSON.parse,le=class{stringify(E){return s.JSON.stringify(E,void 0)}parse(E){return s.JSON.parse(E,void 0)}};function Ee(){}function st(){}var Ge={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xe(){H.call(this,"d")}g(Xe,H);function ft(){H.call(this,"c")}g(ft,H);var ae={},ye=null;function dt(){return ye=ye||new Mt}ae.Ia="serverreachability";function se(E){H.call(this,ae.Ia,E)}g(se,H);function rt(E){const V=dt();gt(V,new se(V))}ae.STAT_EVENT="statevent";function nt(E,V){H.call(this,ae.STAT_EVENT,E),this.stat=V}g(nt,H);function ot(E){const V=dt();gt(V,new nt(V,E))}ae.Ja="timingevent";function it(E,V){H.call(this,ae.Ja,E),this.size=V}g(it,H);function $e(E,V){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){E()},V)}function lt(){this.g=!0}lt.prototype.ua=function(){this.g=!1};function Ht(E,V,$,ee,be,ze){E.info(function(){if(E.g)if(ze){var wt="",gn=ze.split("&");for(let Bn=0;Bn<gn.length;Bn++){var Ki=gn[Bn].split("=");if(Ki.length>1){const Ci=Ki[0];Ki=Ki[1];const Ia=Ci.split("_");wt=Ia.length>=2&&Ia[1]=="type"?wt+(Ci+"="+Ki+"&"):wt+(Ci+"=redacted&")}}}else wt=null;else wt=ze;return"XMLHTTP REQ ("+ee+") [attempt "+be+"]: "+V+`
`+$+`
`+wt})}function cn(E,V,$,ee,be,ze,wt){E.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+be+"]: "+V+`
`+$+`
`+ze+" "+wt})}function Jt(E,V,$,ee){E.info(function(){return"XMLHTTP TEXT ("+V+"): "+ar(E,$)+(ee?" "+ee:"")})}function si(E,V){E.info(function(){return"TIMEOUT: "+V})}lt.prototype.info=function(){};function ar(E,V){if(!E.g)return V;if(!V)return null;try{const ze=JSON.parse(V);if(ze){for(E=0;E<ze.length;E++)if(Array.isArray(ze[E])){var $=ze[E];if(!($.length<2)){var ee=$[1];if(Array.isArray(ee)&&!(ee.length<1)){var be=ee[0];if(be!="noop"&&be!="stop"&&be!="close")for(let wt=1;wt<ee.length;wt++)ee[wt]=""}}}}return Le(ze)}catch{return V}}var ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Po={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function Ks(){}g(Ks,Ee),Ks.prototype.g=function(){return new XMLHttpRequest},nl=new Ks;function Aa(E){return encodeURIComponent(String(E))}function Wl(E){var V=1;E=E.split(":");const $=[];for(;V>0&&E.length;)$.push(E.shift()),V--;return E.length&&$.push(E.join(":")),$}function Ai(E,V,$,ee){this.j=E,this.i=V,this.l=$,this.S=ee||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oa}function oa(){this.i=null,this.g="",this.h=!1}var xi={},Ui={};function $r(E,V,$){E.M=1,E.A=on(It(V)),E.u=$,E.R=!0,la(E,null)}function la(E,V){E.F=Date.now(),ua(E),E.B=It(E.A);var $=E.B,ee=E.S;Array.isArray(ee)||(ee=[String(ee)]),Ra($.i,"t",ee),E.C=0,$=E.j.L,E.h=new oa,E.g=Zd(E.j,$?V:null,!E.u),E.P>0&&(E.O=new X(h(E.Y,E,E.g),E.P)),V=E.V,$=E.g,ee=E.ba;var be="readystatechange";Array.isArray(be)||(be&&(ke[0]=be.toString()),be=ke);for(let ze=0;ze<be.length;ze++){const wt=ve($,be[ze],ee||V.handleEvent,!1,V.h||V);if(!wt)break;V.g[wt.key]=wt}V=E.J?Q(E.J):{},E.u?(E.v||(E.v="POST"),V["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.B,E.v,E.u,V)):(E.v="GET",E.g.ea(E.B,E.v,null,V)),rt(),Ht(E.i,E.v,E.B,E.l,E.S,E.u)}Ai.prototype.ba=function(E){E=E.target;const V=this.O;V&&Do(E)==3?V.j():this.Y(E)},Ai.prototype.Y=function(E){try{if(E==this.g)e:{const gn=Do(this.g),Ki=this.g.ya(),Bn=this.g.ca();if(!(gn<3)&&(gn!=3||this.g&&(this.h.h||this.g.la()||Dr(this.g)))){this.K||gn!=4||Ki==7||(Ki==8||Bn<=0?rt(3):rt(2)),Es(this);var V=this.g.ca();this.X=V;var $=Ta(this);if(this.o=V==200,cn(this.i,this.v,this.B,this.l,this.S,gn,V),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,be=this.g;if((ee=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(ee)){var ze=ee;break t}}ze=null}if(E=ze)Jt(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qa(this,E);else{this.o=!1,this.m=3,ot(12),ca(this),Ca(this);break e}}if(this.R){E=!0;let Ci;for(;!this.K&&this.C<$.length;)if(Ci=$l(this,$),Ci==Ui){gn==4&&(this.m=4,ot(14),E=!1),Jt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ci==xi){this.m=4,ot(15),Jt(this.i,this.l,$,"[Invalid Chunk]"),E=!1;break}else Jt(this.i,this.l,Ci,null),Qa(this,Ci);if(Io(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||$.length!=0||this.h.h||(this.m=1,ot(16),E=!1),this.o=this.o&&E,!E)Jt(this.i,this.l,$,"[Invalid Chunked Response]"),ca(this),Ca(this);else if($.length>0&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.aa&&!wt.P&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),dh(wt),wt.P=!0,ot(11))}}else Jt(this.i,this.l,$,null),Qa(this,$);gn==4&&ca(this),this.o&&!this.K&&(gn==4?Yd(this.j,this):(this.o=!1,ua(this)))}else sl(this.g),V==400&&$.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),ca(this),Ca(this)}}}catch{}finally{}};function Ta(E){if(!Io(E))return E.g.la();const V=Dr(E.g);if(V==="")return"";let $="";const ee=V.length,be=Do(E.g)==4;if(!E.h.i){if(typeof TextDecoder>"u")return ca(E),Ca(E),"";E.h.i=new s.TextDecoder}for(let ze=0;ze<ee;ze++)E.h.h=!0,$+=E.h.i.decode(V[ze],{stream:!(be&&ze==ee-1)});return V.length=0,E.h.g+=$,E.C=0,E.h.g}function Io(E){return E.g?E.v=="GET"&&E.M!=2&&E.j.Aa:!1}function $l(E,V){var $=E.C,ee=V.indexOf(`
`,$);return ee==-1?Ui:($=Number(V.substring($,ee)),isNaN($)?xi:(ee+=1,ee+$>V.length?Ui:(V=V.slice(ee,ee+$),E.C=ee+$,V)))}Ai.prototype.cancel=function(){this.K=!0,ca(this)};function ua(E){E.T=Date.now()+E.H,Zs(E,E.H)}function Zs(E,V){if(E.D!=null)throw Error("WatchDog timer not null");E.D=$e(h(E.aa,E),V)}function Es(E){E.D&&(s.clearTimeout(E.D),E.D=null)}Ai.prototype.aa=function(){this.D=null;const E=Date.now();E-this.T>=0?(si(this.i,this.B),this.M!=2&&(rt(),ot(17)),ca(this),this.m=2,Ca(this)):Zs(this,this.T-E)};function Ca(E){E.j.I==0||E.K||Yd(E.j,E)}function ca(E){Es(E);var V=E.O;V&&typeof V.dispose=="function"&&V.dispose(),E.O=null,Ye(E.V),E.g&&(V=E.g,E.g=null,V.abort(),V.dispose())}function Qa(E,V){try{var $=E.j;if($.I!=0&&($.g==E||xe($.h,E))){if(!E.L&&xe($.h,E)&&$.I==3){try{var ee=$.Ba.g.parse(V)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var be=ee;if(be[0]==0){e:if(!$.v){if($.g)if($.g.F+3e3<E.F)ph($),ol($);else break e;zu($),ot(18)}}else $.xa=be[1],0<$.xa-$.K&&be[2]<37500&&$.F&&$.A==0&&!$.C&&($.C=$e(h($.Va,$),6e3));Re($.h)<=1&&$.ta&&($.ta=void 0)}else eo($,11)}else if((E.L||$.g==E)&&ph($),!W(V))for(be=$.Ba.g.parse(V),V=0;V<be.length;V++){let Bn=be[V];const Ci=Bn[0];if(!(Ci<=$.K))if($.K=Ci,Bn=Bn[1],$.I==2)if(Bn[0]=="c"){$.M=Bn[1],$.ba=Bn[2];const Ia=Bn[3];Ia!=null&&($.ka=Ia,$.j.info("VER="+$.ka));const ko=Bn[4];ko!=null&&($.za=ko,$.j.info("SVER="+$.za));const zo=Bn[5];zo!=null&&typeof zo=="number"&&zo>0&&(ee=1.5*zo,$.O=ee,$.j.info("backChannelRequestTimeoutMs_="+ee)),ee=$;const Ja=E.g;if(Ja){const Ql=Ja.g?Ja.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ql){var ze=ee.h;ze.g||Ql.indexOf("spdy")==-1&&Ql.indexOf("quic")==-1&&Ql.indexOf("h2")==-1||(ze.j=ze.l,ze.g=new Set,ze.h&&(xt(ze,ze.h),ze.h=null))}if(ee.G){const Jc=Ja.g?Ja.g.getResponseHeader("X-HTTP-Session-Id"):null;Jc&&(ee.wa=Jc,Kt(ee.J,ee.G,Jc))}}$.I=3,$.l&&$.l.ra(),$.aa&&($.T=Date.now()-E.F,$.j.info("Handshake RTT: "+$.T+"ms")),ee=$;var wt=E;if(ee.na=Kd(ee,ee.L?ee.ba:null,ee.W),wt.L){Pt(ee.h,wt);var gn=wt,Ki=ee.O;Ki&&(gn.H=Ki),gn.D&&(Es(gn),ua(gn)),ee.g=wt}else hh(ee);$.i.length>0&&Uo($)}else Bn[0]!="stop"&&Bn[0]!="close"||eo($,7);else $.I==3&&(Bn[0]=="stop"||Bn[0]=="close"?Bn[0]=="stop"?eo($,7):ch($):Bn[0]!="noop"&&$.l&&$.l.qa(Bn),$.A=0)}}rt(4)}catch{}}var K=class{constructor(E,V){this.g=E,this.map=V}};function ge(E){this.l=E||10,s.PerformanceNavigationTiming?(E=s.performance.getEntriesByType("navigation"),E=E.length>0&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ue(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function Re(E){return E.h?1:E.g?E.g.size:0}function xe(E,V){return E.h?E.h==V:E.g?E.g.has(V):!1}function xt(E,V){E.g?E.g.add(V):E.h=V}function Pt(E,V){E.h&&E.h==V?E.h=null:E.g&&E.g.has(V)&&E.g.delete(V)}ge.prototype.cancel=function(){if(this.i=mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function mt(E){if(E.h!=null)return E.i.concat(E.h.G);if(E.g!=null&&E.g.size!==0){let V=E.i;for(const $ of E.g.values())V=V.concat($.G);return V}return b(E.i)}var Dt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kt(E,V){if(E){E=E.split("&");for(let $=0;$<E.length;$++){const ee=E[$].indexOf("=");let be,ze=null;ee>=0?(be=E[$].substring(0,ee),ze=E[$].substring(ee+1)):be=E[$],V(be,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Vt(E){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let V;E instanceof Vt?(this.l=E.l,$t(this,E.j),this.o=E.o,this.g=E.g,Pn(this,E.u),this.h=E.h,ni(this,$d(E.i)),this.m=E.m):E&&(V=String(E).match(Dt))?(this.l=!1,$t(this,V[1]||"",!0),this.o=Et(V[2]||""),this.g=Et(V[3]||"",!0),Pn(this,V[4]),this.h=Et(V[5]||"",!0),ni(this,V[6]||"",!0),this.m=Et(V[7]||"")):(this.l=!1,this.i=new Ti(null,this.l))}Vt.prototype.toString=function(){const E=[];var V=this.j;V&&E.push(Mn(V,ki,!0),":");var $=this.g;return($||V=="file")&&(E.push("//"),(V=this.o)&&E.push(Mn(V,ki,!0),"@"),E.push(Aa($).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.u,$!=null&&E.push(":",String($))),($=this.h)&&(this.g&&$.charAt(0)!="/"&&E.push("/"),E.push(Mn($,$.charAt(0)=="/"?vi:Ms,!0))),($=this.i.toString())&&E.push("?",$),($=this.m)&&E.push("#",Mn($,Yn)),E.join("")},Vt.prototype.resolve=function(E){const V=It(this);let $=!!E.j;$?$t(V,E.j):$=!!E.o,$?V.o=E.o:$=!!E.g,$?V.g=E.g:$=E.u!=null;var ee=E.h;if($)Pn(V,E.u);else if($=!!E.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var be=V.h.lastIndexOf("/");be!=-1&&(ee=V.h.slice(0,be+1)+ee)}if(be=ee,be==".."||be==".")ee="";else if(be.indexOf("./")!=-1||be.indexOf("/.")!=-1){ee=be.lastIndexOf("/",0)==0,be=be.split("/");const ze=[];for(let wt=0;wt<be.length;){const gn=be[wt++];gn=="."?ee&&wt==be.length&&ze.push(""):gn==".."?((ze.length>1||ze.length==1&&ze[0]!="")&&ze.pop(),ee&&wt==be.length&&ze.push("")):(ze.push(gn),ee=!0)}ee=ze.join("/")}else ee=be}return $?V.h=ee:$=E.i.toString()!=="",$?ni(V,$d(E.i)):$=!!E.m,$&&(V.m=E.m),V};function It(E){return new Vt(E)}function $t(E,V,$){E.j=$?Et(V,!0):V,E.j&&(E.j=E.j.replace(/:$/,""))}function Pn(E,V){if(V){if(V=Number(V),isNaN(V)||V<0)throw Error("Bad port number "+V);E.u=V}else E.u=null}function ni(E,V,$){V instanceof Ti?(E.i=V,$c(E.i,E.l)):($||(V=Mn(V,Xr)),E.i=new Ti(V,E.l))}function Kt(E,V,$){E.i.set(V,$)}function on(E){return Kt(E,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),E}function Et(E,V){return E?V?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function Mn(E,V,$){return typeof E=="string"?(E=encodeURI(E).replace(V,tn),$&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function tn(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var ki=/[#\/\?@]/g,Ms=/[#\?:]/g,vi=/[#\?]/g,Xr=/[#\?@]/g,Yn=/#/g;function Ti(E,V){this.h=this.g=null,this.i=E||null,this.j=!!V}function hi(E){E.g||(E.g=new Map,E.h=0,E.i&&kt(E.i,function(V,$){E.add(decodeURIComponent(V.replace(/\+/g," ")),$)}))}n=Ti.prototype,n.add=function(E,V){hi(this),this.i=null,E=rl(this,E);let $=this.g.get(E);return $||this.g.set(E,$=[]),$.push(V),this.h+=1,this};function sr(E,V){hi(E),V=rl(E,V),E.g.has(V)&&(E.i=null,E.h-=E.g.get(V).length,E.g.delete(V))}function or(E,V){return hi(E),V=rl(E,V),E.g.has(V)}n.forEach=function(E,V){hi(this),this.g.forEach(function($,ee){$.forEach(function(be){E.call(V,be,ee,this)},this)},this)};function il(E,V){hi(E);let $=[];if(typeof V=="string")or(E,V)&&($=$.concat(E.g.get(rl(E,V))));else for(E=Array.from(E.g.values()),V=0;V<E.length;V++)$=$.concat(E[V]);return $}n.set=function(E,V){return hi(this),this.i=null,E=rl(this,E),or(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[V]),this.h+=1,this},n.get=function(E,V){return E?(E=il(this,E),E.length>0?String(E[0]):V):V};function Ra(E,V,$){sr(E,V),$.length>0&&(E.i=null,E.g.set(rl(E,V),b($)),E.h+=$.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],V=Array.from(this.g.keys());for(let ee=0;ee<V.length;ee++){var $=V[ee];const be=Aa($);$=il(this,$);for(let ze=0;ze<$.length;ze++){let wt=be;$[ze]!==""&&(wt+="="+Aa($[ze])),E.push(wt)}}return this.i=E.join("&")};function $d(E){const V=new Ti;return V.i=E.i,E.g&&(V.g=new Map(E.g),V.h=E.h),V}function rl(E,V){return V=String(V),E.j&&(V=V.toLowerCase()),V}function $c(E,V){V&&!E.j&&(hi(E),E.i=null,E.g.forEach(function($,ee){const be=ee.toLowerCase();ee!=be&&(sr(this,ee),Ra(this,be,$))},E)),E.j=V}function No(E,V){const $=new lt;if(s.Image){const ee=new Image;ee.onload=p(As,$,"TestLoadImage: loaded",!0,V,ee),ee.onerror=p(As,$,"TestLoadImage: error",!1,V,ee),ee.onabort=p(As,$,"TestLoadImage: abort",!1,V,ee),ee.ontimeout=p(As,$,"TestLoadImage: timeout",!1,V,ee),s.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=E}else V(!1)}function lh(E,V){const $=new lt,ee=new AbortController,be=setTimeout(()=>{ee.abort(),As($,"TestPingServer: timeout",!1,V)},1e4);fetch(E,{signal:ee.signal}).then(ze=>{clearTimeout(be),ze.ok?As($,"TestPingServer: ok",!0,V):As($,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(be),As($,"TestPingServer: error",!1,V)})}function As(E,V,$,ee,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),ee($)}catch{}}function Xl(){this.g=new le}function Qs(E){this.i=E.Sb||null,this.h=E.ab||!1}g(Qs,Ee),Qs.prototype.g=function(){return new Ou(this.i,this.h)};function Ou(E,V){Mt.call(this),this.H=E,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Ou,Mt),n=Ou.prototype,n.open=function(E,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=E,this.D=V,this.readyState=1,Js(this)},n.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const V={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};E&&(V.body=E),(this.H||s).fetch(new Request(this.D,V)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yl(this)),this.readyState=0},n.Pa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xc(this)}else E.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xc(E){E.j.read().then(E.Ma.bind(E)).catch(E.ga.bind(E))}n.Ma=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var V=E.value?E.value:new Uint8Array(0);(V=this.B.decode(V,{stream:!E.done}))&&(this.response=this.responseText+=V)}E.done?Yl(this):Js(this),this.readyState==3&&Xc(this)}},n.Oa=function(E){this.g&&(this.response=this.responseText=E,Yl(this))},n.Na=function(E){this.g&&(this.response=E,Yl(this))},n.ga=function(){this.g&&Yl(this)};function Yl(E){E.readyState=4,E.l=null,E.j=null,E.B=null,Js(E)}n.setRequestHeader=function(E,V){this.A.append(E,V)},n.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],V=this.h.entries();for(var $=V.next();!$.done;)$=$.value,E.push($[0]+": "+$[1]),$=V.next();return E.join(`\r
`)};function Js(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function Ts(E){let V="";return Me(E,function($,ee){V+=ee,V+=":",V+=$,V+=`\r
`}),V}function Yc(E,V,$){e:{for(ee in $){var ee=!1;break e}ee=!0}ee||($=Ts($),typeof E=="string"?$!=null&&Aa($):Kt(E,V,$))}function oi(E){Mt.call(this),this.headers=new Map,this.L=E||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(oi,Mt);var Pa=/^https?$/i,uh=["POST","PUT"];n=oi.prototype,n.Fa=function(E){this.H=E},n.ea=function(E,V,$,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);V=V?V.toUpperCase():"GET",this.D=E,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(V,String(E),!0),this.B=!1}catch(ze){al(this,ze);return}if(E=$||"",$=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var be in ee)$.set(be,ee[be]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const ze of ee.keys())$.set(ze,ee.get(ze));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from($.keys()).find(ze=>ze.toLowerCase()=="content-type"),be=s.FormData&&E instanceof s.FormData,!(Array.prototype.indexOf.call(uh,V,void 0)>=0)||ee||be||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,wt]of $)this.g.setRequestHeader(ze,wt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(E),this.v=!1}catch(ze){al(this,ze)}};function al(E,V){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=V,E.o=5,Du(E),Oo(E)}function Du(E){E.A||(E.A=!0,gt(E,"complete"),gt(E,"error"))}n.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=E||7,gt(this,"complete"),gt(this,"abort"),Oo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),oi.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Lu(this):this.Xa())},n.Xa=function(){Lu(this)};function Lu(E){if(E.h&&typeof a<"u"){if(E.v&&Do(E)==4)setTimeout(E.Ca.bind(E),0);else if(gt(E,"readystatechange"),Do(E)==4){E.h=!1;try{const ze=E.ca();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var $;if(!($=V)){var ee;if(ee=ze===0){let wt=String(E.D).match(Dt)[1]||null;!wt&&s.self&&s.self.location&&(wt=s.self.location.protocol.slice(0,-1)),ee=!Pa.test(wt?wt.toLowerCase():"")}$=ee}if($)gt(E,"complete"),gt(E,"success");else{E.o=6;try{var be=Do(E)>2?E.g.statusText:""}catch{be=""}E.l=be+" ["+E.ca()+"]",Du(E)}}finally{Oo(E)}}}}function Oo(E,V){if(E.g){E.m&&(clearTimeout(E.m),E.m=null);const $=E.g;E.g=null,V||gt(E,"ready");try{$.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Do(E){return E.g?E.g.readyState:0}n.ca=function(){try{return Do(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(E){if(this.g){var V=this.g.responseText;return E&&V.indexOf(E)==0&&(V=V.substring(E.length)),Tt(V)}};function Dr(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.F){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function sl(E){const V={};E=(E.g&&Do(E)>=2&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<E.length;ee++){if(W(E[ee]))continue;var $=Wl(E[ee]);const be=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const ze=V[be]||[];V[be]=ze,ze.push($)}Ne(V,function(ee){return ee.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(E,V,$){return $&&$.internalChannelParams&&$.internalChannelParams[E]||V}function Kl(E){this.za=0,this.i=[],this.j=new lt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Lo("failFast",!1,E),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Lo("baseRetryDelayMs",5e3,E),this.Za=Lo("retryDelaySeedMs",1e4,E),this.Ta=Lo("forwardChannelMaxRetries",2,E),this.va=Lo("forwardChannelRequestTimeoutMs",2e4,E),this.ma=E&&E.xmlHttpFactory||void 0,this.Ua=E&&E.Rb||void 0,this.Aa=E&&E.useFetchStreams||!1,this.O=void 0,this.L=E&&E.supportsCrossDomainXhr||!1,this.M="",this.h=new ge(E&&E.concurrentRequestLimit),this.Ba=new Xl,this.S=E&&E.fastHandshake||!1,this.R=E&&E.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=E&&E.Pb||!1,E&&E.ua&&this.j.ua(),E&&E.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&E&&E.detectBufferingProxy||!1,this.ia=void 0,E&&E.longPollingTimeout&&E.longPollingTimeout>0&&(this.ia=E.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Kl.prototype,n.ka=8,n.I=1,n.connect=function(E,V,$,ee){ot(0),this.W=E,this.H=V||{},$&&ee!==void 0&&(this.H.OSID=$,this.H.OAID=ee),this.F=this.X,this.J=Kd(this,null,this.W),Uo(this)};function ch(E){if(Kc(E),E.I==3){var V=E.V++,$=It(E.J);if(Kt($,"SID",E.M),Kt($,"RID",V),Kt($,"TYPE","terminate"),ku(E,$),V=new Ai(E,E.j,V),V.M=2,V.A=on(It($)),$=!1,s.navigator&&s.navigator.sendBeacon)try{$=s.navigator.sendBeacon(V.A.toString(),"")}catch{}!$&&s.Image&&(new Image().src=V.A,$=!0),$||(V.g=Zd(V.j,null),V.g.ea(V.A)),V.F=Date.now(),ua(V)}Zc(E)}function ol(E){E.g&&(dh(E),E.g.cancel(),E.g=null)}function Kc(E){ol(E),E.v&&(s.clearTimeout(E.v),E.v=null),ph(E),E.h.cancel(),E.m&&(typeof E.m=="number"&&s.clearTimeout(E.m),E.m=null)}function Uo(E){if(!Ue(E.h)&&!E.m){E.m=!0;var V=E.Ea;k||F(),B||(k(),B=!0),D.add(V,E),E.D=0}}function Uu(E,V){return Re(E.h)>=E.h.j-(E.m?1:0)?!1:E.m?(E.i=V.G.concat(E.i),!0):E.I==1||E.I==2||E.D>=(E.Sa?0:E.Ta)?!1:(E.m=$e(h(E.Ea,E,V),Fu(E,E.D)),E.D++,!0)}n.Ea=function(E){if(this.m)if(this.m=null,this.I==1){if(!E){this.V=Math.floor(Math.random()*1e5),E=this.V++;const be=new Ai(this,this.j,E);let ze=this.o;if(this.U&&(ze?(ze=Q(ze),Ae(ze,this.U)):ze=this.U),this.u!==null||this.R||(be.J=ze,ze=null),this.S)e:{for(var V=0,$=0;$<this.i.length;$++){t:{var ee=this.i[$];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(V+=ee,V>4096){V=$;break e}if(V===4096||$===this.i.length-1){V=$+1;break e}}V=1e3}else V=1e3;V=Xd(this,be,V),$=It(this.J),Kt($,"RID",E),Kt($,"CVER",22),this.G&&Kt($,"X-HTTP-Session-Id",this.G),ku(this,$),ze&&(this.R?V="headers="+Aa(Ts(ze))+"&"+V:this.u&&Yc($,this.u,ze)),xt(this.h,be),this.Ra&&Kt($,"TYPE","init"),this.S?(Kt($,"$req",V),Kt($,"SID","null"),be.U=!0,$r(be,$,null)):$r(be,$,V),this.I=2}}else this.I==3&&(E?fh(this,E):this.i.length==0||Ue(this.h)||fh(this))};function fh(E,V){var $;V?$=V.l:$=E.V++;const ee=It(E.J);Kt(ee,"SID",E.M),Kt(ee,"RID",$),Kt(ee,"AID",E.K),ku(E,ee),E.u&&E.o&&Yc(ee,E.u,E.o),$=new Ai(E,E.j,$,E.D+1),E.u===null&&($.J=E.o),V&&(E.i=V.G.concat(E.i)),V=Xd(E,$,1e3),$.H=Math.round(E.va*.5)+Math.round(E.va*.5*Math.random()),xt(E.h,$),$r($,ee,V)}function ku(E,V){E.H&&Me(E.H,function($,ee){Kt(V,ee,$)}),E.l&&Me({},function($,ee){Kt(V,ee,$)})}function Xd(E,V,$){$=Math.min(E.i.length,$);const ee=E.l?h(E.l.Ka,E.l,E):null;e:{var be=E.i;let gn=-1;for(;;){const Ki=["count="+$];gn==-1?$>0?(gn=be[0].g,Ki.push("ofs="+gn)):gn=0:Ki.push("ofs="+gn);let Bn=!0;for(let Ci=0;Ci<$;Ci++){var ze=be[Ci].g;const Ia=be[Ci].map;if(ze-=gn,ze<0)gn=Math.max(0,be[Ci].g-100),Bn=!1;else try{ze="req"+ze+"_"||"";try{var wt=Ia instanceof Map?Ia:Object.entries(Ia);for(const[ko,zo]of wt){let Ja=zo;l(zo)&&(Ja=Le(zo)),Ki.push(ze+ko+"="+encodeURIComponent(Ja))}}catch(ko){throw Ki.push(ze+"type="+encodeURIComponent("_badmap")),ko}}catch{ee&&ee(Ia)}}if(Bn){wt=Ki.join("&");break e}}wt=void 0}return E=E.i.splice(0,$),V.G=E,wt}function hh(E){if(!E.g&&!E.v){E.Y=1;var V=E.Da;k||F(),B||(k(),B=!0),D.add(V,E),E.A=0}}function zu(E){return E.g||E.v||E.A>=3?!1:(E.Y++,E.v=$e(h(E.Da,E),Fu(E,E.A)),E.A++,!0)}n.Da=function(){if(this.v=null,qm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var E=4*this.T;this.j.info("BP detection timer enabled: "+E),this.B=$e(h(this.Wa,this),E)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),ol(this),qm(this))};function dh(E){E.B!=null&&(s.clearTimeout(E.B),E.B=null)}function qm(E){E.g=new Ai(E,E.j,"rpc",E.Y),E.u===null&&(E.g.J=E.o),E.g.P=0;var V=It(E.na);Kt(V,"RID","rpc"),Kt(V,"SID",E.M),Kt(V,"AID",E.K),Kt(V,"CI",E.F?"0":"1"),!E.F&&E.ia&&Kt(V,"TO",E.ia),Kt(V,"TYPE","xmlhttp"),ku(E,V),E.u&&E.o&&Yc(V,E.u,E.o),E.O&&(E.g.H=E.O);var $=E.g;E=E.ba,$.M=1,$.A=on(It(V)),$.u=null,$.R=!0,la($,E)}n.Va=function(){this.C!=null&&(this.C=null,ol(this),zu(this),ot(19))};function ph(E){E.C!=null&&(s.clearTimeout(E.C),E.C=null)}function Yd(E,V){var $=null;if(E.g==V){ph(E),dh(E),E.g=null;var ee=2}else if(xe(E.h,V))$=V.G,Pt(E.h,V),ee=1;else return;if(E.I!=0){if(V.o)if(ee==1){$=V.u?V.u.length:0,V=Date.now()-V.F;var be=E.D;ee=dt(),gt(ee,new it(ee,$)),Uo(E)}else hh(E);else if(be=V.m,be==3||be==0&&V.X>0||!(ee==1&&Uu(E,V)||ee==2&&zu(E)))switch($&&$.length>0&&(V=E.h,V.i=V.i.concat($)),be){case 1:eo(E,5);break;case 4:eo(E,10);break;case 3:eo(E,6);break;default:eo(E,2)}}}function Fu(E,V){let $=E.Qa+Math.floor(Math.random()*E.Za);return E.isActive()||($*=2),$*V}function eo(E,V){if(E.j.info("Error code "+V),V==2){var $=h(E.bb,E),ee=E.Ua;const be=!ee;ee=new Vt(ee||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||$t(ee,"https"),on(ee),be?No(ee.toString(),$):lh(ee.toString(),$)}else ot(2);E.I=0,E.l&&E.l.pa(V),Zc(E),Kc(E)}n.bb=function(E){E?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Zc(E){if(E.I=0,E.ja=[],E.l){const V=mt(E.h);(V.length!=0||E.i.length!=0)&&(_(E.ja,V),_(E.ja,E.i),E.h.i.length=0,b(E.i),E.i.length=0),E.l.oa()}}function Kd(E,V,$){var ee=$ instanceof Vt?It($):new Vt($);if(ee.g!="")V&&(ee.g=V+"."+ee.g),Pn(ee,ee.u);else{var be=s.location;ee=be.protocol,V=V?V+"."+be.hostname:be.hostname,be=+be.port;const ze=new Vt(null);ee&&$t(ze,ee),V&&(ze.g=V),be&&Pn(ze,be),$&&(ze.h=$),ee=ze}return $=E.G,V=E.wa,$&&V&&Kt(ee,$,V),Kt(ee,"VER",E.ka),ku(E,ee),ee}function Zd(E,V,$){if(V&&!E.L)throw Error("Can't create secondary domain capable XhrIo object.");return V=E.Aa&&!E.ma?new oi(new Qs({ab:$})):new oi(E.ma),V.Fa(E.L),V}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mh(){}n=mh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Zl(){}Zl.prototype.g=function(E,V){return new fa(E,V)};function fa(E,V){Mt.call(this),this.g=new Kl(V),this.l=E,this.h=V&&V.messageUrlParams||null,E=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(E?E["X-WebChannel-Content-Type"]=V.messageContentType:E={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.sa&&(E?E["X-WebChannel-Client-Profile"]=V.sa:E={"X-WebChannel-Client-Profile":V.sa}),this.g.U=E,(E=V&&V.Qb)&&!W(E)&&(this.g.u=E),this.A=V&&V.supportsCrossDomainXhr||!1,this.v=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!W(V)&&(this.g.G=V,E=this.h,E!==null&&V in E&&(E=this.h,V in E&&delete E[V])),this.j=new ul(this)}g(fa,Mt),fa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fa.prototype.close=function(){ch(this.g)},fa.prototype.o=function(E){var V=this.g;if(typeof E=="string"){var $={};$.__data__=E,E=$}else this.v&&($={},$.__data__=Le(E),E=$);V.i.push(new K(V.Ya++,E)),V.I==3&&Uo(V)},fa.prototype.N=function(){this.g.l=null,delete this.j,ch(this.g),delete this.g,fa.Z.N.call(this)};function ll(E){Xe.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var V=E.__sm__;if(V){e:{for(const $ in V){E=$;break e}E=void 0}(this.i=E)&&(E=this.i,V=V!==null&&E in V?V[E]:void 0),this.data=V}else this.data=E}g(ll,Xe);function Qc(){ft.call(this),this.status=1}g(Qc,ft);function ul(E){this.g=E}g(ul,mh),ul.prototype.ra=function(){gt(this.g,"a")},ul.prototype.qa=function(E){gt(this.g,new ll(E))},ul.prototype.pa=function(E){gt(this.g,new Qc)},ul.prototype.oa=function(){gt(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,fa.prototype.send=fa.prototype.o,fa.prototype.open=fa.prototype.m,fa.prototype.close=fa.prototype.close,fj=function(){return new Zl},cj=function(){return dt()},uj=ae,cI={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,K1=ws,Po.COMPLETE="complete",lj=Po,st.EventType=Ge,Ge.OPEN="a",Ge.CLOSE="b",Ge.ERROR="c",Ge.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,gb=st,oi.prototype.listenOnce=oi.prototype.K,oi.prototype.getLastError=oi.prototype.Ha,oi.prototype.getLastErrorCode=oi.prototype.ya,oi.prototype.getStatus=oi.prototype.ca,oi.prototype.getResponseJson=oi.prototype.La,oi.prototype.getResponseText=oi.prototype.la,oi.prototype.send=oi.prototype.ea,oi.prototype.setWithCredentials=oi.prototype.Fa,oj=oi}).apply(typeof S1<"u"?S1:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gs.UNAUTHENTICATED=new gs(null),gs.GOOGLE_CREDENTIALS=new gs("google-credentials-uid"),gs.FIRST_PARTY=new gs("first-party-uid"),gs.MOCK_USER=new gs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p0="12.8.0";function ose(n){p0=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new ej("@firebase/firestore");function gv(){return Mm.logLevel}function zt(n,...e){if(Mm.logLevel<=Jn.DEBUG){const t=e.map(EO);Mm.debug(`Firestore (${p0}): ${n}`,...t)}}function Wf(n,...e){if(Mm.logLevel<=Jn.ERROR){const t=e.map(EO);Mm.error(`Firestore (${p0}): ${n}`,...t)}}function Xv(n,...e){if(Mm.logLevel<=Jn.WARN){const t=e.map(EO);Mm.warn(`Firestore (${p0}): ${n}`,...t)}}function EO(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,hj(n,i,t)}function hj(n,e,t){let i=`FIRESTORE (${p0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Wf(i),new Error(i)}function gi(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||hj(e,r,i)}function Sn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends d0{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gs.UNAUTHENTICATED)))}shutdown(){}}class use{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class cse{constructor(e){this.t=e,this.currentUser=gs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gi(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let a=new pm;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pm,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pm)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gi(typeof i.accessToken=="string",31837,{l:i}),new dj(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gi(e===null||typeof e=="string",2055,{h:e}),new gs(e)}}class fse{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=gs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class hse{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new fse(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $k{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dse{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gae(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gi(this.o===void 0,3512);const i=a=>{a.error!=null&&zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,zt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $k(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(gi(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $k(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pse(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=pse(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Wn(n,e){return n<e?-1:n>e?1:0}function fI(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return XC(r)===XC(a)?Wn(r,a):XC(r)?1:-1}return Wn(n.length,e.length)}const mse=55296,gse=57343;function XC(n){const e=n.charCodeAt(0);return e>=mse&&e<=gse}function Yv(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="__name__";class yc{constructor(e,t,i){t===void 0?t=0:t>e.length&&hn(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&hn(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return yc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yc?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=yc.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Wn(e.length,t.length)}static compareSegments(e,t){const i=yc.isNumericId(e),r=yc.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?yc.extractNumericId(e).compare(yc.extractNumericId(t)):fI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sd.fromString(e.substring(4,e.length-2))}}class Wi extends yc{construct(e,t,i){return new Wi(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Xt(pt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new Wi(t)}static emptyPath(){return new Wi([])}}const vse=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wa extends yc{construct(e,t,i){return new Wa(e,t,i)}static isValidIdentifier(e){return vse.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xk}static keyField(){return new Wa([Xk])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Xt(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let s=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new Xt(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xt(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else l==="`"?(s=!s,r++):l!=="."||s?(i+=l,r++):(a(),r++)}if(a(),s)throw new Xt(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wa(t)}static emptyPath(){return new Wa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.path=e}static fromPath(e){return new nn(Wi.fromString(e))}static fromName(e){return new nn(Wi.fromString(e).popFirst(5))}static empty(){return new nn(Wi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Wi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nn(new Wi(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(n,e,t){if(!t)throw new Xt(pt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yse(n,e,t,i){if(e===!0&&i===!0)throw new Xt(pt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Yk(n){if(!nn.isDocumentKey(n))throw new Xt(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kk(n){if(nn.isDocumentKey(n))throw new Xt(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mj(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function AO(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":hn(12329,{type:typeof n})}function wd(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Xt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=AO(n);throw new Xt(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(n,e){const t={typeString:n};return e&&(t.value=e),t}function jx(n,e){if(!mj(n))throw new Xt(pt.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const s=n[i];if(r&&typeof s!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Xt(pt.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=-62135596800,Qk=1e6;class $i{static now(){return $i.fromMillis(Date.now())}static fromDate(e){return $i.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Qk);return new $i(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Zk)throw new Xt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qk}_compareTo(e){return this.seconds===e.seconds?Wn(this.nanoseconds,e.nanoseconds):Wn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$i._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jx(e,$i._jsonSchema))return new $i(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$i._jsonSchemaVersion="firestore/timestamp/1.0",$i._jsonSchema={type:Hr("string",$i._jsonSchemaVersion),seconds:Hr("number"),nanoseconds:Hr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{static fromTimestamp(e){return new yn(e)}static min(){return new yn(new $i(0,0))}static max(){return new yn(new $i(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=-1;function bse(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=yn.fromTimestamp(i===1e9?new $i(t+1,0):new $i(t,i));return new Id(r,nn.empty(),e)}function xse(n){return new Id(n.readTime,n.key,ox)}class Id{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Id(yn.min(),nn.empty(),ox)}static max(){return new Id(yn.max(),nn.empty(),ox)}}function _se(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=nn.comparator(n.documentKey,e.documentKey),t!==0?t:Wn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sse="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wse{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m0(n){if(n.code!==pt.FAILED_PRECONDITION||n.message!==Sse)throw n;zt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new at(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof at?t:at.resolve(t)}catch(t){return at.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):at.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):at.reject(t)}static resolve(e){return new at(((t,i)=>{t(e)}))}static reject(e){return new at(((t,i)=>{i(e)}))}static waitFor(e){return new at(((t,i)=>{let r=0,a=0,s=!1;e.forEach((l=>{++r,l.next((()=>{++a,s&&a===r&&t()}),(c=>i(c)))})),s=!0,a===r&&t()}))}static or(e){let t=at.resolve(!1);for(const i of e)t=t.next((r=>r?at.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new at(((i,r)=>{const a=e.length,s=new Array(a);let l=0;for(let c=0;c<a;c++){const h=c;t(e[h]).next((p=>{s[h]=p,++l,l===a&&i(s)}),(p=>r(p)))}}))}static doWhile(e,t){return new at(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function Ese(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function g0(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tA.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=-1;function nA(n){return n==null}function hE(n){return n===0&&1/n==-1/0}function Mse(n){return typeof n=="number"&&Number.isInteger(n)&&!hE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="";function Ase(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Jk(e)),e=Tse(n.get(t),e);return Jk(e)}function Tse(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case gj:t+="";break;default:t+=a}}return t}function Jk(n){return n+gj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t){this.comparator=e,this.root=t||Ga.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ga.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ga.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new w1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new w1(this.root,e,this.comparator,!1)}getReverseIterator(){return new w1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new w1(this.root,e,this.comparator,!0)}}class w1{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ga{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??Ga.RED,this.left=r??Ga.EMPTY,this.right=a??Ga.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new Ga(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ga.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ga.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ga.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ga.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw hn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw hn(27949);return e+(this.isRed()?0:1)}}Ga.EMPTY=null,Ga.RED=!0,Ga.BLACK=!1;Ga.EMPTY=new class{constructor(){this.size=0}get key(){throw hn(57766)}get value(){throw hn(16141)}get color(){throw hn(16727)}get left(){throw hn(29726)}get right(){throw hn(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new Ga(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new t4(this.data.getIterator())}getIteratorFrom(e){return new t4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new na(this.comparator);return t.data=e,t}}class t4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.fields=e,e.sort(Wa.comparator)}static empty(){return new Xo([])}unionWith(e){let t=new na(Wa.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Xo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yv(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new yj("Invalid base64 string: "+a):a}})(e);return new Ka(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let s=0;s<r.length;++s)a+=String.fromCharCode(r[s]);return a})(e);return new Ka(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ka.EMPTY_BYTE_STRING=new Ka("");const Cse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nd(n){if(gi(!!n,39018),typeof n=="string"){let e=0;const t=Cse.exec(n);if(gi(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ir(n.seconds),nanos:Ir(n.nanos)}}function Ir(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Od(n){return typeof n=="string"?Ka.fromBase64String(n):Ka.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="server_timestamp",xj="__type__",_j="__previous_value__",Sj="__local_write_time__";function CO(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[xj])==null?void 0:i.stringValue)===bj}function iA(n){const e=n.mapValue.fields[_j];return CO(e)?iA(e):e}function lx(n){const e=Nd(n.mapValue.fields[Sj].timestampValue);return new $i(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rse{constructor(e,t,i,r,a,s,l,c,h,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=p,this.apiKey=g}}const dE="(default)";class ux{constructor(e,t){this.projectId=e,this.database=t||dE}static empty(){return new ux("","")}get isDefaultDatabase(){return this.database===dE}isEqual(e){return e instanceof ux&&e.projectId===this.projectId&&e.database===this.database}}function Pse(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Xt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ux(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="__type__",Ise="__max__",E1={mapValue:{}},Ej="__vector__",pE="value";function Dd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?CO(n)?4:Ose(n)?9007199254740991:Nse(n)?10:11:hn(28295,{value:n})}function kc(n,e){if(n===e)return!0;const t=Dd(n);if(t!==Dd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lx(n).isEqual(lx(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const s=Nd(r.timestampValue),l=Nd(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return Od(r.bytesValue).isEqual(Od(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Ir(r.geoPointValue.latitude)===Ir(a.geoPointValue.latitude)&&Ir(r.geoPointValue.longitude)===Ir(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Ir(r.integerValue)===Ir(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const s=Ir(r.doubleValue),l=Ir(a.doubleValue);return s===l?hE(s)===hE(l):isNaN(s)&&isNaN(l)}return!1})(n,e);case 9:return Yv(n.arrayValue.values||[],e.arrayValue.values||[],kc);case 10:case 11:return(function(r,a){const s=r.mapValue.fields||{},l=a.mapValue.fields||{};if(e4(s)!==e4(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!kc(s[c],l[c])))return!1;return!0})(n,e);default:return hn(52216,{left:n})}}function cx(n,e){return(n.values||[]).find((t=>kc(t,e)))!==void 0}function Kv(n,e){if(n===e)return 0;const t=Dd(n),i=Dd(e);if(t!==i)return Wn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wn(n.booleanValue,e.booleanValue);case 2:return(function(a,s){const l=Ir(a.integerValue||a.doubleValue),c=Ir(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(n,e);case 3:return n4(n.timestampValue,e.timestampValue);case 4:return n4(lx(n),lx(e));case 5:return fI(n.stringValue,e.stringValue);case 6:return(function(a,s){const l=Od(a),c=Od(s);return l.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(a,s){const l=a.split("/"),c=s.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=Wn(l[h],c[h]);if(p!==0)return p}return Wn(l.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,s){const l=Wn(Ir(a.latitude),Ir(s.latitude));return l!==0?l:Wn(Ir(a.longitude),Ir(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return i4(n.arrayValue,e.arrayValue);case 10:return(function(a,s){var v,b,_,M;const l=a.fields||{},c=s.fields||{},h=(v=l[pE])==null?void 0:v.arrayValue,p=(b=c[pE])==null?void 0:b.arrayValue,g=Wn(((_=h==null?void 0:h.values)==null?void 0:_.length)||0,((M=p==null?void 0:p.values)==null?void 0:M.length)||0);return g!==0?g:i4(h,p)})(n.mapValue,e.mapValue);case 11:return(function(a,s){if(a===E1.mapValue&&s===E1.mapValue)return 0;if(a===E1.mapValue)return 1;if(s===E1.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),h=s.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const v=fI(c[g],p[g]);if(v!==0)return v;const b=Kv(l[c[g]],h[p[g]]);if(b!==0)return b}return Wn(c.length,p.length)})(n.mapValue,e.mapValue);default:throw hn(23264,{he:t})}}function n4(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Wn(n,e);const t=Nd(n),i=Nd(e),r=Wn(t.seconds,i.seconds);return r!==0?r:Wn(t.nanos,i.nanos)}function i4(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Kv(t[r],i[r]);if(a)return a}return Wn(t.length,i.length)}function Zv(n){return hI(n)}function hI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Nd(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Od(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return nn.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=hI(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const s of i)a?a=!1:r+=",",r+=`${s}:${hI(t.fields[s])}`;return r+"}"})(n.mapValue):hn(61005,{value:n})}function Z1(n){switch(Dd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=iA(n);return e?16+Z1(e):16;case 5:return 2*n.stringValue.length;case 6:return Od(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Z1(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Hd(i.fields,((a,s)=>{r+=a.length+Z1(s)})),r})(n.mapValue);default:throw hn(13486,{value:n})}}function dI(n){return!!n&&"integerValue"in n}function RO(n){return!!n&&"arrayValue"in n}function r4(n){return!!n&&"nullValue"in n}function a4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Q1(n){return!!n&&"mapValue"in n}function Nse(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[wj])==null?void 0:i.stringValue)===Ej}function Db(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Hd(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Db(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Db(n.arrayValue.values[t]);return e}return{...n}}function Ose(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ise}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.value=e}static empty(){return new Eo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Q1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Db(t)}setAll(e){let t=Wa.emptyPath(),i={},r=[];e.forEach(((s,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=l.popLast()}s?i[l.lastSegment()]=Db(s):r.push(l.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Q1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Q1(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Hd(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Eo(Db(this.value))}}function Mj(n){const e=[];return Hd(n.fields,((t,i)=>{const r=new Wa([t]);if(Q1(i)){const a=Mj(i.mapValue).fields;if(a.length===0)e.push(r);else for(const s of a)e.push(r.child(s))}else e.push(r)})),new Xo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,i,r,a,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(e){return new vs(e,0,yn.min(),yn.min(),yn.min(),Eo.empty(),0)}static newFoundDocument(e,t,i,r){return new vs(e,1,t,yn.min(),i,r,0)}static newNoDocument(e,t){return new vs(e,2,t,yn.min(),yn.min(),Eo.empty(),0)}static newUnknownDocument(e,t){return new vs(e,3,t,yn.min(),yn.min(),Eo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Eo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t){this.position=e,this.inclusive=t}}function s4(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],s=n.position[r];if(a.field.isKeyField()?i=nn.comparator(nn.fromName(s.referenceValue),t.key):i=Kv(s,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function o4(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kc(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,t="asc"){this.field=e,this.dir=t}}function Dse(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{}class ea extends Aj{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Use(e,t,i):t==="array-contains"?new Fse(e,i):t==="in"?new Bse(e,i):t==="not-in"?new Vse(e,i):t==="array-contains-any"?new jse(e,i):new ea(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new kse(e,i):new zse(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Kv(t,this.value)):t!==null&&Dd(this.value)===Dd(t)&&this.matchesComparison(Kv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return hn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zc extends Aj{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zc(e,t)}matches(e){return Tj(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tj(n){return n.op==="and"}function Cj(n){return Lse(n)&&Tj(n)}function Lse(n){for(const e of n.filters)if(e instanceof zc)return!1;return!0}function pI(n){if(n instanceof ea)return n.field.canonicalString()+n.op.toString()+Zv(n.value);if(Cj(n))return n.filters.map((e=>pI(e))).join(",");{const e=n.filters.map((t=>pI(t))).join(",");return`${n.op}(${e})`}}function Rj(n,e){return n instanceof ea?(function(i,r){return r instanceof ea&&i.op===r.op&&i.field.isEqual(r.field)&&kc(i.value,r.value)})(n,e):n instanceof zc?(function(i,r){return r instanceof zc&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,s,l)=>a&&Rj(s,r.filters[l])),!0):!1})(n,e):void hn(19439)}function Pj(n){return n instanceof ea?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zv(t.value)}`})(n):n instanceof zc?(function(t){return t.op.toString()+" {"+t.getFilters().map(Pj).join(" ,")+"}"})(n):"Filter"}class Use extends ea{constructor(e,t,i){super(e,t,i),this.key=nn.fromName(i.referenceValue)}matches(e){const t=nn.comparator(e.key,this.key);return this.matchesComparison(t)}}class kse extends ea{constructor(e,t){super(e,"in",t),this.keys=Ij("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zse extends ea{constructor(e,t){super(e,"not-in",t),this.keys=Ij("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ij(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>nn.fromName(i.referenceValue)))}class Fse extends ea{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return RO(t)&&cx(t.arrayValue,this.value)}}class Bse extends ea{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cx(this.value.arrayValue,t)}}class Vse extends ea{constructor(e,t){super(e,"not-in",t)}matches(e){if(cx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cx(this.value.arrayValue,t)}}class jse extends ea{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!RO(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>cx(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(e,t=null,i=[],r=[],a=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=s,this.endAt=l,this.Te=null}}function l4(n,e=null,t=[],i=[],r=null,a=null,s=null){return new Hse(n,e,t,i,r,a,s)}function PO(n){const e=Sn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>pI(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),nA(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Zv(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Zv(i))).join(",")),e.Te=t}return e.Te}function IO(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Dse(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Rj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!o4(n.startAt,e.startAt)&&o4(n.endAt,e.endAt)}function mI(n){return nn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t=null,i=[],r=[],a=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Gse(n,e,t,i,r,a,s,l){return new rA(n,e,t,i,r,a,s,l)}function NO(n){return new rA(n)}function u4(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qse(n){return nn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Wse(n){return n.collectionGroup!==null}function Lb(n){const e=Sn(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new na(Wa.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new gE(a,i))})),t.has(Wa.keyField().canonicalString())||e.Ie.push(new gE(Wa.keyField(),i))}return e.Ie}function Rc(n){const e=Sn(n);return e.Ee||(e.Ee=$se(e,Lb(n))),e.Ee}function $se(n,e){if(n.limitType==="F")return l4(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new gE(r.field,a)}));const t=n.endAt?new mE(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mE(n.startAt.position,n.startAt.inclusive):null;return l4(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function gI(n,e,t){return new rA(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function aA(n,e){return IO(Rc(n),Rc(e))&&n.limitType===e.limitType}function Nj(n){return`${PO(Rc(n))}|lt:${n.limitType}`}function vv(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>Pj(r))).join(", ")}]`),nA(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Zv(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Zv(r))).join(",")),`Target(${i})`})(Rc(n))}; limitType=${n.limitType})`}function sA(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):nn.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of Lb(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(s,l,c){const h=s4(s,l,c);return s.inclusive?h<=0:h<0})(i.startAt,Lb(i),r)||i.endAt&&!(function(s,l,c){const h=s4(s,l,c);return s.inclusive?h>=0:h>0})(i.endAt,Lb(i),r))})(n,e)}function Xse(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Oj(n){return(e,t)=>{let i=!1;for(const r of Lb(n)){const a=Yse(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function Yse(n,e,t){const i=n.field.isKeyField()?nn.comparator(e.key,t.key):(function(a,s,l){const c=s.data.field(a),h=l.data.field(a);return c!==null&&h!==null?Kv(c,h):hn(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return hn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Hd(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return vj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kse=new mr(nn.comparator);function $f(){return Kse}const Dj=new mr(nn.comparator);function vb(...n){let e=Dj;for(const t of n)e=e.insert(t.key,t);return e}function Lj(n){let e=Dj;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function sm(){return Ub()}function Uj(){return Ub()}function Ub(){return new Vm((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Zse=new mr(nn.comparator),Qse=new na(nn.comparator);function $n(...n){let e=Qse;for(const t of n)e=e.add(t);return e}const Jse=new na(Wn);function eoe(){return Jse}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hE(e)?"-0":e}}function kj(n){return{integerValue:""+n}}function toe(n,e){return Mse(e)?kj(e):OO(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this._=void 0}}function noe(n,e,t){return n instanceof vE?(function(r,a){const s={fields:{[xj]:{stringValue:bj},[Sj]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&CO(a)&&(a=iA(a)),a&&(s.fields[_j]=a),{mapValue:s}})(t,e):n instanceof fx?Fj(n,e):n instanceof hx?Bj(n,e):(function(r,a){const s=zj(r,a),l=c4(s)+c4(r.Ae);return dI(s)&&dI(r.Ae)?kj(l):OO(r.serializer,l)})(n,e)}function ioe(n,e,t){return n instanceof fx?Fj(n,e):n instanceof hx?Bj(n,e):t}function zj(n,e){return n instanceof yE?(function(i){return dI(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class vE extends oA{}class fx extends oA{constructor(e){super(),this.elements=e}}function Fj(n,e){const t=Vj(e);for(const i of n.elements)t.some((r=>kc(r,i)))||t.push(i);return{arrayValue:{values:t}}}class hx extends oA{constructor(e){super(),this.elements=e}}function Bj(n,e){let t=Vj(e);for(const i of n.elements)t=t.filter((r=>!kc(r,i)));return{arrayValue:{values:t}}}class yE extends oA{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function c4(n){return Ir(n.integerValue||n.doubleValue)}function Vj(n){return RO(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function roe(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof fx&&r instanceof fx||i instanceof hx&&r instanceof hx?Yv(i.elements,r.elements,kc):i instanceof yE&&r instanceof yE?kc(i.Ae,r.Ae):i instanceof vE&&r instanceof vE})(n.transform,e.transform)}class aoe{constructor(e,t){this.version=e,this.transformResults=t}}class Mu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mu}static exists(e){return new Mu(void 0,e)}static updateTime(e){return new Mu(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function J1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lA{}function jj(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new DO(n.key,Mu.none()):new Hx(n.key,n.data,Mu.none());{const t=n.data,i=Eo.empty();let r=new na(Wa.comparator);for(let a of e.fields)if(!r.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?i.delete(a):i.set(a,s),r=r.add(a)}return new Gd(n.key,i,new Xo(r.toArray()),Mu.none())}}function soe(n,e,t){n instanceof Hx?(function(r,a,s){const l=r.value.clone(),c=h4(r.fieldTransforms,a,s.transformResults);l.setAll(c),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):n instanceof Gd?(function(r,a,s){if(!J1(r.precondition,a))return void a.convertToUnknownDocument(s.version);const l=h4(r.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(Hj(r)),c.setAll(l),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(r,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function kb(n,e,t,i){return n instanceof Hx?(function(a,s,l,c){if(!J1(a.precondition,s))return l;const h=a.value.clone(),p=d4(a.fieldTransforms,c,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Gd?(function(a,s,l,c){if(!J1(a.precondition,s))return l;const h=d4(a.fieldTransforms,c,s),p=s.data;return p.setAll(Hj(a)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,i):(function(a,s,l){return J1(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(n,e,t)}function ooe(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=zj(i.transform,r||null);a!=null&&(t===null&&(t=Eo.empty()),t.set(i.field,a))}return t||null}function f4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Yv(i,r,((a,s)=>roe(a,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Hx extends lA{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gd extends lA{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Hj(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function h4(n,e,t){const i=new Map;gi(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],s=a.transform,l=e.data.field(a.field);i.set(a.field,ioe(s,l,t[r]))}return i}function d4(n,e,t){const i=new Map;for(const r of n){const a=r.transform,s=t.data.field(r.field);i.set(r.field,noe(a,s,e))}return i}class DO extends lA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class loe extends lA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uoe{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&soe(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=kb(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=kb(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Uj();return this.mutations.forEach((r=>{const a=e.get(r.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=t.has(r.key)?null:l;const c=jj(s,l);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(yn.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$n())}isEqual(e){return this.batchId===e.batchId&&Yv(this.mutations,e.mutations,((t,i)=>f4(t,i)))&&Yv(this.baseMutations,e.baseMutations,((t,i)=>f4(t,i)))}}class LO{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){gi(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return Zse})();const a=e.mutations;for(let s=0;s<a.length;s++)r=r.insert(a[s].key,i[s].version);return new LO(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class coe{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class foe{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr,Qn;function hoe(n){switch(n){case pt.OK:return hn(64938);case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0;default:return hn(15467,{code:n})}}function Gj(n){if(n===void 0)return Wf("GRPC error has no .code"),pt.UNKNOWN;switch(n){case jr.OK:return pt.OK;case jr.CANCELLED:return pt.CANCELLED;case jr.UNKNOWN:return pt.UNKNOWN;case jr.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case jr.INTERNAL:return pt.INTERNAL;case jr.UNAVAILABLE:return pt.UNAVAILABLE;case jr.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case jr.NOT_FOUND:return pt.NOT_FOUND;case jr.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case jr.ABORTED:return pt.ABORTED;case jr.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case jr.DATA_LOSS:return pt.DATA_LOSS;default:return hn(39323,{code:n})}}(Qn=jr||(jr={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function doe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const poe=new Sd([4294967295,4294967295],0);function p4(n){const e=doe().encode(n),t=new sj;return t.update(e),new Uint8Array(t.digest())}function m4(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Sd([t,i],0),new Sd([r,a],0)]}class UO{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new yb(`Invalid padding: ${t}`);if(i<0)throw new yb(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new yb(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new yb(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Sd.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Sd.fromNumber(i)));return r.compare(poe)===1&&(r=new Sd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=p4(e),[i,r]=m4(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(i,r,a);if(!this.we(s))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new UO(a,r,t);return i.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const t=p4(e),[i,r]=m4(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(i,r,a);this.be(s)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class yb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Gx.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new uA(yn.min(),r,new mr(Wn),$f(),$n())}}class Gx{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Gx(i,t,$n(),$n(),$n())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class qj{constructor(e,t){this.targetId=e,this.Ce=t}}class Wj{constructor(e,t,i=Ka.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class g4{constructor(){this.ve=0,this.Fe=v4(),this.Me=Ka.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$n(),t=$n(),i=$n();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:hn(38017,{changeType:a})}})),new Gx(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=v4()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,gi(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class moe{constructor(e){this.Ge=e,this.ze=new Map,this.je=$f(),this.He=M1(),this.Je=M1(),this.Ze=new mr(Wn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:hn(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(mI(a))if(i===0){const s=new nn(a.path);this.et(t,s,vs.newNoDocument(s,yn.min()))}else gi(i===1,20013,{expectedCount:i});else{const s=this._t(t);if(s!==i){const l=this.ut(e),c=l?this.ct(l,e,s):1;if(c!==0){this.it(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let s,l;try{s=Od(i).toUint8Array()}catch(c){if(c instanceof yj)return Xv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new UO(s,r,a)}catch(c){return Xv(c instanceof yb?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,s)=>{const l=this.ot(s);if(l){if(a.current&&mI(l.target)){const c=new nn(l.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,vs.newNoDocument(c,e))}a.Be&&(t.set(s,a.ke()),a.Ke())}}));let i=$n();this.Je.forEach(((a,s)=>{let l=!0;s.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(i=i.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const r=new uA(e,t,this.Ze,this.je,i);return this.je=$f(),this.He=M1(),this.Je=M1(),this.Ze=new mr(Wn),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new g4,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new na(Wn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new na(Wn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||zt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new g4),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function M1(){return new mr(nn.comparator)}function v4(){return new mr(nn.comparator)}const goe={asc:"ASCENDING",desc:"DESCENDING"},voe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yoe={and:"AND",or:"OR"};class boe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vI(n,e){return n.useProto3Json||nA(e)?e:{value:e}}function bE(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $j(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xoe(n,e){return bE(n,e.toTimestamp())}function Pc(n){return gi(!!n,49232),yn.fromTimestamp((function(t){const i=Nd(t);return new $i(i.seconds,i.nanos)})(n))}function kO(n,e){return yI(n,e).canonicalString()}function yI(n,e){const t=(function(r){return new Wi(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Xj(n){const e=Wi.fromString(n);return gi(Jj(e),10190,{key:e.toString()}),e}function bI(n,e){return kO(n.databaseId,e.path)}function YC(n,e){const t=Xj(e);if(t.get(1)!==n.databaseId.projectId)throw new Xt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Xt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nn(Kj(t))}function Yj(n,e){return kO(n.databaseId,e)}function _oe(n){const e=Xj(n);return e.length===4?Wi.emptyPath():Kj(e)}function xI(n){return new Wi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kj(n){return gi(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function y4(n,e,t){return{name:bI(n,e),fields:t.value.mapValue.fields}}function Soe(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:hn(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(gi(p===void 0||typeof p=="string",58123),Ka.fromBase64String(p||"")):(gi(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Ka.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(h){const p=h.code===void 0?pt.UNKNOWN:Gj(h.code);return new Xt(p,h.message||"")})(s);t=new Wj(i,r,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=YC(n,i.document.name),a=Pc(i.document.updateTime),s=i.document.createTime?Pc(i.document.createTime):yn.min(),l=new Eo({mapValue:{fields:i.document.fields}}),c=vs.newFoundDocument(r,a,s,l),h=i.targetIds||[],p=i.removedTargetIds||[];t=new ew(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=YC(n,i.document),a=i.readTime?Pc(i.readTime):yn.min(),s=vs.newNoDocument(r,a),l=i.removedTargetIds||[];t=new ew([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=YC(n,i.document),a=i.removedTargetIds||[];t=new ew([],a,r,null)}else{if(!("filter"in e))return hn(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,s=new foe(r,a),l=i.targetId;t=new qj(l,s)}}return t}function woe(n,e){let t;if(e instanceof Hx)t={update:y4(n,e.key,e.value)};else if(e instanceof DO)t={delete:bI(n,e.key)};else if(e instanceof Gd)t={update:y4(n,e.key,e.data),updateMask:Noe(e.fieldMask)};else{if(!(e instanceof loe))return hn(16599,{dt:e.type});t={verify:bI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,s){const l=s.transform;if(l instanceof vE)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fx)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof hx)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yE)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw hn(20930,{transform:s.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:xoe(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:hn(27497)})(n,e.precondition)),t}function Eoe(n,e){return n&&n.length>0?(gi(e!==void 0,14353),n.map((t=>(function(r,a){let s=r.updateTime?Pc(r.updateTime):Pc(a);return s.isEqual(yn.min())&&(s=Pc(a)),new aoe(s,r.transformResults||[])})(t,e)))):[]}function Moe(n,e){return{documents:[Yj(n,e.path)]}}function Aoe(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Yj(n,r);const a=(function(h){if(h.length!==0)return Qj(zc.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const s=(function(h){if(h.length!==0)return h.map((p=>(function(v){return{field:yv(v.field),direction:Roe(v.dir)}})(p)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=vI(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function Toe(n){let e=_oe(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){gi(i===1,65062);const p=t.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(g){const v=Zj(g);return v instanceof zc&&Cj(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(g){return g.map((v=>(function(_){return new gE(bv(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(v)))})(t.orderBy));let l=null;t.limit&&(l=(function(g){let v;return v=typeof g=="object"?g.value:g,nA(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(g){const v=!!g.before,b=g.values||[];return new mE(b,v)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const v=!g.before,b=g.values||[];return new mE(b,v)})(t.endAt)),Gse(e,r,s,a,l,"F",c,h)}function Coe(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hn(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zj(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=bv(t.unaryFilter.field);return ea.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=bv(t.unaryFilter.field);return ea.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bv(t.unaryFilter.field);return ea.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=bv(t.unaryFilter.field);return ea.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return hn(61313);default:return hn(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ea.create(bv(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return hn(58110);default:return hn(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zc.create(t.compositeFilter.filters.map((i=>Zj(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return hn(1026)}})(t.compositeFilter.op))})(n):hn(30097,{filter:n})}function Roe(n){return goe[n]}function Poe(n){return voe[n]}function Ioe(n){return yoe[n]}function yv(n){return{fieldPath:n.canonicalString()}}function bv(n){return Wa.fromServerFormat(n.fieldPath)}function Qj(n){return n instanceof ea?(function(t){if(t.op==="=="){if(a4(t.value))return{unaryFilter:{field:yv(t.field),op:"IS_NAN"}};if(r4(t.value))return{unaryFilter:{field:yv(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(a4(t.value))return{unaryFilter:{field:yv(t.field),op:"IS_NOT_NAN"}};if(r4(t.value))return{unaryFilter:{field:yv(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yv(t.field),op:Poe(t.op),value:t.value}}})(n):n instanceof zc?(function(t){const i=t.getFilters().map((r=>Qj(r)));return i.length===1?i[0]:{compositeFilter:{op:Ioe(t.op),filters:i}}})(n):hn(54877,{filter:n})}function Noe(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Jj(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function e8(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,i,r,a=yn.min(),s=yn.min(),l=Ka.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new vd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ooe{constructor(e){this.yt=e}}function Doe(n){const e=Toe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gI(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Loe{constructor(){this.Sn=new Uoe}addToCollectionParentIndex(e,t){return this.Sn.add(t),at.resolve()}getCollectionParents(e,t){return at.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return at.resolve()}deleteFieldIndex(e,t){return at.resolve()}deleteAllFieldIndexes(e){return at.resolve()}createTargetIndexes(e,t){return at.resolve()}getDocumentsMatchingTarget(e,t){return at.resolve(null)}getIndexType(e,t){return at.resolve(0)}getFieldIndexes(e,t){return at.resolve([])}getNextCollectionGroupToUpdate(e){return at.resolve(null)}getMinOffset(e,t){return at.resolve(Id.min())}getMinOffsetFromCollectionGroup(e,t){return at.resolve(Id.min())}updateCollectionGroup(e,t,i){return at.resolve()}updateIndexEntries(e,t){return at.resolve()}}class Uoe{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new na(Wi.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new na(Wi.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},t8=41943040;class So{static withCacheSize(e){return new So(e,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */So.DEFAULT_COLLECTION_PERCENTILE=10,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,So.DEFAULT=new So(t8,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),So.DISABLED=new So(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Qv(0)}static ar(){return new Qv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="LruGarbageCollector",koe=1048576;function _4([n,e],[t,i]){const r=Wn(n,t);return r===0?Wn(e,i):r}class zoe{constructor(e){this.Pr=e,this.buffer=new na(_4),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();_4(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Foe{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){zt(x4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){g0(t)?zt(x4,"Ignoring IndexedDB error during garbage collection: ",t):await m0(t)}await this.Ar(3e5)}))}}class Boe{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return at.resolve(tA.ce);const i=new zoe(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(zt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(b4)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b4):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,s,l,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,s=Date.now(),this.nthSequenceNumber(e,r)))).next((g=>(i=g,l=Date.now(),this.removeTargets(e,i,t)))).next((g=>(a=g,c=Date.now(),this.removeOrphanedDocuments(e,i)))).next((g=>(h=Date.now(),gv()<=Jn.DEBUG&&zt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${r} in `+(l-s)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:g}))))}}function Voe(n,e){return new Boe(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class joe{constructor(){this.changes=new Vm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?at.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Goe{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&kb(i.mutation,r,Xo.empty(),$i.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,$n()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=$n()){const r=sm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let s=vb();return a.forEach(((l,c)=>{s=s.insert(l,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const i=sm();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,$n())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((s,l)=>{t.set(s,l)}))}))}computeViews(e,t,i,r){let a=$f();const s=Ub(),l=(function(){return Ub()})();return t.forEach(((c,h)=>{const p=i.get(h.key);r.has(h.key)&&(p===void 0||p.mutation instanceof Gd)?a=a.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),kb(p.mutation,h,p.mutation.getFieldMask(),$i.now())):s.set(h.key,Xo.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((h,p)=>s.set(h,p))),t.forEach(((h,p)=>l.set(h,new Hoe(p,s.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,t){const i=Ub();let r=new mr(((s,l)=>s-l)),a=$n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const l of s)l.keys().forEach((c=>{const h=t.get(c);if(h===null)return;let p=i.get(c)||Xo.empty();p=l.applyToLocalView(h,p),i.set(c,p);const g=(r.get(l.batchId)||$n()).add(c);r=r.insert(l.batchId,g)}))})).next((()=>{const s=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,g=Uj();p.forEach((v=>{if(!a.has(v)){const b=jj(t.get(v),i.get(v));b!==null&&g.set(v,b),a=a.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,g))}return at.waitFor(s)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return qse(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wse(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const s=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):at.resolve(sm());let l=ox,c=a;return s.next((h=>at.forEach(h,((p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),a.get(p)?at.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{c=c.insert(p,v)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,c,h,$n()))).next((p=>({batchId:l,changes:Lj(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nn(t)).next((i=>{let r=vb();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let s=vb();return this.indexManager.getCollectionParents(e,a).next((l=>at.forEach(l,(c=>{const h=(function(g,v){return new rA(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((p=>{p.forEach(((g,v)=>{s=s.insert(g,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((s=>{a.forEach(((c,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,vs.newInvalidDocument(p)))}));let l=vb();return s.forEach(((c,h)=>{const p=a.get(c);p!==void 0&&kb(p.mutation,h,Xo.empty(),$i.now()),sA(t,h)&&(l=l.insert(c,h))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qoe{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return at.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Pc(r.createTime)}})(t)),at.resolve()}getNamedQuery(e,t){return at.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:Doe(r.bundledQuery),readTime:Pc(r.readTime)}})(t)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Woe{constructor(){this.overlays=new mr(nn.comparator),this.Lr=new Map}getOverlay(e,t){return at.resolve(this.overlays.get(t))}getOverlays(e,t){const i=sm();return at.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),at.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),at.resolve()}getOverlaysForCollection(e,t,i){const r=sm(),a=t.length+1,s=new nn(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&c.largestBatchId>i&&r.set(c.getKey(),c)}return at.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new mr(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let p=a.get(h.largestBatchId);p===null&&(p=sm(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=sm(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,p)=>l.set(h,p))),!(l.size()>=r)););return at.resolve(l)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const s=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new coe(t,i));let a=this.Lr.get(t);a===void 0&&(a=$n(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $oe{constructor(){this.sessionToken=Ka.EMPTY_BYTE_STRING}getSessionToken(e){return at.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,at.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.kr=new na(ba.Kr),this.qr=new na(ba.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new ba(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new ba(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new nn(new Wi([])),i=new ba(t,e),r=new ba(t,e+1),a=[];return this.qr.forEachInRange([i,r],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new nn(new Wi([])),i=new ba(t,e),r=new ba(t,e+1);let a=$n();return this.qr.forEachInRange([i,r],(s=>{a=a.add(s.key)})),a}containsKey(e){const t=new ba(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class ba{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return nn.comparator(e.key,t.key)||Wn(e.Hr,t.Hr)}static Ur(e,t){return Wn(e.Hr,t.Hr)||nn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xoe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new na(ba.Kr)}checkEmpty(e){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new uoe(a,t,i,r);this.mutationQueue.push(s);for(const l of r)this.Jr=this.Jr.add(new ba(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return at.resolve(s)}lookupMutationBatch(e,t){return at.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return at.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?TO:this.Yn-1)}getAllMutationBatches(e){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ba(t,0),r=new ba(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(s=>{const l=this.Zr(s.Hr);a.push(l)})),at.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new na(Wn);return t.forEach((r=>{const a=new ba(r,0),s=new ba(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(l=>{i=i.add(l.Hr)}))})),at.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;nn.isDocumentKey(a)||(a=a.child(""));const s=new ba(new nn(a),0);let l=new na(Wn);return this.Jr.forEachWhile((c=>{const h=c.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Hr)),!0)}),s),at.resolve(this.Yr(l))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){gi(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return at.forEach(t.mutations,(r=>{const a=new ba(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new ba(t,0),r=this.Jr.firstAfterOrEqual(i);return at.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,at.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yoe{constructor(e){this.ti=e,this.docs=(function(){return new mr(nn.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,s=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return at.resolve(i?i.document.mutableCopy():vs.newInvalidDocument(t))}getEntries(e,t){let i=$f();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():vs.newInvalidDocument(r))})),at.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=$f();const s=t.path,l=new nn(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||_se(xse(p),i)<=0||(r.has(p.key)||sA(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return at.resolve(a)}getAllFromCollectionGroup(e,t,i,r){hn(9500)}ni(e,t){return at.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Koe(this)}getSize(e){return at.resolve(this.size)}}class Koe extends joe{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),at.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zoe{constructor(e){this.persistence=e,this.ri=new Vm((t=>PO(t)),IO),this.lastRemoteSnapshotVersion=yn.min(),this.highestTargetId=0,this.ii=0,this.si=new zO,this.targetCount=0,this.oi=Qv._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),at.resolve()}getLastRemoteSnapshotVersion(e){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return at.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),at.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Qv(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,at.resolve()}updateTargetData(e,t){return this.lr(t),at.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,at.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((s,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),at.waitFor(a).next((()=>r))}getTargetCount(e){return at.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return at.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),at.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((s=>{a.push(r.markPotentiallyOrphaned(e,s))})),at.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),at.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return at.resolve(i)}containsKey(e,t){return at.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,t){this._i={},this.overlays={},this.ai=new tA(0),this.ui=!1,this.ui=!0,this.ci=new $oe,this.referenceDelegate=e(this),this.li=new Zoe(this),this.indexManager=new Loe,this.remoteDocumentCache=(function(r){return new Yoe(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new Ooe(t),this.Pi=new qoe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Woe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new Xoe(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){zt("MemoryPersistence","Starting transaction:",e);const r=new Qoe(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return at.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class Qoe extends wse{constructor(e){super(),this.currentSequenceNumber=e}}class FO{constructor(e){this.persistence=e,this.Ri=new zO,this.Ai=null}static Vi(e){return new FO(e)}get di(){if(this.Ai)return this.Ai;throw hn(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),at.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),at.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),at.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.di,(i=>{const r=nn.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,yn.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return at.or([()=>at.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class xE{constructor(e,t){this.persistence=e,this.fi=new Vm((i=>Ase(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=Voe(this,t)}static Vi(e,t){return new xE(e,t)}Ti(){}Ii(e){return at.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return at.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?at.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(s=>this.wr(e,s,t).next((l=>{l||(i++,a.removeEntry(s,yn.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),at.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),at.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),at.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),at.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Z1(e.data.value)),t}wr(e,t,i){return at.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return at.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=$n(),r=$n();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new BO(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Joe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ele{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Vre()?8:Ese(Fre())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Joe;return this.ys(e,t,s).next((l=>{if(a.result=l,this.As)return this.ws(e,t,s,l.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(gv()<=Jn.DEBUG&&zt("QueryEngine","SDK will not create cache indexes for query:",vv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),at.resolve()):(gv()<=Jn.DEBUG&&zt("QueryEngine","Query:",vv(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(gv()<=Jn.DEBUG&&zt("QueryEngine","The SDK decides to create cache indexes for query:",vv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rc(t))):at.resolve())}gs(e,t){if(u4(t))return at.resolve(null);let i=Rc(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=gI(t,null,"F"),i=Rc(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const s=$n(...a);return this.fs.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,i).next((c=>{const h=this.bs(t,l);return this.Ss(t,h,s,c.readTime)?this.gs(e,gI(t,null,"F")):this.Ds(e,h,t,c)}))))})))))}ps(e,t,i,r){return u4(t)||r.isEqual(yn.min())?at.resolve(null):this.fs.getDocuments(e,i).next((a=>{const s=this.bs(t,a);return this.Ss(t,s,i,r)?at.resolve(null):(gv()<=Jn.DEBUG&&zt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vv(t)),this.Ds(e,s,t,bse(r,ox)).next((l=>l)))}))}bs(e,t){let i=new na(Oj(e));return t.forEach(((r,a)=>{sA(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return gv()<=Jn.DEBUG&&zt("QueryEngine","Using full collection scan to execute query:",vv(t)),this.fs.getDocumentsMatchingQuery(e,t,Id.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="LocalStore",tle=3e8;class nle{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new mr(Wn),this.Fs=new Vm((a=>PO(a)),IO),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Goe(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function ile(n,e,t,i){return new nle(n,e,t,i)}async function i8(n,e){const t=Sn(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const s=[],l=[];let c=$n();for(const h of r){s.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of a){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(i,c).next((h=>({Ns:h,removedBatchIds:s,addedBatchIds:l})))}))}))}function rle(n,e){const t=Sn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,p){const g=h.batch,v=g.keys();let b=at.resolve();return v.forEach((_=>{b=b.next((()=>p.getEntry(c,_))).next((M=>{const S=h.docVersions.get(_);gi(S!==null,48541),M.version.compareTo(S)<0&&(g.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),p.addEntry(M)))}))})),b.next((()=>l.mutationQueue.removeMutationBatch(c,g)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(l){let c=$n();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function r8(n){const e=Sn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function ale(n,e){const t=Sn(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const l=[];e.targetChanges.forEach(((p,g)=>{const v=r.get(g);if(!v)return;l.push(t.li.removeMatchingKeys(a,p.removedDocuments,g).next((()=>t.li.addMatchingKeys(a,p.addedDocuments,g))));let b=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Ka.EMPTY_BYTE_STRING,yn.min()).withLastLimboFreeSnapshotVersion(yn.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,i)),r=r.insert(g,b),(function(M,S,w){return M.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=tle?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(v,b,p)&&l.push(t.li.updateTargetData(a,b))}));let c=$f(),h=$n();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(sle(a,s,e.documentUpdates).next((p=>{c=p.Bs,h=p.Ls}))),!i.isEqual(yn.min())){const p=t.li.getLastRemoteSnapshotVersion(a).next((g=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));l.push(p)}return at.waitFor(l).next((()=>s.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,c,h))).next((()=>c))})).then((a=>(t.vs=r,a)))}function sle(n,e,t){let i=$n(),r=$n();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let s=$f();return t.forEach(((l,c)=>{const h=a.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(yn.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):zt(VO,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{Bs:s,Ls:r}}))}function ole(n,e){const t=Sn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=TO),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function lle(n,e){const t=Sn(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,at.resolve(r)):t.li.allocateTargetId(i).next((s=>(r=new vd(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function _I(n,e,t){const i=Sn(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!g0(s))throw s;zt(VO,`Failed to update sequence numbers for target ${e}: ${s}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function S4(n,e,t){const i=Sn(n);let r=yn.min(),a=$n();return i.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,h,p){const g=Sn(c),v=g.Fs.get(p);return v!==void 0?at.resolve(g.vs.get(v)):g.li.getTargetData(h,p)})(i,s,Rc(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(s,l.targetId).next((c=>{a=c}))})).next((()=>i.Cs.getDocumentsMatchingQuery(s,e,t?r:yn.min(),t?a:$n()))).next((l=>(ule(i,Xse(e),l),{documents:l,ks:a})))))}function ule(n,e,t){let i=n.Ms.get(e)||yn.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class w4{constructor(){this.activeTargetIds=eoe()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cle{constructor(){this.vo=new w4,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new w4,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fle{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="ConnectivityMonitor";class M4{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){zt(E4,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){zt(E4,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A1=null;function SI(){return A1===null?A1=(function(){return 268435456+Math.round(2147483648*Math.random())})():A1++,"0x"+A1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="RestConnection",hle={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class dle{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===dE?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const s=SI(),l=this.Qo(e,t.toUriEncodedString());zt(KC,`Sending RPC '${e}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,r,a);const{host:h}=new URL(l),p=SO(h);return this.zo(e,l,c,i,p).then((g=>(zt(KC,`Received RPC '${e}' ${s}: `,g),g)),(g=>{throw Xv(KC,`RPC '${e}' ${s} failed with error: `,g,"url: ",l,"request:",i),g}))}jo(e,t,i,r,a,s){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+p0})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=hle[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ple{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="WebChannelConnection",ib=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Iv extends dle{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Iv.c_){const e=cj();ib(e,uj.STAT_EVENT,(t=>{t.stat===cI.PROXY?zt(ps,"STAT_EVENT: detected buffering proxy"):t.stat===cI.NOPROXY&&zt(ps,"STAT_EVENT: detected no buffering proxy")})),Iv.c_=!0}}zo(e,t,i,r,a){const s=SI();return new Promise(((l,c)=>{const h=new oj;h.setWithCredentials(!0),h.listenOnce(lj.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case K1.NO_ERROR:const g=h.getResponseJson();zt(ps,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),l(g);break;case K1.TIMEOUT:zt(ps,`RPC '${e}' ${s} timed out`),c(new Xt(pt.DEADLINE_EXCEEDED,"Request time out"));break;case K1.HTTP_ERROR:const v=h.getStatus();if(zt(ps,`RPC '${e}' ${s} failed with status:`,v,"response text:",h.getResponseText()),v>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const _=b==null?void 0:b.error;if(_&&_.status&&_.message){const M=(function(w){const R=w.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(R)>=0?R:pt.UNKNOWN})(_.status);c(new Xt(M,_.message))}else c(new Xt(pt.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Xt(pt.UNAVAILABLE,"Connection failed."));break;default:hn(9055,{l_:e,streamId:s,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{zt(ps,`RPC '${e}' ${s} completed.`)}}));const p=JSON.stringify(r);zt(ps,`RPC '${e}' ${s} sending request:`,r),h.send(t,"POST",p,i,15)}))}T_(e,t,i){const r=SI(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const h=a.join("");zt(ps,`Creating RPC '${e}' stream ${r}: ${h}`,l);const p=s.createWebChannel(h,l);this.I_(p);let g=!1,v=!1;const b=new ple({Ho:_=>{v?zt(ps,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(g||(zt(ps,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),zt(ps,`RPC '${e}' stream ${r} sending:`,_),p.send(_))},Jo:()=>p.close()});return ib(p,gb.EventType.OPEN,(()=>{v||(zt(ps,`RPC '${e}' stream ${r} transport opened.`),b.i_())})),ib(p,gb.EventType.CLOSE,(()=>{v||(v=!0,zt(ps,`RPC '${e}' stream ${r} transport closed`),b.o_(),this.E_(p))})),ib(p,gb.EventType.ERROR,(_=>{v||(v=!0,Xv(ps,`RPC '${e}' stream ${r} transport errored. Name:`,_.name,"Message:",_.message),b.o_(new Xt(pt.UNAVAILABLE,"The operation could not be completed")))})),ib(p,gb.EventType.MESSAGE,(_=>{var M;if(!v){const S=_.data[0];gi(!!S,16349);const w=S,R=(w==null?void 0:w.error)||((M=w[0])==null?void 0:M.error);if(R){zt(ps,`RPC '${e}' stream ${r} received error:`,R);const P=R.status;let O=(function(D){const F=jr[D];if(F!==void 0)return Gj(F)})(P),k=R.message;O===void 0&&(O=pt.INTERNAL,k="Unknown error status: "+P+" with message "+R.message),v=!0,b.o_(new Xt(O,k)),p.close()}else zt(ps,`RPC '${e}' stream ${r} received:`,S),b.__(S)}})),Iv.u_(),setTimeout((()=>{b.s_()}),0),b}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return fj()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mle(n){return new Iv(n)}function ZC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n){return new boe(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Iv.c_=!1;class a8{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&zt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="PersistentStream";class s8{constructor(e,t,i,r,a,s,l,c){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a8(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===pt.RESOURCE_EXHAUSTED?(Wf(t.toString()),Wf("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===pt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Xt(pt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return zt(A4,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(zt(A4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gle extends s8{constructor(e,t,i,r,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Soe(this.serializer,e),i=(function(a){if(!("targetChange"in a))return yn.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?yn.min():s.readTime?Pc(s.readTime):yn.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=xI(this.serializer),t.addTarget=(function(a,s){let l;const c=s.target;if(l=mI(c)?{documents:Moe(a,c)}:{query:Aoe(a,c).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=$j(a,s.resumeToken);const h=vI(a,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(yn.min())>0){l.readTime=bE(a,s.snapshotVersion.toTimestamp());const h=vI(a,s.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const i=Coe(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=xI(this.serializer),t.removeTarget=e,this.K_(t)}}class vle extends s8{constructor(e,t,i,r,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return gi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gi(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Eoe(e.writeResults,e.commitTime),i=Pc(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=xI(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>woe(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yle{}class ble extends yle{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Xt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,yI(t,i),r,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xt(pt.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.jo(e,yI(t,i),r,s,l,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(pt.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function xle(n,e,t,i){return new ble(n,e,t,i)}class _le{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wf(t),this.aa=!1):zt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="RemoteStore";class Sle{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{i.enqueueAndForget((async()=>{jm(this)&&(zt(Am,"Restarting streams for network reachability change."),await(async function(c){const h=Sn(c);h.Ea.add(4),await qx(h),h.Va.set("Unknown"),h.Ea.delete(4),await fA(h)})(this))}))})),this.Va=new _le(i,r)}}async function fA(n){if(jm(n))for(const e of n.Ra)await e(!0)}async function qx(n){for(const e of n.Ra)await e(!1)}function o8(n,e){const t=Sn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qO(t)?GO(t):v0(t).O_()&&HO(t,e))}function jO(n,e){const t=Sn(n),i=v0(t);t.Ia.delete(e),i.O_()&&l8(t,e),t.Ia.size===0&&(i.O_()?i.L_():jm(t)&&t.Va.set("Unknown"))}function HO(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}v0(n).Z_(e)}function l8(n,e){n.da.$e(e),v0(n).X_(e)}function GO(n){n.da=new moe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),v0(n).start(),n.Va.ua()}function qO(n){return jm(n)&&!v0(n).x_()&&n.Ia.size>0}function jm(n){return Sn(n).Ea.size===0}function u8(n){n.da=void 0}async function wle(n){n.Va.set("Online")}async function Ele(n){n.Ia.forEach(((e,t)=>{HO(n,e)}))}async function Mle(n,e){u8(n),qO(n)?(n.Va.ha(e),GO(n)):n.Va.set("Unknown")}async function Ale(n,e,t){if(n.Va.set("Online"),e instanceof Wj&&e.state===2&&e.cause)try{await(async function(r,a){const s=a.cause;for(const l of a.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,s),r.Ia.delete(l),r.da.removeTarget(l))})(n,e)}catch(i){zt(Am,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _E(n,i)}else if(e instanceof ew?n.da.Xe(e):e instanceof qj?n.da.st(e):n.da.tt(e),!t.isEqual(yn.min()))try{const i=await r8(n.localStore);t.compareTo(i)>=0&&await(function(a,s){const l=a.da.Tt(s);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(c.resumeToken,s))}})),l.targetMismatches.forEach(((c,h)=>{const p=a.Ia.get(c);if(!p)return;a.Ia.set(c,p.withResumeToken(Ka.EMPTY_BYTE_STRING,p.snapshotVersion)),l8(a,c);const g=new vd(p.target,c,h,p.sequenceNumber);HO(a,g)})),a.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(i){zt(Am,"Failed to raise snapshot:",i),await _E(n,i)}}async function _E(n,e,t){if(!g0(e))throw e;n.Ea.add(1),await qx(n),n.Va.set("Offline"),t||(t=()=>r8(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{zt(Am,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await fA(n)}))}function c8(n,e){return e().catch((t=>_E(n,t,e)))}async function hA(n){const e=Sn(n),t=Ld(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:TO;for(;Tle(e);)try{const r=await ole(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,Cle(e,r)}catch(r){await _E(e,r)}f8(e)&&h8(e)}function Tle(n){return jm(n)&&n.Ta.length<10}function Cle(n,e){n.Ta.push(e);const t=Ld(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function f8(n){return jm(n)&&!Ld(n).x_()&&n.Ta.length>0}function h8(n){Ld(n).start()}async function Rle(n){Ld(n).ra()}async function Ple(n){const e=Ld(n);for(const t of n.Ta)e.ea(t.mutations)}async function Ile(n,e,t){const i=n.Ta.shift(),r=LO.from(i,e,t);await c8(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await hA(n)}async function Nle(n,e){e&&Ld(n).Y_&&await(async function(i,r){if((function(s){return hoe(s)&&s!==pt.ABORTED})(r.code)){const a=i.Ta.shift();Ld(i).B_(),await c8(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await hA(i)}})(n,e),f8(n)&&h8(n)}async function T4(n,e){const t=Sn(n);t.asyncQueue.verifyOperationInProgress(),zt(Am,"RemoteStore received new credentials");const i=jm(t);t.Ea.add(3),await qx(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await fA(t)}async function Ole(n,e){const t=Sn(n);e?(t.Ea.delete(2),await fA(t)):e||(t.Ea.add(2),await qx(t),t.Va.set("Unknown"))}function v0(n){return n.ma||(n.ma=(function(t,i,r){const a=Sn(t);return a.sa(),new gle(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:wle.bind(null,n),Yo:Ele.bind(null,n),t_:Mle.bind(null,n),J_:Ale.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),qO(n)?GO(n):n.Va.set("Unknown")):(await n.ma.stop(),u8(n))}))),n.ma}function Ld(n){return n.fa||(n.fa=(function(t,i,r){const a=Sn(t);return a.sa(),new vle(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Rle.bind(null,n),t_:Nle.bind(null,n),ta:Ple.bind(null,n),na:Ile.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await hA(n)):(await n.fa.stop(),n.Ta.length>0&&(zt(Am,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new pm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const s=Date.now()+i,l=new WO(e,t,s,r,a);return l.start(i),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $O(n,e){if(Wf("AsyncQueue",`${e}: ${n}`),g0(n))return new Xt(pt.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{static emptySet(e){return new Nv(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||nn.comparator(t.key,i.key):(t,i)=>nn.comparator(t.key,i.key),this.keyedMap=vb(),this.sortedSet=new mr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Nv;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.ga=new mr(nn.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):hn(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Jv{constructor(e,t,i,r,a,s,l,c,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,a){const s=[];return t.forEach((l=>{s.push({type:0,doc:l})})),new Jv(e,t,Nv.emptySet(t),s,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&aA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dle{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Lle{constructor(){this.queries=R4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Sn(t),a=r.queries;r.queries=R4(),a.forEach(((s,l)=>{for(const c of l.ba)c.onError(i)}))})(this,new Xt(pt.ABORTED,"Firestore shutting down"))}}function R4(){return new Vm((n=>Nj(n)),aA)}async function Ule(n,e){const t=Sn(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new Dle,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(s){const l=$O(s,`Initialization of query '${vv(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&XO(t)}async function kle(n,e){const t=Sn(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function zle(n,e){const t=Sn(n);let i=!1;for(const r of e){const a=r.query,s=t.queries.get(a);if(s){for(const l of s.ba)l.Fa(r)&&(i=!0);s.wa=r}}i&&XO(t)}function Fle(n,e,t){const i=Sn(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function XO(n){n.Ca.forEach((e=>{e.next()}))}var wI,P4;(P4=wI||(wI={})).Ma="default",P4.Cache="cache";class Ble{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Jv(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Jv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e){this.key=e}}class p8{constructor(e){this.key=e}}class Vle{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$n(),this.mutatedKeys=$n(),this.eu=Oj(e),this.tu=new Nv(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new C4,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,s=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,g)=>{const v=r.get(p),b=sA(this.query,g)?g:null,_=!!v&&this.mutatedKeys.has(v.key),M=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let S=!1;v&&b?v.data.isEqual(b.data)?_!==M&&(i.track({type:3,doc:b}),S=!0):this.su(v,b)||(i.track({type:2,doc:b}),S=!0,(c&&this.eu(b,c)>0||h&&this.eu(b,h)<0)&&(l=!0)):!v&&b?(i.track({type:0,doc:b}),S=!0):v&&!b&&(i.track({type:1,doc:v}),S=!0,(c||h)&&(l=!0)),S&&(b?(s=s.add(b),a=M?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),i.track({type:1,doc:p})}return{tu:s,iu:i,Ss:l,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((p,g)=>(function(b,_){const M=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hn(20277,{Vt:S})}};return M(b)-M(_)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(i),r=r??!1;const l=t&&!r?this._u():[],c=this.Ya.size===0&&this.current&&!r?1:0,h=c!==this.Xa;return this.Xa=c,s.length!==0||h?{snapshot:new Jv(this.query,e.tu,a,s,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new C4,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=$n(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new p8(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new d8(i))})),t}cu(e){this.Za=e.ks,this.Ya=$n();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Jv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const YO="SyncEngine";class jle{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Hle{constructor(e){this.key=e,this.hu=!1}}class Gle{constructor(e,t,i,r,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Vm((l=>Nj(l)),aA),this.Iu=new Map,this.Eu=new Set,this.Ru=new mr(nn.comparator),this.Au=new Map,this.Vu=new zO,this.du={},this.mu=new Map,this.fu=Qv.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qle(n,e,t=!0){const i=x8(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await m8(i,e,t,!0),r}async function Wle(n,e){const t=x8(n);await m8(t,e,!0,!1)}async function m8(n,e,t,i){const r=await lle(n.localStore,Rc(e)),a=r.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let l;return i&&(l=await $le(n,e,a,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&o8(n.remoteStore,r),l}async function $le(n,e,t,i,r){n.pu=(g,v,b)=>(async function(M,S,w,R){let P=S.view.ru(w);P.Ss&&(P=await S4(M.localStore,S.query,!1).then((({documents:D})=>S.view.ru(D,P))));const O=R&&R.targetChanges.get(S.targetId),k=R&&R.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(P,M.isPrimaryClient,O,k);return N4(M,S.targetId,B.au),B.snapshot})(n,g,v,b);const a=await S4(n.localStore,e,!0),s=new Vle(e,a.ks),l=s.ru(a.documents),c=Gx.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=s.applyChanges(l,n.isPrimaryClient,c);N4(n,t,h.au);const p=new jle(e,t,s);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function Xle(n,e,t){const i=Sn(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((s=>!aA(s,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await _I(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&jO(i.remoteStore,r.targetId),EI(i,r.targetId)})).catch(m0)):(EI(i,r.targetId),await _I(i.localStore,r.targetId,!0))}async function Yle(n,e){const t=Sn(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jO(t.remoteStore,i.targetId))}async function Kle(n,e,t){const i=iue(n);try{const r=await(function(s,l){const c=Sn(s),h=$i.now(),p=l.reduce(((b,_)=>b.add(_.key)),$n());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let _=$f(),M=$n();return c.xs.getEntries(b,p).next((S=>{_=S,_.forEach(((w,R)=>{R.isValidDocument()||(M=M.add(w))}))})).next((()=>c.localDocuments.getOverlayedDocuments(b,_))).next((S=>{g=S;const w=[];for(const R of l){const P=ooe(R,g.get(R.key).overlayedDocument);P!=null&&w.push(new Gd(R.key,P,Mj(P.value.mapValue),Mu.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,w,l)})).next((S=>{v=S;const w=S.applyToLocalDocumentSet(g,M);return c.documentOverlayCache.saveOverlays(b,S.batchId,w)}))})).then((()=>({batchId:v.batchId,changes:Lj(g)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(s,l,c){let h=s.du[s.currentUser.toKey()];h||(h=new mr(Wn)),h=h.insert(l,c),s.du[s.currentUser.toKey()]=h})(i,r.batchId,t),await Wx(i,r.changes),await hA(i.remoteStore)}catch(r){const a=$O(r,"Failed to persist write");t.reject(a)}}async function g8(n,e){const t=Sn(n);try{const i=await ale(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const s=t.Au.get(a);s&&(gi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?s.hu=!0:r.modifiedDocuments.size>0?gi(s.hu,14607):r.removedDocuments.size>0&&(gi(s.hu,42227),s.hu=!1))})),await Wx(t,i,e)}catch(i){await m0(i)}}function I4(n,e,t){const i=Sn(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,s)=>{const l=s.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(s,l){const c=Sn(s);c.onlineState=l;let h=!1;c.queries.forEach(((p,g)=>{for(const v of g.ba)v.va(l)&&(h=!0)})),h&&XO(c)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Zle(n,e,t){const i=Sn(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let s=new mr(nn.comparator);s=s.insert(a,vs.newNoDocument(a,yn.min()));const l=$n().add(a),c=new uA(yn.min(),new Map,new mr(Wn),s,l);await g8(i,c),i.Ru=i.Ru.remove(a),i.Au.delete(e),KO(i)}else await _I(i.localStore,e,!1).then((()=>EI(i,e,t))).catch(m0)}async function Qle(n,e){const t=Sn(n),i=e.batch.batchId;try{const r=await rle(t.localStore,e);y8(t,i,null),v8(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Wx(t,r)}catch(r){await m0(r)}}async function Jle(n,e,t){const i=Sn(n);try{const r=await(function(s,l){const c=Sn(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next((g=>(gi(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(h,g)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>c.localDocuments.getDocuments(h,p)))}))})(i.localStore,e);y8(i,e,t),v8(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Wx(i,r)}catch(r){await m0(r)}}function v8(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function y8(n,e,t){const i=Sn(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function EI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||b8(n,i)}))}function b8(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(jO(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),KO(n))}function N4(n,e,t){for(const i of t)i instanceof d8?(n.Vu.addReference(i.key,e),eue(n,i)):i instanceof p8?(zt(YO,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||b8(n,i.key)):hn(19791,{wu:i})}function eue(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(zt(YO,"New document in limbo: "+t),n.Eu.add(i),KO(n))}function KO(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new nn(Wi.fromString(e)),i=n.fu.next();n.Au.set(i,new Hle(t)),n.Ru=n.Ru.insert(t,i),o8(n.remoteStore,new vd(Rc(NO(t.path)),i,"TargetPurposeLimboResolution",tA.ce))}}async function Wx(n,e,t){const i=Sn(n),r=[],a=[],s=[];i.Tu.isEmpty()||(i.Tu.forEach(((l,c)=>{s.push(i.pu(c,e,t).then((h=>{var p;if((h||t)&&i.isPrimaryClient){const g=h?!h.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(h){r.push(h);const g=BO.Es(c.targetId,h);a.push(g)}})))})),await Promise.all(s),i.Pu.J_(r),await(async function(c,h){const p=Sn(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>at.forEach(h,(v=>at.forEach(v.Ts,(b=>p.persistence.referenceDelegate.addReference(g,v.targetId,b))).next((()=>at.forEach(v.Is,(b=>p.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))))))}catch(g){if(!g0(g))throw g;zt(VO,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const b=p.vs.get(v),_=b.snapshotVersion,M=b.withLastLimboFreeSnapshotVersion(_);p.vs=p.vs.insert(v,M)}}})(i.localStore,a))}async function tue(n,e){const t=Sn(n);if(!t.currentUser.isEqual(e)){zt(YO,"User change. New user:",e.toKey());const i=await i8(t.localStore,e);t.currentUser=e,(function(a,s){a.mu.forEach((l=>{l.forEach((c=>{c.reject(new Xt(pt.CANCELLED,s))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wx(t,i.Ns)}}function nue(n,e){const t=Sn(n),i=t.Au.get(e);if(i&&i.hu)return $n().add(i.key);{let r=$n();const a=t.Iu.get(e);if(!a)return r;for(const s of a){const l=t.Tu.get(s);r=r.unionWith(l.view.nu)}return r}}function x8(n){const e=Sn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=g8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zle.bind(null,e),e.Pu.J_=zle.bind(null,e.eventManager),e.Pu.yu=Fle.bind(null,e.eventManager),e}function iue(n){const e=Sn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qle.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jle.bind(null,e),e}class SE{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cA(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ile(this.persistence,new ele,e.initialUser,this.serializer)}Cu(e){return new n8(FO.Vi,this.serializer)}Du(e){return new cle}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}SE.provider={build:()=>new SE};class rue extends SE{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){gi(this.persistence.referenceDelegate instanceof xE,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Foe(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?So.withCacheSize(this.cacheSizeBytes):So.DEFAULT;return new n8((i=>xE.Vi(i,t)),this.serializer)}}class MI{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>I4(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tue.bind(null,this.syncEngine),await Ole(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Lle})()}createDatastore(e){const t=cA(e.databaseInfo.databaseId),i=mle(e.databaseInfo);return xle(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,s,l){return new Sle(i,r,a,s,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>I4(this.syncEngine,t,0)),(function(){return M4.v()?new M4:new fle})())}createSyncEngine(e,t){return(function(r,a,s,l,c,h,p){const g=new Gle(r,a,s,l,c,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Sn(r);zt(Am,"RemoteStore shutting down."),a.Ea.add(5),await qx(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}MI.provider={build:()=>new MI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aue{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wf("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="FirestoreClient";class sue{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=gs.UNAUTHENTICATED,this.clientId=MO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async s=>{zt(Ud,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,(s=>(zt(Ud,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=$O(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function QC(n,e){n.asyncQueue.verifyOperationInProgress(),zt(Ud,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await i8(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function O4(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oue(n);zt(Ud,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>T4(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>T4(e.remoteStore,r))),n._onlineComponents=e}async function oue(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){zt(Ud,"Using user provided OfflineComponentProvider");try{await QC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===pt.FAILED_PRECONDITION||r.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Xv("Error using user provided cache. Falling back to memory cache: "+t),await QC(n,new SE)}}else zt(Ud,"Using default OfflineComponentProvider"),await QC(n,new rue(void 0));return n._offlineComponents}async function _8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(zt(Ud,"Using user provided OnlineComponentProvider"),await O4(n,n._uninitializedComponentsProvider._online)):(zt(Ud,"Using default OnlineComponentProvider"),await O4(n,new MI))),n._onlineComponents}function lue(n){return _8(n).then((e=>e.syncEngine))}async function D4(n){const e=await _8(n),t=e.eventManager;return t.onListen=qle.bind(null,e.syncEngine),t.onUnlisten=Xle.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Wle.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Yle.bind(null,e.syncEngine),t}function uue(n,e,t,i){const r=new aue(i),a=new Ble(e,r,t);return n.asyncQueue.enqueueAndForget((async()=>Ule(await D4(n),a))),()=>{r.Nu(),n.asyncQueue.enqueueAndForget((async()=>kle(await D4(n),a)))}}function cue(n,e){const t=new pm;return n.asyncQueue.enqueueAndForget((async()=>Kle(await lue(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fue="ComponentProvider",L4=new Map;function hue(n,e,t,i,r){return new Rse(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,S8(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8="firestore.googleapis.com",U4=!0;class k4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Xt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=w8,this.ssl=U4}else this.host=e.host,this.ssl=e.ssl??U4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=t8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<koe)throw new Xt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yse("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S8(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Xt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Xt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Xt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dA{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new lse;switch(i.type){case"firstParty":return new hse(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Xt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=L4.get(t);i&&(zt(fue,"Removing Datastore"),L4.delete(t),i.terminate())})(this),Promise.resolve()}}function due(n,e,t,i={}){var h;n=wd(n,dA);const r=SO(e),a=n._getSettings(),s={...a,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${t}`;r&&(Dre(`https://${l}`),zre("Firestore",!0)),a.host!==w8&&a.host!==l&&Xv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:r,emulatorOptions:i};if(!uE(c,s)&&(n._setSettings(c),i.mockUserToken)){let p,g;if(typeof i.mockUserToken=="string")p=i.mockUserToken,g=gs.MOCK_USER;else{p=Lre(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new Xt(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new gs(v)}n._authCredentials=new use(new dj(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new pA(this.firestore,e,this._query)}}class ta{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ed(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ta(this.firestore,e,this._key)}toJSON(){return{type:ta._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(jx(t,ta._jsonSchema))return new ta(e,i||null,new nn(Wi.fromString(t.referencePath)))}}ta._jsonSchemaVersion="firestore/documentReference/1.0",ta._jsonSchema={type:Hr("string",ta._jsonSchemaVersion),referencePath:Hr("string")};class Ed extends pA{constructor(e,t,i){super(e,t,NO(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ta(this.firestore,null,new nn(e))}withConverter(e){return new Ed(this.firestore,e,this._path)}}function JC(n,e,...t){if(n=Gf(n),pj("collection","path",e),n instanceof dA){const i=Wi.fromString(e,...t);return Kk(i),new Ed(n,null,i)}{if(!(n instanceof ta||n instanceof Ed))throw new Xt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Wi.fromString(e,...t));return Kk(i),new Ed(n.firestore,null,i)}}function xv(n,e,...t){if(n=Gf(n),arguments.length===1&&(e=MO.newId()),pj("doc","path",e),n instanceof dA){const i=Wi.fromString(e,...t);return Yk(i),new ta(n,null,new nn(i))}{if(!(n instanceof ta||n instanceof Ed))throw new Xt(pt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Wi.fromString(e,...t));return Yk(i),new ta(n.firestore,n instanceof Ed?n.converter:null,new nn(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="AsyncQueue";class F4{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a8(this,"async_queue_retry"),this._c=()=>{const i=ZC();i&&zt(z4,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ZC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ZC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pm;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!g0(e))throw e;zt(z4,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Wf("INTERNAL UNHANDLED ERROR: ",B4(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=WO.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&hn(47125,{Pc:B4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function B4(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class e0 extends dA{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new F4,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F4(e),this._firestoreClient=void 0,await e}}}function pue(n,e){const t=typeof n=="object"?n:Xae(),i=typeof n=="string"?n:dE,r=Hae(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=Nre("firestore");a&&due(r,...a)}return r}function E8(n){if(n._terminated)throw new Xt(pt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mue(n),n._firestoreClient}function mue(n){var i,r,a,s;const e=n._freezeSettings(),t=hue(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new sue(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ll(Ka.fromBase64String(e))}catch(t){throw new Xt(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ll(Ka.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ll._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jx(e,Ll._jsonSchema))return Ll.fromBase64String(e.bytes)}}Ll._jsonSchemaVersion="firestore/bytes/1.0",Ll._jsonSchema={type:Hr("string",Ll._jsonSchemaVersion),bytes:Hr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xt(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xt(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xt(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Wn(this._lat,e._lat)||Wn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ic._jsonSchemaVersion}}static fromJSON(e){if(jx(e,Ic._jsonSchema))return new Ic(e.latitude,e.longitude)}}Ic._jsonSchemaVersion="firestore/geoPoint/1.0",Ic._jsonSchema={type:Hr("string",Ic._jsonSchemaVersion),latitude:Hr("number"),longitude:Hr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Au._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jx(e,Au._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Au(e.vectorValues);throw new Xt(pt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Au._jsonSchemaVersion="firestore/vectorValue/1.0",Au._jsonSchema={type:Hr("string",Au._jsonSchemaVersion),vectorValues:Hr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gue=/^__.*__$/;class vue{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Gd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hx(e,this.data,t,this.fieldTransforms)}}class M8{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Gd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function A8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hn(40011,{dataSource:n})}}class JO{constructor(e,t,i,r,a,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new JO({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wE(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(A8(this.dataSource)&&gue.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class yue{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||cA(e)}createContext(e,t,i,r=!1){return new JO({dataSource:e,methodName:t,targetDoc:i,path:Wa.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function T8(n){const e=n._freezeSettings(),t=cA(n._databaseId);return new yue(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bue(n,e,t,i,r,a={}){const s=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);eD("Data must be an object, but it was:",s,i);const l=C8(i,s);let c,h;if(a.merge)c=new Xo(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const v=dx(e,g,t);if(!s.contains(v))throw new Xt(pt.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);I8(p,v)||p.push(v)}c=new Xo(p),h=s.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,h=s.fieldTransforms;return new vue(new Eo(l),c,h)}class mA extends QO{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mA}}function xue(n,e,t,i){const r=n.createContext(1,e,t);eD("Data must be an object, but it was:",r,i);const a=[],s=Eo.empty();Hd(i,((c,h)=>{const p=P8(e,c,t);h=Gf(h);const g=r.childContextForFieldPath(p);if(h instanceof mA)a.push(p);else{const v=gA(h,g);v!=null&&(a.push(p),s.set(p,v))}}));const l=new Xo(a);return new M8(s,l,r.fieldTransforms)}function _ue(n,e,t,i,r,a){const s=n.createContext(1,e,t),l=[dx(e,i,t)],c=[r];if(a.length%2!=0)throw new Xt(pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)l.push(dx(e,a[v])),c.push(a[v+1]);const h=[],p=Eo.empty();for(let v=l.length-1;v>=0;--v)if(!I8(h,l[v])){const b=l[v];let _=c[v];_=Gf(_);const M=s.childContextForFieldPath(b);if(_ instanceof mA)h.push(b);else{const S=gA(_,M);S!=null&&(h.push(b),p.set(b,S))}}const g=new Xo(h);return new M8(p,g,s.fieldTransforms)}function gA(n,e){if(R8(n=Gf(n)))return eD("Unsupported field value:",e,n),C8(n,e);if(n instanceof QO)return(function(i,r){if(!A8(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let s=0;for(const l of i){let c=gA(l,r.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=Gf(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return toe(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=$i.fromDate(i);return{timestampValue:bE(r.serializer,a)}}if(i instanceof $i){const a=new $i(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bE(r.serializer,a)}}if(i instanceof Ic)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ll)return{bytesValue:$j(r.serializer,i._byteString)};if(i instanceof ta){const a=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(a))throw r.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:kO(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Au)return(function(s,l){const c=s instanceof Au?s.toArray():s;return{mapValue:{fields:{[wj]:{stringValue:Ej},[pE]:{arrayValue:{values:c.map((p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return OO(l.serializer,p)}))}}}}}})(i,r);if(e8(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${AO(i)}`)})(n,e)}function C8(n,e){const t={};return vj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hd(n,((i,r)=>{const a=gA(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function R8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $i||n instanceof Ic||n instanceof Ll||n instanceof ta||n instanceof QO||n instanceof Au||e8(n))}function eD(n,e,t){if(!R8(t)||!mj(t)){const i=AO(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function dx(n,e,t){if((e=Gf(e))instanceof ZO)return e._internalPath;if(typeof e=="string")return P8(n,e);throw wE("Field path arguments must be of type string or ",n,!1,void 0,t)}const Sue=new RegExp("[~\\*/\\[\\]]");function P8(n,e,t){if(e.search(Sue)>=0)throw wE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ZO(...e.split("."))._internalPath}catch{throw wE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wE(n,e,t,i,r){const a=i&&!i.isEmpty(),s=r!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new Xt(pt.INVALID_ARGUMENT,l+n+c)}function I8(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wue{convertValue(e,t="none"){switch(Dd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw hn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Hd(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[pE].arrayValue)==null?void 0:r.values)==null?void 0:a.map((s=>Ir(s.doubleValue)));return new Au(t)}convertGeoPoint(e){return new Ic(Ir(e.latitude),Ir(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=iA(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(lx(e));default:return null}}convertTimestamp(e){const t=Nd(e);return new $i(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Wi.fromString(e);gi(Jj(i),9688,{name:e});const r=new ux(i.get(1),i.get(3)),a=new nn(i.popFirst(5));return r.isEqual(t)||Wf(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8 extends wue{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ta(this.firestore,null,t)}}const V4="@firebase/firestore",j4="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ta(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Eue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(dx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Eue extends O8{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mue(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Xt(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Aue(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class bb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mm extends O8{constructor(e,t,i,r,a,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(dx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(pt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=mm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}mm._jsonSchemaVersion="firestore/documentSnapshot/1.0",mm._jsonSchema={type:Hr("string",mm._jsonSchemaVersion),bundleSource:Hr("string","DocumentSnapshot"),bundleName:Hr("string"),bundle:Hr("string")};class tw extends mm{data(e={}){return super.data(e)}}class Ov{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bb(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new tw(this._firestore,this._userDataWriter,i.key,i,new bb(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xt(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map((l=>{const c=new tw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bb(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const c=new tw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bb(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,p=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),p=s.indexOf(l.doc.key)),{type:Tue(l.type),doc:c,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(pt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ov._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=MO.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Tue(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hn(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ov._jsonSchemaVersion="firestore/querySnapshot/1.0",Ov._jsonSchema={type:Hr("string",Ov._jsonSchemaVersion),bundleSource:Hr("string","QuerySnapshot"),bundleName:Hr("string"),bundle:Hr("string")};function T1(n,e,t,...i){n=wd(n,ta);const r=wd(n.firestore,e0),a=T8(r);let s;return s=typeof(e=Gf(e))=="string"||e instanceof ZO?_ue(a,"updateDoc",n._key,e,t,i):xue(a,"updateDoc",n._key,e),tD(r,[s.toMutation(n._key,Mu.exists(!0))])}function Cue(n){return tD(wd(n.firestore,e0),[new DO(n._key,Mu.none())])}function eR(n,e){const t=wd(n.firestore,e0),i=xv(n),r=Aue(n.converter,e),a=T8(n.firestore);return tD(t,[bue(a,"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Mu.exists(!1))]).then((()=>i))}function tR(n,...e){var h,p,g;n=Gf(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||H4(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(H4(e[i])){const v=e[i];e[i]=(h=v.next)==null?void 0:h.bind(v),e[i+1]=(p=v.error)==null?void 0:p.bind(v),e[i+2]=(g=v.complete)==null?void 0:g.bind(v)}let a,s,l;if(n instanceof ta)s=wd(n.firestore,e0),l=NO(n._key.path),a={next:v=>{e[i]&&e[i](Rue(s,n,v))},error:e[i+1],complete:e[i+2]};else{const v=wd(n,pA);s=wd(v.firestore,e0),l=v._query;const b=new N8(s);a={next:_=>{e[i]&&e[i](new Ov(s,b,v,_))},error:e[i+1],complete:e[i+2]},Mue(n._query)}const c=E8(s);return uue(c,l,r,a)}function tD(n,e){const t=E8(n);return cue(t,e)}function Rue(n,e,t){const i=t.docs.get(e._key),r=new N8(n);return new mm(n,r,e._key,i,new bb(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){ose($ae),fE(new ax("firestore",((i,{instanceIdentifier:r,options:a})=>{const s=i.getProvider("app").getImmediate(),l=new e0(new cse(i.getProvider("auth-internal")),new dse(s,i.getProvider("app-check-internal")),Pse(s,r),s);return a={useFetchStreams:t,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),Pv(V4,j4,e),Pv(V4,j4,"esm2020")})();const Pue={apiKey:"AIzaSyCI9AH2vtxc9IhHdQBzA_5QPJDF5p-OTUE",authDomain:"tunas-craft.firebaseapp.com",projectId:"tunas-craft",storageBucket:"tunas-craft.firebasestorage.app",messagingSenderId:"805844799800",appId:"1:805844799800:web:8c3332ee01c3c4f9c1f1cd",measurementId:"G-BMF86Q9D45"},Iue=ij(Pue),sd=pue(Iue),D8=j.createContext(),vA=()=>j.useContext(D8),Nue=({children:n})=>{const[e,t]=j.useState([]),[i,r]=j.useState([]),[a,s]=j.useState([]),l=JC(sd,"clients"),c=JC(sd,"orders"),h=JC(sd,"leads");j.useEffect(()=>{const P=tR(l,B=>{t(B.docs.map(D=>({...D.data(),id:D.id})))}),O=tR(c,B=>{r(B.docs.map(D=>({...D.data(),id:D.id})))}),k=tR(h,B=>{s(B.docs.map(D=>({...D.data(),id:D.id})))});return()=>{P(),O(),k()}},[]);const p=async P=>{const O={...P,joinedAt:new Date().toISOString()},k=await eR(l,O);return{...O,id:k.id}},g=async(P,O)=>{const k=xv(sd,"clients",P);await T1(k,O)},v=async P=>{let O=parseFloat(P.total);const k=e.find(F=>F.id===P.clientId);k&&(k.type==="mayorista"&&(O*=.9),k.type==="distribuidor"&&(O*=.75));const B={...P,total:O.toFixed(2),remaining:(O-(P.advance||0)).toFixed(2),date:new Date().toLocaleDateString("es-MX"),status:P.status||"pedido"},D=await eR(c,B);return{...B,id:D.id}},b=async(P,O)=>{const k=xv(sd,"orders",P);await T1(k,{status:O})},_=async(P,O)=>{const k=xv(sd,"orders",P);await T1(k,O)};j.useEffect(()=>{window.updateOrderContext=_},[i]);const M=async P=>{const O=xv(sd,"orders",P);await Cue(O)},S=async P=>{const O={...P,date:new Date().toLocaleDateString("es-MX"),status:"Nuevo"},k=await eR(h,O);return{...O,id:k.id}},w=async(P,O)=>{const k=xv(sd,"leads",P);await T1(k,{status:O})},R=async P=>{console.warn("Import not fully supported in Firebase version yet.")};return U.jsx(D8.Provider,{value:{clients:e,orders:i,leads:a,addClient:p,updateClient:g,addOrder:v,updateOrderStatus:b,updateOrder:_,deleteOrder:M,addLead:S,updateLeadStatus:w,importDatabase:R},children:n})};function L8(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=L8(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Yi(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=L8(n))&&(i&&(i+=" "),i+=e);return i}var Oue=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function nD(n){if(typeof n!="string")return!1;var e=Oue;return e.includes(n)}var Due=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Lue=new Set(Due);function U8(n){return typeof n!="string"?!1:Lue.has(n)}function k8(n){return typeof n=="string"&&n.startsWith("data-")}function Cu(n){if(typeof n!="object"||n===null)return{};var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(U8(t)||k8(t))&&(e[t]=n[t]);return e}function yA(n){if(n==null)return null;if(j.isValidElement(n)&&typeof n.props=="object"&&n.props!==null){var e=n.props;return Cu(e)}return typeof n=="object"&&!Array.isArray(n)?Cu(n):null}function Vl(n){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(U8(t)||k8(t)||nD(t))&&(e[t]=n[t]);return e}function Uue(n){return n==null?null:j.isValidElement(n)?Vl(n.props):typeof n=="object"&&!Array.isArray(n)?Vl(n):null}var kue=["children","width","height","viewBox","className","style","title","desc"];function AI(){return AI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},AI.apply(null,arguments)}function zue(n,e){if(n==null)return{};var t,i,r=Fue(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Fue(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var z8=j.forwardRef((n,e)=>{var{children:t,width:i,height:r,viewBox:a,className:s,style:l,title:c,desc:h}=n,p=zue(n,kue),g=a||{width:i,height:r,x:0,y:0},v=Yi("recharts-surface",s);return j.createElement("svg",AI({},Vl(p),{className:v,width:i,height:r,style:l,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),j.createElement("title",null,c),j.createElement("desc",null,h),t)}),Bue=["children","className"];function TI(){return TI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},TI.apply(null,arguments)}function Vue(n,e){if(n==null)return{};var t,i,r=jue(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function jue(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var Fc=j.forwardRef((n,e)=>{var{children:t,className:i}=n,r=Vue(n,Bue),a=Yi("recharts-layer",i);return j.createElement("g",TI({className:a},Vl(r),{ref:e}),t)}),Hue=j.createContext(null);function _r(n){return function(){return n}}const CI=Math.PI,RI=2*CI,Kp=1e-6,Gue=RI-Kp;function F8(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function que(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return F8;const t=10**e;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}class Wue{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?F8:que(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,a,s){this._append`C${+e},${+t},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,i,r,a){if(e=+e,t=+t,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=i-e,h=r-t,p=s-e,g=l-t,v=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(v>Kp)if(!(Math.abs(g*c-h*p)>Kp)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let b=i-s,_=r-l,M=c*c+h*h,S=b*b+_*_,w=Math.sqrt(M),R=Math.sqrt(v),P=a*Math.tan((CI-Math.acos((M+v-S)/(2*w*R)))/2),O=P/R,k=P/w;Math.abs(O-1)>Kp&&this._append`L${e+O*p},${t+O*g}`,this._append`A${a},${a},0,0,${+(g*b>p*_)},${this._x1=e+k*c},${this._y1=t+k*h}`}}arc(e,t,i,r,a,s){if(e=+e,t=+t,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),h=e+l,p=t+c,g=1^s,v=s?r-a:a-r;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Kp||Math.abs(this._y1-p)>Kp)&&this._append`L${h},${p}`,i&&(v<0&&(v=v%RI+RI),v>Gue?this._append`A${i},${i},0,1,${g},${e-l},${t-c}A${i},${i},0,1,${g},${this._x1=h},${this._y1=p}`:v>Kp&&this._append`A${i},${i},0,${+(v>=CI)},${g},${this._x1=e+i*Math.cos(a)},${this._y1=t+i*Math.sin(a)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function B8(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return n},()=>new Wue(e)}function iD(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function V8(n){this._context=n}V8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function bA(n){return new V8(n)}function j8(n){return n[0]}function H8(n){return n[1]}function G8(n,e){var t=_r(!0),i=null,r=bA,a=null,s=B8(l);n=typeof n=="function"?n:n===void 0?j8:_r(n),e=typeof e=="function"?e:e===void 0?H8:_r(e);function l(c){var h,p=(c=iD(c)).length,g,v=!1,b;for(i==null&&(a=r(b=s())),h=0;h<=p;++h)!(h<p&&t(g=c[h],h,c))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+n(g,h,c),+e(g,h,c));if(b)return a=null,b+""||null}return l.x=function(c){return arguments.length?(n=typeof c=="function"?c:_r(+c),l):n},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:_r(+c),l):e},l.defined=function(c){return arguments.length?(t=typeof c=="function"?c:_r(!!c),l):t},l.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),l):i},l}function C1(n,e,t){var i=null,r=_r(!0),a=null,s=bA,l=null,c=B8(h);n=typeof n=="function"?n:n===void 0?j8:_r(+n),e=typeof e=="function"?e:_r(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?H8:_r(+t);function h(g){var v,b,_,M=(g=iD(g)).length,S,w=!1,R,P=new Array(M),O=new Array(M);for(a==null&&(l=s(R=c())),v=0;v<=M;++v){if(!(v<M&&r(S=g[v],v,g))===w)if(w=!w)b=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),_=v-1;_>=b;--_)l.point(P[_],O[_]);l.lineEnd(),l.areaEnd()}w&&(P[v]=+n(S,v,g),O[v]=+e(S,v,g),l.point(i?+i(S,v,g):P[v],t?+t(S,v,g):O[v]))}if(R)return l=null,R+""||null}function p(){return G8().defined(r).curve(s).context(a)}return h.x=function(g){return arguments.length?(n=typeof g=="function"?g:_r(+g),i=null,h):n},h.x0=function(g){return arguments.length?(n=typeof g=="function"?g:_r(+g),h):n},h.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:_r(+g),h):i},h.y=function(g){return arguments.length?(e=typeof g=="function"?g:_r(+g),t=null,h):e},h.y0=function(g){return arguments.length?(e=typeof g=="function"?g:_r(+g),h):e},h.y1=function(g){return arguments.length?(t=g==null?null:typeof g=="function"?g:_r(+g),h):t},h.lineX0=h.lineY0=function(){return p().x(n).y(e)},h.lineY1=function(){return p().x(n).y(t)},h.lineX1=function(){return p().x(i).y(e)},h.defined=function(g){return arguments.length?(r=typeof g=="function"?g:_r(!!g),h):r},h.curve=function(g){return arguments.length?(s=g,a!=null&&(l=s(a)),h):s},h.context=function(g){return arguments.length?(g==null?a=l=null:l=s(a=g),h):a},h}class q8{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function $ue(n){return new q8(n,!0)}function Xue(n){return new q8(n,!1)}function EE(){}function ME(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function W8(n){this._context=n}W8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ME(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ME(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Yue(n){return new W8(n)}function $8(n){this._context=n}$8.prototype={areaStart:EE,areaEnd:EE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:ME(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Kue(n){return new $8(n)}function X8(n){this._context=n}X8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 3:this._point=4;default:ME(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Zue(n){return new X8(n)}function Y8(n){this._context=n}Y8.prototype={areaStart:EE,areaEnd:EE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function Que(n){return new Y8(n)}function G4(n){return n<0?-1:1}function q4(n,e,t){var i=n._x1-n._x0,r=e-n._x1,a=(n._y1-n._y0)/(i||r<0&&-0),s=(t-n._y1)/(r||i<0&&-0),l=(a*r+s*i)/(i+r);return(G4(a)+G4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function W4(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function nR(n,e,t){var i=n._x0,r=n._y0,a=n._x1,s=n._y1,l=(a-i)/3;n._context.bezierCurveTo(i+l,r+l*e,a-l,s-l*t,a,s)}function AE(n){this._context=n}AE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:nR(this,this._t0,W4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,nR(this,W4(this,t=q4(this,n,e)),t);break;default:nR(this,this._t0,t=q4(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function K8(n){this._context=new Z8(n)}(K8.prototype=Object.create(AE.prototype)).point=function(n,e){AE.prototype.point.call(this,e,n)};function Z8(n){this._context=n}Z8.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,i,r,a){this._context.bezierCurveTo(e,n,i,t,a,r)}};function Jue(n){return new AE(n)}function ece(n){return new K8(n)}function Q8(n){this._context=n}Q8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var i=$4(n),r=$4(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function $4(n){var e,t=n.length-1,i,r=new Array(t),a=new Array(t),s=new Array(t);for(r[0]=0,a[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)r[e]=1,a[e]=4,s[e]=4*n[e]+2*n[e+1];for(r[t-1]=2,a[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)i=r[e]/a[e-1],a[e]-=i,s[e]-=i*s[e-1];for(r[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)r[e]=(s[e]-r[e+1])/a[e];for(a[t-1]=(n[t]+r[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-r[e+1];return[r,a]}function tce(n){return new Q8(n)}function xA(n,e){this._context=n,this._t=e}xA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function nce(n){return new xA(n,.5)}function ice(n){return new xA(n,0)}function rce(n){return new xA(n,1)}function Tm(n,e){if((s=n.length)>1)for(var t=1,i,r,a=n[e[0]],s,l=a.length;t<s;++t)for(r=a,a=n[e[t]],i=0;i<l;++i)a[i][1]+=a[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function PI(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function ace(n,e){return n[e]}function sce(n){const e=[];return e.key=n,e}function oce(){var n=_r([]),e=PI,t=Tm,i=ace;function r(a){var s=Array.from(n.apply(this,arguments),sce),l,c=s.length,h=-1,p;for(const g of a)for(l=0,++h;l<c;++l)(s[l][h]=[0,+i(g,s[l].key,h,a)]).data=g;for(l=0,p=iD(e(s));l<c;++l)s[p[l]].index=l;return t(s,p),s}return r.keys=function(a){return arguments.length?(n=typeof a=="function"?a:_r(Array.from(a)),r):n},r.value=function(a){return arguments.length?(i=typeof a=="function"?a:_r(+a),r):i},r.order=function(a){return arguments.length?(e=a==null?PI:typeof a=="function"?a:_r(Array.from(a)),r):e},r.offset=function(a){return arguments.length?(t=a??Tm,r):t},r}function lce(n,e){if((i=n.length)>0){for(var t,i,r=0,a=n[0].length,s;r<a;++r){for(s=t=0;t<i;++t)s+=n[t][r][1]||0;if(s)for(t=0;t<i;++t)n[t][r][1]/=s}Tm(n,e)}}function uce(n,e){if((r=n.length)>0){for(var t=0,i=n[e[0]],r,a=i.length;t<a;++t){for(var s=0,l=0;s<r;++s)l+=n[s][t][1]||0;i[t][1]+=i[t][0]=-l/2}Tm(n,e)}}function cce(n,e){if(!(!((s=n.length)>0)||!((a=(r=n[e[0]]).length)>0))){for(var t=0,i=1,r,a,s;i<a;++i){for(var l=0,c=0,h=0;l<s;++l){for(var p=n[e[l]],g=p[i][1]||0,v=p[i-1][1]||0,b=(g-v)/2,_=0;_<l;++_){var M=n[e[_]],S=M[i][1]||0,w=M[i-1][1]||0;b+=S-w}c+=g,h+=b*g}r[i-1][1]+=r[i-1][0]=t,c&&(t-=h/c)}r[i-1][1]+=r[i-1][0]=t,Tm(n,e)}}var iR={},rR={},X4;function fce(){return X4||(X4=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}n.isUnsafeProperty=e})(rR)),rR}var aR={},Y4;function J8(){return Y4||(Y4=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}n.isDeepKey=e})(aR)),aR}var sR={},K4;function rD(){return K4||(K4=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){var i;return typeof t=="string"||typeof t=="symbol"?t:Object.is((i=t==null?void 0:t.valueOf)==null?void 0:i.call(t),-0)?"-0":String(t)}n.toKey=e})(sR)),sR}var oR={},lR={},Z4;function hce(){return Z4||(Z4=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const i=String(t);return i==="0"&&Object.is(Number(t),-0)?"-0":i}n.toString=e})(lR)),lR}var Q4;function aD(){return Q4||(Q4=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=hce(),t=rD();function i(r){if(Array.isArray(r))return r.map(t.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const a=[],s=r.length;if(s===0)return a;let l=0,c="",h="",p=!1;for(r.charCodeAt(0)===46&&(a.push(""),l++);l<s;){const g=r[l];h?g==="\\"&&l+1<s?(l++,c+=r[l]):g===h?h="":c+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,a.push(c),c=""):c+=g:g==="["?(p=!0,c&&(a.push(c),c="")):g==="."?c&&(a.push(c),c=""):c+=g,l++}return c&&a.push(c),a}n.toPath=i})(oR)),oR}var J4;function sD(){return J4||(J4=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=fce(),t=J8(),i=rD(),r=aD();function a(l,c,h){if(l==null)return h;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return h;const p=l[c];return p===void 0?t.isDeepKey(c)?a(l,r.toPath(c),h):h:p}case"number":case"symbol":{typeof c=="number"&&(c=i.toKey(c));const p=l[c];return p===void 0?h:p}default:{if(Array.isArray(c))return s(l,c,h);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return h;const p=l[c];return p===void 0?h:p}}}function s(l,c,h){if(c.length===0)return h;let p=l;for(let g=0;g<c.length;g++){if(p==null||e.isUnsafeProperty(c[g]))return h;p=p[c[g]]}return p===void 0?h:p}n.get=a})(iR)),iR}var uR,ez;function dce(){return ez||(ez=1,uR=sD().get),uR}var pce=dce();const _A=Pu(pce);var mce=4;function yd(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mce,t=10**e,i=Math.round(n*t)/t;return Object.is(i,-0)?0:i}function ja(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return n.reduce((r,a,s)=>{var l=t[s-1];return typeof l=="string"?r+l+a:l!==void 0?r+yd(l)+a:r+a},"")}var Ul=n=>n===0?0:n>0?1:-1,Bc=n=>typeof n=="number"&&n!=+n,Cm=n=>typeof n=="string"&&n.indexOf("%")===n.length-1,Wt=n=>(typeof n=="number"||n instanceof Number)&&!Bc(n),Vc=n=>Wt(n)||typeof n=="string",gce=0,px=n=>{var e=++gce;return"".concat(n||"").concat(e)},kd=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Wt(e)&&typeof e!="string")return i;var a;if(Cm(e)){if(t==null)return i;var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return Bc(a)&&(a=i),r&&t!=null&&a>t&&(a=t),a},e9=n=>{if(!Array.isArray(n))return!1;for(var e=n.length,t={},i=0;i<e;i++)if(!t[String(n[i])])t[String(n[i])]=!0;else return!0;return!1};function bc(n,e,t){return Wt(n)&&Wt(e)?yd(n+t*(e-n)):e}function t9(n,e,t){if(!(!n||!n.length))return n.find(i=>i&&(typeof e=="function"?e(i):_A(i,e))===t)}var _s=n=>n===null||typeof n>"u",oD=n=>_s(n)?n:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));function Ao(n){return n!=null}function y0(){}var n9=n=>"radius"in n&&"startAngle"in n&&"endAngle"in n,lD=(n,e)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var t=n;if(j.isValidElement(n)&&(t=n.props),typeof t!="object"&&typeof t!="function")return null;var i={};return Object.keys(t).forEach(r=>{nD(r)&&(i[r]=(a=>t[r](t,a)))}),i},vce=(n,e,t)=>i=>(n(e,t,i),null),yce=(n,e,t)=>{if(n===null||typeof n!="object"&&typeof n!="function")return null;var i=null;return Object.keys(n).forEach(r=>{var a=n[r];nD(r)&&typeof a=="function"&&(i||(i={}),i[r]=vce(a,e,t))}),i};function tz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function bce(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(t),!0).forEach(function(i){xce(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tz(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function xce(n,e,t){return(e=_ce(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _ce(n){var e=Sce(n,"string");return typeof e=="symbol"?e:e+""}function Sce(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tl(n,e){var t=bce({},n),i=e,r=Object.keys(e),a=r.reduce((s,l)=>(s[l]===void 0&&i[l]!==void 0&&(s[l]=i[l]),s),t);return a}var cR={},fR={},nz;function wce(){return nz||(nz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){const r=new Map;for(let a=0;a<t.length;a++){const s=t[a],l=i(s,a,t);r.has(l)||r.set(l,s)}return Array.from(r.values())}n.uniqBy=e})(fR)),fR}var hR={},iz;function Ece(){return iz||(iz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return function(...r){return t.apply(this,r.slice(0,i))}}n.ary=e})(hR)),hR}var dR={},rz;function i9(){return rz||(rz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t}n.identity=e})(dR)),dR}var pR={},mR={},gR={},az;function Mce(){return az||(az=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}n.isLength=e})(gR)),gR}var sz;function uD(){return sz||(sz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Mce();function t(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}n.isArrayLike=t})(mR)),mR}var vR={},oz;function Ace(){return oz||(oz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}n.isObjectLike=e})(vR)),vR}var lz;function Tce(){return lz||(lz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=uD(),t=Ace();function i(r){return t.isObjectLike(r)&&e.isArrayLike(r)}n.isArrayLikeObject=i})(pR)),pR}var yR={},bR={},uz;function Cce(){return uz||(uz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=sD();function t(i){return function(r){return e.get(r,i)}}n.property=t})(bR)),bR}var xR={},_R={},SR={},wR={},cz;function r9(){return cz||(cz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}n.isObject=e})(wR)),wR}var ER={},fz;function a9(){return fz||(fz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}n.isPrimitive=e})(ER)),ER}var MR={},hz;function s9(){return hz||(hz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return t===i||Number.isNaN(t)&&Number.isNaN(i)}n.isEqualsSameValueZero=e})(MR)),MR}var dz;function Rce(){return dz||(dz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=r9(),t=a9(),i=s9();function r(p,g,v){return typeof v!="function"?r(p,g,()=>{}):a(p,g,function b(_,M,S,w,R,P){const O=v(_,M,S,w,R,P);return O!==void 0?!!O:a(_,M,b,P)},new Map)}function a(p,g,v,b){if(g===p)return!0;switch(typeof g){case"object":return s(p,g,v,b);case"function":return Object.keys(g).length>0?a(p,{...g},v,b):i.isEqualsSameValueZero(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:i.isEqualsSameValueZero(p,g)}}function s(p,g,v,b){if(g==null)return!0;if(Array.isArray(g))return c(p,g,v,b);if(g instanceof Map)return l(p,g,v,b);if(g instanceof Set)return h(p,g,v,b);const _=Object.keys(g);if(p==null||t.isPrimitive(p))return _.length===0;if(_.length===0)return!0;if(b!=null&&b.has(g))return b.get(g)===p;b==null||b.set(g,p);try{for(let M=0;M<_.length;M++){const S=_[M];if(!t.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!v(p[S],g[S],S,p,g,b))return!1}return!0}finally{b==null||b.delete(g)}}function l(p,g,v,b){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[_,M]of g.entries()){const S=p.get(_);if(v(S,M,_,p,g,b)===!1)return!1}return!0}function c(p,g,v,b){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const _=new Set;for(let M=0;M<g.length;M++){const S=g[M];let w=!1;for(let R=0;R<p.length;R++){if(_.has(R))continue;const P=p[R];let O=!1;if(v(P,S,M,p,g,b)&&(O=!0),O){_.add(R),w=!0;break}}if(!w)return!1}return!0}function h(p,g,v,b){return g.size===0?!0:p instanceof Set?c([...p],[...g],v,b):!1}n.isMatchWith=r,n.isSetMatch=h})(SR)),SR}var pz;function o9(){return pz||(pz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Rce();function t(i,r){return e.isMatchWith(i,r,()=>{})}n.isMatch=t})(_R)),_R}var AR={},TR={},CR={},mz;function Pce(){return mz||(mz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(i=>Object.prototype.propertyIsEnumerable.call(t,i))}n.getSymbols=e})(CR)),CR}var RR={},gz;function cD(){return gz||(gz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.getTag=e})(RR)),RR}var PR={},vz;function l9(){return vz||(vz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",i="[object Number]",r="[object Boolean]",a="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",v="[object ArrayBuffer]",b="[object Object]",_="[object Error]",M="[object DataView]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",R="[object Uint16Array]",P="[object Uint32Array]",O="[object BigUint64Array]",k="[object Int8Array]",B="[object Int16Array]",D="[object Int32Array]",F="[object BigInt64Array]",I="[object Float32Array]",L="[object Float64Array]";n.argumentsTag=a,n.arrayBufferTag=v,n.arrayTag=p,n.bigInt64ArrayTag=F,n.bigUint64ArrayTag=O,n.booleanTag=r,n.dataViewTag=M,n.dateTag=l,n.errorTag=_,n.float32ArrayTag=I,n.float64ArrayTag=L,n.functionTag=g,n.int16ArrayTag=B,n.int32ArrayTag=D,n.int8ArrayTag=k,n.mapTag=c,n.numberTag=i,n.objectTag=b,n.regexpTag=e,n.setTag=h,n.stringTag=t,n.symbolTag=s,n.uint16ArrayTag=R,n.uint32ArrayTag=P,n.uint8ArrayTag=S,n.uint8ClampedArrayTag=w})(PR)),PR}var IR={},yz;function Ice(){return yz||(yz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.isTypedArray=e})(IR)),IR}var bz;function u9(){return bz||(bz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Pce(),t=cD(),i=l9(),r=a9(),a=Ice();function s(p,g){return l(p,void 0,p,new Map,g)}function l(p,g,v,b=new Map,_=void 0){const M=_==null?void 0:_(p,g,v,b);if(M!==void 0)return M;if(r.isPrimitive(p))return p;if(b.has(p))return b.get(p);if(Array.isArray(p)){const S=new Array(p.length);b.set(p,S);for(let w=0;w<p.length;w++)S[w]=l(p[w],w,v,b,_);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;b.set(p,S);for(const[w,R]of p)S.set(w,l(R,w,v,b,_));return S}if(p instanceof Set){const S=new Set;b.set(p,S);for(const w of p)S.add(l(w,void 0,v,b,_));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(a.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);b.set(p,S);for(let w=0;w<p.length;w++)S[w]=l(p[w],w,v,b,_);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return b.set(p,S),c(S,p,v,b,_),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return b.set(p,S),c(S,p,v,b,_),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return b.set(p,S),c(S,p,v,b,_),S}if(p instanceof Error){const S=new p.constructor;return b.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,c(S,p,v,b,_),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return b.set(p,S),c(S,p,v,b,_),S}if(p instanceof Number){const S=new Number(p.valueOf());return b.set(p,S),c(S,p,v,b,_),S}if(p instanceof String){const S=new String(p.valueOf());return b.set(p,S),c(S,p,v,b,_),S}if(typeof p=="object"&&h(p)){const S=Object.create(Object.getPrototypeOf(p));return b.set(p,S),c(S,p,v,b,_),S}return p}function c(p,g,v=p,b,_){const M=[...Object.keys(g),...e.getSymbols(g)];for(let S=0;S<M.length;S++){const w=M[S],R=Object.getOwnPropertyDescriptor(p,w);(R==null||R.writable)&&(p[w]=l(g[w],w,v,b,_))}}function h(p){switch(t.getTag(p)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}n.cloneDeepWith=s,n.cloneDeepWithImpl=l,n.copyProperties=c})(TR)),TR}var xz;function Nce(){return xz||(xz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=u9();function t(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}n.cloneDeep=t})(AR)),AR}var _z;function Oce(){return _z||(_z=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=o9(),t=Nce();function i(r){return r=t.cloneDeep(r),a=>e.isMatch(a,r)}n.matches=i})(xR)),xR}var NR={},OR={},DR={},Sz;function Dce(){return Sz||(Sz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=u9(),t=cD(),i=l9();function r(a,s){return e.cloneDeepWith(a,(l,c,h,p)=>{const g=s==null?void 0:s(l,c,h,p);if(g!==void 0)return g;if(typeof a=="object"){if(t.getTag(a)===i.objectTag&&typeof a.constructor!="function"){const v={};return p.set(a,v),e.copyProperties(v,a,h,p),v}switch(Object.prototype.toString.call(a)){case i.numberTag:case i.stringTag:case i.booleanTag:{const v=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(v,a),v}case i.argumentsTag:{const v={};return e.copyProperties(v,a),v.length=a.length,v[Symbol.iterator]=a[Symbol.iterator],v}default:return}}})}n.cloneDeepWith=r})(DR)),DR}var wz;function Lce(){return wz||(wz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Dce();function t(i){return e.cloneDeepWith(i)}n.cloneDeep=t})(OR)),OR}var LR={},UR={},Ez;function c9(){return Ez||(Ez=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}n.isIndex=t})(UR)),UR}var kR={},Mz;function Uce(){return Mz||(Mz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=cD();function t(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}n.isArguments=t})(kR)),kR}var Az;function kce(){return Az||(Az=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=J8(),t=c9(),i=Uce(),r=aD();function a(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(s==null?void 0:s[l])==null?c=r.toPath(l):c=[l],c.length===0)return!1;let h=s;for(let p=0;p<c.length;p++){const g=c[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||i.isArguments(h))&&t.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}n.has=a})(LR)),LR}var Tz;function zce(){return Tz||(Tz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=o9(),t=rD(),i=Lce(),r=sD(),a=kce();function s(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=t.toKey(l);break}}return c=i.cloneDeep(c),function(h){const p=r.get(h,l);return p===void 0?a.has(h,l):c===void 0?p===void 0:e.isMatch(p,c)}}n.matchesProperty=s})(NR)),NR}var Cz;function Fce(){return Cz||(Cz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=i9(),t=Cce(),i=Oce(),r=zce();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?r.matchesProperty(s[0],s[1]):i.matches(s);case"string":case"symbol":case"number":return t.property(s)}}n.iteratee=a})(yR)),yR}var Rz;function Bce(){return Rz||(Rz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=wce(),t=Ece(),i=i9(),r=Tce(),a=Fce();function s(l,c=i.identity){return r.isArrayLikeObject(l)?e.uniqBy(Array.from(l),t.ary(a.iteratee(c),1)):[]}n.uniqBy=s})(cR)),cR}var zR,Pz;function Vce(){return Pz||(Pz=1,zR=Bce().uniqBy),zR}var jce=Vce();const Iz=Pu(jce);function Hce(n,e,t){return e===!0?Iz(n,t):typeof e=="function"?Iz(n,e):n}var fD=j.createContext(null),Gce=n=>n,Sa=()=>{var n=j.useContext(fD);return n?n.store.dispatch:Gce},nw=()=>{},qce=()=>nw,Wce=(n,e)=>n===e;function sn(n){var e=j.useContext(fD),t=j.useMemo(()=>e?i=>{if(i!=null)return n(i)}:nw,[e,n]);return A6.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:qce,e?e.store.getState:nw,e?e.store.getState:nw,t,Wce)}function $ce(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function Xce(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function Yce(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var Nz=n=>Array.isArray(n)?n:[n];function Kce(n){const e=Array.isArray(n[0])?n[0]:n;return Yce(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Zce(n,e){const t=[],{length:i}=n;for(let r=0;r<i;r++)t.push(n[r].apply(null,e));return t}var Qce=class{constructor(n){this.value=n}deref(){return this.value}},Jce=typeof WeakRef<"u"?WeakRef:Qce,efe=0,Oz=1;function R1(){return{s:efe,v:void 0,o:null,p:null}}function f9(n,e={}){let t=R1();const{resultEqualityCheck:i}=e;let r,a=0;function s(){var g;let l=t;const{length:c}=arguments;for(let v=0,b=c;v<b;v++){const _=arguments[v];if(typeof _=="function"||typeof _=="object"&&_!==null){let M=l.o;M===null&&(l.o=M=new WeakMap);const S=M.get(_);S===void 0?(l=R1(),M.set(_,l)):l=S}else{let M=l.p;M===null&&(l.p=M=new Map);const S=M.get(_);S===void 0?(l=R1(),M.set(_,l)):l=S}}const h=l;let p;if(l.s===Oz)p=l.v;else if(p=n.apply(null,arguments),a++,i){const v=((g=r==null?void 0:r.deref)==null?void 0:g.call(r))??r;v!=null&&i(v,p)&&(p=v,a!==0&&a--),r=typeof p=="object"&&p!==null||typeof p=="function"?new Jce(p):p}return h.s=Oz,h.v=p,p}return s.clearCache=()=>{t=R1(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function tfe(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...r)=>{let a=0,s=0,l,c={},h=r.pop();typeof h=="object"&&(c=h,h=r.pop()),$ce(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...t,...c},{memoize:g,memoizeOptions:v=[],argsMemoize:b=f9,argsMemoizeOptions:_=[]}=p,M=Nz(v),S=Nz(_),w=Kce(r),R=g(function(){return a++,h.apply(null,arguments)},...M),P=b(function(){s++;const k=Zce(w,arguments);return l=R.apply(null,k),l},...S);return Object.assign(P,{resultFunc:h,memoizedResultFunc:R,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:b})};return Object.assign(i,{withTypes:()=>i}),i}var qe=tfe(f9),nfe=Object.assign((n,e=qe)=>{Xce(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),i=t.map(a=>n[a]);return e(i,(...a)=>a.reduce((s,l,c)=>(s[t[c]]=l,s),{}))},{withTypes:()=>nfe}),FR={},BR={},VR={},Dz;function ife(){return Dz||(Dz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const t=(i,r,a)=>{if(i!==r){const s=e(i),l=e(r);if(s===l&&s===0){if(i<r)return a==="desc"?1:-1;if(i>r)return a==="desc"?-1:1}return a==="desc"?l-s:s-l}return 0};n.compareValues=t})(VR)),VR}var jR={},HR={},Lz;function h9(){return Lz||(Lz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}n.isSymbol=e})(HR)),HR}var Uz;function rfe(){return Uz||(Uz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=h9(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(i.test(a)||!t.test(a))||s!=null&&Object.hasOwn(s,a)}n.isKey=r})(jR)),jR}var kz;function afe(){return kz||(kz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=ife(),t=rfe(),i=aD();function r(a,s,l,c){if(a==null)return[];l=c?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(b=>String(b));const h=(b,_)=>{let M=b;for(let S=0;S<_.length&&M!=null;++S)M=M[_[S]];return M},p=(b,_)=>_==null||b==null?_:typeof b=="object"&&"key"in b?Object.hasOwn(_,b.key)?_[b.key]:h(_,b.path):typeof b=="function"?b(_):Array.isArray(b)?h(_,b):typeof _=="object"?_[b]:_,g=s.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||t.isKey(b)?b:{key:b,path:i.toPath(b)}));return a.map(b=>({original:b,criteria:g.map(_=>p(_,b))})).slice().sort((b,_)=>{for(let M=0;M<g.length;M++){const S=e.compareValues(b.criteria[M],_.criteria[M],l[M]);if(S!==0)return S}return 0}).map(b=>b.original)}n.orderBy=r})(BR)),BR}var GR={},zz;function sfe(){return zz||(zz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i=1){const r=[],a=Math.floor(i),s=(l,c)=>{for(let h=0;h<l.length;h++){const p=l[h];Array.isArray(p)&&c<a?s(p,c+1):r.push(p)}};return s(t,0),r}n.flatten=e})(GR)),GR}var qR={},Fz;function d9(){return Fz||(Fz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=c9(),t=uD(),i=r9(),r=s9();function a(s,l,c){return i.isObject(c)&&(typeof l=="number"&&t.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.isEqualsSameValueZero(c[l],s):!1}n.isIterateeCall=a})(qR)),qR}var Bz;function ofe(){return Bz||(Bz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=afe(),t=sfe(),i=d9();function r(a,...s){const l=s.length;return l>1&&i.isIterateeCall(a,s[0],s[1])?s=[]:l>2&&i.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,t.flatten(s),["asc"])}n.sortBy=r})(FR)),FR}var WR,Vz;function lfe(){return Vz||(Vz=1,WR=ofe().sortBy),WR}var ufe=lfe();const SA=Pu(ufe);var p9=n=>n.legend.settings,cfe=n=>n.legend.size,ffe=n=>n.legend.payload;qe([ffe,p9],(n,e)=>{var{itemSorter:t}=e,i=n.flat(1);return t?SA(i,t):i});var P1=1;function hfe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=j.useState({height:0,left:0,top:0,width:0}),i=j.useCallback(r=>{if(r!=null){var a=r.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>P1||Math.abs(s.left-e.left)>P1||Math.abs(s.top-e.top)>P1||Math.abs(s.width-e.width)>P1)&&t({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...n]);return[e,i]}function Va(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var dfe=typeof Symbol=="function"&&Symbol.observable||"@@observable",jz=dfe,$R=()=>Math.random().toString(36).substring(7).split("").join("."),pfe={INIT:`@@redux/INIT${$R()}`,REPLACE:`@@redux/REPLACE${$R()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${$R()}`},TE=pfe;function hD(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function m9(n,e,t){if(typeof n!="function")throw new Error(Va(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Va(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Va(1));return t(m9)(n,e)}let i=n,r=e,a=new Map,s=a,l=0,c=!1;function h(){s===a&&(s=new Map,a.forEach((S,w)=>{s.set(w,S)}))}function p(){if(c)throw new Error(Va(3));return r}function g(S){if(typeof S!="function")throw new Error(Va(4));if(c)throw new Error(Va(5));let w=!0;h();const R=l++;return s.set(R,S),function(){if(w){if(c)throw new Error(Va(6));w=!1,h(),s.delete(R),a=null}}}function v(S){if(!hD(S))throw new Error(Va(7));if(typeof S.type>"u")throw new Error(Va(8));if(typeof S.type!="string")throw new Error(Va(17));if(c)throw new Error(Va(9));try{c=!0,r=i(r,S)}finally{c=!1}return(a=s).forEach(R=>{R()}),S}function b(S){if(typeof S!="function")throw new Error(Va(10));i=S,v({type:TE.REPLACE})}function _(){const S=g;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Va(11));function R(){const O=w;O.next&&O.next(p())}return R(),{unsubscribe:S(R)}},[jz](){return this}}}return v({type:TE.INIT}),{dispatch:v,subscribe:g,getState:p,replaceReducer:b,[jz]:_}}function mfe(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:TE.INIT})>"u")throw new Error(Va(12));if(typeof t(void 0,{type:TE.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Va(13))})}function g9(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const s=e[a];typeof n[s]=="function"&&(t[s]=n[s])}const i=Object.keys(t);let r;try{mfe(t)}catch(a){r=a}return function(s={},l){if(r)throw r;let c=!1;const h={};for(let p=0;p<i.length;p++){const g=i[p],v=t[g],b=s[g],_=v(b,l);if(typeof _>"u")throw l&&l.type,new Error(Va(14));h[g]=_,c=c||_!==b}return c=c||i.length!==Object.keys(s).length,c?h:s}}function CE(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function gfe(...n){return e=>(t,i)=>{const r=e(t,i);let a=()=>{throw new Error(Va(15))};const s={getState:r.getState,dispatch:(c,...h)=>a(c,...h)},l=n.map(c=>c(s));return a=CE(...l)(r.dispatch),{...r,dispatch:a}}}function v9(n){return hD(n)&&"type"in n&&typeof n.type=="string"}var y9=Symbol.for("immer-nothing"),Hz=Symbol.for("immer-draftable"),Ws=Symbol.for("immer-state");function xu(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Yo=Object,t0=Yo.getPrototypeOf,RE="constructor",wA="prototype",II="configurable",PE="enumerable",iw="writable",mx="value",Xf=n=>!!n&&!!n[Ws];function Ru(n){var e;return n?b9(n)||MA(n)||!!n[Hz]||!!((e=n[RE])!=null&&e[Hz])||AA(n)||TA(n):!1}var vfe=Yo[wA][RE].toString(),Gz=new WeakMap;function b9(n){if(!n||!dD(n))return!1;const e=t0(n);if(e===null||e===Yo[wA])return!0;const t=Yo.hasOwnProperty.call(e,RE)&&e[RE];if(t===Object)return!0;if(!_v(t))return!1;let i=Gz.get(t);return i===void 0&&(i=Function.toString.call(t),Gz.set(t,i)),i===vfe}function EA(n,e,t=!0){$x(n)===0?(t?Reflect.ownKeys(n):Yo.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function $x(n){const e=n[Ws];return e?e.type_:MA(n)?1:AA(n)?2:TA(n)?3:0}var qz=(n,e,t=$x(n))=>t===2?n.has(e):Yo[wA].hasOwnProperty.call(n,e),NI=(n,e,t=$x(n))=>t===2?n.get(e):n[e],IE=(n,e,t,i=$x(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function yfe(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var MA=Array.isArray,AA=n=>n instanceof Map,TA=n=>n instanceof Set,dD=n=>typeof n=="object",_v=n=>typeof n=="function",XR=n=>typeof n=="boolean";function bfe(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var Of=n=>n.copy_||n.base_,pD=n=>n.modified_?n.copy_:n.base_;function OI(n,e){if(AA(n))return new Map(n);if(TA(n))return new Set(n);if(MA(n))return Array[wA].slice.call(n);const t=b9(n);if(e===!0||e==="class_only"&&!t){const i=Yo.getOwnPropertyDescriptors(n);delete i[Ws];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],l=i[s];l[iw]===!1&&(l[iw]=!0,l[II]=!0),(l.get||l.set)&&(i[s]={[II]:!0,[iw]:!0,[PE]:l[PE],[mx]:n[s]})}return Yo.create(t0(n),i)}else{const i=t0(n);if(i!==null&&t)return{...n};const r=Yo.create(i);return Yo.assign(r,n)}}function mD(n,e=!1){return CA(n)||Xf(n)||!Ru(n)||($x(n)>1&&Yo.defineProperties(n,{set:I1,add:I1,clear:I1,delete:I1}),Yo.freeze(n),e&&EA(n,(t,i)=>{mD(i,!0)},!1)),n}function xfe(){xu(2)}var I1={[mx]:xfe};function CA(n){return n===null||!dD(n)?!0:Yo.isFrozen(n)}var NE="MapSet",DI="Patches",Wz="ArrayMethods",x9={};function Rm(n){const e=x9[n];return e||xu(0,n),e}var $z=n=>!!x9[n],gx,_9=()=>gx,_fe=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:$z(NE)?Rm(NE):void 0,arrayMethodsPlugin_:$z(Wz)?Rm(Wz):void 0});function Xz(n,e){e&&(n.patchPlugin_=Rm(DI),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function LI(n){UI(n),n.drafts_.forEach(Sfe),n.drafts_=null}function UI(n){n===gx&&(gx=n.parent_)}var Yz=n=>gx=_fe(gx,n);function Sfe(n){const e=n[Ws];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Kz(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[Ws].modified_&&(LI(e),xu(4)),Ru(n)&&(n=Zz(e,n));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(t[Ws].base_,n,e)}else n=Zz(e,t);return wfe(e,n,!0),LI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==y9?n:void 0}function Zz(n,e){if(CA(e))return e;const t=e[Ws];if(!t)return OE(e,n.handledSet_,n);if(!RA(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);E9(t,n)}return t.copy_}function wfe(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&mD(e,t)}function S9(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var RA=(n,e)=>n.scope_===e,Efe=[];function w9(n,e,t,i){const r=Of(n),a=n.type_;if(i!==void 0&&NI(r,i,a)===e){IE(r,i,t,a);return}if(!n.draftLocations_){const l=n.draftLocations_=new Map;EA(r,(c,h)=>{if(Xf(h)){const p=l.get(h)||[];p.push(c),l.set(h,p)}})}const s=n.draftLocations_.get(e)??Efe;for(const l of s)IE(r,l,t,a)}function Mfe(n,e,t){n.callbacks_.push(function(r){var l;const a=e;if(!a||!RA(a,r))return;(l=r.mapSetPlugin_)==null||l.fixSetContents(a);const s=pD(a);w9(n,a.draft_??a,s,t),E9(a,r)})}function E9(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:r}=e;if(r){const a=r.getPath(n);a&&r.generatePatches_(n,a,e)}S9(n)}}function Afe(n,e,t){const{scope_:i}=n;if(Xf(t)){const r=t[Ws];RA(r,i)&&r.callbacks_.push(function(){rw(n);const s=pD(r);w9(n,t,s,e)})}else Ru(t)&&n.callbacks_.push(function(){const a=Of(n);n.type_===3?a.has(t)&&OE(t,i.handledSet_,i):NI(a,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&OE(NI(n.copy_,e,n.type_),i.handledSet_,i)})}function OE(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Xf(n)||e.has(n)||!Ru(n)||CA(n)||(e.add(n),EA(n,(i,r)=>{if(Xf(r)){const a=r[Ws];if(RA(a,t)){const s=pD(a);IE(n,i,s,n.type_),S9(a)}}else Ru(r)&&OE(r,e,t)})),n}function Tfe(n,e){const t=MA(n),i={type_:t?1:0,scope_:e?e.scope_:_9(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,a=DE;t&&(r=[i],a=vx);const{revoke:s,proxy:l}=Proxy.revocable(r,a);return i.draft_=l,i.revoke_=s,[l,i]}var DE={get(n,e){if(e===Ws)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const r=Of(n);if(!qz(r,e,n.type_))return Cfe(n,r,e);const a=r[e];if(n.finalized_||!Ru(a)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&bfe(e))return a;if(a===YR(n.base_,e)){rw(n);const s=n.type_===1?+e:e,l=zI(n.scope_,a,n,s);return n.copy_[s]=l}return a},has(n,e){return e in Of(n)},ownKeys(n){return Reflect.ownKeys(Of(n))},set(n,e,t){const i=M9(Of(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=YR(Of(n),e),a=r==null?void 0:r[Ws];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(yfe(t,r)&&(t!==void 0||qz(n.base_,e,n.type_)))return!0;rw(n),kI(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),Afe(n,e,t)),!0},deleteProperty(n,e){return rw(n),YR(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),kI(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Of(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[iw]:!0,[II]:n.type_!==1||e!=="length",[PE]:i[PE],[mx]:t[e]}},defineProperty(){xu(11)},getPrototypeOf(n){return t0(n.base_)},setPrototypeOf(){xu(12)}},vx={};for(let n in DE){let e=DE[n];vx[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}vx.deleteProperty=function(n,e){return vx.set.call(this,n,e,void 0)};vx.set=function(n,e,t){return DE.set.call(this,n[0],e,t,n[0])};function YR(n,e){const t=n[Ws];return(t?Of(t):n)[e]}function Cfe(n,e,t){var r;const i=M9(e,t);return i?mx in i?i[mx]:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function M9(n,e){if(!(e in n))return;let t=t0(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=t0(t)}}function kI(n){n.modified_||(n.modified_=!0,n.parent_&&kI(n.parent_))}function rw(n){n.copy_||(n.assigned_=new Map,n.copy_=OI(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Rfe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,i,r)=>{if(_v(t)&&!_v(i)){const s=i;i=t;const l=this;return function(h=s,...p){return l.produce(h,g=>i.call(this,g,...p))}}_v(i)||xu(6),r!==void 0&&!_v(r)&&xu(7);let a;if(Ru(t)){const s=Yz(this),l=zI(s,t,void 0);let c=!0;try{a=i(l),c=!1}finally{c?LI(s):UI(s)}return Xz(s,r),Kz(a,s)}else if(!t||!dD(t)){if(a=i(t),a===void 0&&(a=t),a===y9&&(a=void 0),this.autoFreeze_&&mD(a,!0),r){const s=[],l=[];Rm(DI).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:l}),r(s,l)}return a}else xu(1,t)},this.produceWithPatches=(t,i)=>{if(_v(t))return(l,...c)=>this.produceWithPatches(l,h=>t(h,...c));let r,a;return[this.produce(t,i,(l,c)=>{r=l,a=c}),r,a]},XR(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),XR(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),XR(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ru(e)||xu(8),Xf(e)&&(e=Tu(e));const t=Yz(this),i=zI(t,e,void 0);return i[Ws].isManual_=!0,UI(t),i}finishDraft(e,t){const i=e&&e[Ws];(!i||!i.isManual_)&&xu(9);const{scope_:r}=i;return Xz(r,t),Kz(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const a=t[i];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}i>-1&&(t=t.slice(i+1));const r=Rm(DI).applyPatches_;return Xf(e)?r(e,t):this.produce(e,a=>r(a,t))}};function zI(n,e,t,i){const[r,a]=AA(e)?Rm(NE).proxyMap_(e,t):TA(e)?Rm(NE).proxySet_(e,t):Tfe(e,t);return((t==null?void 0:t.scope_)??_9()).drafts_.push(r),a.callbacks_=(t==null?void 0:t.callbacks_)??[],a.key_=i,t&&i!==void 0?Mfe(t,a,i):a.callbacks_.push(function(c){var p;(p=c.mapSetPlugin_)==null||p.fixSetContents(a);const{patchPlugin_:h}=c;a.modified_&&h&&h.generatePatches_(a,[],c)}),r}function Tu(n){return Xf(n)||xu(10,n),A9(n)}function A9(n){if(!Ru(n)||CA(n))return n;const e=n[Ws];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=OI(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=OI(n,!0);return EA(t,(r,a)=>{IE(t,r,A9(a))},i),e&&(e.finalized_=!1),t}var Pfe=new Rfe,T9=Pfe.produce;function C9(n){return({dispatch:t,getState:i})=>r=>a=>typeof a=="function"?a(t,i,n):r(a)}var Ife=C9(),Nfe=C9,Ofe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?CE:CE.apply(null,arguments)};function jl(n,e){function t(...i){if(e){let r=e(...i);if(!r)throw new Error(Qo(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>v9(i)&&i.type===n,t}var R9=class xb extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,xb.prototype)}static get[Symbol.species](){return xb}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new xb(...e[0].concat(this)):new xb(...e.concat(this))}};function Qz(n){return Ru(n)?T9(n,()=>{}):n}function N1(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function Dfe(n){return typeof n=="boolean"}var Lfe=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let s=new R9;return t&&(Dfe(t)?s.push(Ife):s.push(Nfe(t.extraArgument))),s},P9="RTK_autoBatch",nr=()=>n=>({payload:n,meta:{[P9]:!0}}),Jz=n=>e=>{setTimeout(e,n)},I9=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let r=!0,a=!1,s=!1;const l=new Set,c=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Jz(10):n.type==="callback"?n.queueNotification:Jz(n.timeout),h=()=>{s=!1,a&&(a=!1,l.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const g=()=>r&&p(),v=i.subscribe(g);return l.add(p),()=>{v(),l.delete(p)}},dispatch(p){var g;try{return r=!((g=p==null?void 0:p.meta)!=null&&g[P9]),a=!r,a&&(s||(s=!0,c(h))),i.dispatch(p)}finally{r=!0}}})},Ufe=n=>function(t){const{autoBatch:i=!0}=t??{};let r=new R9(n);return i&&r.push(I9(typeof i=="object"?i:void 0)),r};function kfe(n){const e=Lfe(),{reducer:t=void 0,middleware:i,devTools:r=!0,preloadedState:a=void 0,enhancers:s=void 0}=n||{};let l;if(typeof t=="function")l=t;else if(hD(t))l=g9(t);else throw new Error(Qo(1));let c;typeof i=="function"?c=i(e):c=e();let h=CE;r&&(h=Ofe({trace:!1,...typeof r=="object"&&r}));const p=gfe(...c),g=Ufe(p);let v=typeof s=="function"?s(g):g();const b=h(...v);return m9(l,a,b)}function N9(n){const e={},t=[];let i;const r={addCase(a,s){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(Qo(28));if(l in e)throw new Error(Qo(29));return e[l]=s,r},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&t.push({matcher:a.settled,reducer:s.settled}),r},addMatcher(a,s){return t.push({matcher:a,reducer:s}),r},addDefaultCase(a){return i=a,r}};return n(r),[e,t,i]}function zfe(n){return typeof n=="function"}function Ffe(n,e){let[t,i,r]=N9(e),a;if(zfe(n))a=()=>Qz(n());else{const l=Qz(n);a=()=>l}function s(l=a(),c){let h=[t[c.type],...i.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[r]),h.reduce((p,g)=>{if(g)if(Xf(p)){const b=g(p,c);return b===void 0?p:b}else{if(Ru(p))return T9(p,v=>g(v,c));{const v=g(p,c);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return p},l)}return s.getInitialState=a,s}var Bfe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Vfe=(n=21)=>{let e="",t=n;for(;t--;)e+=Bfe[Math.random()*64|0];return e},jfe=Symbol.for("rtk-slice-createasyncthunk");function Hfe(n,e){return`${n}/${e}`}function Gfe({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[jfe];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(Qo(11));const l=(typeof r.reducers=="function"?r.reducers(Wfe()):r.reducers)||{},c=Object.keys(l),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(O,k){const B=typeof O=="string"?O:O.type;if(!B)throw new Error(Qo(12));if(B in h.sliceCaseReducersByType)throw new Error(Qo(13));return h.sliceCaseReducersByType[B]=k,p},addMatcher(O,k){return h.sliceMatchers.push({matcher:O,reducer:k}),p},exposeAction(O,k){return h.actionCreators[O]=k,p},exposeCaseReducer(O,k){return h.sliceCaseReducersByName[O]=k,p}};c.forEach(O=>{const k=l[O],B={reducerName:O,type:Hfe(a,O),createNotation:typeof r.reducers=="function"};Xfe(k)?Kfe(B,k,p,e):$fe(B,k,p)});function g(){const[O={},k=[],B=void 0]=typeof r.extraReducers=="function"?N9(r.extraReducers):[r.extraReducers],D={...O,...h.sliceCaseReducersByType};return Ffe(r.initialState,F=>{for(let I in D)F.addCase(I,D[I]);for(let I of h.sliceMatchers)F.addMatcher(I.matcher,I.reducer);for(let I of k)F.addMatcher(I.matcher,I.reducer);B&&F.addDefaultCase(B)})}const v=O=>O,b=new Map,_=new WeakMap;let M;function S(O,k){return M||(M=g()),M(O,k)}function w(){return M||(M=g()),M.getInitialState()}function R(O,k=!1){function B(F){let I=F[O];return typeof I>"u"&&k&&(I=N1(_,B,w)),I}function D(F=v){const I=N1(b,k,()=>new WeakMap);return N1(I,F,()=>{const L={};for(const[H,q]of Object.entries(r.selectors??{}))L[H]=qfe(q,F,()=>N1(_,F,w),k);return L})}return{reducerPath:O,getSelectors:D,get selectors(){return D(B)},selectSlice:B}}const P={name:a,reducer:S,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:w,...R(s),injectInto(O,{reducerPath:k,...B}={}){const D=k??s;return O.inject({reducerPath:D,reducer:S},B),{...P,...R(D,!0)}}};return P}}function qfe(n,e,t,i){function r(a,...s){let l=e(a);return typeof l>"u"&&i&&(l=t()),n(l,...s)}return r.unwrapped=n,r}var Co=Gfe();function Wfe(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function $fe({type:n,reducerName:e,createNotation:t},i,r){let a,s;if("reducer"in i){if(t&&!Yfe(i))throw new Error(Qo(17));a=i.reducer,s=i.prepare}else a=i;r.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,s?jl(n,s):jl(n))}function Xfe(n){return n._reducerDefinitionType==="asyncThunk"}function Yfe(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Kfe({type:n,reducerName:e},t,i,r){if(!r)throw new Error(Qo(18));const{payloadCreator:a,fulfilled:s,pending:l,rejected:c,settled:h,options:p}=t,g=r(n,a,p);i.exposeAction(e,g),s&&i.addCase(g.fulfilled,s),l&&i.addCase(g.pending,l),c&&i.addCase(g.rejected,c),h&&i.addMatcher(g.settled,h),i.exposeCaseReducer(e,{fulfilled:s||O1,pending:l||O1,rejected:c||O1,settled:h||O1})}function O1(){}var Zfe="task",O9="listener",D9="completed",gD="cancelled",Qfe=`task-${gD}`,Jfe=`task-${D9}`,FI=`${O9}-${gD}`,ehe=`${O9}-${D9}`,PA=class{constructor(n){LT(this,"name","TaskAbortError");LT(this,"message");this.code=n,this.message=`${Zfe} ${gD} (reason: ${n})`}},vD=(n,e)=>{if(typeof n!="function")throw new TypeError(Qo(32))},LE=()=>{},L9=(n,e=LE)=>(n.catch(e),n),U9=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),gm=n=>{if(n.aborted)throw new PA(n.reason)};function k9(n,e){let t=LE;return new Promise((i,r)=>{const a=()=>r(new PA(n.reason));if(n.aborted){a();return}t=U9(n,a),e.finally(()=>t()).then(i,r)}).finally(()=>{t=LE})}var the=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof PA?"cancelled":"rejected",error:t}}finally{e==null||e()}},UE=n=>e=>L9(k9(n,e).then(t=>(gm(n),t))),z9=n=>{const e=UE(n);return t=>e(new Promise(i=>setTimeout(i,t)))},{assign:Dv}=Object,eF={},IA="listenerMiddleware",nhe=(n,e)=>{const t=i=>U9(n,()=>i.abort(n.reason));return(i,r)=>{vD(i);const a=new AbortController;t(a);const s=the(async()=>{gm(n),gm(a.signal);const l=await i({pause:UE(a.signal),delay:z9(a.signal),signal:a.signal});return gm(a.signal),l},()=>a.abort(Jfe));return r!=null&&r.autoJoin&&e.push(s.catch(LE)),{result:UE(n)(s),cancel(){a.abort(Qfe)}}}},ihe=(n,e)=>{const t=async(i,r)=>{gm(e);let a=()=>{};const l=[new Promise((c,h)=>{let p=n({predicate:i,effect:(g,v)=>{v.unsubscribe(),c([g,v.getState(),v.getOriginalState()])}});a=()=>{p(),h()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await k9(e,Promise.race(l));return gm(e),c}finally{a()}};return(i,r)=>L9(t(i,r))},F9=n=>{let{type:e,actionCreator:t,matcher:i,predicate:r,effect:a}=n;if(e)r=jl(e).match;else if(t)e=t.type,r=t.match;else if(i)r=i;else if(!r)throw new Error(Qo(21));return vD(a),{predicate:r,type:e,effect:a}},B9=Dv(n=>{const{type:e,predicate:t,effect:i}=F9(n);return{id:Vfe(),effect:i,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(Qo(22))}}},{withTypes:()=>B9}),tF=(n,e)=>{const{type:t,effect:i,predicate:r}=F9(e);return Array.from(n.values()).find(a=>(typeof t=="string"?a.type===t:a.predicate===r)&&a.effect===i)},BI=n=>{n.pending.forEach(e=>{e.abort(FI)})},rhe=(n,e)=>()=>{for(const t of e.keys())BI(t);n.clear()},nF=(n,e,t)=>{try{n(e,t)}catch(i){setTimeout(()=>{throw i},0)}},V9=Dv(jl(`${IA}/add`),{withTypes:()=>V9}),ahe=jl(`${IA}/removeAll`),j9=Dv(jl(`${IA}/remove`),{withTypes:()=>j9}),she=(...n)=>{console.error(`${IA}/error`,...n)},Xx=(n={})=>{const e=new Map,t=new Map,i=b=>{const _=t.get(b)??0;t.set(b,_+1)},r=b=>{const _=t.get(b)??1;_===1?t.delete(b):t.set(b,_-1)},{extra:a,onError:s=she}=n;vD(s);const l=b=>(b.unsubscribe=()=>e.delete(b.id),e.set(b.id,b),_=>{b.unsubscribe(),_!=null&&_.cancelActive&&BI(b)}),c=b=>{const _=tF(e,b)??B9(b);return l(_)};Dv(c,{withTypes:()=>c});const h=b=>{const _=tF(e,b);return _&&(_.unsubscribe(),b.cancelActive&&BI(_)),!!_};Dv(h,{withTypes:()=>h});const p=async(b,_,M,S)=>{const w=new AbortController,R=ihe(c,w.signal),P=[];try{b.pending.add(w),i(b),await Promise.resolve(b.effect(_,Dv({},M,{getOriginalState:S,condition:(O,k)=>R(O,k).then(Boolean),take:R,delay:z9(w.signal),pause:UE(w.signal),extra:a,signal:w.signal,fork:nhe(w.signal,P),unsubscribe:b.unsubscribe,subscribe:()=>{e.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((O,k,B)=>{O!==w&&(O.abort(FI),B.delete(O))})},cancel:()=>{w.abort(FI),b.pending.delete(w)},throwIfCancelled:()=>{gm(w.signal)}})))}catch(O){O instanceof PA||nF(s,O,{raisedBy:"effect"})}finally{await Promise.all(P),w.abort(ehe),r(b),b.pending.delete(w)}},g=rhe(e,t);return{middleware:b=>_=>M=>{if(!v9(M))return _(M);if(V9.match(M))return c(M.payload);if(ahe.match(M)){g();return}if(j9.match(M))return h(M.payload);let S=b.getState();const w=()=>{if(S===eF)throw new Error(Qo(23));return S};let R;try{if(R=_(M),e.size>0){const P=b.getState(),O=Array.from(e.values());for(const k of O){let B=!1;try{B=k.predicate(M,P,S)}catch(D){B=!1,nF(s,D,{raisedBy:"predicate"})}B&&p(k,M,b,w)}}}finally{S=eF}return R},startListening:c,stopListening:h,clearListeners:g}};function Qo(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var ohe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},H9=Co({name:"chartLayout",initialState:ohe,reducers:{setLayout(n,e){n.layoutType=e.payload},setChartSize(n,e){n.width=e.payload.width,n.height=e.payload.height},setMargin(n,e){var t,i,r,a;n.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,n.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,n.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,n.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(n,e){n.scale=e.payload}}}),{setMargin:lhe,setLayout:uhe,setChartSize:che,setScale:fhe}=H9.actions,hhe=H9.reducer;function G9(n,e,t){return Array.isArray(n)&&n&&e+t!==0?n.slice(e,t+1):n}function Xn(n){return Number.isFinite(n)}function jc(n){return typeof n=="number"&&n>0&&Number.isFinite(n)}function iF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Mv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iF(Object(t),!0).forEach(function(i){dhe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function dhe(n,e,t){return(e=phe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function phe(n){var e=mhe(n,"string");return typeof e=="symbol"?e:e+""}function mhe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ya(n,e,t){return _s(n)||_s(e)?t:Vc(e)?_A(n,e,t):typeof e=="function"?e(n):t}var ghe=(n,e,t)=>{if(e&&t){var{width:i,height:r}=t,{align:a,verticalAlign:s,layout:l}=e;if((l==="vertical"||l==="horizontal"&&s==="middle")&&a!=="center"&&Wt(n[a]))return Mv(Mv({},n),{},{[a]:n[a]+(i||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&s!=="middle"&&Wt(n[s]))return Mv(Mv({},n),{},{[s]:n[s]+(r||0)})}return n},Wc=(n,e)=>n==="horizontal"&&e==="xAxis"||n==="vertical"&&e==="yAxis"||n==="centric"&&e==="angleAxis"||n==="radial"&&e==="radiusAxis",q9=(n,e,t,i)=>{if(i)return n.map(l=>l.coordinate);var r,a,s=n.map(l=>(l.coordinate===e&&(r=!0),l.coordinate===t&&(a=!0),l.coordinate));return r||s.push(e),a||s.push(t),s},W9=(n,e,t)=>{if(!n)return null;var{duplicateDomain:i,type:r,range:a,scale:s,realScaleType:l,isCategorical:c,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:v,axisType:b}=n;if(!s)return null;var _=l==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,M=r==="category"&&s.bandwidth?s.bandwidth()/_:0;if(M=b==="angleAxis"&&a&&a.length>=2?Ul(a[0]-a[1])*2*M:M,g||v){var S=(g||v||[]).map((w,R)=>{var P=i?i.indexOf(w):w,O=s.map(P);return Xn(O)?{coordinate:O+M,value:w,offset:M,index:R}:null}).filter(Ao);return S}return c&&h?h.map((w,R)=>{var P=s.map(w);return Xn(P)?{coordinate:P+M,value:w,index:R,offset:M}:null}).filter(Ao):s.ticks&&p!=null?s.ticks(p).map((w,R)=>{var P=s.map(w);return Xn(P)?{coordinate:P+M,value:w,index:R,offset:M}:null}).filter(Ao):s.domain().map((w,R)=>{var P=s.map(w);return Xn(P)?{coordinate:P+M,value:i?i[w]:w,index:R,offset:M}:null}).filter(Ao)},vhe=n=>{var e,t=n.length;if(!(t<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,s=0,l=0;l<t;++l){var c=n[l],h=c==null?void 0:c[r];if(h!=null){var p=h[1],g=h[0],v=Bc(p)?g:p;v>=0?(h[0]=a,a+=v,h[1]=a):(h[0]=s,s+=v,h[1]=s)}}}},yhe=n=>{var e,t=n.length;if(!(t<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,s=0;s<t;++s){var l=n[s],c=l==null?void 0:l[r];if(c!=null){var h=Bc(c[1])?c[0]:c[1];h>=0?(c[0]=a,a+=h,c[1]=a):(c[0]=0,c[1]=0)}}}},bhe={sign:vhe,expand:lce,none:Tm,silhouette:uce,wiggle:cce,positive:yhe},xhe=(n,e,t)=>{var i,r=(i=bhe[t])!==null&&i!==void 0?i:Tm,a=oce().keys(e).value((l,c)=>Number(Ya(l,c,0))).order(PI).offset(r),s=a(n);return s.forEach((l,c)=>{l.forEach((h,p)=>{var g=Ya(n[p],e[c],0);Array.isArray(g)&&g.length===2&&Wt(g[0])&&Wt(g[1])&&(h[0]=g[0],h[1]=g[1])})}),s};function _he(n){return n==null?void 0:String(n)}function rF(n){var{axis:e,ticks:t,bandSize:i,entry:r,index:a,dataKey:s}=n;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!_s(r[e.dataKey])){var l=t9(t,"value",r[e.dataKey]);if(l)return l.coordinate+i/2}return t!=null&&t[a]?t[a].coordinate+i/2:null}var c=Ya(r,_s(s)?e.dataKey:s),h=e.scale.map(c);return Wt(h)?h:null}var She=n=>{var e=n.flat(2).filter(Wt);return[Math.min(...e),Math.max(...e)]},whe=n=>[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]],Ehe=(n,e,t)=>{if(n!=null)return whe(Object.keys(n).reduce((i,r)=>{var a=n[r];if(!a)return i;var{stackedData:s}=a,l=s.reduce((c,h)=>{var p=G9(h,e,t),g=She(p);return!Xn(g[0])||!Xn(g[1])?c:[Math.min(c[0],g[0]),Math.max(c[1],g[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]))},aF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kE=(n,e,t)=>{if(n&&n.scale&&n.scale.bandwidth){var i=n.scale.bandwidth();if(!t||i>0)return i}if(n&&e&&e.length>=2){for(var r=SA(e,p=>p.coordinate),a=1/0,s=1,l=r.length;s<l;s++){var c=r[s],h=r[s-1];a=Math.min(((c==null?void 0:c.coordinate)||0)-((h==null?void 0:h.coordinate)||0),a)}return a===1/0?0:a}return t?void 0:0};function oF(n){var{tooltipEntrySettings:e,dataKey:t,payload:i,value:r,name:a}=n;return Mv(Mv({},e),{},{dataKey:t,payload:i,value:r,name:a})}function $9(n,e){if(n)return String(n);if(typeof e=="string")return e}var Mhe=(n,e)=>{if(e==="horizontal")return n.chartX;if(e==="vertical")return n.chartY},Ahe=(n,e)=>e==="centric"?n.angle:n.radius,eh=n=>n.layout.width,th=n=>n.layout.height,The=n=>n.layout.scale,X9=n=>n.layout.margin,NA=qe(n=>n.cartesianAxis.xAxis,n=>Object.values(n)),OA=qe(n=>n.cartesianAxis.yAxis,n=>Object.values(n)),Che="data-recharts-item-index",Rhe="data-recharts-item-id",Yx=60;function lF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function D1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lF(Object(t),!0).forEach(function(i){Phe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Phe(n,e,t){return(e=Ihe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ihe(n){var e=Nhe(n,"string");return typeof e=="symbol"?e:e+""}function Nhe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Ohe=n=>n.brush.height;function Dhe(n){var e=OA(n);return e.reduce((t,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Yx;return t+r}return t},0)}function Lhe(n){var e=OA(n);return e.reduce((t,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Yx;return t+r}return t},0)}function Uhe(n){var e=NA(n);return e.reduce((t,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?t+i.height:t,0)}function khe(n){var e=NA(n);return e.reduce((t,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?t+i.height:t,0)}var Za=qe([eh,th,X9,Ohe,Dhe,Lhe,Uhe,khe,p9,cfe],(n,e,t,i,r,a,s,l,c,h)=>{var p={left:(t.left||0)+r,right:(t.right||0)+a},g={top:(t.top||0)+s,bottom:(t.bottom||0)+l},v=D1(D1({},g),p),b=v.bottom;v.bottom+=i,v=ghe(v,c,h);var _=n-v.left-v.right,M=e-v.top-v.bottom;return D1(D1({brushBottom:b},v),{},{width:Math.max(_,0),height:Math.max(M,0)})}),zhe=qe(Za,n=>({x:n.left,y:n.top,width:n.width,height:n.height})),Y9=qe(eh,th,(n,e)=>({x:0,y:0,width:n,height:e})),Fhe=j.createContext(null),Ro=()=>j.useContext(Fhe)!=null,DA=n=>n.brush,LA=qe([DA,Za,X9],(n,e,t)=>({height:n.height,x:Wt(n.x)?n.x:e.left,y:Wt(n.y)?n.y:e.top+e.height+e.brushBottom-((t==null?void 0:t.bottom)||0),width:Wt(n.width)?n.width:e.width})),KR={},ZR={},QR={},uF;function Bhe(){return uF||(uF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i,{signal:r,edges:a}={}){let s,l=null;const c=a!=null&&a.includes("leading"),h=a==null||a.includes("trailing"),p=()=>{l!==null&&(t.apply(s,l),s=void 0,l=null)},g=()=>{h&&p(),M()};let v=null;const b=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},i)},_=()=>{v!==null&&(clearTimeout(v),v=null)},M=()=>{_(),s=void 0,l=null},S=()=>{p()},w=function(...R){if(r!=null&&r.aborted)return;s=this,l=R;const P=v==null;b(),c&&P&&p()};return w.schedule=b,w.cancel=M,w.flush=S,r==null||r.addEventListener("abort",M,{once:!0}),w}n.debounce=e})(QR)),QR}var cF;function Vhe(){return cF||(cF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Bhe();function t(i,r=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:l=!0,maxWait:c}=a,h=Array(2);s&&(h[0]="leading"),l&&(h[1]="trailing");let p,g=null;const v=e.debounce(function(...M){p=i.apply(this,M),g=null},r,{edges:h}),b=function(...M){return c!=null&&(g===null&&(g=Date.now()),Date.now()-g>=c)?(p=i.apply(this,M),g=Date.now(),v.cancel(),v.schedule(),p):(v.apply(this,M),p)},_=()=>(v.flush(),p);return b.cancel=v.cancel,b.flush=_,b}n.debounce=t})(ZR)),ZR}var fF;function jhe(){return fF||(fF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Vhe();function t(i,r=0,a={}){const{leading:s=!0,trailing:l=!0}=a;return e.debounce(i,r,{leading:s,maxWait:r,trailing:l})}n.throttle=t})(KR)),KR}var JR,hF;function Hhe(){return hF||(hF=1,JR=jhe().throttle),JR}var Ghe=Hhe();const qhe=Pu(Ghe);var zE=function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>r[s++]))}},Ac={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},K9=(n,e,t)=>{var{width:i=Ac.width,height:r=Ac.height,aspect:a,maxHeight:s}=t,l=Cm(i)?n:Number(i),c=Cm(r)?e:Number(r);return a&&a>0&&(l?c=l/a:c&&(l=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:l,calculatedHeight:c}},Whe={width:0,height:0,overflow:"visible"},$he={width:0,overflowX:"visible"},Xhe={height:0,overflowY:"visible"},Yhe={},Khe=n=>{var{width:e,height:t}=n,i=Cm(e),r=Cm(t);return i&&r?Whe:i?$he:r?Xhe:Yhe};function Zhe(n){var{width:e,height:t,aspect:i}=n,r=e,a=t;return r===void 0&&a===void 0?(r=Ac.width,a=Ac.height):r===void 0?r=i&&i>0?void 0:Ac.width:a===void 0&&(a=i&&i>0?void 0:Ac.height),{width:r,height:a}}function VI(){return VI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},VI.apply(null,arguments)}function dF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function pF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(t),!0).forEach(function(i){Qhe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Qhe(n,e,t){return(e=Jhe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jhe(n){var e=ede(n,"string");return typeof e=="symbol"?e:e+""}function ede(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Z9=j.createContext(Ac.initialDimension);function tde(n){return jc(n.width)&&jc(n.height)}function Q9(n){var{children:e,width:t,height:i}=n,r=j.useMemo(()=>({width:t,height:i}),[t,i]);return tde(r)?j.createElement(Z9.Provider,{value:r},e):null}var yD=()=>j.useContext(Z9),nde=j.forwardRef((n,e)=>{var{aspect:t,initialDimension:i=Ac.initialDimension,width:r,height:a,minWidth:s=Ac.minWidth,minHeight:l,maxHeight:c,children:h,debounce:p=Ac.debounce,id:g,className:v,onResize:b,style:_={}}=n,M=j.useRef(null),S=j.useRef();S.current=b,j.useImperativeHandle(e,()=>M.current);var[w,R]=j.useState({containerWidth:i.width,containerHeight:i.height}),P=j.useCallback((F,I)=>{R(L=>{var H=Math.round(F),q=Math.round(I);return L.containerWidth===H&&L.containerHeight===q?L:{containerWidth:H,containerHeight:q}})},[]);j.useEffect(()=>{if(M.current==null||typeof ResizeObserver>"u")return y0;var F=q=>{var W,oe=q[0];if(oe!=null){var{width:fe,height:te}=oe.contentRect;P(fe,te),(W=S.current)===null||W===void 0||W.call(S,fe,te)}};p>0&&(F=qhe(F,p,{trailing:!0,leading:!1}));var I=new ResizeObserver(F),{width:L,height:H}=M.current.getBoundingClientRect();return P(L,H),I.observe(M.current),()=>{I.disconnect()}},[P,p]);var{containerWidth:O,containerHeight:k}=w;zE(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:B,calculatedHeight:D}=K9(O,k,{width:r,height:a,aspect:t,maxHeight:c});return zE(B!=null&&B>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,D,r,a,s,l,t),j.createElement("div",{id:g?"".concat(g):void 0,className:Yi("recharts-responsive-container",v),style:pF(pF({},_),{},{width:r,height:a,minWidth:s,minHeight:l,maxHeight:c}),ref:M},j.createElement("div",{style:Khe({width:r,height:a})},j.createElement(Q9,{width:B,height:D},h)))}),ide=j.forwardRef((n,e)=>{var t=yD();if(jc(t.width)&&jc(t.height))return n.children;var{width:i,height:r}=Zhe({width:n.width,height:n.height,aspect:n.aspect}),{calculatedWidth:a,calculatedHeight:s}=K9(void 0,void 0,{width:i,height:r,aspect:n.aspect,maxHeight:n.maxHeight});return Wt(a)&&Wt(s)?j.createElement(Q9,{width:a,height:s},n.children):j.createElement(nde,VI({},n,{width:i,height:r,ref:e}))});function bD(n){if(n)return{x:n.x,y:n.y,upperWidth:"upperWidth"in n?n.upperWidth:n.width,lowerWidth:"lowerWidth"in n?n.lowerWidth:n.width,width:n.width,height:n.height}}var UA=()=>{var n,e=Ro(),t=sn(zhe),i=sn(LA),r=(n=sn(DA))===null||n===void 0?void 0:n.padding;return!e||!i||!r?t:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},rde={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},J9=()=>{var n;return(n=sn(Za))!==null&&n!==void 0?n:rde},eH=()=>sn(eh),tH=()=>sn(th),rr=n=>n.layout.layoutType,b0=()=>sn(rr),xD=()=>{var n=b0();if(n==="horizontal"||n==="vertical")return n},nH=n=>{var e=n.layout.layoutType;if(e==="centric"||e==="radial")return e},ade=()=>{var n=b0();return n!==void 0},Kx=n=>{var e=Sa(),t=Ro(),{width:i,height:r}=n,a=yD(),s=i,l=r;return a&&(s=a.width>0?a.width:i,l=a.height>0?a.height:r),j.useEffect(()=>{!t&&jc(s)&&jc(l)&&e(che({width:s,height:l}))},[e,t,s,l]),null},iH=Symbol.for("immer-nothing"),mF=Symbol.for("immer-draftable"),el=Symbol.for("immer-state");function _u(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var yx=Object.getPrototypeOf;function n0(n){return!!n&&!!n[el]}function Pm(n){var e;return n?rH(n)||Array.isArray(n)||!!n[mF]||!!((e=n.constructor)!=null&&e[mF])||Zx(n)||zA(n):!1}var sde=Object.prototype.constructor.toString(),gF=new WeakMap;function rH(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let i=gF.get(t);return i===void 0&&(i=Function.toString.call(t),gF.set(t,i)),i===sde}function FE(n,e,t=!0){kA(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function kA(n){const e=n[el];return e?e.type_:Array.isArray(n)?1:Zx(n)?2:zA(n)?3:0}function jI(n,e){return kA(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function aH(n,e,t){const i=kA(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function ode(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Zx(n){return n instanceof Map}function zA(n){return n instanceof Set}function Zp(n){return n.copy_||n.base_}function HI(n,e){if(Zx(n))return new Map(n);if(zA(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=rH(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[el];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],l=i[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:n[s]})}return Object.create(yx(n),i)}else{const i=yx(n);if(i!==null&&t)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function _D(n,e=!1){return FA(n)||n0(n)||!Pm(n)||(kA(n)>1&&Object.defineProperties(n,{set:L1,add:L1,clear:L1,delete:L1}),Object.freeze(n),e&&Object.values(n).forEach(t=>_D(t,!0))),n}function lde(){_u(2)}var L1={value:lde};function FA(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var ude={};function Im(n){const e=ude[n];return e||_u(0,n),e}var bx;function sH(){return bx}function cde(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vF(n,e){e&&(Im("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function GI(n){qI(n),n.drafts_.forEach(fde),n.drafts_=null}function qI(n){n===bx&&(bx=n.parent_)}function yF(n){return bx=cde(bx,n)}function fde(n){const e=n[el];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function bF(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[el].modified_&&(GI(e),_u(4)),Pm(n)&&(n=BE(e,n),e.parent_||VE(e,n)),e.patches_&&Im("Patches").generateReplacementPatches_(t[el].base_,n,e.patches_,e.inversePatches_)):n=BE(e,t,[]),GI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==iH?n:void 0}function BE(n,e,t){if(FA(e))return e;const i=n.immer_.shouldUseStrictIteration(),r=e[el];if(!r)return FE(e,(a,s)=>xF(n,r,e,a,s,t),i),e;if(r.scope_!==n)return e;if(!r.modified_)return VE(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let s=a,l=!1;r.type_===3&&(s=new Set(a),a.clear(),l=!0),FE(s,(c,h)=>xF(n,r,a,c,h,t,l),i),VE(n,a,!1),t&&n.patches_&&Im("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function xF(n,e,t,i,r,a,s){if(r==null||typeof r!="object"&&!s)return;const l=FA(r);if(!(l&&!s)){if(n0(r)){const c=a&&e&&e.type_!==3&&!jI(e.assigned_,i)?a.concat(i):void 0,h=BE(n,r,c);if(aH(t,i,h),n0(h))n.canAutoFreeze_=!1;else return}else s&&t.add(r);if(Pm(r)&&!l){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&l)return;BE(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Zx(t)?t.has(i):Object.prototype.propertyIsEnumerable.call(t,i))&&VE(n,r)}}}function VE(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&_D(e,t)}function hde(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:sH(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=SD;t&&(r=[i],a=xx);const{revoke:s,proxy:l}=Proxy.revocable(r,a);return i.draft_=l,i.revoke_=s,l}var SD={get(n,e){if(e===el)return n;const t=Zp(n);if(!jI(t,e))return dde(n,t,e);const i=t[e];return n.finalized_||!Pm(i)?i:i===eP(n.base_,e)?(tP(n),n.copy_[e]=$I(i,n)):i},has(n,e){return e in Zp(n)},ownKeys(n){return Reflect.ownKeys(Zp(n))},set(n,e,t){const i=oH(Zp(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=eP(Zp(n),e),a=r==null?void 0:r[el];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(ode(t,r)&&(t!==void 0||jI(n.base_,e)))return!0;tP(n),WI(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return eP(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,tP(n),WI(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Zp(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){_u(11)},getPrototypeOf(n){return yx(n.base_)},setPrototypeOf(){_u(12)}},xx={};FE(SD,(n,e)=>{xx[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});xx.deleteProperty=function(n,e){return xx.set.call(this,n,e,void 0)};xx.set=function(n,e,t){return SD.set.call(this,n[0],e,t,n[0])};function eP(n,e){const t=n[el];return(t?Zp(t):n)[e]}function dde(n,e,t){var r;const i=oH(e,t);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function oH(n,e){if(!(e in n))return;let t=yx(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=yx(t)}}function WI(n){n.modified_||(n.modified_=!0,n.parent_&&WI(n.parent_))}function tP(n){n.copy_||(n.copy_=HI(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var pde=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(c=a,...h){return s.produce(c,p=>t.call(this,p,...h))}}typeof t!="function"&&_u(6),i!==void 0&&typeof i!="function"&&_u(7);let r;if(Pm(e)){const a=yF(this),s=$I(e,void 0);let l=!0;try{r=t(s),l=!1}finally{l?GI(a):qI(a)}return vF(a,i),bF(r,a)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===iH&&(r=void 0),this.autoFreeze_&&_D(r,!0),i){const a=[],s=[];Im("Patches").generateReplacementPatches_(e,r,a,s),i(a,s)}return r}else _u(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let i,r;return[this.produce(e,t,(s,l)=>{i=s,r=l}),i,r]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof(n==null?void 0:n.useStrictIteration)=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Pm(n)||_u(8),n0(n)&&(n=mde(n));const e=yF(this),t=$I(n,void 0);return t[el].isManual_=!0,qI(e),t}finishDraft(n,e){const t=n&&n[el];(!t||!t.isManual_)&&_u(9);const{scope_:i}=t;return vF(i,e),bF(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=Im("Patches").applyPatches_;return n0(n)?i(n,e):this.produce(n,r=>i(r,e))}};function $I(n,e){const t=Zx(n)?Im("MapSet").proxyMap_(n,e):zA(n)?Im("MapSet").proxySet_(n,e):hde(n,e);return(e?e.scope_:sH()).drafts_.push(t),t}function mde(n){return n0(n)||_u(10,n),lH(n)}function lH(n){if(!Pm(n)||FA(n))return n;const e=n[el];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=HI(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=HI(n,!0);return FE(t,(r,a)=>{aH(t,r,lH(a))},i),e&&(e.finalized_=!1),t}var gde=new pde;gde.produce;var vde={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},uH=Co({name:"legend",initialState:vde,reducers:{setLegendSize(n,e){n.size.width=e.payload.width,n.size.height=e.payload.height},setLegendSettings(n,e){n.settings.align=e.payload.align,n.settings.layout=e.payload.layout,n.settings.verticalAlign=e.payload.verticalAlign,n.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(n,e){n.payload.push(e.payload)},prepare:nr()},replaceLegendPayload:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Tu(n).payload.indexOf(t);r>-1&&(n.payload[r]=i)},prepare:nr()},removeLegendPayload:{reducer(n,e){var t=Tu(n).payload.indexOf(e.payload);t>-1&&n.payload.splice(t,1)},prepare:nr()}}}),{setLegendSize:nAe,setLegendSettings:iAe,addLegendPayload:yde,replaceLegendPayload:bde,removeLegendPayload:xde}=uH.actions,_de=uH.reducer;function XI(){return XI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},XI.apply(null,arguments)}function _F(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function rb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_F(Object(t),!0).forEach(function(i){Sde(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_F(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Sde(n,e,t){return(e=wde(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wde(n){var e=Ede(n,"string");return typeof e=="symbol"?e:e+""}function Ede(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Mde(n){return Array.isArray(n)&&Vc(n[0])&&Vc(n[1])?n.join(" ~ "):n}var cv={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Ade=n=>{var{separator:e=cv.separator,contentStyle:t,itemStyle:i,labelStyle:r=cv.labelStyle,payload:a,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:v=cv.accessibilityLayer}=n,b=()=>{if(a&&a.length){var k={padding:0,margin:0},B=(l?SA(a,l):a).map((D,F)=>{if(D.type==="none")return null;var I=D.formatter||s||Mde,{value:L,name:H}=D,q=L,W=H;if(I){var oe=I(L,H,D,F,a);if(Array.isArray(oe))[q,W]=oe;else if(oe!=null)q=oe;else return null}var fe=rb(rb({},cv.itemStyle),{},{color:D.color||cv.itemStyle.color},i);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:fe},Vc(W)?j.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Vc(W)?j.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,j.createElement("span",{className:"recharts-tooltip-item-value"},q),j.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:k},B)}return null},_=rb(rb({},cv.contentStyle),t),M=rb({margin:0},r),S=!_s(p),w=S?p:"",R=Yi("recharts-default-tooltip",c),P=Yi("recharts-tooltip-label",h);S&&g&&a!==void 0&&a!==null&&(w=g(p,a));var O=v?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",XI({className:R,style:_},O),j.createElement("p",{className:P,style:M},j.isValidElement(w)?w:"".concat(w)),b())},ab="recharts-tooltip-wrapper",Tde={visibility:"hidden"};function Cde(n){var{coordinate:e,translateX:t,translateY:i}=n;return Yi(ab,{["".concat(ab,"-right")]:Wt(t)&&e&&Wt(e.x)&&t>=e.x,["".concat(ab,"-left")]:Wt(t)&&e&&Wt(e.x)&&t<e.x,["".concat(ab,"-bottom")]:Wt(i)&&e&&Wt(e.y)&&i>=e.y,["".concat(ab,"-top")]:Wt(i)&&e&&Wt(e.y)&&i<e.y})}function SF(n){var{allowEscapeViewBox:e,coordinate:t,key:i,offset:r,position:a,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:h}=n;if(a&&Wt(a[i]))return a[i];var p=t[i]-l-(r>0?r:0),g=t[i]+r;if(e[i])return s[i]?p:g;var v=c[i];if(v==null)return 0;if(s[i]){var b=p,_=v;return b<_?Math.max(g,v):Math.max(p,v)}if(h==null)return 0;var M=g+l,S=v+h;return M>S?Math.max(p,v):Math.max(g,v)}function Rde(n){var{translateX:e,translateY:t,useTranslate3d:i}=n;return{transform:i?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function Pde(n){var{allowEscapeViewBox:e,coordinate:t,offsetTop:i,offsetLeft:r,position:a,reverseDirection:s,tooltipBox:l,useTranslate3d:c,viewBox:h}=n,p,g,v;return l.height>0&&l.width>0&&t?(g=SF({allowEscapeViewBox:e,coordinate:t,key:"x",offset:r,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:h,viewBoxDimension:h.width}),v=SF({allowEscapeViewBox:e,coordinate:t,key:"y",offset:i,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:h,viewBoxDimension:h.height}),p=Rde({translateX:g,translateY:v,useTranslate3d:c})):p=Tde,{cssProperties:p,cssClasses:Cde({translateX:g,translateY:v,coordinate:t})}}function wF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function U1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wF(Object(t),!0).forEach(function(i){YI(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function YI(n,e,t){return(e=Ide(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ide(n){var e=Nde(n,"string");return typeof e=="symbol"?e:e+""}function Nde(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Ode extends j.PureComponent{constructor(){super(...arguments),YI(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),YI(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,i,r,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&t!==void 0?t:0,y:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:i,animationEasing:r,children:a,coordinate:s,hasPayload:l,isAnimationActive:c,offset:h,position:p,reverseDirection:g,useTranslate3d:v,viewBox:b,wrapperStyle:_,lastBoundingBox:M,innerRef:S,hasPortalFromProps:w}=this.props,R=typeof h=="number"?h:h.x,P=typeof h=="number"?h:h.y,{cssClasses:O,cssProperties:k}=Pde({allowEscapeViewBox:t,coordinate:s,offsetLeft:R,offsetTop:P,position:p,reverseDirection:g,tooltipBox:{height:M.height,width:M.width},useTranslate3d:v,viewBox:b}),B=w?{}:U1(U1({transition:c&&e?"transform ".concat(i,"ms ").concat(r):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),D=U1(U1({},B),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},_);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:D,ref:S},a)}}var cH=()=>{var n;return(n=sn(e=>e.rootProps.accessibilityLayer))!==null&&n!==void 0?n:!0};function KI(){return KI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},KI.apply(null,arguments)}function EF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function MF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EF(Object(t),!0).forEach(function(i){Dde(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):EF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Dde(n,e,t){return(e=Lde(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lde(n){var e=Ude(n,"string");return typeof e=="symbol"?e:e+""}function Ude(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var AF={curveBasisClosed:Kue,curveBasisOpen:Zue,curveBasis:Yue,curveBumpX:$ue,curveBumpY:Xue,curveLinearClosed:Que,curveLinear:bA,curveMonotoneX:Jue,curveMonotoneY:ece,curveNatural:tce,curveStep:nce,curveStepAfter:rce,curveStepBefore:ice},jE=n=>Xn(n.x)&&Xn(n.y),TF=n=>n.base!=null&&jE(n.base)&&jE(n),sb=n=>n.x,ob=n=>n.y,kde=(n,e)=>{if(typeof n=="function")return n;var t="curve".concat(oD(n));if((t==="curveMonotone"||t==="curveBump")&&e){var i=AF["".concat(t).concat(e==="vertical"?"Y":"X")];if(i)return i}return AF[t]||bA},CF={connectNulls:!1,type:"linear"},zde=n=>{var{type:e=CF.type,points:t=[],baseLine:i,layout:r,connectNulls:a=CF.connectNulls}=n,s=kde(e,r),l=a?t.filter(jE):t;if(Array.isArray(i)){var c,h=t.map((_,M)=>MF(MF({},_),{},{base:i[M]}));r==="vertical"?c=C1().y(ob).x1(sb).x0(_=>_.base.x):c=C1().x(sb).y1(ob).y0(_=>_.base.y);var p=c.defined(TF).curve(s),g=a?h.filter(TF):h;return p(g)}var v;r==="vertical"&&Wt(i)?v=C1().y(ob).x1(sb).x0(i):Wt(i)?v=C1().x(sb).y1(ob).y0(i):v=G8().x(sb).y(ob);var b=v.defined(jE).curve(s);return b(l)},aw=n=>{var{className:e,points:t,path:i,pathRef:r}=n,a=b0();if((!t||!t.length)&&!i)return null;var s={type:n.type,points:n.points,baseLine:n.baseLine,layout:n.layout||a,connectNulls:n.connectNulls},l=t&&t.length?zde(s):i;return j.createElement("path",KI({},Cu(n),lD(n),{className:Yi("recharts-curve",e),d:l===null?void 0:l,ref:r}))},Fde=["x","y","top","left","width","height","className"];function ZI(){return ZI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ZI.apply(null,arguments)}function RF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Bde(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RF(Object(t),!0).forEach(function(i){Vde(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):RF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Vde(n,e,t){return(e=jde(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jde(n){var e=Hde(n,"string");return typeof e=="symbol"?e:e+""}function Hde(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Gde(n,e){if(n==null)return{};var t,i,r=qde(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function qde(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var Wde=(n,e,t,i,r,a)=>"M".concat(n,",").concat(r,"v").concat(i,"M").concat(a,",").concat(e,"h").concat(t),$de=n=>{var{x:e=0,y:t=0,top:i=0,left:r=0,width:a=0,height:s=0,className:l}=n,c=Gde(n,Fde),h=Bde({x:e,y:t,top:i,left:r,width:a,height:s},c);return!Wt(e)||!Wt(t)||!Wt(a)||!Wt(s)||!Wt(i)||!Wt(r)?null:j.createElement("path",ZI({},Vl(h),{className:Yi("recharts-cross",l),d:Wde(e,t,a,s,i,r)}))};function Xde(n,e,t,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-r:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-r,width:n==="horizontal"?i:t.width-1,height:n==="horizontal"?t.height-1:i}}function PF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function IF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PF(Object(t),!0).forEach(function(i){Yde(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Yde(n,e,t){return(e=Kde(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Kde(n){var e=Zde(n,"string");return typeof e=="symbol"?e:e+""}function Zde(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Qde=n=>n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Jde=(n,e,t)=>n.map(i=>"".concat(Qde(i)," ").concat(e,"ms ").concat(t)).join(","),epe=(n,e)=>[Object.keys(n),Object.keys(e)].reduce((t,i)=>t.filter(r=>i.includes(r))),_x=(n,e)=>Object.keys(e).reduce((t,i)=>IF(IF({},t),{},{[i]:n(i,e[i])}),{});function NF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Jr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(t),!0).forEach(function(i){tpe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function tpe(n,e,t){return(e=npe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function npe(n){var e=ipe(n,"string");return typeof e=="symbol"?e:e+""}function ipe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var HE=(n,e,t)=>n+(e-n)*t,QI=n=>{var{from:e,to:t}=n;return e!==t},fH=(n,e,t)=>{var i=_x((r,a)=>{if(QI(a)){var[s,l]=n(a.from,a.to,a.velocity);return Jr(Jr({},a),{},{from:s,velocity:l})}return a},e);return t<1?_x((r,a)=>QI(a)&&i[r]!=null?Jr(Jr({},a),{},{velocity:HE(a.velocity,i[r].velocity,t),from:HE(a.from,i[r].from,t)}):a,e):fH(n,i,t-1)};function rpe(n,e,t,i,r,a){var s,l=i.reduce((v,b)=>Jr(Jr({},v),{},{[b]:{from:n[b],velocity:0,to:e[b]}}),{}),c=()=>_x((v,b)=>b.from,l),h=()=>!Object.values(l).filter(QI).length,p=null,g=v=>{s||(s=v);var b=v-s,_=b/t.dt;l=fH(t,l,_),r(Jr(Jr(Jr({},n),e),c())),s=v,h()||(p=a.setTimeout(g))};return()=>(p=a.setTimeout(g),()=>{var v;(v=p)===null||v===void 0||v()})}function ape(n,e,t,i,r,a,s){var l=null,c=r.reduce((g,v)=>{var b=n[v],_=e[v];return b==null||_==null?g:Jr(Jr({},g),{},{[v]:[b,_]})},{}),h,p=g=>{h||(h=g);var v=(g-h)/i,b=_x((M,S)=>HE(...S,t(v)),c);if(a(Jr(Jr(Jr({},n),e),b)),v<1)l=s.setTimeout(p);else{var _=_x((M,S)=>HE(...S,t(1)),c);a(Jr(Jr(Jr({},n),e),_))}};return()=>(l=s.setTimeout(p),()=>{var g;(g=l)===null||g===void 0||g()})}const spe=(n,e,t,i,r,a)=>{var s=epe(n,e);return t==null?()=>(r(Jr(Jr({},n),e)),()=>{}):t.isStepper===!0?rpe(n,e,t,s,r,a):ape(n,e,t,i,s,r,a)};var GE=1e-4,hH=(n,e)=>[0,3*n,3*e-6*n,3*n-3*e+1],dH=(n,e)=>n.map((t,i)=>t*e**i).reduce((t,i)=>t+i),OF=(n,e)=>t=>{var i=hH(n,e);return dH(i,t)},ope=(n,e)=>t=>{var i=hH(n,e),r=[...i.map((a,s)=>a*s).slice(1),0];return dH(r,t)},lpe=n=>{var e,t=n.split("(");if(t.length!==2||t[0]!=="cubic-bezier")return null;var i=(e=t[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var r=i.map(a=>parseFloat(a));return[r[0],r[1],r[2],r[3]]},upe=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=lpe(t[0]);if(r)return r}}return t.length===4?t:[0,0,1,1]},cpe=(n,e,t,i)=>{var r=OF(n,t),a=OF(e,i),s=ope(n,t),l=h=>h>1?1:h<0?0:h,c=h=>{for(var p=h>1?1:h,g=p,v=0;v<8;++v){var b=r(g)-p,_=s(g);if(Math.abs(b-p)<GE||_<GE)return a(g);g=l(g-b/_)}return a(g)};return c.isStepper=!1,c},DF=function(){return cpe(...upe(...arguments))},fpe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:i=8,dt:r=17}=e,a=(s,l,c)=>{var h=-(s-l)*t,p=c*i,g=c+(h-p)*r/1e3,v=c*r/1e3+s;return Math.abs(v-l)<GE&&Math.abs(g)<GE?[l,0]:[v,g]};return a.isStepper=!0,a.dt=r,a},hpe=n=>{if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DF(n);case"spring":return fpe();default:if(n.split("(")[0]==="cubic-bezier")return DF(n)}return typeof n=="function"?n:null};function dpe(n){var e,t=()=>null,i=!1,r=null,a=s=>{if(!i){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...h]=l;if(typeof c=="number"){r=n.setTimeout(a.bind(null,h),c);return}a(c),r=n.setTimeout(a.bind(null,h));return}typeof s=="string"&&(e=s,t(e)),typeof s=="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:()=>{i=!0},start:s=>{i=!1,r&&(r(),r=null),a(s)},subscribe:s=>(t=s,()=>{t=()=>null}),getTimeoutController:()=>n}}class ppe{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,a=s=>{s-i>=t?e(s):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{r!=null&&cancelAnimationFrame(r)}}}function mpe(){return dpe(new ppe)}var gpe=j.createContext(mpe);function vpe(n,e){var t=j.useContext(gpe);return j.useMemo(()=>e??t(n),[n,e,t])}var ype=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qx={isSsr:ype()},bpe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},LF={t:0},nP={t:1};function pH(n){var e=tl(n,bpe),{isActive:t,canBegin:i,duration:r,easing:a,begin:s,onAnimationEnd:l,onAnimationStart:c,children:h}=e,p=t==="auto"?!Qx.isSsr:t,g=vpe(e.animationId,e.animationManager),[v,b]=j.useState(p?LF:nP),_=j.useRef(null);return j.useEffect(()=>{p||b(nP)},[p]),j.useEffect(()=>{if(!p||!i)return y0;var M=spe(LF,nP,hpe(a),r,b,g.getTimeoutController()),S=()=>{_.current=M()};return g.start([c,s,S,r,l]),()=>{g.stop(),_.current&&_.current(),l()}},[p,i,r,a,s,c,l,g]),h(v.t)}function mH(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=j.useRef(px(e)),i=j.useRef(n);return i.current!==n&&(t.current=px(e),i.current=n),t.current}var xpe=["radius"],_pe=["radius"],UF,kF,zF,FF,BF,VF,jF,HF,GF,qF;function WF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function $F(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WF(Object(t),!0).forEach(function(i){Spe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Spe(n,e,t){return(e=wpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wpe(n){var e=Epe(n,"string");return typeof e=="symbol"?e:e+""}function Epe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qE(){return qE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},qE.apply(null,arguments)}function XF(n,e){if(n==null)return{};var t,i,r=Mpe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Mpe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function mc(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var YF=(n,e,t,i,r)=>{var a=yd(t),s=yd(i),l=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,h=a>=0?1:-1,p=s>=0&&a>=0||s<0&&a<0?1:0,g;if(l>0&&Array.isArray(r)){for(var v=[0,0,0,0],b=0,_=4;b<_;b++){var M,S=(M=r[b])!==null&&M!==void 0?M:0;v[b]=S>l?l:S}g=ja(UF||(UF=mc(["M",",",""])),n,e+c*v[0]),v[0]>0&&(g+=ja(kF||(kF=mc(["A ",",",",0,0,",",",",",""])),v[0],v[0],p,n+h*v[0],e)),g+=ja(zF||(zF=mc(["L ",",",""])),n+t-h*v[1],e),v[1]>0&&(g+=ja(FF||(FF=mc(["A ",",",",0,0,",`,
        `,",",""])),v[1],v[1],p,n+t,e+c*v[1])),g+=ja(BF||(BF=mc(["L ",",",""])),n+t,e+i-c*v[2]),v[2]>0&&(g+=ja(VF||(VF=mc(["A ",",",",0,0,",`,
        `,",",""])),v[2],v[2],p,n+t-h*v[2],e+i)),g+=ja(jF||(jF=mc(["L ",",",""])),n+h*v[3],e+i),v[3]>0&&(g+=ja(HF||(HF=mc(["A ",",",",0,0,",`,
        `,",",""])),v[3],v[3],p,n,e+i-c*v[3])),g+="Z"}else if(l>0&&r===+r&&r>0){var w=Math.min(l,r);g=ja(GF||(GF=mc(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),n,e+c*w,w,w,p,n+h*w,e,n+t-h*w,e,w,w,p,n+t,e+c*w,n+t,e+i-c*w,w,w,p,n+t-h*w,e+i,n+h*w,e+i,w,w,p,n,e+i-c*w)}else g=ja(qF||(qF=mc(["M ",","," h "," v "," h "," Z"])),n,e,t,i,-t);return g},KF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ape=n=>{var e=tl(n,KF),t=j.useRef(null),[i,r]=j.useState(-1);j.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var re=t.current.getTotalLength();re&&r(re)}catch{}},[]);var{x:a,y:s,width:l,height:c,radius:h,className:p}=e,{animationEasing:g,animationDuration:v,animationBegin:b,isAnimationActive:_,isUpdateAnimationActive:M}=e,S=j.useRef(l),w=j.useRef(c),R=j.useRef(a),P=j.useRef(s),O=j.useMemo(()=>({x:a,y:s,width:l,height:c,radius:h}),[a,s,l,c,h]),k=mH(O,"rectangle-");if(a!==+a||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var B=Yi("recharts-rectangle",p);if(!M){var D=Vl(e),{radius:F}=D,I=XF(D,xpe);return j.createElement("path",qE({},I,{x:yd(a),y:yd(s),width:yd(l),height:yd(c),radius:typeof h=="number"?h:void 0,className:B,d:YF(a,s,l,c,h)}))}var L=S.current,H=w.current,q=R.current,W=P.current,oe="0px ".concat(i===-1?1:i,"px"),fe="".concat(i,"px 0px"),te=Jde(["strokeDasharray"],v,typeof g=="string"?g:KF.animationEasing);return j.createElement(pH,{animationId:k,key:k,canBegin:i>0,duration:v,easing:g,isActive:M,begin:b},re=>{var he=bc(L,l,re),Me=bc(H,c,re),Ne=bc(q,a,re),Q=bc(W,s,re);t.current&&(S.current=he,w.current=Me,R.current=Ne,P.current=Q);var de;_?re>0?de={transition:te,strokeDasharray:fe}:de={strokeDasharray:oe}:de={strokeDasharray:fe};var Ae=Vl(e),{radius:We}=Ae,bt=XF(Ae,_pe);return j.createElement("path",qE({},bt,{radius:typeof h=="number"?h:void 0,className:B,d:YF(Ne,Q,he,Me,h),ref:t,style:$F($F({},de),e.style)}))})};function ZF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function QF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(t),!0).forEach(function(i){Tpe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Tpe(n,e,t){return(e=Cpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cpe(n){var e=Rpe(n,"string");return typeof e=="symbol"?e:e+""}function Rpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var WE=Math.PI/180,Ppe=n=>n*180/Math.PI,$a=(n,e,t,i)=>({x:n+Math.cos(-WE*i)*t,y:e+Math.sin(-WE*i)*t}),Ipe=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(t-(i.top||0)-(i.bottom||0)))/2},Npe=(n,e)=>{var{x:t,y:i}=n,{x:r,y:a}=e;return Math.sqrt((t-r)**2+(i-a)**2)},Ope=(n,e)=>{var{x:t,y:i}=n,{cx:r,cy:a}=e,s=Npe({x:t,y:i},{x:r,y:a});if(s<=0)return{radius:s,angle:0};var l=(t-r)/s,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:s,angle:Ppe(c),angleInRadian:c}},Dpe=n=>{var{startAngle:e,endAngle:t}=n,i=Math.floor(e/360),r=Math.floor(t/360),a=Math.min(i,r);return{startAngle:e-a*360,endAngle:t-a*360}},Lpe=(n,e)=>{var{startAngle:t,endAngle:i}=e,r=Math.floor(t/360),a=Math.floor(i/360),s=Math.min(r,a);return n+s*360},Upe=(n,e)=>{var{chartX:t,chartY:i}=n,{radius:r,angle:a}=Ope({x:t,y:i},e),{innerRadius:s,outerRadius:l}=e;if(r<s||r>l||r===0)return null;var{startAngle:c,endAngle:h}=Dpe(e),p=a,g;if(c<=h){for(;p>h;)p-=360;for(;p<c;)p+=360;g=p>=c&&p<=h}else{for(;p>c;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=c}return g?QF(QF({},e),{},{radius:r,angle:Lpe(p,e)}):null};function gH(n){var{cx:e,cy:t,radius:i,startAngle:r,endAngle:a}=n,s=$a(e,t,i,r),l=$a(e,t,i,a);return{points:[s,l],cx:e,cy:t,radius:i,startAngle:r,endAngle:a}}var JF,eB,tB,nB,iB,rB,aB;function JI(){return JI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},JI.apply(null,arguments)}function om(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var kpe=(n,e)=>{var t=Ul(e-n),i=Math.min(Math.abs(e-n),359.999);return t*i},k1=n=>{var{cx:e,cy:t,radius:i,angle:r,sign:a,isExternal:s,cornerRadius:l,cornerIsExternal:c}=n,h=l*(s?1:-1)+i,p=Math.asin(l/h)/WE,g=c?r:r+a*p,v=$a(e,t,h,g),b=$a(e,t,i,g),_=c?r-a*p:r,M=$a(e,t,h*Math.cos(p*WE),_);return{center:v,circleTangency:b,lineTangency:M,theta:p}},vH=n=>{var{cx:e,cy:t,innerRadius:i,outerRadius:r,startAngle:a,endAngle:s}=n,l=kpe(a,s),c=a+l,h=$a(e,t,r,a),p=$a(e,t,r,c),g=ja(JF||(JF=om(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,r,r,+(Math.abs(l)>180),+(a>c),p.x,p.y);if(i>0){var v=$a(e,t,i,a),b=$a(e,t,i,c);g+=ja(eB||(eB=om(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),b.x,b.y,i,i,+(Math.abs(l)>180),+(a<=c),v.x,v.y)}else g+=ja(tB||(tB=om(["L ",","," Z"])),e,t);return g},zpe=n=>{var{cx:e,cy:t,innerRadius:i,outerRadius:r,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:h}=n,p=Ul(h-c),{circleTangency:g,lineTangency:v,theta:b}=k1({cx:e,cy:t,radius:r,angle:c,sign:p,cornerRadius:a,cornerIsExternal:l}),{circleTangency:_,lineTangency:M,theta:S}=k1({cx:e,cy:t,radius:r,angle:h,sign:-p,cornerRadius:a,cornerIsExternal:l}),w=l?Math.abs(c-h):Math.abs(c-h)-b-S;if(w<0)return s?ja(nB||(nB=om(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),v.x,v.y,a,a,a*2,a,a,-a*2):vH({cx:e,cy:t,innerRadius:i,outerRadius:r,startAngle:c,endAngle:h});var R=ja(iB||(iB=om(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),v.x,v.y,a,a,+(p<0),g.x,g.y,r,r,+(w>180),+(p<0),_.x,_.y,a,a,+(p<0),M.x,M.y);if(i>0){var{circleTangency:P,lineTangency:O,theta:k}=k1({cx:e,cy:t,radius:i,angle:c,sign:p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:B,lineTangency:D,theta:F}=k1({cx:e,cy:t,radius:i,angle:h,sign:-p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),I=l?Math.abs(c-h):Math.abs(c-h)-k-F;if(I<0&&a===0)return"".concat(R,"L").concat(e,",").concat(t,"Z");R+=ja(rB||(rB=om(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),D.x,D.y,a,a,+(p<0),B.x,B.y,i,i,+(I>180),+(p>0),P.x,P.y,a,a,+(p<0),O.x,O.y)}else R+=ja(aB||(aB=om(["L",",","Z"])),e,t);return R},Fpe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Bpe=n=>{var e=tl(n,Fpe),{cx:t,cy:i,innerRadius:r,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:h,endAngle:p,className:g}=e;if(a<r||h===p)return null;var v=Yi("recharts-sector",g),b=a-r,_=kd(s,b,0,!0),M;return _>0&&Math.abs(h-p)<360?M=zpe({cx:t,cy:i,innerRadius:r,outerRadius:a,cornerRadius:Math.min(_,b/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:h,endAngle:p}):M=vH({cx:t,cy:i,innerRadius:r,outerRadius:a,startAngle:h,endAngle:p}),j.createElement("path",JI({},Vl(e),{className:v,d:M}))};function Vpe(n,e,t){if(n==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(n==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(n9(e)){if(n==="centric"){var{cx:i,cy:r,innerRadius:a,outerRadius:s,angle:l}=e,c=$a(i,r,a,l),h=$a(i,r,s,l);return[{x:c.x,y:c.y},{x:h.x,y:h.y}]}return gH(e)}}var iP={},rP={},aP={},sB;function jpe(){return sB||(sB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=h9();function t(i){return e.isSymbol(i)?NaN:Number(i)}n.toNumber=t})(aP)),aP}var oB;function Hpe(){return oB||(oB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=jpe();function t(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}n.toFinite=t})(rP)),rP}var lB;function Gpe(){return lB||(lB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=d9(),t=Hpe();function i(r,a,s){s&&typeof s!="number"&&e.isIterateeCall(r,a,s)&&(a=s=void 0),r=t.toFinite(r),a===void 0?(a=r,r=0):a=t.toFinite(a),s=s===void 0?r<a?1:-1:t.toFinite(s);const l=Math.max(Math.ceil((a-r)/(s||1)),0),c=new Array(l);for(let h=0;h<l;h++)c[h]=r,r+=s;return c}n.range=i})(iP)),iP}var sP,uB;function qpe(){return uB||(uB=1,sP=Gpe().range),sP}var Wpe=qpe();const yH=Pu(Wpe);function Md(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function $pe(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function wD(n){let e,t,i;n.length!==2?(e=Md,t=(l,c)=>Md(n(l),c),i=(l,c)=>n(l)-c):(e=n===Md||n===$pe?n:Xpe,t=n,i=n);function r(l,c,h=0,p=l.length){if(h<p){if(e(c,c)!==0)return p;do{const g=h+p>>>1;t(l[g],c)<0?h=g+1:p=g}while(h<p)}return h}function a(l,c,h=0,p=l.length){if(h<p){if(e(c,c)!==0)return p;do{const g=h+p>>>1;t(l[g],c)<=0?h=g+1:p=g}while(h<p)}return h}function s(l,c,h=0,p=l.length){const g=r(l,c,h,p-1);return g>h&&i(l[g-1],c)>-i(l[g],c)?g-1:g}return{left:r,center:s,right:a}}function Xpe(){return 0}function bH(n){return n===null?NaN:+n}function*Ype(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const Kpe=wD(Md),Jx=Kpe.right;wD(bH).center;class cB extends Map{constructor(e,t=Jpe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(fB(this,e))}has(e){return super.has(fB(this,e))}set(e,t){return super.set(Zpe(this,e),t)}delete(e){return super.delete(Qpe(this,e))}}function fB({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function Zpe({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function Qpe({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function Jpe(n){return n!==null&&typeof n=="object"?n.valueOf():n}function eme(n=Md){if(n===Md)return xH;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const i=n(e,t);return i||i===0?i:(n(t,t)===0)-(n(e,e)===0)}}function xH(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const tme=Math.sqrt(50),nme=Math.sqrt(10),ime=Math.sqrt(2);function $E(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=tme?10:a>=nme?5:a>=ime?2:1;let l,c,h;return r<0?(h=Math.pow(10,-r)/s,l=Math.round(n*h),c=Math.round(e*h),l/h<n&&++l,c/h>e&&--c,h=-h):(h=Math.pow(10,r)*s,l=Math.round(n/h),c=Math.round(e/h),l*h<n&&++l,c*h>e&&--c),c<l&&.5<=t&&t<2?$E(n,e,t*2):[l,c,h]}function eN(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,a,s]=i?$E(e,n,t):$E(n,e,t);if(!(a>=r))return[];const l=a-r+1,c=new Array(l);if(i)if(s<0)for(let h=0;h<l;++h)c[h]=(a-h)/-s;else for(let h=0;h<l;++h)c[h]=(a-h)*s;else if(s<0)for(let h=0;h<l;++h)c[h]=(r+h)/-s;else for(let h=0;h<l;++h)c[h]=(r+h)*s;return c}function tN(n,e,t){return e=+e,n=+n,t=+t,$E(n,e,t)[2]}function nN(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?tN(e,n,t):tN(n,e,t);return(i?-1:1)*(r<0?1/-r:r)}function hB(n,e){let t;for(const i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);return t}function dB(n,e){let t;for(const i of n)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);return t}function _H(n,e,t=0,i=1/0,r){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(n.length-1,i)),!(t<=e&&e<=i))return n;for(r=r===void 0?xH:eme(r);i>t;){if(i-t>600){const c=i-t+1,h=e-t+1,p=Math.log(c),g=.5*Math.exp(2*p/3),v=.5*Math.sqrt(p*g*(c-g)/c)*(h-c/2<0?-1:1),b=Math.max(t,Math.floor(e-h*g/c+v)),_=Math.min(i,Math.floor(e+(c-h)*g/c+v));_H(n,e,b,_,r)}const a=n[e];let s=t,l=i;for(lb(n,t,e),r(n[i],a)>0&&lb(n,t,i);s<l;){for(lb(n,s,l),++s,--l;r(n[s],a)<0;)++s;for(;r(n[l],a)>0;)--l}r(n[t],a)===0?lb(n,t,l):(++l,lb(n,l,i)),l<=e&&(t=l+1),e<=l&&(i=l-1)}return n}function lb(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function rme(n,e,t){if(n=Float64Array.from(Ype(n)),!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return dB(n);if(e>=1)return hB(n);var i,r=(i-1)*e,a=Math.floor(r),s=hB(_H(n,a).subarray(0,a+1)),l=dB(n.subarray(a+1));return s+(l-s)*(r-a)}}function ame(n,e,t=bH){if(!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return+t(n[0],0,n);if(e>=1)return+t(n[i-1],i-1,n);var i,r=(i-1)*e,a=Math.floor(r),s=+t(n[a],a,n),l=+t(n[a+1],a+1,n);return s+(l-s)*(r-a)}}function sme(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(r);++i<r;)a[i]=n+i*t;return a}function ql(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function nh(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const iN=Symbol("implicit");function ED(){var n=new cB,e=[],t=[],i=iN;function r(a){let s=n.get(a);if(s===void 0){if(i!==iN)return i;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new cB;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return r},r.range=function(a){return arguments.length?(t=Array.from(a),r):t.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return ED(e,t).unknown(i)},ql.apply(r,arguments),r}function MD(){var n=ED().unknown(void 0),e=n.domain,t=n.range,i=0,r=1,a,s,l=!1,c=0,h=0,p=.5;delete n.unknown;function g(){var v=e().length,b=r<i,_=b?r:i,M=b?i:r;a=(M-_)/Math.max(1,v-c+h*2),l&&(a=Math.floor(a)),_+=(M-_-a*(v-c))*p,s=a*(1-c),l&&(_=Math.round(_),s=Math.round(s));var S=sme(v).map(function(w){return _+a*w});return t(b?S.reverse():S)}return n.domain=function(v){return arguments.length?(e(v),g()):e()},n.range=function(v){return arguments.length?([i,r]=v,i=+i,r=+r,g()):[i,r]},n.rangeRound=function(v){return[i,r]=v,i=+i,r=+r,l=!0,g()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(v){return arguments.length?(l=!!v,g()):l},n.padding=function(v){return arguments.length?(c=Math.min(1,h=+v),g()):c},n.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),g()):c},n.paddingOuter=function(v){return arguments.length?(h=+v,g()):h},n.align=function(v){return arguments.length?(p=Math.max(0,Math.min(1,v)),g()):p},n.copy=function(){return MD(e(),[i,r]).round(l).paddingInner(c).paddingOuter(h).align(p)},ql.apply(g(),arguments)}function SH(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return SH(e())},n}function ome(){return SH(MD.apply(null,arguments).paddingInner(1))}function AD(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function wH(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function e_(){}var Sx=.7,XE=1/Sx,Lv="\\s*([+-]?\\d+)\\s*",wx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lme=/^#([0-9a-f]{3,8})$/,ume=new RegExp(`^rgb\\(${Lv},${Lv},${Lv}\\)$`),cme=new RegExp(`^rgb\\(${Nc},${Nc},${Nc}\\)$`),fme=new RegExp(`^rgba\\(${Lv},${Lv},${Lv},${wx}\\)$`),hme=new RegExp(`^rgba\\(${Nc},${Nc},${Nc},${wx}\\)$`),dme=new RegExp(`^hsl\\(${wx},${Nc},${Nc}\\)$`),pme=new RegExp(`^hsla\\(${wx},${Nc},${Nc},${wx}\\)$`),pB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};AD(e_,Ex,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:mB,formatHex:mB,formatHex8:mme,formatHsl:gme,formatRgb:gB,toString:gB});function mB(){return this.rgb().formatHex()}function mme(){return this.rgb().formatHex8()}function gme(){return EH(this).formatHsl()}function gB(){return this.rgb().formatRgb()}function Ex(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=lme.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?vB(e):t===3?new To(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?z1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?z1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ume.exec(n))?new To(e[1],e[2],e[3],1):(e=cme.exec(n))?new To(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fme.exec(n))?z1(e[1],e[2],e[3],e[4]):(e=hme.exec(n))?z1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dme.exec(n))?xB(e[1],e[2]/100,e[3]/100,1):(e=pme.exec(n))?xB(e[1],e[2]/100,e[3]/100,e[4]):pB.hasOwnProperty(n)?vB(pB[n]):n==="transparent"?new To(NaN,NaN,NaN,0):null}function vB(n){return new To(n>>16&255,n>>8&255,n&255,1)}function z1(n,e,t,i){return i<=0&&(n=e=t=NaN),new To(n,e,t,i)}function vme(n){return n instanceof e_||(n=Ex(n)),n?(n=n.rgb(),new To(n.r,n.g,n.b,n.opacity)):new To}function rN(n,e,t,i){return arguments.length===1?vme(n):new To(n,e,t,i??1)}function To(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}AD(To,rN,wH(e_,{brighter(n){return n=n==null?XE:Math.pow(XE,n),new To(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Sx:Math.pow(Sx,n),new To(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new To(vm(this.r),vm(this.g),vm(this.b),YE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yB,formatHex:yB,formatHex8:yme,formatRgb:bB,toString:bB}));function yB(){return`#${lm(this.r)}${lm(this.g)}${lm(this.b)}`}function yme(){return`#${lm(this.r)}${lm(this.g)}${lm(this.b)}${lm((isNaN(this.opacity)?1:this.opacity)*255)}`}function bB(){const n=YE(this.opacity);return`${n===1?"rgb(":"rgba("}${vm(this.r)}, ${vm(this.g)}, ${vm(this.b)}${n===1?")":`, ${n})`}`}function YE(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function vm(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function lm(n){return n=vm(n),(n<16?"0":"")+n.toString(16)}function xB(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Su(n,e,t,i)}function EH(n){if(n instanceof Su)return new Su(n.h,n.s,n.l,n.opacity);if(n instanceof e_||(n=Ex(n)),!n)return new Su;if(n instanceof Su)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),a=Math.max(e,t,i),s=NaN,l=a-r,c=(a+r)/2;return l?(e===a?s=(t-i)/l+(t<i)*6:t===a?s=(i-e)/l+2:s=(e-t)/l+4,l/=c<.5?a+r:2-a-r,s*=60):l=c>0&&c<1?0:s,new Su(s,l,c,n.opacity)}function bme(n,e,t,i){return arguments.length===1?EH(n):new Su(n,e,t,i??1)}function Su(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}AD(Su,bme,wH(e_,{brighter(n){return n=n==null?XE:Math.pow(XE,n),new Su(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Sx:Math.pow(Sx,n),new Su(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new To(oP(n>=240?n-240:n+120,r,i),oP(n,r,i),oP(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Su(_B(this.h),F1(this.s),F1(this.l),YE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=YE(this.opacity);return`${n===1?"hsl(":"hsla("}${_B(this.h)}, ${F1(this.s)*100}%, ${F1(this.l)*100}%${n===1?")":`, ${n})`}`}}));function _B(n){return n=(n||0)%360,n<0?n+360:n}function F1(n){return Math.max(0,Math.min(1,n||0))}function oP(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const TD=n=>()=>n;function xme(n,e){return function(t){return n+t*e}}function _me(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function Sme(n){return(n=+n)==1?MH:function(e,t){return t-e?_me(e,t,n):TD(isNaN(e)?t:e)}}function MH(n,e){var t=e-n;return t?xme(n,t):TD(isNaN(n)?e:n)}const SB=(function n(e){var t=Sme(e);function i(r,a){var s=t((r=rN(r)).r,(a=rN(a)).r),l=t(r.g,a.g),c=t(r.b,a.b),h=MH(r.opacity,a.opacity);return function(p){return r.r=s(p),r.g=l(p),r.b=c(p),r.opacity=h(p),r+""}}return i.gamma=n,i})(1);function wme(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),r;return function(a){for(r=0;r<t;++r)i[r]=n[r]*(1-a)+e[r]*a;return i}}function Eme(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Mme(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,r=new Array(i),a=new Array(t),s;for(s=0;s<i;++s)r[s]=x0(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(l){for(s=0;s<i;++s)a[s]=r[s](l);return a}}function Ame(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function KE(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Tme(n,e){var t={},i={},r;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in n?t[r]=x0(n[r],e[r]):i[r]=e[r];return function(a){for(r in t)i[r]=t[r](a);return i}}var aN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lP=new RegExp(aN.source,"g");function Cme(n){return function(){return n}}function Rme(n){return function(e){return n(e)+""}}function Pme(n,e){var t=aN.lastIndex=lP.lastIndex=0,i,r,a,s=-1,l=[],c=[];for(n=n+"",e=e+"";(i=aN.exec(n))&&(r=lP.exec(e));)(a=r.index)>t&&(a=e.slice(t,a),l[s]?l[s]+=a:l[++s]=a),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,c.push({i:s,x:KE(i,r)})),t=lP.lastIndex;return t<e.length&&(a=e.slice(t),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?Rme(c[0].x):Cme(e):(e=c.length,function(h){for(var p=0,g;p<e;++p)l[(g=c[p]).i]=g.x(h);return l.join("")})}function x0(n,e){var t=typeof e,i;return e==null||t==="boolean"?TD(e):(t==="number"?KE:t==="string"?(i=Ex(e))?(e=i,SB):Pme:e instanceof Ex?SB:e instanceof Date?Ame:Eme(e)?wme:Array.isArray(e)?Mme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Tme:KE)(n,e)}function CD(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Ime(n,e){e===void 0&&(e=n,n=x0);for(var t=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);t<i;)a[t]=n(r,r=e[++t]);return function(s){var l=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[l](s-l)}}function Nme(n){return function(){return n}}function ZE(n){return+n}var wB=[0,1];function Hs(n){return n}function sN(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:Nme(isNaN(e)?NaN:.5)}function Ome(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function Dme(n,e,t){var i=n[0],r=n[1],a=e[0],s=e[1];return r<i?(i=sN(r,i),a=t(s,a)):(i=sN(i,r),a=t(a,s)),function(l){return a(i(l))}}function Lme(n,e,t){var i=Math.min(n.length,e.length)-1,r=new Array(i),a=new Array(i),s=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=sN(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(l){var c=Jx(n,l,1,i)-1;return a[c](r[c](l))}}function t_(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function BA(){var n=wB,e=wB,t=x0,i,r,a,s=Hs,l,c,h;function p(){var v=Math.min(n.length,e.length);return s!==Hs&&(s=Ome(n[0],n[v-1])),l=v>2?Lme:Dme,c=h=null,g}function g(v){return v==null||isNaN(v=+v)?a:(c||(c=l(n.map(i),e,t)))(i(s(v)))}return g.invert=function(v){return s(r((h||(h=l(e,n.map(i),KE)))(v)))},g.domain=function(v){return arguments.length?(n=Array.from(v,ZE),p()):n.slice()},g.range=function(v){return arguments.length?(e=Array.from(v),p()):e.slice()},g.rangeRound=function(v){return e=Array.from(v),t=CD,p()},g.clamp=function(v){return arguments.length?(s=v?!0:Hs,p()):s!==Hs},g.interpolate=function(v){return arguments.length?(t=v,p()):t},g.unknown=function(v){return arguments.length?(a=v,g):a},function(v,b){return i=v,r=b,p()}}function RD(){return BA()(Hs,Hs)}function Ume(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function QE(n,e){if(!isFinite(n)||n===0)return null;var t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function i0(n){return n=QE(Math.abs(n)),n?n[1]:NaN}function kme(n,e){return function(t,i){for(var r=t.length,a=[],s=0,l=n[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),a.push(t.substring(r-=l,r+l)),!((c+=l+1)>i));)l=n[s=(s+1)%n.length];return a.reverse().join(e)}}function zme(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var Fme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mx(n){if(!(e=Fme.exec(n)))throw new Error("invalid format: "+n);var e;return new PD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Mx.prototype=PD.prototype;function PD(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}PD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bme(n){e:for(var e=n.length,t=1,i=-1,r;t<e;++t)switch(n[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var JE;function Vme(n,e){var t=QE(n,e);if(!t)return JE=void 0,n.toPrecision(e);var i=t[0],r=t[1],a=r-(JE=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+QE(n,Math.max(0,e+a-1))[0]}function EB(n,e){var t=QE(n,e);if(!t)return n+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const MB={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Ume,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>EB(n*100,e),r:EB,s:Vme,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function AB(n){return n}var TB=Array.prototype.map,CB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jme(n){var e=n.grouping===void 0||n.thousands===void 0?AB:kme(TB.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?AB:zme(TB.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function h(g,v){g=Mx(g);var b=g.fill,_=g.align,M=g.sign,S=g.symbol,w=g.zero,R=g.width,P=g.comma,O=g.precision,k=g.trim,B=g.type;B==="n"?(P=!0,B="g"):MB[B]||(O===void 0&&(O=12),k=!0,B="g"),(w||b==="0"&&_==="=")&&(w=!0,b="0",_="=");var D=(v&&v.prefix!==void 0?v.prefix:"")+(S==="$"?t:S==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():""),F=(S==="$"?i:/[%p]/.test(B)?s:"")+(v&&v.suffix!==void 0?v.suffix:""),I=MB[B],L=/[defgprs%]/.test(B);O=O===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function H(q){var W=D,oe=F,fe,te,re;if(B==="c")oe=I(q)+oe,q="";else{q=+q;var he=q<0||1/q<0;if(q=isNaN(q)?c:I(Math.abs(q),O),k&&(q=Bme(q)),he&&+q==0&&M!=="+"&&(he=!1),W=(he?M==="("?M:l:M==="-"||M==="("?"":M)+W,oe=(B==="s"&&!isNaN(q)&&JE!==void 0?CB[8+JE/3]:"")+oe+(he&&M==="("?")":""),L){for(fe=-1,te=q.length;++fe<te;)if(re=q.charCodeAt(fe),48>re||re>57){oe=(re===46?r+q.slice(fe+1):q.slice(fe))+oe,q=q.slice(0,fe);break}}}P&&!w&&(q=e(q,1/0));var Me=W.length+q.length+oe.length,Ne=Me<R?new Array(R-Me+1).join(b):"";switch(P&&w&&(q=e(Ne+q,Ne.length?R-oe.length:1/0),Ne=""),_){case"<":q=W+q+oe+Ne;break;case"=":q=W+Ne+q+oe;break;case"^":q=Ne.slice(0,Me=Ne.length>>1)+W+q+oe+Ne.slice(Me);break;default:q=Ne+W+q+oe;break}return a(q)}return H.toString=function(){return g+""},H}function p(g,v){var b=Math.max(-8,Math.min(8,Math.floor(i0(v)/3)))*3,_=Math.pow(10,-b),M=h((g=Mx(g),g.type="f",g),{suffix:CB[8+b/3]});return function(S){return M(_*S)}}return{format:h,formatPrefix:p}}var B1,ID,AH;Hme({thousands:",",grouping:[3],currency:["$",""]});function Hme(n){return B1=jme(n),ID=B1.format,AH=B1.formatPrefix,B1}function Gme(n){return Math.max(0,-i0(Math.abs(n)))}function qme(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(i0(e)/3)))*3-i0(Math.abs(n)))}function Wme(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,i0(e)-i0(n))+1}function TH(n,e,t,i){var r=nN(n,e,t),a;switch(i=Mx(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(a=qme(r,s))&&(i.precision=a),AH(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=Wme(r,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=Gme(r))&&(i.precision=a-(i.type==="%")*2);break}}return ID(i)}function qd(n){var e=n.domain;return n.ticks=function(t){var i=e();return eN(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var r=e();return TH(r[0],r[r.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),r=0,a=i.length-1,s=i[r],l=i[a],c,h,p=10;for(l<s&&(h=s,s=l,l=h,h=r,r=a,a=h);p-- >0;){if(h=tN(s,l,t),h===c)return i[r]=s,i[a]=l,e(i);if(h>0)s=Math.floor(s/h)*h,l=Math.ceil(l/h)*h;else if(h<0)s=Math.ceil(s*h)/h,l=Math.floor(l*h)/h;else break;c=h}return n},n}function CH(){var n=RD();return n.copy=function(){return t_(n,CH())},ql.apply(n,arguments),qd(n)}function RH(n){var e;function t(i){return i==null||isNaN(i=+i)?e:i}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=Array.from(i,ZE),t):n.slice()},t.unknown=function(i){return arguments.length?(e=i,t):e},t.copy=function(){return RH(n).unknown(e)},n=arguments.length?Array.from(n,ZE):[0,1],qd(t)}function PH(n,e){n=n.slice();var t=0,i=n.length-1,r=n[t],a=n[i],s;return a<r&&(s=t,t=i,i=s,s=r,r=a,a=s),n[t]=e.floor(r),n[i]=e.ceil(a),n}function RB(n){return Math.log(n)}function PB(n){return Math.exp(n)}function $me(n){return-Math.log(-n)}function Xme(n){return-Math.exp(-n)}function Yme(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Kme(n){return n===10?Yme:n===Math.E?Math.exp:e=>Math.pow(n,e)}function Zme(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function IB(n){return(e,t)=>-n(-e,t)}function ND(n){const e=n(RB,PB),t=e.domain;let i=10,r,a;function s(){return r=Zme(i),a=Kme(i),t()[0]<0?(r=IB(r),a=IB(a),n($me,Xme)):n(RB,PB),e}return e.base=function(l){return arguments.length?(i=+l,s()):i},e.domain=function(l){return arguments.length?(t(l),s()):t()},e.ticks=l=>{const c=t();let h=c[0],p=c[c.length-1];const g=p<h;g&&([h,p]=[p,h]);let v=r(h),b=r(p),_,M;const S=l==null?10:+l;let w=[];if(!(i%1)&&b-v<S){if(v=Math.floor(v),b=Math.ceil(b),h>0){for(;v<=b;++v)for(_=1;_<i;++_)if(M=v<0?_/a(-v):_*a(v),!(M<h)){if(M>p)break;w.push(M)}}else for(;v<=b;++v)for(_=i-1;_>=1;--_)if(M=v>0?_/a(-v):_*a(v),!(M<h)){if(M>p)break;w.push(M)}w.length*2<S&&(w=eN(h,p,S))}else w=eN(v,b,Math.min(b-v,S)).map(a);return g?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=Mx(c)).precision==null&&(c.trim=!0),c=ID(c)),l===1/0)return c;const h=Math.max(1,i*l/e.ticks().length);return p=>{let g=p/a(Math.round(r(p)));return g*i<i-.5&&(g*=i),g<=h?c(p):""}},e.nice=()=>t(PH(t(),{floor:l=>a(Math.floor(r(l))),ceil:l=>a(Math.ceil(r(l)))})),e}function IH(){const n=ND(BA()).domain([1,10]);return n.copy=()=>t_(n,IH()).base(n.base()),ql.apply(n,arguments),n}function NB(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function OB(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function OD(n){var e=1,t=n(NB(e),OB(e));return t.constant=function(i){return arguments.length?n(NB(e=+i),OB(e)):e},qd(t)}function NH(){var n=OD(BA());return n.copy=function(){return t_(n,NH()).constant(n.constant())},ql.apply(n,arguments)}function DB(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function Qme(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Jme(n){return n<0?-n*n:n*n}function DD(n){var e=n(Hs,Hs),t=1;function i(){return t===1?n(Hs,Hs):t===.5?n(Qme,Jme):n(DB(t),DB(1/t))}return e.exponent=function(r){return arguments.length?(t=+r,i()):t},qd(e)}function LD(){var n=DD(BA());return n.copy=function(){return t_(n,LD()).exponent(n.exponent())},ql.apply(n,arguments),n}function ege(){return LD.apply(null,arguments).exponent(.5)}function LB(n){return Math.sign(n)*n*n}function tge(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function OH(){var n=RD(),e=[0,1],t=!1,i;function r(a){var s=tge(n(a));return isNaN(s)?i:t?Math.round(s):s}return r.invert=function(a){return n.invert(LB(a))},r.domain=function(a){return arguments.length?(n.domain(a),r):n.domain()},r.range=function(a){return arguments.length?(n.range((e=Array.from(a,ZE)).map(LB)),r):e.slice()},r.rangeRound=function(a){return r.range(a).round(!0)},r.round=function(a){return arguments.length?(t=!!a,r):t},r.clamp=function(a){return arguments.length?(n.clamp(a),r):n.clamp()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return OH(n.domain(),e).round(t).clamp(n.clamp()).unknown(i)},ql.apply(r,arguments),qd(r)}function DH(){var n=[],e=[],t=[],i;function r(){var s=0,l=Math.max(1,e.length);for(t=new Array(l-1);++s<l;)t[s-1]=ame(n,s/l);return a}function a(s){return s==null||isNaN(s=+s)?i:e[Jx(t,s)]}return a.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?t[l-1]:n[0],l<t.length?t[l]:n[n.length-1]]},a.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let l of s)l!=null&&!isNaN(l=+l)&&n.push(l);return n.sort(Md),r()},a.range=function(s){return arguments.length?(e=Array.from(s),r()):e.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return t.slice()},a.copy=function(){return DH().domain(n).range(e).unknown(i)},ql.apply(a,arguments)}function LH(){var n=0,e=1,t=1,i=[.5],r=[0,1],a;function s(c){return c!=null&&c<=c?r[Jx(i,c,0,t)]:a}function l(){var c=-1;for(i=new Array(t);++c<t;)i[c]=((c+1)*e-(c-t)*n)/(t+1);return s}return s.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,l()):[n,e]},s.range=function(c){return arguments.length?(t=(r=Array.from(c)).length-1,l()):r.slice()},s.invertExtent=function(c){var h=r.indexOf(c);return h<0?[NaN,NaN]:h<1?[n,i[0]]:h>=t?[i[t-1],e]:[i[h-1],i[h]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return i.slice()},s.copy=function(){return LH().domain([n,e]).range(r).unknown(a)},ql.apply(qd(s),arguments)}function UH(){var n=[.5],e=[0,1],t,i=1;function r(a){return a!=null&&a<=a?e[Jx(n,a,0,i)]:t}return r.domain=function(a){return arguments.length?(n=Array.from(a),i=Math.min(n.length,e.length-1),r):n.slice()},r.range=function(a){return arguments.length?(e=Array.from(a),i=Math.min(n.length,e.length-1),r):e.slice()},r.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return UH().domain(n).range(e).unknown(t)},ql.apply(r,arguments)}const uP=new Date,cP=new Date;function aa(n,e,t,i){function r(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(n(a=new Date(+a)),a),r.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),r.round=a=>{const s=r(a),l=r.ceil(a);return a-s<l-a?s:l},r.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,l)=>{const c=[];if(a=r.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let h;do c.push(h=new Date(+a)),e(a,l),n(a);while(h<a&&a<s);return c},r.filter=a=>aa(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!a(s););else for(;--l>=0;)for(;e(s,1),!a(s););}),t&&(r.count=(a,s)=>(uP.setTime(+a),cP.setTime(+s),n(uP),n(cP),Math.floor(t(uP,cP))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const eM=aa(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);eM.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?aa(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):eM);eM.range;const kf=1e3,kl=kf*60,zf=kl*60,Yf=zf*24,UD=Yf*7,UB=Yf*30,fP=Yf*365,um=aa(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*kf)},(n,e)=>(e-n)/kf,n=>n.getUTCSeconds());um.range;const kD=aa(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*kf)},(n,e)=>{n.setTime(+n+e*kl)},(n,e)=>(e-n)/kl,n=>n.getMinutes());kD.range;const zD=aa(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*kl)},(n,e)=>(e-n)/kl,n=>n.getUTCMinutes());zD.range;const FD=aa(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*kf-n.getMinutes()*kl)},(n,e)=>{n.setTime(+n+e*zf)},(n,e)=>(e-n)/zf,n=>n.getHours());FD.range;const BD=aa(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*zf)},(n,e)=>(e-n)/zf,n=>n.getUTCHours());BD.range;const n_=aa(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*kl)/Yf,n=>n.getDate()-1);n_.range;const VA=aa(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Yf,n=>n.getUTCDate()-1);VA.range;const kH=aa(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Yf,n=>Math.floor(n/Yf));kH.range;function Hm(n){return aa(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kl)/UD)}const jA=Hm(0),tM=Hm(1),nge=Hm(2),ige=Hm(3),r0=Hm(4),rge=Hm(5),age=Hm(6);jA.range;tM.range;nge.range;ige.range;r0.range;rge.range;age.range;function Gm(n){return aa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/UD)}const HA=Gm(0),nM=Gm(1),sge=Gm(2),oge=Gm(3),a0=Gm(4),lge=Gm(5),uge=Gm(6);HA.range;nM.range;sge.range;oge.range;a0.range;lge.range;uge.range;const VD=aa(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());VD.range;const jD=aa(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());jD.range;const Kf=aa(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Kf.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:aa(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Kf.range;const Zf=aa(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Zf.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:aa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Zf.range;function zH(n,e,t,i,r,a){const s=[[um,1,kf],[um,5,5*kf],[um,15,15*kf],[um,30,30*kf],[a,1,kl],[a,5,5*kl],[a,15,15*kl],[a,30,30*kl],[r,1,zf],[r,3,3*zf],[r,6,6*zf],[r,12,12*zf],[i,1,Yf],[i,2,2*Yf],[t,1,UD],[e,1,UB],[e,3,3*UB],[n,1,fP]];function l(h,p,g){const v=p<h;v&&([h,p]=[p,h]);const b=g&&typeof g.range=="function"?g:c(h,p,g),_=b?b.range(h,+p+1):[];return v?_.reverse():_}function c(h,p,g){const v=Math.abs(p-h)/g,b=wD(([,,S])=>S).right(s,v);if(b===s.length)return n.every(nN(h/fP,p/fP,g));if(b===0)return eM.every(Math.max(nN(h,p,g),1));const[_,M]=s[v/s[b-1][2]<s[b][2]/v?b-1:b];return _.every(M)}return[l,c]}const[cge,fge]=zH(Zf,jD,HA,kH,BD,zD),[hge,dge]=zH(Kf,VD,jA,n_,FD,kD);function hP(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function dP(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function ub(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function pge(n){var e=n.dateTime,t=n.date,i=n.time,r=n.periods,a=n.days,s=n.shortDays,l=n.months,c=n.shortMonths,h=cb(r),p=fb(r),g=cb(a),v=fb(a),b=cb(s),_=fb(s),M=cb(l),S=fb(l),w=cb(c),R=fb(c),P={a:re,A:he,b:Me,B:Ne,c:null,d:jB,e:jB,f:kge,g:$ge,G:Yge,H:Dge,I:Lge,j:Uge,L:FH,m:zge,M:Fge,p:Q,q:de,Q:qB,s:WB,S:Bge,u:Vge,U:jge,V:Hge,w:Gge,W:qge,x:null,X:null,y:Wge,Y:Xge,Z:Kge,"%":GB},O={a:Ae,A:We,b:bt,B:_e,c:null,d:HB,e:HB,f:eve,g:cve,G:hve,H:Zge,I:Qge,j:Jge,L:VH,m:tve,M:nve,p:Te,q:ut,Q:qB,s:WB,S:ive,u:rve,U:ave,V:sve,w:ove,W:lve,x:null,X:null,y:uve,Y:fve,Z:dve,"%":GB},k={a:L,A:H,b:q,B:W,c:oe,d:BB,e:BB,f:Pge,g:FB,G:zB,H:VB,I:VB,j:Age,L:Rge,m:Mge,M:Tge,p:I,q:Ege,Q:Nge,s:Oge,S:Cge,u:bge,U:xge,V:_ge,w:yge,W:Sge,x:fe,X:te,y:FB,Y:zB,Z:wge,"%":Ige};P.x=B(t,P),P.X=B(i,P),P.c=B(e,P),O.x=B(t,O),O.X=B(i,O),O.c=B(e,O);function B(ve,et){return function(At){var He=[],Ct=-1,Oe=0,Ze=ve.length,je,ht,ie;for(At instanceof Date||(At=new Date(+At));++Ct<Ze;)ve.charCodeAt(Ct)===37&&(He.push(ve.slice(Oe,Ct)),(ht=kB[je=ve.charAt(++Ct)])!=null?je=ve.charAt(++Ct):ht=je==="e"?" ":"0",(ie=et[je])&&(je=ie(At,ht)),He.push(je),Oe=Ct+1);return He.push(ve.slice(Oe,Ct)),He.join("")}}function D(ve,et){return function(At){var He=ub(1900,void 0,1),Ct=F(He,ve,At+="",0),Oe,Ze;if(Ct!=At.length)return null;if("Q"in He)return new Date(He.Q);if("s"in He)return new Date(He.s*1e3+("L"in He?He.L:0));if(et&&!("Z"in He)&&(He.Z=0),"p"in He&&(He.H=He.H%12+He.p*12),He.m===void 0&&(He.m="q"in He?He.q:0),"V"in He){if(He.V<1||He.V>53)return null;"w"in He||(He.w=1),"Z"in He?(Oe=dP(ub(He.y,0,1)),Ze=Oe.getUTCDay(),Oe=Ze>4||Ze===0?nM.ceil(Oe):nM(Oe),Oe=VA.offset(Oe,(He.V-1)*7),He.y=Oe.getUTCFullYear(),He.m=Oe.getUTCMonth(),He.d=Oe.getUTCDate()+(He.w+6)%7):(Oe=hP(ub(He.y,0,1)),Ze=Oe.getDay(),Oe=Ze>4||Ze===0?tM.ceil(Oe):tM(Oe),Oe=n_.offset(Oe,(He.V-1)*7),He.y=Oe.getFullYear(),He.m=Oe.getMonth(),He.d=Oe.getDate()+(He.w+6)%7)}else("W"in He||"U"in He)&&("w"in He||(He.w="u"in He?He.u%7:"W"in He?1:0),Ze="Z"in He?dP(ub(He.y,0,1)).getUTCDay():hP(ub(He.y,0,1)).getDay(),He.m=0,He.d="W"in He?(He.w+6)%7+He.W*7-(Ze+5)%7:He.w+He.U*7-(Ze+6)%7);return"Z"in He?(He.H+=He.Z/100|0,He.M+=He.Z%100,dP(He)):hP(He)}}function F(ve,et,At,He){for(var Ct=0,Oe=et.length,Ze=At.length,je,ht;Ct<Oe;){if(He>=Ze)return-1;if(je=et.charCodeAt(Ct++),je===37){if(je=et.charAt(Ct++),ht=k[je in kB?et.charAt(Ct++):je],!ht||(He=ht(ve,At,He))<0)return-1}else if(je!=At.charCodeAt(He++))return-1}return He}function I(ve,et,At){var He=h.exec(et.slice(At));return He?(ve.p=p.get(He[0].toLowerCase()),At+He[0].length):-1}function L(ve,et,At){var He=b.exec(et.slice(At));return He?(ve.w=_.get(He[0].toLowerCase()),At+He[0].length):-1}function H(ve,et,At){var He=g.exec(et.slice(At));return He?(ve.w=v.get(He[0].toLowerCase()),At+He[0].length):-1}function q(ve,et,At){var He=w.exec(et.slice(At));return He?(ve.m=R.get(He[0].toLowerCase()),At+He[0].length):-1}function W(ve,et,At){var He=M.exec(et.slice(At));return He?(ve.m=S.get(He[0].toLowerCase()),At+He[0].length):-1}function oe(ve,et,At){return F(ve,e,et,At)}function fe(ve,et,At){return F(ve,t,et,At)}function te(ve,et,At){return F(ve,i,et,At)}function re(ve){return s[ve.getDay()]}function he(ve){return a[ve.getDay()]}function Me(ve){return c[ve.getMonth()]}function Ne(ve){return l[ve.getMonth()]}function Q(ve){return r[+(ve.getHours()>=12)]}function de(ve){return 1+~~(ve.getMonth()/3)}function Ae(ve){return s[ve.getUTCDay()]}function We(ve){return a[ve.getUTCDay()]}function bt(ve){return c[ve.getUTCMonth()]}function _e(ve){return l[ve.getUTCMonth()]}function Te(ve){return r[+(ve.getUTCHours()>=12)]}function ut(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var et=B(ve+="",P);return et.toString=function(){return ve},et},parse:function(ve){var et=D(ve+="",!1);return et.toString=function(){return ve},et},utcFormat:function(ve){var et=B(ve+="",O);return et.toString=function(){return ve},et},utcParse:function(ve){var et=D(ve+="",!0);return et.toString=function(){return ve},et}}}var kB={"-":"",_:" ",0:"0"},wa=/^\s*\d+/,mge=/^%/,gge=/[\\^$*+?|[\]().{}]/g;function ai(n,e,t){var i=n<0?"-":"",r=(i?-n:n)+"",a=r.length;return i+(a<t?new Array(t-a+1).join(e)+r:r)}function vge(n){return n.replace(gge,"\\$&")}function cb(n){return new RegExp("^(?:"+n.map(vge).join("|")+")","i")}function fb(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function yge(n,e,t){var i=wa.exec(e.slice(t,t+1));return i?(n.w=+i[0],t+i[0].length):-1}function bge(n,e,t){var i=wa.exec(e.slice(t,t+1));return i?(n.u=+i[0],t+i[0].length):-1}function xge(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.U=+i[0],t+i[0].length):-1}function _ge(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.V=+i[0],t+i[0].length):-1}function Sge(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.W=+i[0],t+i[0].length):-1}function zB(n,e,t){var i=wa.exec(e.slice(t,t+4));return i?(n.y=+i[0],t+i[0].length):-1}function FB(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function wge(n,e,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function Ege(n,e,t){var i=wa.exec(e.slice(t,t+1));return i?(n.q=i[0]*3-3,t+i[0].length):-1}function Mge(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.m=i[0]-1,t+i[0].length):-1}function BB(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.d=+i[0],t+i[0].length):-1}function Age(n,e,t){var i=wa.exec(e.slice(t,t+3));return i?(n.m=0,n.d=+i[0],t+i[0].length):-1}function VB(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.H=+i[0],t+i[0].length):-1}function Tge(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.M=+i[0],t+i[0].length):-1}function Cge(n,e,t){var i=wa.exec(e.slice(t,t+2));return i?(n.S=+i[0],t+i[0].length):-1}function Rge(n,e,t){var i=wa.exec(e.slice(t,t+3));return i?(n.L=+i[0],t+i[0].length):-1}function Pge(n,e,t){var i=wa.exec(e.slice(t,t+6));return i?(n.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function Ige(n,e,t){var i=mge.exec(e.slice(t,t+1));return i?t+i[0].length:-1}function Nge(n,e,t){var i=wa.exec(e.slice(t));return i?(n.Q=+i[0],t+i[0].length):-1}function Oge(n,e,t){var i=wa.exec(e.slice(t));return i?(n.s=+i[0],t+i[0].length):-1}function jB(n,e){return ai(n.getDate(),e,2)}function Dge(n,e){return ai(n.getHours(),e,2)}function Lge(n,e){return ai(n.getHours()%12||12,e,2)}function Uge(n,e){return ai(1+n_.count(Kf(n),n),e,3)}function FH(n,e){return ai(n.getMilliseconds(),e,3)}function kge(n,e){return FH(n,e)+"000"}function zge(n,e){return ai(n.getMonth()+1,e,2)}function Fge(n,e){return ai(n.getMinutes(),e,2)}function Bge(n,e){return ai(n.getSeconds(),e,2)}function Vge(n){var e=n.getDay();return e===0?7:e}function jge(n,e){return ai(jA.count(Kf(n)-1,n),e,2)}function BH(n){var e=n.getDay();return e>=4||e===0?r0(n):r0.ceil(n)}function Hge(n,e){return n=BH(n),ai(r0.count(Kf(n),n)+(Kf(n).getDay()===4),e,2)}function Gge(n){return n.getDay()}function qge(n,e){return ai(tM.count(Kf(n)-1,n),e,2)}function Wge(n,e){return ai(n.getFullYear()%100,e,2)}function $ge(n,e){return n=BH(n),ai(n.getFullYear()%100,e,2)}function Xge(n,e){return ai(n.getFullYear()%1e4,e,4)}function Yge(n,e){var t=n.getDay();return n=t>=4||t===0?r0(n):r0.ceil(n),ai(n.getFullYear()%1e4,e,4)}function Kge(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ai(e/60|0,"0",2)+ai(e%60,"0",2)}function HB(n,e){return ai(n.getUTCDate(),e,2)}function Zge(n,e){return ai(n.getUTCHours(),e,2)}function Qge(n,e){return ai(n.getUTCHours()%12||12,e,2)}function Jge(n,e){return ai(1+VA.count(Zf(n),n),e,3)}function VH(n,e){return ai(n.getUTCMilliseconds(),e,3)}function eve(n,e){return VH(n,e)+"000"}function tve(n,e){return ai(n.getUTCMonth()+1,e,2)}function nve(n,e){return ai(n.getUTCMinutes(),e,2)}function ive(n,e){return ai(n.getUTCSeconds(),e,2)}function rve(n){var e=n.getUTCDay();return e===0?7:e}function ave(n,e){return ai(HA.count(Zf(n)-1,n),e,2)}function jH(n){var e=n.getUTCDay();return e>=4||e===0?a0(n):a0.ceil(n)}function sve(n,e){return n=jH(n),ai(a0.count(Zf(n),n)+(Zf(n).getUTCDay()===4),e,2)}function ove(n){return n.getUTCDay()}function lve(n,e){return ai(nM.count(Zf(n)-1,n),e,2)}function uve(n,e){return ai(n.getUTCFullYear()%100,e,2)}function cve(n,e){return n=jH(n),ai(n.getUTCFullYear()%100,e,2)}function fve(n,e){return ai(n.getUTCFullYear()%1e4,e,4)}function hve(n,e){var t=n.getUTCDay();return n=t>=4||t===0?a0(n):a0.ceil(n),ai(n.getUTCFullYear()%1e4,e,4)}function dve(){return"+0000"}function GB(){return"%"}function qB(n){return+n}function WB(n){return Math.floor(+n/1e3)}var fv,HH,GH;pve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pve(n){return fv=pge(n),HH=fv.format,fv.parse,GH=fv.utcFormat,fv.utcParse,fv}function mve(n){return new Date(n)}function gve(n){return n instanceof Date?+n:+new Date(+n)}function HD(n,e,t,i,r,a,s,l,c,h){var p=RD(),g=p.invert,v=p.domain,b=h(".%L"),_=h(":%S"),M=h("%I:%M"),S=h("%I %p"),w=h("%a %d"),R=h("%b %d"),P=h("%B"),O=h("%Y");function k(B){return(c(B)<B?b:l(B)<B?_:s(B)<B?M:a(B)<B?S:i(B)<B?r(B)<B?w:R:t(B)<B?P:O)(B)}return p.invert=function(B){return new Date(g(B))},p.domain=function(B){return arguments.length?v(Array.from(B,gve)):v().map(mve)},p.ticks=function(B){var D=v();return n(D[0],D[D.length-1],B??10)},p.tickFormat=function(B,D){return D==null?k:h(D)},p.nice=function(B){var D=v();return(!B||typeof B.range!="function")&&(B=e(D[0],D[D.length-1],B??10)),B?v(PH(D,B)):p},p.copy=function(){return t_(p,HD(n,e,t,i,r,a,s,l,c,h))},p}function vve(){return ql.apply(HD(hge,dge,Kf,VD,jA,n_,FD,kD,um,HH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yve(){return ql.apply(HD(cge,fge,Zf,jD,HA,VA,BD,zD,um,GH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function GA(){var n=0,e=1,t,i,r,a,s=Hs,l=!1,c;function h(g){return g==null||isNaN(g=+g)?c:s(r===0?.5:(g=(a(g)-t)*r,l?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([n,e]=g,t=a(n=+n),i=a(e=+e),r=t===i?0:1/(i-t),h):[n,e]},h.clamp=function(g){return arguments.length?(l=!!g,h):l},h.interpolator=function(g){return arguments.length?(s=g,h):s};function p(g){return function(v){var b,_;return arguments.length?([b,_]=v,s=g(b,_),h):[s(0),s(1)]}}return h.range=p(x0),h.rangeRound=p(CD),h.unknown=function(g){return arguments.length?(c=g,h):c},function(g){return a=g,t=g(n),i=g(e),r=t===i?0:1/(i-t),h}}function Wd(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function qH(){var n=qd(GA()(Hs));return n.copy=function(){return Wd(n,qH())},nh.apply(n,arguments)}function WH(){var n=ND(GA()).domain([1,10]);return n.copy=function(){return Wd(n,WH()).base(n.base())},nh.apply(n,arguments)}function $H(){var n=OD(GA());return n.copy=function(){return Wd(n,$H()).constant(n.constant())},nh.apply(n,arguments)}function GD(){var n=DD(GA());return n.copy=function(){return Wd(n,GD()).exponent(n.exponent())},nh.apply(n,arguments)}function bve(){return GD.apply(null,arguments).exponent(.5)}function XH(){var n=[],e=Hs;function t(i){if(i!=null&&!isNaN(i=+i))return e((Jx(n,i,1)-1)/(n.length-1))}return t.domain=function(i){if(!arguments.length)return n.slice();n=[];for(let r of i)r!=null&&!isNaN(r=+r)&&n.push(r);return n.sort(Md),t},t.interpolator=function(i){return arguments.length?(e=i,t):e},t.range=function(){return n.map((i,r)=>e(r/(n.length-1)))},t.quantiles=function(i){return Array.from({length:i+1},(r,a)=>rme(n,a/i))},t.copy=function(){return XH(e).domain(n)},nh.apply(t,arguments)}function qA(){var n=0,e=.5,t=1,i=1,r,a,s,l,c,h=Hs,p,g=!1,v;function b(M){return isNaN(M=+M)?v:(M=.5+((M=+p(M))-a)*(i*M<i*a?l:c),h(g?Math.max(0,Math.min(1,M)):M))}b.domain=function(M){return arguments.length?([n,e,t]=M,r=p(n=+n),a=p(e=+e),s=p(t=+t),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,b):[n,e,t]},b.clamp=function(M){return arguments.length?(g=!!M,b):g},b.interpolator=function(M){return arguments.length?(h=M,b):h};function _(M){return function(S){var w,R,P;return arguments.length?([w,R,P]=S,h=Ime(M,[w,R,P]),b):[h(0),h(.5),h(1)]}}return b.range=_(x0),b.rangeRound=_(CD),b.unknown=function(M){return arguments.length?(v=M,b):v},function(M){return p=M,r=M(n),a=M(e),s=M(t),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,b}}function YH(){var n=qd(qA()(Hs));return n.copy=function(){return Wd(n,YH())},nh.apply(n,arguments)}function KH(){var n=ND(qA()).domain([.1,1,10]);return n.copy=function(){return Wd(n,KH()).base(n.base())},nh.apply(n,arguments)}function ZH(){var n=OD(qA());return n.copy=function(){return Wd(n,ZH()).constant(n.constant())},nh.apply(n,arguments)}function qD(){var n=DD(qA());return n.copy=function(){return Wd(n,qD()).exponent(n.exponent())},nh.apply(n,arguments)}function xve(){return qD.apply(null,arguments).exponent(.5)}const _b=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:MD,scaleDiverging:YH,scaleDivergingLog:KH,scaleDivergingPow:qD,scaleDivergingSqrt:xve,scaleDivergingSymlog:ZH,scaleIdentity:RH,scaleImplicit:iN,scaleLinear:CH,scaleLog:IH,scaleOrdinal:ED,scalePoint:ome,scalePow:LD,scaleQuantile:DH,scaleQuantize:LH,scaleRadial:OH,scaleSequential:qH,scaleSequentialLog:WH,scaleSequentialPow:GD,scaleSequentialQuantile:XH,scaleSequentialSqrt:bve,scaleSequentialSymlog:$H,scaleSqrt:ege,scaleSymlog:NH,scaleThreshold:UH,scaleTime:vve,scaleUtc:yve,tickFormat:TH},Symbol.toStringTag,{value:"Module"}));var ih=n=>n.chartData,QH=qe([ih],n=>{var e=n.chartData!=null?n.chartData.length-1:0;return{chartData:n.chartData,computedData:n.computedData,dataEndIndex:e,dataStartIndex:0}}),JH=(n,e,t,i)=>i?QH(n):ih(n),_ve=(n,e,t)=>t?QH(n):ih(n);function Qf(n){if(Array.isArray(n)&&n.length===2){var[e,t]=n;if(Xn(e)&&Xn(t))return!0}return!1}function $B(n,e,t){return t?n:[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}function eG(n,e){if(e&&typeof n!="function"&&Array.isArray(n)&&n.length===2){var[t,i]=n,r,a;if(Xn(t))r=t;else if(typeof t=="function")return;if(Xn(i))a=i;else if(typeof i=="function")return;var s=[r,a];if(Qf(s))return s}}function Sve(n,e,t){if(!(!t&&e==null)){if(typeof n=="function"&&e!=null)try{var i=n(e,t);if(Qf(i))return $B(i,e,t)}catch{}if(Array.isArray(n)&&n.length===2){var[r,a]=n,s,l;if(r==="auto")e!=null&&(s=Math.min(...e));else if(Wt(r))s=r;else if(typeof r=="function")try{e!=null&&(s=r(e==null?void 0:e[0]))}catch{}else if(typeof r=="string"&&aF.test(r)){var c=aF.exec(r);if(c==null||c[1]==null||e==null)s=void 0;else{var h=+c[1];s=e[0]-h}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(l=Math.max(...e));else if(Wt(a))l=a;else if(typeof a=="function")try{e!=null&&(l=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&sF.test(a)){var p=sF.exec(a);if(p==null||p[1]==null||e==null)l=void 0;else{var g=+p[1];l=e[1]+g}}else l=e==null?void 0:e[1];var v=[s,l];if(Qf(v))return e==null?v:$B(v,e,t)}}}var _0=1e9,wve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$D,ir=!0,Hl="[DecimalError] ",ym=Hl+"Invalid argument: ",WD=Hl+"Exponent out of range: ",S0=Math.floor,Qp=Math.pow,Eve=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wo,xa=1e7,qi=7,tG=9007199254740991,iM=S0(tG/qi),Bt={};Bt.absoluteValue=Bt.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};Bt.comparedTo=Bt.cmp=function(n){var e,t,i,r,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(i=a.d.length,r=n.d.length,e=0,t=i<r?i:r;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return i===r?0:i>r^a.s<0?1:-1};Bt.decimalPlaces=Bt.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*qi;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};Bt.dividedBy=Bt.div=function(n){return Vf(this,new this.constructor(n))};Bt.dividedToIntegerBy=Bt.idiv=function(n){var e=this,t=e.constructor;return Ii(Vf(e,new t(n),0,1),t.precision)};Bt.equals=Bt.eq=function(n){return!this.cmp(n)};Bt.exponent=function(){return qr(this)};Bt.greaterThan=Bt.gt=function(n){return this.cmp(n)>0};Bt.greaterThanOrEqualTo=Bt.gte=function(n){return this.cmp(n)>=0};Bt.isInteger=Bt.isint=function(){return this.e>this.d.length-2};Bt.isNegative=Bt.isneg=function(){return this.s<0};Bt.isPositive=Bt.ispos=function(){return this.s>0};Bt.isZero=function(){return this.s===0};Bt.lessThan=Bt.lt=function(n){return this.cmp(n)<0};Bt.lessThanOrEqualTo=Bt.lte=function(n){return this.cmp(n)<1};Bt.logarithm=Bt.log=function(n){var e,t=this,i=t.constructor,r=i.precision,a=r+5;if(n===void 0)n=new i(10);else if(n=new i(n),n.s<1||n.eq(Wo))throw Error(Hl+"NaN");if(t.s<1)throw Error(Hl+(t.s?"NaN":"-Infinity"));return t.eq(Wo)?new i(0):(ir=!1,e=Vf(Ax(t,a),Ax(n,a),a),ir=!0,Ii(e,r))};Bt.minus=Bt.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?rG(e,n):nG(e,(n.s=-n.s,n))};Bt.modulo=Bt.mod=function(n){var e,t=this,i=t.constructor,r=i.precision;if(n=new i(n),!n.s)throw Error(Hl+"NaN");return t.s?(ir=!1,e=Vf(t,n,0,1).times(n),ir=!0,t.minus(e)):Ii(new i(t),r)};Bt.naturalExponential=Bt.exp=function(){return iG(this)};Bt.naturalLogarithm=Bt.ln=function(){return Ax(this)};Bt.negated=Bt.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};Bt.plus=Bt.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?nG(e,n):rG(e,(n.s=-n.s,n))};Bt.precision=Bt.sd=function(n){var e,t,i,r=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(ym+n);if(e=qr(r)+1,i=r.d.length-1,t=i*qi+1,i=r.d[i],i){for(;i%10==0;i/=10)t--;for(i=r.d[0];i>=10;i/=10)t++}return n&&e>t?e:t};Bt.squareRoot=Bt.sqrt=function(){var n,e,t,i,r,a,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Hl+"NaN")}for(n=qr(l),ir=!1,r=Math.sqrt(+l),r==0||r==1/0?(e=Tc(l.d),(e.length+n)%2==0&&(e+="0"),r=Math.sqrt(e),n=S0((n+1)/2)-(n<0||n%2),r==1/0?e="5e"+n:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),i=new c(e)):i=new c(r.toString()),t=c.precision,r=s=t+3;;)if(a=i,i=a.plus(Vf(l,a,s+2)).times(.5),Tc(a.d).slice(0,s)===(e=Tc(i.d)).slice(0,s)){if(e=e.slice(s-3,s+1),r==s&&e=="4999"){if(Ii(a,t+1,0),a.times(a).eq(l)){i=a;break}}else if(e!="9999")break;s+=4}return ir=!0,Ii(i,t)};Bt.times=Bt.mul=function(n){var e,t,i,r,a,s,l,c,h,p=this,g=p.constructor,v=p.d,b=(n=new g(n)).d;if(!p.s||!n.s)return new g(0);for(n.s*=p.s,t=p.e+n.e,c=v.length,h=b.length,c<h&&(a=v,v=b,b=a,s=c,c=h,h=s),a=[],s=c+h,i=s;i--;)a.push(0);for(i=h;--i>=0;){for(e=0,r=c+i;r>i;)l=a[r]+b[i]*v[r-i-1]+e,a[r--]=l%xa|0,e=l/xa|0;a[r]=(a[r]+e)%xa|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,ir?Ii(n,g.precision):n};Bt.toDecimalPlaces=Bt.todp=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(Hc(n,0,_0),e===void 0?e=i.rounding:Hc(e,0,8),Ii(t,n+qr(t)+1,e))};Bt.toExponential=function(n,e){var t,i=this,r=i.constructor;return n===void 0?t=Nm(i,!0):(Hc(n,0,_0),e===void 0?e=r.rounding:Hc(e,0,8),i=Ii(new r(i),n+1,e),t=Nm(i,!0,n+1)),t};Bt.toFixed=function(n,e){var t,i,r=this,a=r.constructor;return n===void 0?Nm(r):(Hc(n,0,_0),e===void 0?e=a.rounding:Hc(e,0,8),i=Ii(new a(r),n+qr(r)+1,e),t=Nm(i.abs(),!1,n+qr(i)+1),r.isneg()&&!r.isZero()?"-"+t:t)};Bt.toInteger=Bt.toint=function(){var n=this,e=n.constructor;return Ii(new e(n),qr(n)+1,e.rounding)};Bt.toNumber=function(){return+this};Bt.toPower=Bt.pow=function(n){var e,t,i,r,a,s,l=this,c=l.constructor,h=12,p=+(n=new c(n));if(!n.s)return new c(Wo);if(l=new c(l),!l.s){if(n.s<1)throw Error(Hl+"Infinity");return l}if(l.eq(Wo))return l;if(i=c.precision,n.eq(Wo))return Ii(l,i);if(e=n.e,t=n.d.length-1,s=e>=t,a=l.s,s){if((t=p<0?-p:p)<=tG){for(r=new c(Wo),e=Math.ceil(i/qi+4),ir=!1;t%2&&(r=r.times(l),YB(r.d,e)),t=S0(t/2),t!==0;)l=l.times(l),YB(l.d,e);return ir=!0,n.s<0?new c(Wo).div(r):Ii(r,i)}}else if(a<0)throw Error(Hl+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,l.s=1,ir=!1,r=n.times(Ax(l,i+h)),ir=!0,r=iG(r),r.s=a,r};Bt.toPrecision=function(n,e){var t,i,r=this,a=r.constructor;return n===void 0?(t=qr(r),i=Nm(r,t<=a.toExpNeg||t>=a.toExpPos)):(Hc(n,1,_0),e===void 0?e=a.rounding:Hc(e,0,8),r=Ii(new a(r),n,e),t=qr(r),i=Nm(r,n<=t||t<=a.toExpNeg,n)),i};Bt.toSignificantDigits=Bt.tosd=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(Hc(n,1,_0),e===void 0?e=i.rounding:Hc(e,0,8)),Ii(new i(t),n,e)};Bt.toString=Bt.valueOf=Bt.val=Bt.toJSON=Bt[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=qr(n),t=n.constructor;return Nm(n,e<=t.toExpNeg||e>=t.toExpPos)};function nG(n,e){var t,i,r,a,s,l,c,h,p=n.constructor,g=p.precision;if(!n.s||!e.s)return e.s||(e=new p(n)),ir?Ii(e,g):e;if(c=n.d,h=e.d,s=n.e,r=e.e,c=c.slice(),a=s-r,a){for(a<0?(i=c,a=-a,l=h.length):(i=h,r=s,l=c.length),s=Math.ceil(g/qi),l=s>l?s+1:l+1,a>l&&(a=l,i.length=1),i.reverse();a--;)i.push(0);i.reverse()}for(l=c.length,a=h.length,l-a<0&&(a=l,i=h,h=c,c=i),t=0;a;)t=(c[--a]=c[a]+h[a]+t)/xa|0,c[a]%=xa;for(t&&(c.unshift(t),++r),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=r,ir?Ii(e,g):e}function Hc(n,e,t){if(n!==~~n||n<e||n>t)throw Error(ym+n)}function Tc(n){var e,t,i,r=n.length-1,a="",s=n[0];if(r>0){for(a+=s,e=1;e<r;e++)i=n[e]+"",t=qi-i.length,t&&(a+=ld(t)),a+=i;s=n[e],i=s+"",t=qi-i.length,t&&(a+=ld(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Vf=(function(){function n(i,r){var a,s=0,l=i.length;for(i=i.slice();l--;)a=i[l]*r+s,i[l]=a%xa|0,s=a/xa|0;return s&&i.unshift(s),i}function e(i,r,a,s){var l,c;if(a!=s)c=a>s?1:-1;else for(l=c=0;l<a;l++)if(i[l]!=r[l]){c=i[l]>r[l]?1:-1;break}return c}function t(i,r,a){for(var s=0;a--;)i[a]-=s,s=i[a]<r[a]?1:0,i[a]=s*xa+i[a]-r[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,a,s){var l,c,h,p,g,v,b,_,M,S,w,R,P,O,k,B,D,F,I=i.constructor,L=i.s==r.s?1:-1,H=i.d,q=r.d;if(!i.s)return new I(i);if(!r.s)throw Error(Hl+"Division by zero");for(c=i.e-r.e,D=q.length,k=H.length,b=new I(L),_=b.d=[],h=0;q[h]==(H[h]||0);)++h;if(q[h]>(H[h]||0)&&--c,a==null?R=a=I.precision:s?R=a+(qr(i)-qr(r))+1:R=a,R<0)return new I(0);if(R=R/qi+2|0,h=0,D==1)for(p=0,q=q[0],R++;(h<k||p)&&R--;h++)P=p*xa+(H[h]||0),_[h]=P/q|0,p=P%q|0;else{for(p=xa/(q[0]+1)|0,p>1&&(q=n(q,p),H=n(H,p),D=q.length,k=H.length),O=D,M=H.slice(0,D),S=M.length;S<D;)M[S++]=0;F=q.slice(),F.unshift(0),B=q[0],q[1]>=xa/2&&++B;do p=0,l=e(q,M,D,S),l<0?(w=M[0],D!=S&&(w=w*xa+(M[1]||0)),p=w/B|0,p>1?(p>=xa&&(p=xa-1),g=n(q,p),v=g.length,S=M.length,l=e(g,M,v,S),l==1&&(p--,t(g,D<v?F:q,v))):(p==0&&(l=p=1),g=q.slice()),v=g.length,v<S&&g.unshift(0),t(M,g,S),l==-1&&(S=M.length,l=e(q,M,D,S),l<1&&(p++,t(M,D<S?F:q,S))),S=M.length):l===0&&(p++,M=[0]),_[h++]=p,l&&M[0]?M[S++]=H[O]||0:(M=[H[O]],S=1);while((O++<k||M[0]!==void 0)&&R--)}return _[0]||_.shift(),b.e=c,Ii(b,s?a+qr(b)+1:a)}})();function iG(n,e){var t,i,r,a,s,l,c=0,h=0,p=n.constructor,g=p.precision;if(qr(n)>16)throw Error(WD+qr(n));if(!n.s)return new p(Wo);for(ir=!1,l=g,s=new p(.03125);n.abs().gte(.1);)n=n.times(s),h+=5;for(i=Math.log(Qp(2,h))/Math.LN10*2+5|0,l+=i,t=r=a=new p(Wo),p.precision=l;;){if(r=Ii(r.times(n),l),t=t.times(++c),s=a.plus(Vf(r,t,l)),Tc(s.d).slice(0,l)===Tc(a.d).slice(0,l)){for(;h--;)a=Ii(a.times(a),l);return p.precision=g,e==null?(ir=!0,Ii(a,g)):a}a=s}}function qr(n){for(var e=n.e*qi,t=n.d[0];t>=10;t/=10)e++;return e}function pP(n,e,t){if(e>n.LN10.sd())throw ir=!0,t&&(n.precision=t),Error(Hl+"LN10 precision limit exceeded");return Ii(new n(n.LN10),e)}function ld(n){for(var e="";n--;)e+="0";return e}function Ax(n,e){var t,i,r,a,s,l,c,h,p,g=1,v=10,b=n,_=b.d,M=b.constructor,S=M.precision;if(b.s<1)throw Error(Hl+(b.s?"NaN":"-Infinity"));if(b.eq(Wo))return new M(0);if(e==null?(ir=!1,h=S):h=e,b.eq(10))return e==null&&(ir=!0),pP(M,h);if(h+=v,M.precision=h,t=Tc(_),i=t.charAt(0),a=qr(b),Math.abs(a)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)b=b.times(n),t=Tc(b.d),i=t.charAt(0),g++;a=qr(b),i>1?(b=new M("0."+t),a++):b=new M(i+"."+t.slice(1))}else return c=pP(M,h+2,S).times(a+""),b=Ax(new M(i+"."+t.slice(1)),h-v).plus(c),M.precision=S,e==null?(ir=!0,Ii(b,S)):b;for(l=s=b=Vf(b.minus(Wo),b.plus(Wo),h),p=Ii(b.times(b),h),r=3;;){if(s=Ii(s.times(p),h),c=l.plus(Vf(s,new M(r),h)),Tc(c.d).slice(0,h)===Tc(l.d).slice(0,h))return l=l.times(2),a!==0&&(l=l.plus(pP(M,h+2,S).times(a+""))),l=Vf(l,new M(g),h),M.precision=S,e==null?(ir=!0,Ii(l,S)):l;l=c,r+=2}}function XB(n,e){var t,i,r;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,t=t-i-1,n.e=S0(t/qi),n.d=[],i=(t+1)%qi,t<0&&(i+=qi),i<r){for(i&&n.d.push(+e.slice(0,i)),r-=qi;i<r;)n.d.push(+e.slice(i,i+=qi));e=e.slice(i),i=qi-e.length}else i-=r;for(;i--;)e+="0";if(n.d.push(+e),ir&&(n.e>iM||n.e<-iM))throw Error(WD+t)}else n.s=0,n.e=0,n.d=[0];return n}function Ii(n,e,t){var i,r,a,s,l,c,h,p,g=n.d;for(s=1,a=g[0];a>=10;a/=10)s++;if(i=e-s,i<0)i+=qi,r=e,h=g[p=0];else{if(p=Math.ceil((i+1)/qi),a=g.length,p>=a)return n;for(h=a=g[p],s=1;a>=10;a/=10)s++;i%=qi,r=i-qi+s}if(t!==void 0&&(a=Qp(10,s-r-1),l=h/a%10|0,c=e<0||g[p+1]!==void 0||h%a,c=t<4?(l||c)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||c||t==6&&(i>0?r>0?h/Qp(10,s-r):0:g[p-1])%10&1||t==(n.s<0?8:7))),e<1||!g[0])return c?(a=qr(n),g.length=1,e=e-a-1,g[0]=Qp(10,(qi-e%qi)%qi),n.e=S0(-e/qi)||0):(g.length=1,g[0]=n.e=n.s=0),n;if(i==0?(g.length=p,a=1,p--):(g.length=p+1,a=Qp(10,qi-i),g[p]=r>0?(h/Qp(10,s-r)%Qp(10,r)|0)*a:0),c)for(;;)if(p==0){(g[0]+=a)==xa&&(g[0]=1,++n.e);break}else{if(g[p]+=a,g[p]!=xa)break;g[p--]=0,a=1}for(i=g.length;g[--i]===0;)g.pop();if(ir&&(n.e>iM||n.e<-iM))throw Error(WD+qr(n));return n}function rG(n,e){var t,i,r,a,s,l,c,h,p,g,v=n.constructor,b=v.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new v(n),ir?Ii(e,b):e;if(c=n.d,g=e.d,i=e.e,h=n.e,c=c.slice(),s=h-i,s){for(p=s<0,p?(t=c,s=-s,l=g.length):(t=g,i=h,l=c.length),r=Math.max(Math.ceil(b/qi),l)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=c.length,l=g.length,p=r<l,p&&(l=r),r=0;r<l;r++)if(c[r]!=g[r]){p=c[r]<g[r];break}s=0}for(p&&(t=c,c=g,g=t,e.s=-e.s),l=c.length,r=g.length-l;r>0;--r)c[l++]=0;for(r=g.length;r>s;){if(c[--r]<g[r]){for(a=r;a&&c[--a]===0;)c[a]=xa-1;--c[a],c[r]+=xa}c[r]-=g[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,ir?Ii(e,b):e):new v(0)}function Nm(n,e,t){var i,r=qr(n),a=Tc(n.d),s=a.length;return e?(t&&(i=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+ld(i):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r<0?"e":"e+")+r):r<0?(a="0."+ld(-r-1)+a,t&&(i=t-s)>0&&(a+=ld(i))):r>=s?(a+=ld(r+1-s),t&&(i=t-r-1)>0&&(a=a+"."+ld(i))):((i=r+1)<s&&(a=a.slice(0,i)+"."+a.slice(i)),t&&(i=t-s)>0&&(r+1===s&&(a+="."),a+=ld(i))),n.s<0?"-"+a:a}function YB(n,e){if(n.length>e)return n.length=e,!0}function aG(n){var e,t,i;function r(a){var s=this;if(!(s instanceof r))return new r(a);if(s.constructor=r,a instanceof r){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(ym+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return XB(s,a.toString())}else if(typeof a!="string")throw Error(ym+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Eve.test(a))XB(s,a);else throw Error(ym+a)}if(r.prototype=Bt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=aG,r.config=r.set=Mve,n===void 0&&(n={}),n)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return r.config(n),r}function Mve(n){if(!n||typeof n!="object")throw Error(Hl+"Object expected");var e,t,i,r=["precision",1,_0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=n[t=r[e]])!==void 0)if(S0(i)===i&&i>=r[e+1]&&i<=r[e+2])this[t]=i;else throw Error(ym+t+": "+i);if((i=n[t="LN10"])!==void 0)if(i==Math.LN10)this[t]=new this(i);else throw Error(ym+t+": "+i);return this}var $D=aG(wve);Wo=new $D(1);const bi=$D;function sG(n){var e;return n===0?e=1:e=Math.floor(new bi(n).abs().log(10).toNumber())+1,e}function oG(n,e,t){for(var i=new bi(n),r=0,a=[];i.lt(e)&&r<1e5;)a.push(i.toNumber()),i=i.add(t),r++;return a}var lG=n=>{var[e,t]=n,[i,r]=[e,t];return e>t&&([i,r]=[t,e]),[i,r]},uG=(n,e,t)=>{if(n.lte(0))return new bi(0);var i=sG(n.toNumber()),r=new bi(10).pow(i),a=n.div(r),s=i!==1?.05:.1,l=new bi(Math.ceil(a.div(s).toNumber())).add(t).mul(s),c=l.mul(r);return e?new bi(c.toNumber()):new bi(Math.ceil(c.toNumber()))},Ave=(n,e,t)=>{var i=new bi(1),r=new bi(n);if(!r.isint()&&t){var a=Math.abs(n);a<1?(i=new bi(10).pow(sG(n)-1),r=new bi(Math.floor(r.div(i).toNumber())).mul(i)):a>1&&(r=new bi(Math.floor(n)))}else n===0?r=new bi(Math.floor((e-1)/2)):t||(r=new bi(Math.floor(n)));for(var s=Math.floor((e-1)/2),l=[],c=0;c<e;c++)l.push(r.add(new bi(c-s).mul(i)).toNumber());return l},cG=function(e,t,i,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new bi(0),tickMin:new bi(0),tickMax:new bi(0)};var s=uG(new bi(t).sub(e).div(i-1),r,a),l;e<=0&&t>=0?l=new bi(0):(l=new bi(e).add(t).div(2),l=l.sub(new bi(l).mod(s)));var c=Math.ceil(l.sub(e).div(s).toNumber()),h=Math.ceil(new bi(t).sub(l).div(s).toNumber()),p=c+h+1;return p>i?cG(e,t,i,r,a+1):(p<i&&(h=t>0?h+(i-p):h,c=t>0?c:c+(i-p)),{step:s,tickMin:l.sub(new bi(c).mul(s)),tickMax:l.add(new bi(h).mul(s))})},Tve=function(e){var[t,i]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,c]=lG([t,i]);if(l===-1/0||c===1/0){var h=c===1/0?[l,...Array(r-1).fill(1/0)]:[...Array(r-1).fill(-1/0),c];return t>i?h.reverse():h}if(l===c)return Ave(l,r,a);var{step:p,tickMin:g,tickMax:v}=cG(l,c,s,a,0),b=oG(g,v.add(new bi(.1).mul(p)),p);return t>i?b.reverse():b},Cve=function(e,t){var[i,r]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=lG([i,r]);if(s===-1/0||l===1/0)return[i,r];if(s===l)return[s];var c=Math.max(t,2),h=uG(new bi(l).sub(s).div(c-1),a,0),p=[...oG(new bi(s),new bi(l),h),l];return a===!1&&(p=p.map(g=>Math.round(g))),i>r?p.reverse():p},Rve=n=>n.rootProps.barCategoryGap,WA=n=>n.rootProps.stackOffset,fG=n=>n.rootProps.reverseStackOrder,XD=n=>n.options.chartName,YD=n=>n.rootProps.syncId,hG=n=>n.rootProps.syncMethod,KD=n=>n.options.eventEmitter,Pve=n=>n.rootProps.baseValue,Gs={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Gp={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},gc={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},$A=(n,e)=>{if(!(!n||!e))return n!=null&&n.reversed?[e[1],e[0]]:e};function XA(n,e,t){if(t!=="auto")return t;if(n!=null)return Wc(n,e)?"category":"number"}function KB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function rM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KB(Object(t),!0).forEach(function(i){Ive(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Ive(n,e,t){return(e=Nve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nve(n){var e=Ove(n,"string");return typeof e=="symbol"?e:e+""}function Ove(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ZB={allowDataOverflow:Gp.allowDataOverflow,allowDecimals:Gp.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Gp.angleAxisId,includeHidden:!1,name:void 0,reversed:Gp.reversed,scale:Gp.scale,tick:Gp.tick,tickCount:void 0,ticks:void 0,type:Gp.type,unit:void 0},QB={allowDataOverflow:gc.allowDataOverflow,allowDecimals:gc.allowDecimals,allowDuplicatedCategory:gc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gc.radiusAxisId,includeHidden:gc.includeHidden,name:void 0,reversed:gc.reversed,scale:gc.scale,tick:gc.tick,tickCount:gc.tickCount,ticks:void 0,type:gc.type,unit:void 0},Dve=(n,e)=>{if(e!=null)return n.polarAxis.angleAxis[e]},ZD=qe([Dve,nH],(n,e)=>{var t;if(n!=null)return n;var i=(t=XA(e,"angleAxis",ZB.type))!==null&&t!==void 0?t:"category";return rM(rM({},ZB),{},{type:i})}),Lve=(n,e)=>n.polarAxis.radiusAxis[e],QD=qe([Lve,nH],(n,e)=>{var t;if(n!=null)return n;var i=(t=XA(e,"radiusAxis",QB.type))!==null&&t!==void 0?t:"category";return rM(rM({},QB),{},{type:i})}),YA=n=>n.polarOptions,JD=qe([eh,th,Za],Ipe),dG=qe([YA,JD],(n,e)=>{if(n!=null)return kd(n.innerRadius,e,0)}),pG=qe([YA,JD],(n,e)=>{if(n!=null)return kd(n.outerRadius,e,e*.8)}),Uve=n=>{if(n==null)return[0,0];var{startAngle:e,endAngle:t}=n;return[e,t]},mG=qe([YA],Uve);qe([ZD,mG],$A);var gG=qe([JD,dG,pG],(n,e,t)=>{if(!(n==null||e==null||t==null))return[e,t]});qe([QD,gG],$A);var vG=qe([rr,YA,dG,pG,eh,th],(n,e,t,i,r,a)=>{if(!(n!=="centric"&&n!=="radial"||e==null||t==null||i==null)){var{cx:s,cy:l,startAngle:c,endAngle:h}=e;return{cx:kd(s,r,r/2),cy:kd(l,a,a/2),innerRadius:t,outerRadius:i,startAngle:c,endAngle:h,clockWise:!1}}}),Ea=(n,e)=>e,KA=(n,e,t)=>t;function e3(n){return n==null?void 0:n.id}function yG(n,e,t){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:a}=t,s=new Map;return n.forEach(l=>{var c,h=(c=l.data)!==null&&c!==void 0?c:i;if(!(h==null||h.length===0)){var p=e3(l);h.forEach((g,v)=>{var b=a==null||r?v:String(Ya(g,a,null)),_=Ya(g,l.dataKey,0),M;s.has(b)?M=s.get(b):M={},Object.assign(M,{[p]:_}),s.set(b,M)})}}),Array.from(s.values())}function t3(n){return"stackId"in n&&n.stackId!=null&&n.dataKey!=null}var ZA=(n,e)=>n===e?!0:n==null||e==null?!1:n[0]===e[0]&&n[1]===e[1];function QA(n,e){return Array.isArray(n)&&Array.isArray(e)&&n.length===0&&e.length===0?!0:n===e}function kve(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return!1}var Ma=n=>{var e=rr(n);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},w0=n=>n.tooltip.settings.axisId;function zve(n){if(n in _b)return _b[n]();var e="scale".concat(oD(n));if(e in _b)return _b[e]()}function JB(n){var e=n.ticks,t=n.bandwidth,i=n.range(),r=[Math.min(...i),Math.max(...i)];return{domain:()=>n.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>r),rangeMin:()=>r[0],rangeMax:()=>r[1],isInRange(a){var s=r[0],l=r[1];return s<=l?a>=s&&a<=l:a>=l&&a<=s},bandwidth:t?()=>t.call(n):void 0,ticks:e?a=>e.call(n,a):void 0,map:(a,s)=>{var l=n(a);if(l!=null){if(n.bandwidth&&s!==null&&s!==void 0&&s.position){var c=n.bandwidth();switch(s.position){case"middle":l+=c/2;break;case"end":l+=c;break}}return l}}}}function eV(n,e,t){if(typeof n=="function")return JB(n.copy().domain(e).range(t));if(n!=null){var i=zve(n);if(i!=null)return i.domain(e).range(t),JB(i)}}var Fve=(n,e)=>{if(e!=null)switch(n){case"linear":{if(!Qf(e)){for(var t,i,r=0;r<e.length;r++){var a=e[r];Xn(a)&&((t===void 0||a<t)&&(t=a),(i===void 0||a>i)&&(i=a))}return t!==void 0&&i!==void 0?[t,i]:void 0}return e}default:return e}};function tV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function aM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tV(Object(t),!0).forEach(function(i){Bve(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Bve(n,e,t){return(e=Vve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vve(n){var e=jve(n,"string");return typeof e=="symbol"?e:e+""}function jve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var oN=[0,"auto"],va={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},bG=(n,e)=>n.cartesianAxis.xAxis[e],rh=(n,e)=>{var t=bG(n,e);return t??va},ya={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:oN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Yx},xG=(n,e)=>n.cartesianAxis.yAxis[e],ah=(n,e)=>{var t=xG(n,e);return t??ya},Hve={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},n3=(n,e)=>{var t=n.cartesianAxis.zAxis[e];return t??Hve},Ys=(n,e,t)=>{switch(e){case"xAxis":return rh(n,t);case"yAxis":return ah(n,t);case"zAxis":return n3(n,t);case"angleAxis":return ZD(n,t);case"radiusAxis":return QD(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Gve=(n,e,t)=>{switch(e){case"xAxis":return rh(n,t);case"yAxis":return ah(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},i_=(n,e,t)=>{switch(e){case"xAxis":return rh(n,t);case"yAxis":return ah(n,t);case"angleAxis":return ZD(n,t);case"radiusAxis":return QD(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},_G=n=>n.graphicalItems.cartesianItems.some(e=>e.type==="bar")||n.graphicalItems.polarItems.some(e=>e.type==="radialBar");function SG(n,e){return t=>{switch(n){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var wG=n=>n.graphicalItems.cartesianItems,qve=qe([Ea,KA],SG),EG=(n,e,t)=>n.filter(t).filter(i=>(e==null?void 0:e.includeHidden)===!0?!0:!i.hide),r_=qe([wG,Ys,qve],EG,{memoizeOptions:{resultEqualityCheck:QA}}),MG=qe([r_],n=>n.filter(e=>e.type==="area"||e.type==="bar").filter(t3)),AG=n=>n.filter(e=>!("stackId"in e)||e.stackId===void 0),Wve=qe([r_],AG),TG=n=>n.map(e=>e.data).filter(Boolean).flat(1),$ve=qe([r_],TG,{memoizeOptions:{resultEqualityCheck:QA}}),CG=(n,e)=>{var{chartData:t=[],dataStartIndex:i,dataEndIndex:r}=e;return n.length>0?n:t.slice(i,r+1)},i3=qe([$ve,JH],CG),RG=(n,e,t)=>(e==null?void 0:e.dataKey)!=null?n.map(i=>({value:Ya(i,e.dataKey)})):t.length>0?t.map(i=>i.dataKey).flatMap(i=>n.map(r=>({value:Ya(r,i)}))):n.map(i=>({value:i})),JA=qe([i3,Ys,r_],RG);function PG(n,e){switch(n){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function sw(n){if(Vc(n)||n instanceof Date){var e=Number(n);if(Xn(e))return e}}function nV(n){if(Array.isArray(n)){var e=[sw(n[0]),sw(n[1])];return Qf(e)?e:void 0}var t=sw(n);if(t!=null)return[t,t]}function Jf(n){return n.map(sw).filter(Ao)}function Xve(n,e,t){return!t||typeof e!="number"||Bc(e)?[]:t.length?Jf(t.flatMap(i=>{var r=Ya(n,i.dataKey),a,s;if(Array.isArray(r)?[a,s]=r:a=s=r,!(!Xn(a)||!Xn(s)))return[e-a,e+s]})):[]}var sa=n=>{var e=Ma(n),t=w0(n);return i_(n,e,t)},a_=qe([sa],n=>n==null?void 0:n.dataKey),Yve=qe([MG,JH,sa],yG),IG=(n,e,t,i)=>{var r={},a=e.reduce((s,l)=>{if(l.stackId==null)return s;var c=s[l.stackId];return c==null&&(c=[]),c.push(l),s[l.stackId]=c,s},r);return Object.fromEntries(Object.entries(a).map(s=>{var[l,c]=s,h=i?[...c].reverse():c,p=h.map(e3);return[l,{stackedData:xhe(n,p,t),graphicalItems:h}]}))},NG=qe([Yve,MG,WA,fG],IG),OG=(n,e,t,i)=>{var{dataStartIndex:r,dataEndIndex:a}=e;if(i==null&&t!=="zAxis"){var s=Ehe(n,r,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Kve=qe([Ys],n=>n.allowDataOverflow),r3=n=>{var e;if(n==null||!("domain"in n))return oN;if(n.domain!=null)return n.domain;if("ticks"in n&&n.ticks!=null){if(n.type==="number"){var t=Jf(n.ticks);return[Math.min(...t),Math.max(...t)]}if(n.type==="category")return n.ticks.map(String)}return(e=n==null?void 0:n.domain)!==null&&e!==void 0?e:oN},DG=qe([Ys],r3),LG=qe([DG,Kve],eG),Zve=qe([NG,ih,Ea,LG],OG,{memoizeOptions:{resultEqualityCheck:ZA}}),a3=n=>n.errorBars,Qve=(n,e,t)=>n.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>PG(t,i)),sM=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.filter(Boolean);if(r.length!==0){var a=r.flat(),s=Math.min(...a),l=Math.max(...a);return[s,l]}},UG=(n,e,t,i,r)=>{var a,s;if(t.length>0&&n.forEach(l=>{t.forEach(c=>{var h,p,g=(h=i[c.id])===null||h===void 0?void 0:h.filter(w=>PG(r,w)),v=Ya(l,(p=e.dataKey)!==null&&p!==void 0?p:c.dataKey),b=Xve(l,v,g);if(b.length>=2){var _=Math.min(...b),M=Math.max(...b);(a==null||_<a)&&(a=_),(s==null||M>s)&&(s=M)}var S=nV(v);S!=null&&(a=a==null?S[0]:Math.min(a,S[0]),s=s==null?S[1]:Math.max(s,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&n.forEach(l=>{var c=nV(Ya(l,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Xn(a)&&Xn(s))return[a,s]},Jve=qe([i3,Ys,Wve,a3,Ea],UG,{memoizeOptions:{resultEqualityCheck:ZA}});function e0e(n){var{value:e}=n;if(Vc(e)||e instanceof Date)return e}var t0e=(n,e,t)=>{var i=n.map(e0e).filter(r=>r!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&e9(i))?yH(0,n.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},kG=n=>n.referenceElements.dots,E0=(n,e,t)=>n.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===t:i.yAxisId===t),n0e=qe([kG,Ea,KA],E0),zG=n=>n.referenceElements.areas,i0e=qe([zG,Ea,KA],E0),FG=n=>n.referenceElements.lines,r0e=qe([FG,Ea,KA],E0),BG=(n,e)=>{if(n!=null){var t=Jf(n.map(i=>e==="xAxis"?i.x:i.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},a0e=qe(n0e,Ea,BG),VG=(n,e)=>{if(n!=null){var t=Jf(n.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},s0e=qe([i0e,Ea],VG);function o0e(n){var e;if(n.x!=null)return Jf([n.x]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.x);return t==null||t.length===0?[]:Jf(t)}function l0e(n){var e;if(n.y!=null)return Jf([n.y]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.y);return t==null||t.length===0?[]:Jf(t)}var jG=(n,e)=>{if(n!=null){var t=n.flatMap(i=>e==="xAxis"?o0e(i):l0e(i));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},u0e=qe([r0e,Ea],jG),c0e=qe(a0e,u0e,s0e,(n,e,t)=>sM(n,t,e)),HG=(n,e,t,i,r,a,s,l)=>{if(t!=null)return t;var c=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",h=c?sM(i,a,r):sM(a,r);return Sve(e,h,n.allowDataOverflow)},f0e=qe([Ys,DG,LG,Zve,Jve,c0e,rr,Ea],HG,{memoizeOptions:{resultEqualityCheck:ZA}}),h0e=[0,1],GG=(n,e,t,i,r,a,s)=>{if(!((n==null||t==null||t.length===0)&&s===void 0)){var{dataKey:l,type:c}=n,h=Wc(e,a);if(h&&l==null){var p;return yH(0,(p=t==null?void 0:t.length)!==null&&p!==void 0?p:0)}return c==="category"?t0e(i,n,h):r==="expand"?h0e:s}},s3=qe([Ys,rr,i3,JA,WA,Ea,f0e],GG);function d0e(n){return n in _b}var qG=(n,e,t)=>{if(n!=null){var{scale:i,type:r}=n;if(i==="auto")return r==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!e)?"point":r==="category"?"band":"linear";if(typeof i=="string"){var a="scale".concat(oD(i));return d0e(a)?a:"point"}}},M0=qe([Ys,_G,XD],qG);function o3(n,e,t,i){if(!(t==null||i==null))return typeof n.scale=="function"?eV(n.scale,t,i):eV(e,t,i)}var WG=(n,e,t)=>{var i=r3(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&Qf(n))return Tve(n,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Qf(n))return Cve(n,e.tickCount,e.allowDecimals)}},l3=qe([s3,i_,M0],WG),$G=(n,e,t,i)=>{if(i!=="angleAxis"&&(n==null?void 0:n.type)==="number"&&Qf(e)&&Array.isArray(t)&&t.length>0){var r,a,s=e[0],l=(r=t[0])!==null&&r!==void 0?r:0,c=e[1],h=(a=t[t.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,l),Math.max(c,h)]}return e},p0e=qe([Ys,s3,l3,Ea],$G),m0e=qe(JA,Ys,(n,e)=>{if(!(!e||e.type!=="number")){var t=1/0,i=Array.from(Jf(n.map(g=>g.value))).sort((g,v)=>g-v),r=i[0],a=i[i.length-1];if(r==null||a==null)return 1/0;var s=a-r;if(s===0)return 1/0;for(var l=0;l<i.length-1;l++){var c=i[l],h=i[l+1];if(!(c==null||h==null)){var p=h-c;t=Math.min(t,p)}}return t/s}}),XG=qe(m0e,rr,Rve,Za,(n,e,t,i,r)=>r,(n,e,t,i,r)=>{if(!Xn(n))return 0;var a=e==="vertical"?i.height:i.width;if(r==="gap")return n*a/2;if(r==="no-gap"){var s=kd(t,n*a),l=n*a/2;return l-s-(l-s)/a*s}return 0}),g0e=(n,e,t)=>{var i=rh(n,e);return i==null||typeof i.padding!="string"?0:XG(n,"xAxis",e,t,i.padding)},v0e=(n,e,t)=>{var i=ah(n,e);return i==null||typeof i.padding!="string"?0:XG(n,"yAxis",e,t,i.padding)},y0e=qe(rh,g0e,(n,e)=>{var t,i;if(n==null)return{left:0,right:0};var{padding:r}=n;return typeof r=="string"?{left:e,right:e}:{left:((t=r.left)!==null&&t!==void 0?t:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),b0e=qe(ah,v0e,(n,e)=>{var t,i;if(n==null)return{top:0,bottom:0};var{padding:r}=n;return typeof r=="string"?{top:e,bottom:e}:{top:((t=r.top)!==null&&t!==void 0?t:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),x0e=qe([Za,y0e,LA,DA,(n,e,t)=>t],(n,e,t,i,r)=>{var{padding:a}=i;return r?[a.left,t.width-a.right]:[n.left+e.left,n.left+n.width-e.right]}),_0e=qe([Za,rr,b0e,LA,DA,(n,e,t)=>t],(n,e,t,i,r,a)=>{var{padding:s}=r;return a?[i.height-s.bottom,s.top]:e==="horizontal"?[n.top+n.height-t.bottom,n.top+t.top]:[n.top+t.top,n.top+n.height-t.bottom]}),s_=(n,e,t,i)=>{var r;switch(e){case"xAxis":return x0e(n,t,i);case"yAxis":return _0e(n,t,i);case"zAxis":return(r=n3(n,t))===null||r===void 0?void 0:r.range;case"angleAxis":return mG(n);case"radiusAxis":return gG(n,t);default:return}},YG=qe([Ys,s_],$A),S0e=qe([M0,p0e],Fve),eT=qe([Ys,M0,S0e,YG],o3);qe([r_,a3,Ea],Qve);function KG(n,e){return n.id<e.id?-1:n.id>e.id?1:0}var tT=(n,e)=>e,nT=(n,e,t)=>t,w0e=qe(NA,tT,nT,(n,e,t)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(KG)),E0e=qe(OA,tT,nT,(n,e,t)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(KG)),ZG=(n,e)=>({width:n.width,height:e.height}),M0e=(n,e)=>{var t=typeof e.width=="number"?e.width:Yx;return{width:t,height:n.height}},A0e=qe(Za,rh,ZG),T0e=(n,e,t)=>{switch(e){case"top":return n.top;case"bottom":return t-n.bottom;default:return 0}},C0e=(n,e,t)=>{switch(e){case"left":return n.left;case"right":return t-n.right;default:return 0}},R0e=qe(th,Za,w0e,tT,nT,(n,e,t,i,r)=>{var a={},s;return t.forEach(l=>{var c=ZG(e,l);s==null&&(s=T0e(e,i,n));var h=i==="top"&&!r||i==="bottom"&&r;a[l.id]=s-Number(h)*c.height,s+=(h?-1:1)*c.height}),a}),P0e=qe(eh,Za,E0e,tT,nT,(n,e,t,i,r)=>{var a={},s;return t.forEach(l=>{var c=M0e(e,l);s==null&&(s=C0e(e,i,n));var h=i==="left"&&!r||i==="right"&&r;a[l.id]=s-Number(h)*c.width,s+=(h?-1:1)*c.width}),a}),I0e=(n,e)=>{var t=rh(n,e);if(t!=null)return R0e(n,t.orientation,t.mirror)},N0e=qe([Za,rh,I0e,(n,e)=>e],(n,e,t,i)=>{if(e!=null){var r=t==null?void 0:t[i];return r==null?{x:n.left,y:0}:{x:n.left,y:r}}}),O0e=(n,e)=>{var t=ah(n,e);if(t!=null)return P0e(n,t.orientation,t.mirror)},D0e=qe([Za,ah,O0e,(n,e)=>e],(n,e,t,i)=>{if(e!=null){var r=t==null?void 0:t[i];return r==null?{x:0,y:n.top}:{x:r,y:n.top}}}),L0e=qe(Za,ah,(n,e)=>{var t=typeof e.width=="number"?e.width:Yx;return{width:t,height:n.height}}),QG=(n,e,t,i)=>{if(t!=null){var{allowDuplicatedCategory:r,type:a,dataKey:s}=t,l=Wc(n,i),c=e.map(h=>h.value);if(s&&l&&a==="category"&&r&&e9(c))return c}},u3=qe([rr,JA,Ys,Ea],QG),JG=(n,e,t,i)=>{if(!(t==null||t.dataKey==null)){var{type:r,scale:a}=t,s=Wc(n,i);if(s&&(r==="number"||a!=="auto"))return e.map(l=>l.value)}},c3=qe([rr,JA,i_,Ea],JG),iV=qe([rr,Gve,M0,eT,u3,c3,s_,l3,Ea],(n,e,t,i,r,a,s,l,c)=>{if(e!=null){var h=Wc(n,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:r,isCategorical:h,niceTicks:l,range:s,realScaleType:t,scale:i}}}),U0e=(n,e,t,i,r,a,s,l,c)=>{if(!(e==null||i==null)){var h=Wc(n,c),{type:p,ticks:g,tickCount:v}=e,b=t==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,_=p==="category"&&i.bandwidth?i.bandwidth()/b:0;_=c==="angleAxis"&&a!=null&&a.length>=2?Ul(a[0]-a[1])*2*_:_;var M=g||r;return M?M.map((S,w)=>{var R=s?s.indexOf(S):S,P=i.map(R);return Xn(P)?{index:w,coordinate:P+_,value:S,offset:_}:null}).filter(Ao):h&&l?l.map((S,w)=>{var R=i.map(S);return Xn(R)?{coordinate:R+_,value:S,index:w,offset:_}:null}).filter(Ao):i.ticks?i.ticks(v).map((S,w)=>{var R=i.map(S);return Xn(R)?{coordinate:R+_,value:S,index:w,offset:_}:null}).filter(Ao):i.domain().map((S,w)=>{var R=i.map(S);return Xn(R)?{coordinate:R+_,value:s?s[S]:S,index:w,offset:_}:null}).filter(Ao)}},e7=qe([rr,i_,M0,eT,l3,s_,u3,c3,Ea],U0e),k0e=(n,e,t,i,r,a,s)=>{if(!(e==null||t==null||i==null||i[0]===i[1])){var l=Wc(n,s),{tickCount:c}=e,h=0;return h=s==="angleAxis"&&(i==null?void 0:i.length)>=2?Ul(i[0]-i[1])*2*h:h,l&&a?a.map((p,g)=>{var v=t.map(p);return Xn(v)?{coordinate:v+h,value:p,index:g,offset:h}:null}).filter(Ao):t.ticks?t.ticks(c).map((p,g)=>{var v=t.map(p);return Xn(v)?{coordinate:v+h,value:p,index:g,offset:h}:null}).filter(Ao):t.domain().map((p,g)=>{var v=t.map(p);return Xn(v)?{coordinate:v+h,value:r?r[p]:p,index:g,offset:h}:null}).filter(Ao)}},t7=qe([rr,i_,eT,s_,u3,c3,Ea],k0e),n7=qe(Ys,eT,(n,e)=>{if(!(n==null||e==null))return aM(aM({},n),{},{scale:e})}),z0e=qe([Ys,M0,s3,YG],o3);qe((n,e,t)=>n3(n,t),z0e,(n,e)=>{if(!(n==null||e==null))return aM(aM({},n),{},{scale:e})});var F0e=qe([rr,NA,OA],(n,e,t)=>{switch(n){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),i7=n=>n.options.defaultTooltipEventType,r7=n=>n.options.validateTooltipEventTypes;function a7(n,e,t){if(n==null)return e;var i=n?"axis":"item";return t==null?e:t.includes(i)?i:e}function f3(n,e){var t=i7(n),i=r7(n);return a7(e,t,i)}function B0e(n){return sn(e=>f3(e,n))}var s7=(n,e)=>{var t,i=Number(e);if(!(Bc(i)||e==null))return i>=0?n==null||(t=n[i])===null||t===void 0?void 0:t.value:void 0},V0e=n=>n.tooltip.settings,hd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},j0e={itemInteraction:{click:hd,hover:hd},axisInteraction:{click:hd,hover:hd},keyboardInteraction:hd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},o7=Co({name:"tooltip",initialState:j0e,reducers:{addTooltipEntrySettings:{reducer(n,e){n.tooltipItemPayloads.push(e.payload)},prepare:nr()},replaceTooltipEntrySettings:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Tu(n).tooltipItemPayloads.indexOf(t);r>-1&&(n.tooltipItemPayloads[r]=i)},prepare:nr()},removeTooltipEntrySettings:{reducer(n,e){var t=Tu(n).tooltipItemPayloads.indexOf(e.payload);t>-1&&n.tooltipItemPayloads.splice(t,1)},prepare:nr()},setTooltipSettingsState(n,e){n.settings=e.payload},setActiveMouseOverItemIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.itemInteraction.hover.active=!0,n.itemInteraction.hover.index=e.payload.activeIndex,n.itemInteraction.hover.dataKey=e.payload.activeDataKey,n.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(n){n.itemInteraction.hover.active=!1,n.axisInteraction.hover.active=!1},mouseLeaveItem(n){n.itemInteraction.hover.active=!1},setActiveClickItemIndex(n,e){n.syncInteraction.active=!1,n.itemInteraction.click.active=!0,n.keyboardInteraction.active=!1,n.itemInteraction.click.index=e.payload.activeIndex,n.itemInteraction.click.dataKey=e.payload.activeDataKey,n.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(n,e){n.syncInteraction.active=!1,n.axisInteraction.hover.active=!0,n.keyboardInteraction.active=!1,n.axisInteraction.hover.index=e.payload.activeIndex,n.axisInteraction.hover.dataKey=e.payload.activeDataKey,n.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.axisInteraction.click.active=!0,n.axisInteraction.click.index=e.payload.activeIndex,n.axisInteraction.click.dataKey=e.payload.activeDataKey,n.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(n,e){n.syncInteraction=e.payload},setKeyboardInteraction(n,e){n.keyboardInteraction.active=e.payload.active,n.keyboardInteraction.index=e.payload.activeIndex,n.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:H0e,replaceTooltipEntrySettings:G0e,removeTooltipEntrySettings:q0e,setTooltipSettingsState:W0e,setActiveMouseOverItemIndex:$0e,mouseLeaveItem:rAe,mouseLeaveChart:l7,setActiveClickItemIndex:aAe,setMouseOverAxisIndex:u7,setMouseClickAxisIndex:X0e,setSyncInteraction:lN,setKeyboardInteraction:uN}=o7.actions,Y0e=o7.reducer;function rV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function V1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(t),!0).forEach(function(i){K0e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function K0e(n,e,t){return(e=Z0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z0e(n){var e=Q0e(n,"string");return typeof e=="symbol"?e:e+""}function Q0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function J0e(n,e,t){return e==="axis"?t==="click"?n.axisInteraction.click:n.axisInteraction.hover:t==="click"?n.itemInteraction.click:n.itemInteraction.hover}function eye(n){return n.index!=null}var c7=(n,e,t,i)=>{if(e==null)return hd;var r=J0e(n,e,t);if(r==null)return hd;if(r.active)return r;if(n.keyboardInteraction.active)return n.keyboardInteraction;if(n.syncInteraction.active&&n.syncInteraction.index!=null)return n.syncInteraction;var a=n.settings.active===!0;if(eye(r)){if(a)return V1(V1({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return V1(V1({},hd),{},{coordinate:r.coordinate})};function tye(n){if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(n instanceof Date){var e=n.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(n);return Number.isFinite(t)?t:void 0}function nye(n,e){var t=tye(n),i=e[0],r=e[1];if(t===void 0)return!1;var a=Math.min(i,r),s=Math.max(i,r);return t>=a&&t<=s}function iye(n,e,t){if(t==null||e==null)return!0;var i=Ya(n,e);return i==null||!Qf(t)?!0:nye(i,t)}var h3=(n,e,t,i)=>{var r=n==null?void 0:n.index;if(r==null)return null;var a=Number(r);if(!Xn(a))return r;var s=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(s,Math.min(a,l)),h=e[c];return h==null||iye(h,t,i)?String(c):null},f7=(n,e,t,i,r,a,s)=>{if(a!=null){var l=s[0],c=l==null?void 0:l.getPosition(a);if(c!=null)return c;var h=r==null?void 0:r[Number(a)];if(h)switch(t){case"horizontal":return{x:h.coordinate,y:(i.top+e)/2};default:return{x:(i.left+n)/2,y:h.coordinate}}}},h7=(n,e,t,i)=>{if(e==="axis")return n.tooltipItemPayloads;if(n.tooltipItemPayloads.length===0)return[];var r;if(t==="hover"?r=n.itemInteraction.hover.graphicalItemId:r=n.itemInteraction.click.graphicalItemId,r==null&&i!=null){var a=n.tooltipItemPayloads[0];return a!=null?[a]:[]}return n.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},d7=n=>n.options.tooltipPayloadSearcher,A0=n=>n.tooltip;function aV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function sV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(t),!0).forEach(function(i){rye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function rye(n,e,t){return(e=aye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aye(n){var e=sye(n,"string");return typeof e=="symbol"?e:e+""}function sye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oye(n,e){return n??e}var p7=(n,e,t,i,r,a,s)=>{if(!(e==null||a==null)){var{chartData:l,computedData:c,dataStartIndex:h,dataEndIndex:p}=t,g=[];return n.reduce((v,b)=>{var _,{dataDefinedOnItem:M,settings:S}=b,w=oye(M,l),R=Array.isArray(w)?G9(w,h,p):w,P=(_=S==null?void 0:S.dataKey)!==null&&_!==void 0?_:i,O=S==null?void 0:S.nameKey,k;if(i&&Array.isArray(R)&&!Array.isArray(R[0])&&s==="axis"?k=t9(R,i,r):k=a(R,e,c,O),Array.isArray(k))k.forEach(D=>{var F=sV(sV({},S),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});v.push(oF({tooltipEntrySettings:F,dataKey:D.dataKey,payload:D.payload,value:Ya(D.payload,D.dataKey),name:D.name}))});else{var B;v.push(oF({tooltipEntrySettings:S,dataKey:P,payload:k,value:Ya(k,P),name:(B=Ya(k,O))!==null&&B!==void 0?B:S==null?void 0:S.name}))}return v},g)}},d3=qe([sa,_G,XD],qG),lye=qe([n=>n.graphicalItems.cartesianItems,n=>n.graphicalItems.polarItems],(n,e)=>[...n,...e]),uye=qe([Ma,w0],SG),T0=qe([lye,sa,uye],EG,{memoizeOptions:{resultEqualityCheck:QA}}),cye=qe([T0],n=>n.filter(t3)),fye=qe([T0],TG,{memoizeOptions:{resultEqualityCheck:QA}}),C0=qe([fye,ih],CG),hye=qe([cye,ih,sa],yG),p3=qe([C0,sa,T0],RG),m7=qe([sa],r3),dye=qe([sa],n=>n.allowDataOverflow),g7=qe([m7,dye],eG),pye=qe([T0],n=>n.filter(t3)),mye=qe([hye,pye,WA,fG],IG),gye=qe([mye,ih,Ma,g7],OG),vye=qe([T0],AG),yye=qe([C0,sa,vye,a3,Ma],UG,{memoizeOptions:{resultEqualityCheck:ZA}}),bye=qe([kG,Ma,w0],E0),xye=qe([bye,Ma],BG),_ye=qe([zG,Ma,w0],E0),Sye=qe([_ye,Ma],VG),wye=qe([FG,Ma,w0],E0),Eye=qe([wye,Ma],jG),Mye=qe([xye,Eye,Sye],sM),Aye=qe([sa,m7,g7,gye,yye,Mye,rr,Ma],HG),o_=qe([sa,rr,C0,p3,WA,Ma,Aye],GG),Tye=qe([o_,sa,d3],WG),Cye=qe([sa,o_,Tye,Ma],$G),v7=n=>{var e=Ma(n),t=w0(n),i=!1;return s_(n,e,t,i)},y7=qe([sa,v7],$A),b7=qe([sa,d3,Cye,y7],o3),Rye=qe([rr,p3,sa,Ma],QG),Pye=qe([rr,p3,sa,Ma],JG),Iye=(n,e,t,i,r,a,s,l)=>{if(e){var{type:c}=e,h=Wc(n,l);if(i){var p=t==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,g=c==="category"&&i.bandwidth?i.bandwidth()/p:0;return g=l==="angleAxis"&&r!=null&&(r==null?void 0:r.length)>=2?Ul(r[0]-r[1])*2*g:g,h&&s?s.map((v,b)=>{var _=i.map(v);return Xn(_)?{coordinate:_+g,value:v,index:b,offset:g}:null}).filter(Ao):i.domain().map((v,b)=>{var _=i.map(v);return Xn(_)?{coordinate:_+g,value:a?a[v]:v,index:b,offset:g}:null}).filter(Ao)}}},sh=qe([rr,sa,d3,b7,v7,Rye,Pye,Ma],Iye),m3=qe([i7,r7,V0e],(n,e,t)=>a7(t.shared,n,e)),x7=n=>n.tooltip.settings.trigger,g3=n=>n.tooltip.settings.defaultIndex,l_=qe([A0,m3,x7,g3],c7),Tx=qe([l_,C0,a_,o_],h3),_7=qe([sh,Tx],s7),Nye=qe([l_],n=>{if(n)return n.dataKey});qe([l_],n=>{if(n)return n.graphicalItemId});var S7=qe([A0,m3,x7,g3],h7),Oye=qe([eh,th,rr,Za,sh,g3,S7],f7),Dye=qe([l_,Oye],(n,e)=>n!=null&&n.coordinate?n.coordinate:e),Lye=qe([l_],n=>{var e;return(e=n==null?void 0:n.active)!==null&&e!==void 0?e:!1}),Uye=qe([S7,Tx,ih,a_,_7,d7,m3],p7),kye=qe([Uye],n=>{if(n!=null){var e=n.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function oV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function lV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(t),!0).forEach(function(i){zye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zye(n,e,t){return(e=Fye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fye(n){var e=Bye(n,"string");return typeof e=="symbol"?e:e+""}function Bye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Vye=()=>sn(sa),jye=()=>{var n=Vye(),e=sn(sh),t=sn(b7);return kE(!n||!t?void 0:lV(lV({},n),{},{scale:t}),e)};function uV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function hv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(t),!0).forEach(function(i){Hye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Hye(n,e,t){return(e=Gye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gye(n){var e=qye(n,"string");return typeof e=="symbol"?e:e+""}function qye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Wye=(n,e,t,i)=>{var r=e.find(a=>a&&a.index===t);if(r){if(n==="horizontal")return{x:r.coordinate,y:i.chartY};if(n==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},$ye=(n,e,t,i)=>{var r=e.find(h=>h&&h.index===t);if(r){if(n==="centric"){var a=r.coordinate,{radius:s}=i;return hv(hv(hv({},i),$a(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=r.coordinate,{angle:c}=i;return hv(hv(hv({},i),$a(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Xye(n,e){var{chartX:t,chartY:i}=n;return t>=e.left&&t<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var w7=(n,e,t,i,r)=>{var a,s=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(s<=1||n==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<s;l++){var c,h,p,g,v,b=l>0?(c=t[l-1])===null||c===void 0?void 0:c.coordinate:(h=t[s-1])===null||h===void 0?void 0:h.coordinate,_=(p=t[l])===null||p===void 0?void 0:p.coordinate,M=l>=s-1?(g=t[0])===null||g===void 0?void 0:g.coordinate:(v=t[l+1])===null||v===void 0?void 0:v.coordinate,S=void 0;if(!(b==null||_==null||M==null))if(Ul(_-b)!==Ul(M-_)){var w=[];if(Ul(M-_)===Ul(r[1]-r[0])){S=M;var R=_+r[1]-r[0];w[0]=Math.min(R,(R+b)/2),w[1]=Math.max(R,(R+b)/2)}else{S=b;var P=M+r[1]-r[0];w[0]=Math.min(_,(P+_)/2),w[1]=Math.max(_,(P+_)/2)}var O=[Math.min(_,(S+_)/2),Math.max(_,(S+_)/2)];if(n>O[0]&&n<=O[1]||n>=w[0]&&n<=w[1]){var k;return(k=t[l])===null||k===void 0?void 0:k.index}}else{var B=Math.min(b,M),D=Math.max(b,M);if(n>(B+_)/2&&n<=(D+_)/2){var F;return(F=t[l])===null||F===void 0?void 0:F.index}}}else if(e)for(var I=0;I<s;I++){var L=e[I];if(L!=null){var H=e[I+1],q=e[I-1];if(I===0&&H!=null&&n<=(L.coordinate+H.coordinate)/2||I===s-1&&q!=null&&n>(L.coordinate+q.coordinate)/2||I>0&&I<s-1&&q!=null&&H!=null&&n>(L.coordinate+q.coordinate)/2&&n<=(L.coordinate+H.coordinate)/2)return L.index}}return-1},E7=()=>sn(XD),v3=(n,e)=>e,M7=(n,e,t)=>t,y3=(n,e,t,i)=>i,Yye=qe(sh,n=>SA(n,e=>e.coordinate)),b3=qe([A0,v3,M7,y3],c7),x3=qe([b3,C0,a_,o_],h3),Kye=(n,e,t)=>{if(e!=null){var i=A0(n);return e==="axis"?t==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:t==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},A7=qe([A0,v3,M7,y3],h7),oM=qe([eh,th,rr,Za,sh,y3,A7],f7),Zye=qe([b3,oM],(n,e)=>{var t;return(t=n.coordinate)!==null&&t!==void 0?t:e}),T7=qe([sh,x3],s7),Qye=qe([A7,x3,ih,a_,T7,d7,v3],p7),Jye=qe([b3,x3],(n,e)=>({isActive:n.active&&e!=null,activeIndex:e})),ebe=(n,e,t,i,r,a,s)=>{if(!(!n||!t||!i||!r)&&Xye(n,s)){var l=Mhe(n,e),c=w7(l,a,r,t,i),h=Wye(e,r,c,n);return{activeIndex:String(c),activeCoordinate:h}}},tbe=(n,e,t,i,r,a,s)=>{if(!(!n||!i||!r||!a||!t)){var l=Upe(n,t);if(l){var c=Ahe(l,e),h=w7(c,s,a,i,r),p=$ye(e,a,h,l);return{activeIndex:String(h),activeCoordinate:p}}}},nbe=(n,e,t,i,r,a,s,l)=>{if(!(!n||!e||!i||!r||!a))return e==="horizontal"||e==="vertical"?ebe(n,e,i,r,a,s,l):tbe(n,e,t,i,r,a,s)},ibe=qe(n=>n.zIndex.zIndexMap,(n,e)=>e,(n,e,t)=>t,(n,e,t)=>{if(e!=null){var i=n[e];if(i!=null)return t?i.panoramaElement:i.element}}),rbe=qe(n=>n.zIndex.zIndexMap,n=>{var e=Object.keys(n).map(i=>parseInt(i,10)).concat(Object.values(Gs)),t=Array.from(new Set(e));return t.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:kve}});function cV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function fV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(t),!0).forEach(function(i){abe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function abe(n,e,t){return(e=sbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sbe(n){var e=obe(n,"string");return typeof e=="symbol"?e:e+""}function obe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var lbe={},ube={zIndexMap:Object.values(Gs).reduce((n,e)=>fV(fV({},n),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),lbe)},cbe=new Set(Object.values(Gs));function fbe(n){return cbe.has(n)}var C7=Co({name:"zIndex",initialState:ube,reducers:{registerZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]?n.zIndexMap[t].consumers+=1:n.zIndexMap[t]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:nr()},unregisterZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(n.zIndexMap[t].consumers-=1,n.zIndexMap[t].consumers<=0&&!fbe(t)&&delete n.zIndexMap[t])},prepare:nr()},registerZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t,element:i,isPanorama:r}=e.payload;n.zIndexMap[t]?r?n.zIndexMap[t].panoramaElement=i:n.zIndexMap[t].element=i:n.zIndexMap[t]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:nr()},unregisterZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(e.payload.isPanorama?n.zIndexMap[t].panoramaElement=void 0:n.zIndexMap[t].element=void 0)},prepare:nr()}}}),{registerZIndexPortal:hbe,unregisterZIndexPortal:dbe,registerZIndexPortalElement:pbe,unregisterZIndexPortalElement:mbe}=C7.actions,gbe=C7.reducer;function oh(n){var{zIndex:e,children:t}=n,i=ade(),r=i&&e!==void 0&&e!==0,a=Ro(),s=Sa();j.useLayoutEffect(()=>r?(s(hbe({zIndex:e})),()=>{s(dbe({zIndex:e}))}):y0,[s,e,r]);var l=sn(c=>ibe(c,e,a));return r?l?_5.createPortal(t,l):null:t}function cN(){return cN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},cN.apply(null,arguments)}function hV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function j1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(t),!0).forEach(function(i){vbe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function vbe(n,e,t){return(e=ybe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ybe(n){var e=bbe(n,"string");return typeof e=="symbol"?e:e+""}function bbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xbe(n){var{cursor:e,cursorComp:t,cursorProps:i}=n;return j.isValidElement(e)?j.cloneElement(e,i):j.createElement(t,i)}function _be(n){var e,{coordinate:t,payload:i,index:r,offset:a,tooltipAxisBandSize:s,layout:l,cursor:c,tooltipEventType:h,chartName:p}=n,g=t,v=i,b=r;if(!c||!g||p!=="ScatterChart"&&h!=="axis")return null;var _,M,S;if(p==="ScatterChart")_=g,M=$de,S=Gs.cursorLine;else if(p==="BarChart")_=Xde(l,g,a,s),M=Ape,S=Gs.cursorRectangle;else if(l==="radial"&&n9(g)){var{cx:w,cy:R,radius:P,startAngle:O,endAngle:k}=gH(g);_={cx:w,cy:R,startAngle:O,endAngle:k,innerRadius:P,outerRadius:P},M=Bpe,S=Gs.cursorLine}else _={points:Vpe(l,g,a)},M=aw,S=Gs.cursorLine;var B=typeof c=="object"&&"className"in c?c.className:void 0,D=j1(j1(j1(j1({stroke:"#ccc",pointerEvents:"none"},a),_),yA(c)),{},{payload:v,payloadIndex:b,className:Yi("recharts-tooltip-cursor",B)});return j.createElement(oh,{zIndex:(e=n.zIndex)!==null&&e!==void 0?e:S},j.createElement(xbe,{cursor:c,cursorComp:M,cursorProps:D}))}function Sbe(n){var e=jye(),t=J9(),i=b0(),r=E7();return e==null||t==null||i==null||r==null?null:j.createElement(_be,cN({},n,{offset:t,layout:i,tooltipAxisBandSize:e,chartName:r}))}var R7=j.createContext(null),wbe=()=>j.useContext(R7),mP={exports:{}},dV;function Ebe(){return dV||(dV=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(c,h,p){this.fn=c,this.context=h,this.once=p||!1}function a(c,h,p,g,v){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new r(p,g||c,v),_=t?t+h:h;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],b]:c._events[_].push(b):(c._events[_]=b,c._eventsCount++),c}function s(c,h){--c._eventsCount===0?c._events=new i:delete c._events[h]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)e.call(p,g)&&h.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},l.prototype.listeners=function(h){var p=t?t+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,b=g.length,_=new Array(b);v<b;v++)_[v]=g[v].fn;return _},l.prototype.listenerCount=function(h){var p=t?t+h:h,g=this._events[p];return g?g.fn?1:g.length:0},l.prototype.emit=function(h,p,g,v,b,_){var M=t?t+h:h;if(!this._events[M])return!1;var S=this._events[M],w=arguments.length,R,P;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,v),!0;case 5:return S.fn.call(S.context,p,g,v,b),!0;case 6:return S.fn.call(S.context,p,g,v,b,_),!0}for(P=1,R=new Array(w-1);P<w;P++)R[P-1]=arguments[P];S.fn.apply(S.context,R)}else{var O=S.length,k;for(P=0;P<O;P++)switch(S[P].once&&this.removeListener(h,S[P].fn,void 0,!0),w){case 1:S[P].fn.call(S[P].context);break;case 2:S[P].fn.call(S[P].context,p);break;case 3:S[P].fn.call(S[P].context,p,g);break;case 4:S[P].fn.call(S[P].context,p,g,v);break;default:if(!R)for(k=1,R=new Array(w-1);k<w;k++)R[k-1]=arguments[k];S[P].fn.apply(S[P].context,R)}}return!0},l.prototype.on=function(h,p,g){return a(this,h,p,g,!1)},l.prototype.once=function(h,p,g){return a(this,h,p,g,!0)},l.prototype.removeListener=function(h,p,g,v){var b=t?t+h:h;if(!this._events[b])return this;if(!p)return s(this,b),this;var _=this._events[b];if(_.fn)_.fn===p&&(!v||_.once)&&(!g||_.context===g)&&s(this,b);else{for(var M=0,S=[],w=_.length;M<w;M++)(_[M].fn!==p||v&&!_[M].once||g&&_[M].context!==g)&&S.push(_[M]);S.length?this._events[b]=S.length===1?S[0]:S:s(this,b)}return this},l.prototype.removeAllListeners=function(h){var p;return h?(p=t?t+h:h,this._events[p]&&s(this,p)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,n.exports=l})(mP)),mP.exports}var Mbe=Ebe();const Abe=Pu(Mbe);var Cx=new Abe,fN="recharts.syncEvent.tooltip",pV="recharts.syncEvent.brush",Tbe=(n,e)=>{if(e&&Array.isArray(n)){var t=Number.parseInt(e,10);if(!Bc(t))return n[t]}},Cbe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},P7=Co({name:"options",initialState:Cbe,reducers:{createEventEmitter:n=>{n.eventEmitter==null&&(n.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Rbe=P7.reducer,{createEventEmitter:Pbe}=P7.actions;function Ibe(n){return n.tooltip.syncInteraction}var Nbe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},I7=Co({name:"chartData",initialState:Nbe,reducers:{setChartData(n,e){if(n.chartData=e.payload,e.payload==null){n.dataStartIndex=0,n.dataEndIndex=0;return}e.payload.length>0&&n.dataEndIndex!==e.payload.length-1&&(n.dataEndIndex=e.payload.length-1)},setComputedData(n,e){n.computedData=e.payload},setDataStartEndIndexes(n,e){var{startIndex:t,endIndex:i}=e.payload;t!=null&&(n.dataStartIndex=t),i!=null&&(n.dataEndIndex=i)}}}),{setChartData:mV,setDataStartEndIndexes:Obe,setComputedData:sAe}=I7.actions,Dbe=I7.reducer,Lbe=["x","y"];function gV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function dv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(t),!0).forEach(function(i){Ube(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Ube(n,e,t){return(e=kbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kbe(n){var e=zbe(n,"string");return typeof e=="symbol"?e:e+""}function zbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fbe(n,e){if(n==null)return{};var t,i,r=Bbe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Bbe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Vbe(){var n=sn(YD),e=sn(KD),t=Sa(),i=sn(hG),r=sn(sh),a=b0(),s=UA(),l=sn(c=>c.rootProps.className);j.useEffect(()=>{if(n==null)return y0;var c=(h,p,g)=>{if(e!==g&&n===h){if(i==="index"){var v;if(s&&p!==null&&p!==void 0&&(v=p.payload)!==null&&v!==void 0&&v.coordinate&&p.payload.sourceViewBox){var b=p.payload.coordinate,{x:_,y:M}=b,S=Fbe(b,Lbe),{x:w,y:R,width:P,height:O}=p.payload.sourceViewBox,k=dv(dv({},S),{},{x:s.x+(P?(_-w)/P:0)*s.width,y:s.y+(O?(M-R)/O:0)*s.height});t(dv(dv({},p),{},{payload:dv(dv({},p.payload),{},{coordinate:k})}))}else t(p);return}if(r!=null){var B;if(typeof i=="function"){var D={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},F=i(r,D);B=r[F]}else i==="value"&&(B=r.find(te=>String(te.value)===p.payload.label));var{coordinate:I}=p.payload;if(B==null||p.payload.active===!1||I==null||s==null){t(lN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:H}=I,q=Math.min(L,s.x+s.width),W=Math.min(H,s.y+s.height),oe={x:a==="horizontal"?B.coordinate:q,y:a==="horizontal"?W:B.coordinate},fe=lN({active:p.payload.active,coordinate:oe,dataKey:p.payload.dataKey,index:String(B.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});t(fe)}}};return Cx.on(fN,c),()=>{Cx.off(fN,c)}},[l,t,e,n,i,r,a,s])}function jbe(){var n=sn(YD),e=sn(KD),t=Sa();j.useEffect(()=>{if(n==null)return y0;var i=(r,a,s)=>{e!==s&&n===r&&t(Obe(a))};return Cx.on(pV,i),()=>{Cx.off(pV,i)}},[t,e,n])}function Hbe(){var n=Sa();j.useEffect(()=>{n(Pbe())},[n]),Vbe(),jbe()}function Gbe(n,e,t,i,r,a){var s=sn(b=>Kye(b,n,e)),l=sn(KD),c=sn(YD),h=sn(hG),p=sn(Ibe),g=p==null?void 0:p.active,v=UA();j.useEffect(()=>{if(!g&&c!=null&&l!=null){var b=lN({active:a,coordinate:t,dataKey:s,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:v,graphicalItemId:void 0});Cx.emit(fN,c,b,l)}},[g,t,s,r,i,l,c,h,a,v])}function vV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function yV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(t),!0).forEach(function(i){qbe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function qbe(n,e,t){return(e=Wbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wbe(n){var e=$be(n,"string");return typeof e=="symbol"?e:e+""}function $be(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Xbe(n){return n.dataKey}function Ybe(n,e){return j.isValidElement(n)?j.cloneElement(n,e):typeof n=="function"?j.createElement(n,e):j.createElement(Ade,e)}var bV=[],Kbe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Zbe(n){var e,t,i=tl(n,Kbe),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:l,content:c,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:v,position:b,reverseDirection:_,useTranslate3d:M,wrapperStyle:S,cursor:w,shared:R,trigger:P,defaultIndex:O,portal:k,axisId:B}=i,D=Sa(),F=typeof O=="number"?String(O):O;j.useEffect(()=>{D(W0e({shared:R,trigger:P,axisId:B,active:r,defaultIndex:F}))},[D,R,P,B,r,F]);var I=UA(),L=cH(),H=B0e(R),{activeIndex:q,isActive:W}=(e=sn(Te=>Jye(Te,H,P,F)))!==null&&e!==void 0?e:{},oe=sn(Te=>Qye(Te,H,P,F)),fe=sn(Te=>T7(Te,H,P,F)),te=sn(Te=>Zye(Te,H,P,F)),re=oe,he=wbe(),Me=(t=r??W)!==null&&t!==void 0?t:!1,[Ne,Q]=hfe([re,Me]),de=H==="axis"?fe:void 0;Gbe(H,P,te,de,q,Me);var Ae=k??he;if(Ae==null||I==null||H==null)return null;var We=re??bV;Me||(We=bV),h&&We.length&&(We=Hce(We.filter(Te=>Te.value!=null&&(Te.hide!==!0||i.includeHidden)),v,Xbe));var bt=We.length>0,_e=j.createElement(Ode,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:p,active:Me,coordinate:te,hasPayload:bt,offset:g,position:b,reverseDirection:_,useTranslate3d:M,viewBox:I,wrapperStyle:S,lastBoundingBox:Ne,innerRef:Q,hasPortalFromProps:!!k},Ybe(c,yV(yV({},i),{},{payload:We,label:de,active:Me,activeIndex:q,coordinate:te,accessibilityLayer:L})));return j.createElement(j.Fragment,null,_5.createPortal(_e,Ae),Me&&j.createElement(Sbe,{cursor:w,tooltipEventType:H,coordinate:te,payload:We,index:q}))}function Qbe(n,e,t){return(e=Jbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jbe(n){var e=exe(n,"string");return typeof e=="symbol"?e:e+""}function exe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class txe{constructor(e){Qbe(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function xV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function nxe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(t),!0).forEach(function(i){ixe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ixe(n,e,t){return(e=rxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rxe(n){var e=axe(n,"string");return typeof e=="symbol"?e:e+""}function axe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var sxe={cacheSize:2e3,enableCache:!0},N7=nxe({},sxe),_V=new txe(N7.cacheSize),oxe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},SV="recharts_measurement_span";function lxe(n,e){var t=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",l=e.textTransform||"";return"".concat(n,"|").concat(t,"|").concat(i,"|").concat(r,"|").concat(a,"|").concat(s,"|").concat(l)}var wV=(n,e)=>{try{var t=document.getElementById(SV);t||(t=document.createElement("span"),t.setAttribute("id",SV),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,oxe,e),t.textContent="".concat(n);var i=t.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},zb=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Qx.isSsr)return{width:0,height:0};if(!N7.enableCache)return wV(e,t);var i=lxe(e,t),r=_V.get(i);if(r)return r;var a=wV(e,t);return _V.set(i,a),a},O7;function uxe(n,e,t){return(e=cxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cxe(n){var e=fxe(n,"string");return typeof e=="symbol"?e:e+""}function fxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var EV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hxe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,dxe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pxe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mxe=["cm","mm","pt","pc","in","Q","px"];function gxe(n){return mxe.includes(n)}var Av="NaN";function vxe(n,e){return n*pxe[e]}class Ha{static parse(e){var t,[,i,r]=(t=dxe.exec(e))!==null&&t!==void 0?t:[];return i==null?Ha.NaN:new Ha(parseFloat(i),r??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Bc(e)&&(this.unit=""),t!==""&&!hxe.test(t)&&(this.num=NaN,this.unit=""),gxe(t)&&(this.num=vxe(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Ha(NaN,""):new Ha(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ha(NaN,""):new Ha(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ha(NaN,""):new Ha(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ha(NaN,""):new Ha(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Bc(this.num)}}O7=Ha;uxe(Ha,"NaN",new O7(NaN,""));function D7(n){if(n==null||n.includes(Av))return Av;for(var e=n;e.includes("*")||e.includes("/");){var t,[,i,r,a]=(t=EV.exec(e))!==null&&t!==void 0?t:[],s=Ha.parse(i??""),l=Ha.parse(a??""),c=r==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return Av;e=e.replace(EV,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,p,g,v]=(h=MV.exec(e))!==null&&h!==void 0?h:[],b=Ha.parse(p??""),_=Ha.parse(v??""),M=g==="+"?b.add(_):b.subtract(_);if(M.isNaN())return Av;e=e.replace(MV,M.toString())}return e}var AV=/\(([^()]*)\)/;function yxe(n){for(var e=n,t;(t=AV.exec(e))!=null;){var[,i]=t;e=e.replace(AV,D7(i))}return e}function bxe(n){var e=n.replace(/\s+/g,"");return e=yxe(e),e=D7(e),e}function xxe(n){try{return bxe(n)}catch{return Av}}function gP(n){var e=xxe(n.slice(5,-1));return e===Av?"":e}var _xe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Sxe=["dx","dy","angle","className","breakAll"];function hN(){return hN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hN.apply(null,arguments)}function TV(n,e){if(n==null)return{};var t,i,r=wxe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function wxe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var L7=/[ \f\n\r\t\v\u2028\u2029]+/,U7=n=>{var{children:e,breakAll:t,style:i}=n;try{var r=[];_s(e)||(t?r=e.toString().split(""):r=e.toString().split(L7));var a=r.map(l=>({word:l,width:zb(l,i).width})),s=t?0:zb("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function Exe(n){return n==="start"||n==="middle"||n==="end"||n==="inherit"}var k7=(n,e,t,i)=>n.reduce((r,a)=>{var{word:s,width:l}=a,c=r[r.length-1];if(c&&l!=null&&(e==null||i||c.width+l+t<Number(e)))c.words.push(s),c.width+=l+t;else{var h={words:[s],width:l};r.push(h)}return r},[]),z7=n=>n.reduce((e,t)=>e.width>t.width?e:t),Mxe="",CV=(n,e,t,i,r,a,s,l)=>{var c=n.slice(0,e),h=U7({breakAll:t,style:i,children:c+Mxe});if(!h)return[!1,[]];var p=k7(h.wordsWithComputedWidth,a,s,l),g=p.length>r||z7(p).width>Number(a);return[g,p]},Axe=(n,e,t,i,r)=>{var{maxLines:a,children:s,style:l,breakAll:c}=n,h=Wt(a),p=String(s),g=k7(e,i,t,r);if(!h||r)return g;var v=g.length>a||z7(g).width>Number(i);if(!v)return g;for(var b=0,_=p.length-1,M=0,S;b<=_&&M<=p.length-1;){var w=Math.floor((b+_)/2),R=w-1,[P,O]=CV(p,R,c,l,a,i,t,r),[k]=CV(p,w,c,l,a,i,t,r);if(!P&&!k&&(b=w+1),P&&k&&(_=w-1),!P&&k){S=O;break}M++}return S||g},RV=n=>{var e=_s(n)?[]:n.toString().split(L7);return[{words:e,width:void 0}]},Txe=n=>{var{width:e,scaleToFit:t,children:i,style:r,breakAll:a,maxLines:s}=n;if((e||t)&&!Qx.isSsr){var l,c,h=U7({breakAll:a,children:i,style:r});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;l=p,c=g}else return RV(i);return Axe({breakAll:a,children:i,maxLines:s,style:r},l,c,e,!!t)}return RV(i)},F7="#808080",Cxe={angle:0,breakAll:!1,capHeight:"0.71em",fill:F7,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},_3=j.forwardRef((n,e)=>{var t=tl(n,Cxe),{x:i,y:r,lineHeight:a,capHeight:s,fill:l,scaleToFit:c,textAnchor:h,verticalAnchor:p}=t,g=TV(t,_xe),v=j.useMemo(()=>Txe({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:c,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,c,g.style,g.width]),{dx:b,dy:_,angle:M,className:S,breakAll:w}=g,R=TV(g,Sxe);if(!Vc(i)||!Vc(r)||v.length===0)return null;var P=Number(i)+(Wt(b)?b:0),O=Number(r)+(Wt(_)?_:0);if(!Xn(P)||!Xn(O))return null;var k;switch(p){case"start":k=gP("calc(".concat(s,")"));break;case"middle":k=gP("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:k=gP("calc(".concat(v.length-1," * -").concat(a,")"));break}var B=[],D=v[0];if(c&&D!=null){var F=D.width,{width:I}=g;B.push("scale(".concat(Wt(I)&&Wt(F)?I/F:1,")"))}return M&&B.push("rotate(".concat(M,", ").concat(P,", ").concat(O,")")),B.length&&(R.transform=B.join(" ")),j.createElement("text",hN({},Vl(R),{ref:e,x:P,y:O,className:Yi("recharts-text",S),textAnchor:h,fill:l.includes("url")?F7:l}),v.map((L,H)=>{var q=L.words.join(w?"":" ");return j.createElement("tspan",{x:P,dy:H===0?k:a,key:"".concat(q,"-").concat(H)},q)}))});_3.displayName="Text";function PV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function vc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(t),!0).forEach(function(i){Rxe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Rxe(n,e,t){return(e=Pxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Pxe(n){var e=Ixe(n,"string");return typeof e=="symbol"?e:e+""}function Ixe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Nxe=n=>{var{viewBox:e,position:t,offset:i=0,parentViewBox:r}=n,{x:a,y:s,height:l,upperWidth:c,lowerWidth:h}=bD(e),p=a,g=a+(c-h)/2,v=(p+g)/2,b=(c+h)/2,_=p+c/2,M=l>=0?1:-1,S=M*i,w=M>0?"end":"start",R=M>0?"start":"end",P=c>=0?1:-1,O=P*i,k=P>0?"end":"start",B=P>0?"start":"end",D=r;if(t==="top"){var F={x:p+c/2,y:s-S,horizontalAnchor:"middle",verticalAnchor:w};return D&&(F.height=Math.max(s-D.y,0),F.width=c),F}if(t==="bottom"){var I={x:g+h/2,y:s+l+S,horizontalAnchor:"middle",verticalAnchor:R};return D&&(I.height=Math.max(D.y+D.height-(s+l),0),I.width=h),I}if(t==="left"){var L={x:v-O,y:s+l/2,horizontalAnchor:k,verticalAnchor:"middle"};return D&&(L.width=Math.max(L.x-D.x,0),L.height=l),L}if(t==="right"){var H={x:v+b+O,y:s+l/2,horizontalAnchor:B,verticalAnchor:"middle"};return D&&(H.width=Math.max(D.x+D.width-H.x,0),H.height=l),H}var q=D?{width:b,height:l}:{};return t==="insideLeft"?vc({x:v+O,y:s+l/2,horizontalAnchor:B,verticalAnchor:"middle"},q):t==="insideRight"?vc({x:v+b-O,y:s+l/2,horizontalAnchor:k,verticalAnchor:"middle"},q):t==="insideTop"?vc({x:p+c/2,y:s+S,horizontalAnchor:"middle",verticalAnchor:R},q):t==="insideBottom"?vc({x:g+h/2,y:s+l-S,horizontalAnchor:"middle",verticalAnchor:w},q):t==="insideTopLeft"?vc({x:p+O,y:s+S,horizontalAnchor:B,verticalAnchor:R},q):t==="insideTopRight"?vc({x:p+c-O,y:s+S,horizontalAnchor:k,verticalAnchor:R},q):t==="insideBottomLeft"?vc({x:g+O,y:s+l-S,horizontalAnchor:B,verticalAnchor:w},q):t==="insideBottomRight"?vc({x:g+h-O,y:s+l-S,horizontalAnchor:k,verticalAnchor:w},q):t&&typeof t=="object"&&(Wt(t.x)||Cm(t.x))&&(Wt(t.y)||Cm(t.y))?vc({x:a+kd(t.x,b),y:s+kd(t.y,l),horizontalAnchor:"end",verticalAnchor:"end"},q):vc({x:_,y:s+l/2,horizontalAnchor:"middle",verticalAnchor:"middle"},q)},Oxe=["labelRef"],Dxe=["content"];function IV(n,e){if(n==null)return{};var t,i,r=Lxe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Lxe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function NV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Sb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(t),!0).forEach(function(i){Uxe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Uxe(n,e,t){return(e=kxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kxe(n){var e=zxe(n,"string");return typeof e=="symbol"?e:e+""}function zxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Uf(){return Uf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Uf.apply(null,arguments)}var B7=j.createContext(null),Fxe=n=>{var{x:e,y:t,upperWidth:i,lowerWidth:r,width:a,height:s,children:l}=n,c=j.useMemo(()=>({x:e,y:t,upperWidth:i,lowerWidth:r,width:a,height:s}),[e,t,i,r,a,s]);return j.createElement(B7.Provider,{value:c},l)},V7=()=>{var n=j.useContext(B7),e=UA();return n||(e?bD(e):void 0)},Bxe=j.createContext(null),Vxe=()=>{var n=j.useContext(Bxe),e=sn(vG);return n||e},jxe=n=>{var{value:e,formatter:t}=n,i=_s(n.children)?e:n.children;return typeof t=="function"?t(i):i},S3=n=>n!=null&&typeof n=="function",Hxe=(n,e)=>{var t=Ul(e-n),i=Math.min(Math.abs(e-n),360);return t*i},Gxe=(n,e,t,i,r)=>{var{offset:a,className:s}=n,{cx:l,cy:c,innerRadius:h,outerRadius:p,startAngle:g,endAngle:v,clockWise:b}=r,_=(h+p)/2,M=Hxe(g,v),S=M>=0?1:-1,w,R;switch(e){case"insideStart":w=g+S*a,R=b;break;case"insideEnd":w=v-S*a,R=!b;break;case"end":w=v+S*a,R=b;break;default:throw new Error("Unsupported position ".concat(e))}R=M<=0?R:!R;var P=$a(l,c,_,w),O=$a(l,c,_,w+(R?1:-1)*359),k="M".concat(P.x,",").concat(P.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(R?0:1,`,
    `).concat(O.x,",").concat(O.y),B=_s(n.id)?px("recharts-radial-line-"):n.id;return j.createElement("text",Uf({},i,{dominantBaseline:"central",className:Yi("recharts-radial-bar-label",s)}),j.createElement("defs",null,j.createElement("path",{id:B,d:k})),j.createElement("textPath",{xlinkHref:"#".concat(B)},t))},qxe=(n,e,t)=>{var{cx:i,cy:r,innerRadius:a,outerRadius:s,startAngle:l,endAngle:c}=n,h=(l+c)/2;if(t==="outside"){var{x:p,y:g}=$a(i,r,s+e,h);return{x:p,y:g,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var v=(a+s)/2,{x:b,y:_}=$a(i,r,v,h);return{x:b,y:_,textAnchor:"middle",verticalAnchor:"middle"}},ow=n=>n!=null&&"cx"in n&&Wt(n.cx),Wxe={angle:0,offset:5,zIndex:Gs.label,position:"middle",textBreakAll:!1};function $xe(n){if(!ow(n))return n;var{cx:e,cy:t,outerRadius:i}=n,r=i*2;return{x:e-i,y:t-i,width:r,upperWidth:r,lowerWidth:r,height:r}}function ud(n){var e=tl(n,Wxe),{viewBox:t,parentViewBox:i,position:r,value:a,children:s,content:l,className:c="",textBreakAll:h,labelRef:p}=e,g=Vxe(),v=V7(),b=r==="center"?v:g??v,_,M,S;t==null?_=b:ow(t)?_=t:_=bD(t);var w=$xe(_);if(!_||_s(a)&&_s(s)&&!j.isValidElement(l)&&typeof l!="function")return null;var R=Sb(Sb({},e),{},{viewBox:_});if(j.isValidElement(l)){var{labelRef:P}=R,O=IV(R,Oxe);return j.cloneElement(l,O)}if(typeof l=="function"){var{content:k}=R,B=IV(R,Dxe);if(M=j.createElement(l,B),j.isValidElement(M))return M}else M=jxe(e);var D=Vl(e);if(ow(_)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Gxe(e,r,M,D,_);S=qxe(_,e.offset,e.position)}else{if(!w)return null;var F=Nxe({viewBox:w,position:r,offset:e.offset,parentViewBox:ow(i)?void 0:i});S=Sb(Sb({x:F.x,y:F.y,textAnchor:F.horizontalAnchor,verticalAnchor:F.verticalAnchor},F.width!==void 0?{width:F.width}:{}),F.height!==void 0?{height:F.height}:{})}return j.createElement(oh,{zIndex:e.zIndex},j.createElement(_3,Uf({ref:p,className:Yi("recharts-label",c)},D,S,{textAnchor:Exe(D.textAnchor)?D.textAnchor:S.textAnchor,breakAll:h}),M))}ud.displayName="Label";var Xxe=(n,e,t)=>{if(!n)return null;var i={viewBox:e,labelRef:t};return n===!0?j.createElement(ud,Uf({key:"label-implicit"},i)):Vc(n)?j.createElement(ud,Uf({key:"label-implicit",value:n},i)):j.isValidElement(n)?n.type===ud?j.cloneElement(n,Sb({key:"label-implicit"},i)):j.createElement(ud,Uf({key:"label-implicit",content:n},i)):S3(n)?j.createElement(ud,Uf({key:"label-implicit",content:n},i)):n&&typeof n=="object"?j.createElement(ud,Uf({},n,{key:"label-implicit"},i)):null};function Yxe(n){var{label:e,labelRef:t}=n,i=V7();return Xxe(e,i,t)||null}var vP={},yP={},OV;function Kxe(){return OV||(OV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}n.last=e})(yP)),yP}var bP={},DV;function Zxe(){return DV||(DV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}n.toArray=e})(bP)),bP}var LV;function Qxe(){return LV||(LV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Kxe(),t=Zxe(),i=uD();function r(a){if(i.isArrayLike(a))return e.last(t.toArray(a))}n.last=r})(vP)),vP}var xP,UV;function Jxe(){return UV||(UV=1,xP=Qxe().last),xP}var e_e=Jxe();const t_e=Pu(e_e);var n_e=["valueAccessor"],i_e=["dataKey","clockWise","id","textBreakAll","zIndex"];function lM(){return lM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lM.apply(null,arguments)}function kV(n,e){if(n==null)return{};var t,i,r=r_e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function r_e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var a_e=n=>Array.isArray(n.value)?t_e(n.value):n.value,j7=j.createContext(void 0),s_e=j7.Provider,H7=j.createContext(void 0);H7.Provider;function o_e(){return j.useContext(j7)}function l_e(){return j.useContext(H7)}function lw(n){var{valueAccessor:e=a_e}=n,t=kV(n,n_e),{dataKey:i,clockWise:r,id:a,textBreakAll:s,zIndex:l}=t,c=kV(t,i_e),h=o_e(),p=l_e(),g=h||p;return!g||!g.length?null:j.createElement(oh,{zIndex:l??Gs.label},j.createElement(Fc,{className:"recharts-label-list"},g.map((v,b)=>{var _,M=_s(i)?e(v,b):Ya(v.payload,i),S=_s(a)?{}:{id:"".concat(a,"-").concat(b)};return j.createElement(ud,lM({key:"label-".concat(b)},Vl(v),c,S,{fill:(_=t.fill)!==null&&_!==void 0?_:v.fill,parentViewBox:v.parentViewBox,value:M,textBreakAll:s,viewBox:v.viewBox,index:b,zIndex:0}))})))}lw.displayName="LabelList";function u_e(n){var{label:e}=n;return e?e===!0?j.createElement(lw,{key:"labelList-implicit"}):j.isValidElement(e)||S3(e)?j.createElement(lw,{key:"labelList-implicit",content:e}):typeof e=="object"?j.createElement(lw,lM({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function dN(){return dN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dN.apply(null,arguments)}var G7=n=>{var{cx:e,cy:t,r:i,className:r}=n,a=Yi("recharts-dot",r);return Wt(e)&&Wt(t)&&Wt(i)?j.createElement("circle",dN({},Cu(n),lD(n),{className:a,cx:e,cy:t,r:i})):null},c_e={radiusAxis:{},angleAxis:{}},q7=Co({name:"polarAxis",initialState:c_e,reducers:{addRadiusAxis(n,e){n.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(n,e){delete n.radiusAxis[e.payload.id]},addAngleAxis(n,e){n.angleAxis[e.payload.id]=e.payload},removeAngleAxis(n,e){delete n.angleAxis[e.payload.id]}}}),{addRadiusAxis:oAe,removeRadiusAxis:lAe,addAngleAxis:uAe,removeAngleAxis:cAe}=q7.actions,f_e=q7.reducer;function h_e(n){return n&&typeof n=="object"&&"className"in n&&typeof n.className=="string"?n.className:""}var W7=n=>n&&typeof n=="object"&&"clipDot"in n?!!n.clipDot:!0;function d_e(n){var{tooltipEntrySettings:e}=n,t=Sa(),i=Ro(),r=j.useRef(null);return j.useLayoutEffect(()=>{i||(r.current===null?t(H0e(e)):r.current!==e&&t(G0e({prev:r.current,next:e})),r.current=e)},[e,t,i]),j.useLayoutEffect(()=>()=>{r.current&&(t(q0e(r.current)),r.current=null)},[t]),null}function p_e(n){var{legendPayload:e}=n,t=Sa(),i=Ro(),r=j.useRef(null);return j.useLayoutEffect(()=>{i||(r.current===null?t(yde(e)):r.current!==e&&t(bde({prev:r.current,next:e})),r.current=e)},[t,i,e]),j.useLayoutEffect(()=>()=>{r.current&&(t(xde(r.current)),r.current=null)},[t]),null}var _P,m_e=()=>{var[n]=j.useState(()=>px("uid-"));return n},g_e=(_P=y5.useId)!==null&&_P!==void 0?_P:m_e;function v_e(n,e){var t=g_e();return e||(n?"".concat(n,"-").concat(t):t)}var y_e=j.createContext(void 0),b_e=n=>{var{id:e,type:t,children:i}=n,r=v_e("recharts-".concat(t),e);return j.createElement(y_e.Provider,{value:r},i(r))},x_e={cartesianItems:[],polarItems:[]},$7=Co({name:"graphicalItems",initialState:x_e,reducers:{addCartesianGraphicalItem:{reducer(n,e){n.cartesianItems.push(e.payload)},prepare:nr()},replaceCartesianGraphicalItem:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Tu(n).cartesianItems.indexOf(t);r>-1&&(n.cartesianItems[r]=i)},prepare:nr()},removeCartesianGraphicalItem:{reducer(n,e){var t=Tu(n).cartesianItems.indexOf(e.payload);t>-1&&n.cartesianItems.splice(t,1)},prepare:nr()},addPolarGraphicalItem:{reducer(n,e){n.polarItems.push(e.payload)},prepare:nr()},removePolarGraphicalItem:{reducer(n,e){var t=Tu(n).polarItems.indexOf(e.payload);t>-1&&n.polarItems.splice(t,1)},prepare:nr()}}}),{addCartesianGraphicalItem:__e,replaceCartesianGraphicalItem:S_e,removeCartesianGraphicalItem:w_e,addPolarGraphicalItem:fAe,removePolarGraphicalItem:hAe}=$7.actions,E_e=$7.reducer,M_e=n=>{var e=Sa(),t=j.useRef(null);return j.useLayoutEffect(()=>{t.current===null?e(__e(n)):t.current!==n&&e(S_e({prev:t.current,next:n})),t.current=n},[e,n]),j.useLayoutEffect(()=>()=>{t.current&&(e(w_e(t.current)),t.current=null)},[e]),null},A_e=j.memo(M_e),T_e=["points"];function zV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function SP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zV(Object(t),!0).forEach(function(i){C_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function C_e(n,e,t){return(e=R_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function R_e(n){var e=P_e(n,"string");return typeof e=="symbol"?e:e+""}function P_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function uM(){return uM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},uM.apply(null,arguments)}function I_e(n,e){if(n==null)return{};var t,i,r=N_e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function N_e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function O_e(n){var{option:e,dotProps:t,className:i}=n;if(j.isValidElement(e))return j.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Yi(i,typeof e!="boolean"?e.className:""),a=t??{},{points:s}=a,l=I_e(a,T_e);return j.createElement(G7,uM({},l,{className:r}))}function D_e(n,e){return n==null?!1:e?!0:n.length===1}function L_e(n){var{points:e,dot:t,className:i,dotClassName:r,dataKey:a,baseProps:s,needClip:l,clipPathId:c,zIndex:h=Gs.scatter}=n;if(!D_e(e,t))return null;var p=W7(t),g=Uue(t),v=e.map((_,M)=>{var S,w,R=SP(SP(SP({r:3},s),g),{},{index:M,cx:(S=_.x)!==null&&S!==void 0?S:void 0,cy:(w=_.y)!==null&&w!==void 0?w:void 0,dataKey:a,value:_.value,payload:_.payload,points:e});return j.createElement(O_e,{key:"dot-".concat(M),option:t,dotProps:R,className:r})}),b={};return l&&c!=null&&(b.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(c,")")),j.createElement(oh,{zIndex:h},j.createElement(Fc,uM({className:i},b),v))}function FV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function BV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FV(Object(t),!0).forEach(function(i){U_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):FV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function U_e(n,e,t){return(e=k_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function k_e(n){var e=z_e(n,"string");return typeof e=="symbol"?e:e+""}function z_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var X7=0,F_e={xAxis:{},yAxis:{},zAxis:{}},Y7=Co({name:"cartesianAxis",initialState:F_e,reducers:{addXAxis:{reducer(n,e){n.xAxis[e.payload.id]=e.payload},prepare:nr()},replaceXAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.xAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.xAxis[t.id],n.xAxis[i.id]=i)},prepare:nr()},removeXAxis:{reducer(n,e){delete n.xAxis[e.payload.id]},prepare:nr()},addYAxis:{reducer(n,e){n.yAxis[e.payload.id]=e.payload},prepare:nr()},replaceYAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.yAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.yAxis[t.id],n.yAxis[i.id]=i)},prepare:nr()},removeYAxis:{reducer(n,e){delete n.yAxis[e.payload.id]},prepare:nr()},addZAxis:{reducer(n,e){n.zAxis[e.payload.id]=e.payload},prepare:nr()},replaceZAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.zAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.zAxis[t.id],n.zAxis[i.id]=i)},prepare:nr()},removeZAxis:{reducer(n,e){delete n.zAxis[e.payload.id]},prepare:nr()},updateYAxisWidth(n,e){var{id:t,width:i}=e.payload,r=n.yAxis[t];if(r){var a,s=r.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==r.width&&Math.abs(i-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var l=[...s,i].slice(-3);n.yAxis[t]=BV(BV({},r),{},{width:i,widthHistory:l})}}}}),{addXAxis:B_e,replaceXAxis:V_e,removeXAxis:j_e,addYAxis:H_e,replaceYAxis:G_e,removeYAxis:q_e,addZAxis:dAe,replaceZAxis:pAe,removeZAxis:mAe,updateYAxisWidth:W_e}=Y7.actions,$_e=Y7.reducer,X_e=qe([Za],n=>({top:n.top,bottom:n.bottom,left:n.left,right:n.right})),Y_e=qe([X_e,eh,th],(n,e,t)=>{if(!(!n||e==null||t==null))return{x:n.left,y:n.top,width:Math.max(0,e-n.left-n.right),height:Math.max(0,t-n.top-n.bottom)}}),w3=()=>sn(Y_e),K_e=()=>sn(kye);function VV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function wP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VV(Object(t),!0).forEach(function(i){Z_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Z_e(n,e,t){return(e=Q_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q_e(n){var e=J_e(n,"string");return typeof e=="symbol"?e:e+""}function J_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var eSe=n=>{var{point:e,childIndex:t,mainColor:i,activeDot:r,dataKey:a,clipPath:s}=n;if(r===!1||e.x==null||e.y==null)return null;var l={index:t,dataKey:a,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=wP(wP(wP({},l),yA(r)),lD(r)),h;return j.isValidElement(r)?h=j.cloneElement(r,c):typeof r=="function"?h=r(c):h=j.createElement(G7,c),j.createElement(Fc,{className:"recharts-active-dot",clipPath:s},h)};function jV(n){var{points:e,mainColor:t,activeDot:i,itemDataKey:r,clipPath:a,zIndex:s=Gs.activeDot}=n,l=sn(Tx),c=K_e();if(e==null||c==null)return null;var h=e.find(p=>c.includes(p.payload));return _s(h)?null:j.createElement(oh,{zIndex:s},j.createElement(eSe,{point:h,childIndex:Number(l),mainColor:t,dataKey:r,activeDot:i,clipPath:a}))}var tSe=n=>{var{chartData:e}=n,t=Sa(),i=Ro();return j.useEffect(()=>i?()=>{}:(t(mV(e)),()=>{t(mV(void 0))}),[e,t,i]),null},HV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},K7=Co({name:"brush",initialState:HV,reducers:{setBrushSettings(n,e){return e.payload==null?HV:e.payload}}}),{setBrushSettings:gAe}=K7.actions,nSe=K7.reducer;function iSe(n){return(n%180+180)%180}var rSe=function(e){var{width:t,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=iSe(r),s=a*Math.PI/180,l=Math.atan(i/t),c=s>l&&s<Math.PI-l?i/Math.sin(s):t/Math.cos(s);return Math.abs(c)},aSe={dots:[],areas:[],lines:[]},Z7=Co({name:"referenceElements",initialState:aSe,reducers:{addDot:(n,e)=>{n.dots.push(e.payload)},removeDot:(n,e)=>{var t=Tu(n).dots.findIndex(i=>i===e.payload);t!==-1&&n.dots.splice(t,1)},addArea:(n,e)=>{n.areas.push(e.payload)},removeArea:(n,e)=>{var t=Tu(n).areas.findIndex(i=>i===e.payload);t!==-1&&n.areas.splice(t,1)},addLine:(n,e)=>{n.lines.push(e.payload)},removeLine:(n,e)=>{var t=Tu(n).lines.findIndex(i=>i===e.payload);t!==-1&&n.lines.splice(t,1)}}}),{addDot:vAe,removeDot:yAe,addArea:bAe,removeArea:xAe,addLine:_Ae,removeLine:SAe}=Z7.actions,sSe=Z7.reducer,oSe=j.createContext(void 0),lSe=n=>{var{children:e}=n,[t]=j.useState("".concat(px("recharts"),"-clip")),i=w3();if(i==null)return null;var{x:r,y:a,width:s,height:l}=i;return j.createElement(oSe.Provider,{value:t},j.createElement("defs",null,j.createElement("clipPath",{id:t},j.createElement("rect",{x:r,y:a,height:l,width:s}))),e)};function Q7(n,e){if(e<1)return[];if(e===1)return n;for(var t=[],i=0;i<n.length;i+=e){var r=n[i];r!==void 0&&t.push(r)}return t}function uSe(n,e,t){var i={width:n.width+e.width,height:n.height+e.height};return rSe(i,t)}function cSe(n,e,t){var i=t==="width",{x:r,y:a,width:s,height:l}=n;return e===1?{start:i?r:a,end:i?r+s:a+l}:{start:i?r+s:a+l,end:i?r:a}}function Rx(n,e,t,i,r){if(n*e<n*i||n*e>n*r)return!1;var a=t();return n*(e-n*a/2-i)>=0&&n*(e+n*a/2-r)<=0}function fSe(n,e){return Q7(n,e+1)}function hSe(n,e,t,i,r){for(var a=(i||[]).slice(),{start:s,end:l}=e,c=0,h=1,p=s,g=function(){var _=i==null?void 0:i[c];if(_===void 0)return{v:Q7(i,h)};var M=c,S,w=()=>(S===void 0&&(S=t(_,M)),S),R=_.coordinate,P=c===0||Rx(n,R,w,p,l);P||(c=0,p=s,h+=1),P&&(p=R+n*(w()/2+r),c+=h)},v;h<=a.length;)if(v=g(),v)return v.v;return[]}function dSe(n,e,t,i,r){var a=(i||[]).slice(),s=a.length;if(s===0)return[];for(var{start:l,end:c}=e,h=1;h<=s;h++){for(var p=(s-1)%h,g=l,v=!0,b=function(){var O=i[M];if(O==null)return 0;var k=M,B,D=()=>(B===void 0&&(B=t(O,k)),B),F=O.coordinate,I=M===p||Rx(n,F,D,g,c);if(!I)return v=!1,1;I&&(g=F+n*(D()/2+r))},_,M=p;M<s&&(_=b(),!(_!==0&&_===1));M+=h);if(v){for(var S=[],w=p;w<s;w+=h){var R=i[w];R!=null&&S.push(R)}return S}}return[]}function GV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ms(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GV(Object(t),!0).forEach(function(i){pSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):GV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function pSe(n,e,t){return(e=mSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mSe(n){var e=gSe(n,"string");return typeof e=="symbol"?e:e+""}function gSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vSe(n,e,t,i,r){for(var a=(i||[]).slice(),s=a.length,{start:l}=e,{end:c}=e,h=function(v){var b=a[v];if(b==null)return 1;var _=b,M,S=()=>(M===void 0&&(M=t(b,v)),M);if(v===s-1){var w=n*(_.coordinate+n*S()/2-c);a[v]=_=ms(ms({},_),{},{tickCoord:w>0?_.coordinate-w*n:_.coordinate})}else a[v]=_=ms(ms({},_),{},{tickCoord:_.coordinate});if(_.tickCoord!=null){var R=Rx(n,_.tickCoord,S,l,c);R&&(c=_.tickCoord-n*(S()/2+r),a[v]=ms(ms({},_),{},{isShow:!0}))}},p=s-1;p>=0;p--)h(p);return a}function ySe(n,e,t,i,r,a){var s=(i||[]).slice(),l=s.length,{start:c,end:h}=e;if(a){var p=i[l-1];if(p!=null){var g=t(p,l-1),v=n*(p.coordinate+n*g/2-h);if(s[l-1]=p=ms(ms({},p),{},{tickCoord:v>0?p.coordinate-v*n:p.coordinate}),p.tickCoord!=null){var b=Rx(n,p.tickCoord,()=>g,c,h);b&&(h=p.tickCoord-n*(g/2+r),s[l-1]=ms(ms({},p),{},{isShow:!0}))}}}for(var _=a?l-1:l,M=function(R){var P=s[R];if(P==null)return 1;var O=P,k,B=()=>(k===void 0&&(k=t(P,R)),k);if(R===0){var D=n*(O.coordinate-n*B()/2-c);s[R]=O=ms(ms({},O),{},{tickCoord:D<0?O.coordinate-D*n:O.coordinate})}else s[R]=O=ms(ms({},O),{},{tickCoord:O.coordinate});if(O.tickCoord!=null){var F=Rx(n,O.tickCoord,B,c,h);F&&(c=O.tickCoord+n*(B()/2+r),s[R]=ms(ms({},O),{},{isShow:!0}))}},S=0;S<_;S++)M(S);return s}function E3(n,e,t){var{tick:i,ticks:r,viewBox:a,minTickGap:s,orientation:l,interval:c,tickFormatter:h,unit:p,angle:g}=n;if(!r||!r.length||!i)return[];if(Wt(c)||Qx.isSsr){var v;return(v=fSe(r,Wt(c)?c:0))!==null&&v!==void 0?v:[]}var b=[],_=l==="top"||l==="bottom"?"width":"height",M=p&&_==="width"?zb(p,{fontSize:e,letterSpacing:t}):{width:0,height:0},S=(k,B)=>{var D=typeof h=="function"?h(k.value,B):k.value;return _==="width"?uSe(zb(D,{fontSize:e,letterSpacing:t}),M,g):zb(D,{fontSize:e,letterSpacing:t})[_]},w=r[0],R=r[1],P=r.length>=2&&w!=null&&R!=null?Ul(R.coordinate-w.coordinate):1,O=cSe(a,P,_);return c==="equidistantPreserveStart"?hSe(P,O,S,r,s):c==="equidistantPreserveEnd"?dSe(P,O,S,r,s):(c==="preserveStart"||c==="preserveStartEnd"?b=ySe(P,O,S,r,s,c==="preserveStartEnd"):b=vSe(P,O,S,r,s),b.filter(k=>k.isShow))}var bSe=n=>{var{ticks:e,label:t,labelGapWithTick:i=5,tickSize:r=0,tickMargin:a=0}=n,s=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>s&&(s=g.width)}});var l=t?t.getBoundingClientRect().width:0,c=r+a,h=s+c+l+(t?i:0);return Math.round(h)}return 0},xSe=["axisLine","width","height","className","hide","ticks","axisType"];function _Se(n,e){if(n==null)return{};var t,i,r=SSe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function SSe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Om(){return Om=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Om.apply(null,arguments)}function qV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Sr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qV(Object(t),!0).forEach(function(i){wSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function wSe(n,e,t){return(e=ESe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ESe(n){var e=MSe(n,"string");return typeof e=="symbol"?e:e+""}function MSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var jf={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Gs.axis};function ASe(n){var{x:e,y:t,width:i,height:r,orientation:a,mirror:s,axisLine:l,otherSvgProps:c}=n;if(!l)return null;var h=Sr(Sr(Sr({},c),Cu(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var p=+(a==="top"&&!s||a==="bottom"&&s);h=Sr(Sr({},h),{},{x1:e,y1:t+p*r,x2:e+i,y2:t+p*r})}else{var g=+(a==="left"&&!s||a==="right"&&s);h=Sr(Sr({},h),{},{x1:e+g*i,y1:t,x2:e+g*i,y2:t+r})}return j.createElement("line",Om({},h,{className:Yi("recharts-cartesian-axis-line",_A(l,"className"))}))}function TSe(n,e,t,i,r,a,s,l,c){var h,p,g,v,b,_,M=l?-1:1,S=n.tickSize||s,w=Wt(n.tickCoord)?n.tickCoord:n.coordinate;switch(a){case"top":h=p=n.coordinate,v=t+ +!l*r,g=v-M*S,_=g-M*c,b=w;break;case"left":g=v=n.coordinate,p=e+ +!l*i,h=p-M*S,b=h-M*c,_=w;break;case"right":g=v=n.coordinate,p=e+ +l*i,h=p+M*S,b=h+M*c,_=w;break;default:h=p=n.coordinate,v=t+ +l*r,g=v+M*S,_=g+M*c,b=w;break}return{line:{x1:h,y1:g,x2:p,y2:v},tick:{x:b,y:_}}}function CSe(n,e){switch(n){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function RSe(n,e){switch(n){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function PSe(n){var{option:e,tickProps:t,value:i}=n,r,a=Yi(t.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(e))r=j.cloneElement(e,Sr(Sr({},t),{},{className:a}));else if(typeof e=="function")r=e(Sr(Sr({},t),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Yi(s,h_e(e))),r=j.createElement(_3,Om({},t,{className:s}),i)}return r}var ISe=j.forwardRef((n,e)=>{var{ticks:t=[],tick:i,tickLine:r,stroke:a,tickFormatter:s,unit:l,padding:c,tickTextProps:h,orientation:p,mirror:g,x:v,y:b,width:_,height:M,tickSize:S,tickMargin:w,fontSize:R,letterSpacing:P,getTicksConfig:O,events:k,axisType:B}=n,D=E3(Sr(Sr({},O),{},{ticks:t}),R,P),F=CSe(p,g),I=RSe(p,g),L=Cu(O),H=yA(i),q={};typeof r=="object"&&(q=r);var W=Sr(Sr({},L),{},{fill:"none"},q),oe=D.map(re=>Sr({entry:re},TSe(re,v,b,_,M,p,S,g,w))),fe=oe.map(re=>{var{entry:he,line:Me}=re;return j.createElement(Fc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(he.value,"-").concat(he.coordinate,"-").concat(he.tickCoord)},r&&j.createElement("line",Om({},W,Me,{className:Yi("recharts-cartesian-axis-tick-line",_A(r,"className"))})))}),te=oe.map((re,he)=>{var Me,Ne,{entry:Q,tick:de}=re,Ae=Sr(Sr(Sr(Sr({verticalAnchor:I},L),{},{textAnchor:F,stroke:"none",fill:a},de),{},{index:he,payload:Q,visibleTicksCount:D.length,tickFormatter:s,padding:c},h),{},{angle:(Me=(Ne=h==null?void 0:h.angle)!==null&&Ne!==void 0?Ne:L.angle)!==null&&Me!==void 0?Me:0}),We=Sr(Sr({},Ae),H);return j.createElement(Fc,Om({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},yce(k,Q,he)),i&&j.createElement(PSe,{option:i,tickProps:We,value:"".concat(typeof s=="function"?s(Q.value,he):Q.value).concat(l||"")}))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(B,"-ticks")},te.length>0&&j.createElement(oh,{zIndex:Gs.label},j.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(B,"-tick-labels"),ref:e},te)),fe.length>0&&j.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(B,"-tick-lines")},fe))}),NSe=j.forwardRef((n,e)=>{var{axisLine:t,width:i,height:r,className:a,hide:s,ticks:l,axisType:c}=n,h=_Se(n,xSe),[p,g]=j.useState(""),[v,b]=j.useState(""),_=j.useRef(null);j.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return bSe({ticks:_.current,label:(S=n.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:n.tickSize,tickMargin:n.tickMargin})}}));var M=j.useCallback(S=>{if(S){var w=S.getElementsByClassName("recharts-cartesian-axis-tick-value");_.current=w;var R=w[0];if(R){var P=window.getComputedStyle(R),O=P.fontSize,k=P.letterSpacing;(O!==p||k!==v)&&(g(O),b(k))}}},[p,v]);return s||i!=null&&i<=0||r!=null&&r<=0?null:j.createElement(oh,{zIndex:n.zIndex},j.createElement(Fc,{className:Yi("recharts-cartesian-axis",a)},j.createElement(ASe,{x:n.x,y:n.y,width:i,height:r,orientation:n.orientation,mirror:n.mirror,axisLine:t,otherSvgProps:Cu(n)}),j.createElement(ISe,{ref:M,axisType:c,events:h,fontSize:p,getTicksConfig:n,height:n.height,letterSpacing:v,mirror:n.mirror,orientation:n.orientation,padding:n.padding,stroke:n.stroke,tick:n.tick,tickFormatter:n.tickFormatter,tickLine:n.tickLine,tickMargin:n.tickMargin,tickSize:n.tickSize,tickTextProps:n.tickTextProps,ticks:l,unit:n.unit,width:n.width,x:n.x,y:n.y}),j.createElement(Fxe,{x:n.x,y:n.y,width:n.width,height:n.height,lowerWidth:n.width,upperWidth:n.width},j.createElement(Yxe,{label:n.label,labelRef:n.labelRef}),n.children)))}),M3=j.forwardRef((n,e)=>{var t=tl(n,jf);return j.createElement(NSe,Om({},t,{ref:e}))});M3.displayName="CartesianAxis";var OSe=["x1","y1","x2","y2","key"],DSe=["offset"],LSe=["xAxisId","yAxisId"],USe=["xAxisId","yAxisId"];function WV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ys(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WV(Object(t),!0).forEach(function(i){kSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function kSe(n,e,t){return(e=zSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zSe(n){var e=FSe(n,"string");return typeof e=="symbol"?e:e+""}function FSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cm(){return cm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},cm.apply(null,arguments)}function cM(n,e){if(n==null)return{};var t,i,r=BSe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function BSe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var VSe=n=>{var{fill:e}=n;if(!e||e==="none")return null;var{fillOpacity:t,x:i,y:r,width:a,height:s,ry:l}=n;return j.createElement("rect",{x:i,y:r,ry:l,width:a,height:s,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function J7(n){var{option:e,lineItemProps:t}=n,i;if(j.isValidElement(e))i=j.cloneElement(e,t);else if(typeof e=="function")i=e(t);else{var r,{x1:a,y1:s,x2:l,y2:c,key:h}=t,p=cM(t,OSe),g=(r=Cu(p))!==null&&r!==void 0?r:{},{offset:v}=g,b=cM(g,DSe);i=j.createElement("line",cm({},b,{x1:a,y1:s,x2:l,y2:c,fill:"none",key:h}))}return i}function jSe(n){var{x:e,width:t,horizontal:i=!0,horizontalPoints:r}=n;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=n,l=cM(n,LSe),c=r.map((h,p)=>{var g=ys(ys({},l),{},{x1:e,y1:h,x2:e+t,y2:h,key:"line-".concat(p),index:p});return j.createElement(J7,{key:"line-".concat(p),option:i,lineItemProps:g})});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function HSe(n){var{y:e,height:t,vertical:i=!0,verticalPoints:r}=n;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=n,l=cM(n,USe),c=r.map((h,p)=>{var g=ys(ys({},l),{},{x1:h,y1:e,x2:h,y2:e+t,key:"line-".concat(p),index:p});return j.createElement(J7,{option:i,lineItemProps:g,key:"line-".concat(p)})});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function GSe(n){var{horizontalFill:e,fillOpacity:t,x:i,y:r,width:a,height:s,horizontalPoints:l,horizontal:c=!0}=n;if(!c||!e||!e.length||l==null)return null;var h=l.map(g=>Math.round(g+r-r)).sort((g,v)=>g-v);r!==h[0]&&h.unshift(0);var p=h.map((g,v)=>{var b=h[v+1],_=b==null,M=_?r+s-g:b-g;if(M<=0)return null;var S=v%e.length;return j.createElement("rect",{key:"react-".concat(v),y:g,x:i,height:M,width:a,stroke:"none",fill:e[S],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function qSe(n){var{vertical:e=!0,verticalFill:t,fillOpacity:i,x:r,y:a,width:s,height:l,verticalPoints:c}=n;if(!e||!t||!t.length)return null;var h=c.map(g=>Math.round(g+r-r)).sort((g,v)=>g-v);r!==h[0]&&h.unshift(0);var p=h.map((g,v)=>{var b=h[v+1],_=b==null,M=_?r+s-g:b-g;if(M<=0)return null;var S=v%t.length;return j.createElement("rect",{key:"react-".concat(v),x:g,y:a,width:M,height:l,stroke:"none",fill:t[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var WSe=(n,e)=>{var{xAxis:t,width:i,height:r,offset:a}=n;return q9(E3(ys(ys(ys({},jf),t),{},{ticks:W9(t),viewBox:{x:0,y:0,width:i,height:r}})),a.left,a.left+a.width,e)},$Se=(n,e)=>{var{yAxis:t,width:i,height:r,offset:a}=n;return q9(E3(ys(ys(ys({},jf),t),{},{ticks:W9(t),viewBox:{x:0,y:0,width:i,height:r}})),a.top,a.top+a.height,e)},XSe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Gs.grid};function eq(n){var e=eH(),t=tH(),i=J9(),r=ys(ys({},tl(n,XSe)),{},{x:Wt(n.x)?n.x:i.left,y:Wt(n.y)?n.y:i.top,width:Wt(n.width)?n.width:i.width,height:Wt(n.height)?n.height:i.height}),{xAxisId:a,yAxisId:s,x:l,y:c,width:h,height:p,syncWithTicks:g,horizontalValues:v,verticalValues:b}=r,_=Ro(),M=sn(I=>iV(I,"xAxis",a,_)),S=sn(I=>iV(I,"yAxis",s,_));if(!jc(h)||!jc(p)||!Wt(l)||!Wt(c))return null;var w=r.verticalCoordinatesGenerator||WSe,R=r.horizontalCoordinatesGenerator||$Se,{horizontalPoints:P,verticalPoints:O}=r;if((!P||!P.length)&&typeof R=="function"){var k=v&&v.length,B=R({yAxis:S?ys(ys({},S),{},{ticks:k?v:S.ticks}):void 0,width:e??h,height:t??p,offset:i},k?!0:g);zE(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(P=B)}if((!O||!O.length)&&typeof w=="function"){var D=b&&b.length,F=w({xAxis:M?ys(ys({},M),{},{ticks:D?b:M.ticks}):void 0,width:e??h,height:t??p,offset:i},D?!0:g);zE(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(O=F)}return j.createElement(oh,{zIndex:r.zIndex},j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(VSe,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),j.createElement(GSe,cm({},r,{horizontalPoints:P})),j.createElement(qSe,cm({},r,{verticalPoints:O})),j.createElement(jSe,cm({},r,{offset:i,horizontalPoints:P,xAxis:M,yAxis:S})),j.createElement(HSe,cm({},r,{offset:i,verticalPoints:O,xAxis:M,yAxis:S}))))}eq.displayName="CartesianGrid";var YSe={},tq=Co({name:"errorBars",initialState:YSe,reducers:{addErrorBar:(n,e)=>{var{itemId:t,errorBar:i}=e.payload;n[t]||(n[t]=[]),n[t].push(i)},replaceErrorBar:(n,e)=>{var{itemId:t,prev:i,next:r}=e.payload;n[t]&&(n[t]=n[t].map(a=>a.dataKey===i.dataKey&&a.direction===i.direction?r:a))},removeErrorBar:(n,e)=>{var{itemId:t,errorBar:i}=e.payload;n[t]&&(n[t]=n[t].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:wAe,replaceErrorBar:EAe,removeErrorBar:MAe}=tq.actions,KSe=tq.reducer;function nq(n,e){var t,i,r=sn(h=>rh(h,n)),a=sn(h=>ah(h,e)),s=(t=r==null?void 0:r.allowDataOverflow)!==null&&t!==void 0?t:va.allowDataOverflow,l=(i=a==null?void 0:a.allowDataOverflow)!==null&&i!==void 0?i:ya.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function ZSe(n){var{xAxisId:e,yAxisId:t,clipPathId:i}=n,r=w3(),{needClipX:a,needClipY:s,needClip:l}=nq(e,t);if(!l||!r)return null;var{x:c,y:h,width:p,height:g}=r;return j.createElement("clipPath",{id:"clipPath-".concat(i)},j.createElement("rect",{x:a?c:c-p/2,y:s?h:h-g/2,width:a?p:p*2,height:s?g:g*2}))}function QSe(n){var e=yA(n),t=3,i=2;if(e!=null){var{r,strokeWidth:a}=e,s=Number(r),l=Number(a);return(Number.isNaN(s)||s<0)&&(s=t),(Number.isNaN(l)||l<0)&&(l=i),{r:s,strokeWidth:l}}return{r:t,strokeWidth:i}}var EP={exports:{}},MP={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $V;function JSe(){if($V)return MP;$V=1;var n=s0();function e(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,r=n.useRef,a=n.useEffect,s=n.useMemo,l=n.useDebugValue;return MP.useSyncExternalStoreWithSelector=function(c,h,p,g,v){var b=r(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=s(function(){function S(k){if(!w){if(w=!0,R=k,k=g(k),v!==void 0&&_.hasValue){var B=_.value;if(v(B,k))return P=B}return P=k}if(B=P,t(R,k))return B;var D=g(k);return v!==void 0&&v(B,D)?(R=k,B):(R=k,P=D)}var w=!1,R,P,O=p===void 0?null:p;return[function(){return S(h())},O===null?void 0:function(){return S(O())}]},[h,p,g,v]);var M=i(c,b[0],b[1]);return a(function(){_.hasValue=!0,_.value=M},[M]),l(M),M},MP}var XV;function e1e(){return XV||(XV=1,EP.exports=JSe()),EP.exports}e1e();function t1e(n){n()}function n1e(){let n=null,e=null;return{clear(){n=null,e=null},notify(){t1e(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var YV={notify(){},get:()=>[]};function i1e(n,e){let t,i=YV,r=0,a=!1;function s(M){p();const S=i.subscribe(M);let w=!1;return()=>{w||(w=!0,S(),g())}}function l(){i.notify()}function c(){_.onStateChange&&_.onStateChange()}function h(){return a}function p(){r++,t||(t=n.subscribe(c),i=n1e())}function g(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=YV)}function v(){a||(a=!0,p())}function b(){a&&(a=!1,g())}const _={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:h,trySubscribe:v,tryUnsubscribe:b,getListeners:()=>i};return _}var r1e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a1e=r1e(),s1e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",o1e=s1e(),l1e=()=>a1e||o1e?j.useLayoutEffect:j.useEffect,u1e=l1e();function KV(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function c1e(n,e){if(KV(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!KV(n[t[r]],e[t[r]]))return!1;return!0}var AP=Symbol.for("react-redux-context"),TP=typeof globalThis<"u"?globalThis:{};function f1e(){if(!j.createContext)return{};const n=TP[AP]??(TP[AP]=new Map);let e=n.get(j.createContext);return e||(e=j.createContext(null),n.set(j.createContext,e)),e}var h1e=f1e();function d1e(n){const{children:e,context:t,serverState:i,store:r}=n,a=j.useMemo(()=>{const c=i1e(r);return{store:r,subscription:c,getServerState:i?()=>i:void 0}},[r,i]),s=j.useMemo(()=>r.getState(),[r]);u1e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const l=t||h1e;return j.createElement(l.Provider,{value:a},e)}var p1e=d1e,m1e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function g1e(n,e){return n==null&&e==null?!0:typeof n=="number"&&typeof e=="number"?n===e||n!==n&&e!==e:n===e}function A3(n,e){var t=new Set([...Object.keys(n),...Object.keys(e)]);for(var i of t)if(m1e.has(i)){if(n[i]==null&&e[i]==null)continue;if(!c1e(n[i],e[i]))return!1}else if(!g1e(n[i],e[i]))return!1;return!0}function T3(n,e){var t,i;return(t=(i=n.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.xAxisId)!==null&&t!==void 0?t:X7}function C3(n,e){var t,i;return(t=(i=n.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.yAxisId)!==null&&t!==void 0?t:X7}var iq=(n,e,t)=>n7(n,"xAxis",T3(n,e),t),rq=(n,e,t)=>t7(n,"xAxis",T3(n,e),t),aq=(n,e,t)=>n7(n,"yAxis",C3(n,e),t),sq=(n,e,t)=>t7(n,"yAxis",C3(n,e),t),v1e=qe([rr,iq,aq,rq,sq],(n,e,t,i,r)=>Wc(n,"xAxis")?kE(e,i,!1):kE(t,r,!1)),y1e=(n,e)=>e,oq=qe([wG,y1e],(n,e)=>n.filter(t=>t.type==="area").find(t=>t.id===e)),lq=n=>{var e=rr(n),t=Wc(e,"xAxis");return t?"yAxis":"xAxis"},b1e=(n,e)=>{var t=lq(n);return t==="yAxis"?C3(n,e):T3(n,e)},x1e=(n,e,t)=>NG(n,lq(n),b1e(n,e),t),_1e=qe([oq,x1e],(n,e)=>{var t;if(!(n==null||e==null)){var{stackId:i}=n,r=e3(n);if(!(i==null||r==null)){var a=(t=e[i])===null||t===void 0?void 0:t.stackedData,s=a==null?void 0:a.find(l=>l.key===r);if(s!=null)return s.map(l=>[l[0],l[1]])}}}),S1e=qe([rr,iq,aq,rq,sq,_1e,_ve,v1e,oq,Pve],(n,e,t,i,r,a,s,l,c,h)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:v}=s;if(!(c==null||n!=="horizontal"&&n!=="vertical"||e==null||t==null||i==null||r==null||i.length===0||r.length===0||l==null)){var{data:b}=c,_;if(b&&b.length>0?_=b:_=p==null?void 0:p.slice(g,v+1),_!=null)return V1e({layout:n,xAxis:e,yAxis:t,xAxisTicks:i,yAxisTicks:r,dataStartIndex:g,areaSettings:c,stackedData:a,displayedData:_,chartBaseValue:h,bandSize:l})}}),w1e=["id"],E1e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function bm(){return bm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bm.apply(null,arguments)}function uq(n,e){if(n==null)return{};var t,i,r=M1e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function M1e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function ZV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Tv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZV(Object(t),!0).forEach(function(i){A1e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function A1e(n,e,t){return(e=T1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T1e(n){var e=C1e(n,"string");return typeof e=="symbol"?e:e+""}function C1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fM(n,e){return n&&n!=="none"?n:e}var R1e=n=>{var{dataKey:e,name:t,stroke:i,fill:r,legendType:a,hide:s}=n;return[{inactive:s,dataKey:e,type:a,color:fM(i,r),value:$9(t,e),payload:n}]},P1e=j.memo(n=>{var{dataKey:e,data:t,stroke:i,strokeWidth:r,fill:a,name:s,hide:l,unit:c,tooltipType:h,id:p}=n,g={dataDefinedOnItem:t,getPosition:y0,settings:{stroke:i,strokeWidth:r,fill:a,dataKey:e,nameKey:void 0,name:$9(s,e),hide:l,type:h,color:fM(i,a),unit:c,graphicalItemId:p}};return j.createElement(d_e,{tooltipEntrySettings:g})});function I1e(n){var{clipPathId:e,points:t,props:i}=n,{needClip:r,dot:a,dataKey:s}=i,l=Cu(i);return j.createElement(L_e,{points:t,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:l,needClip:r,clipPathId:e})}function N1e(n){var{showLabels:e,children:t,points:i}=n,r=i.map(a=>{var s,l,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Tv(Tv({},c),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return j.createElement(s_e,{value:e?r:void 0},t)}function QV(n){var{points:e,baseLine:t,needClip:i,clipPathId:r,props:a}=n,{layout:s,type:l,stroke:c,connectNulls:h,isRange:p}=a,{id:g}=a,v=uq(a,w1e),b=Cu(v),_=Vl(v);return j.createElement(j.Fragment,null,(e==null?void 0:e.length)>1&&j.createElement(Fc,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},j.createElement(aw,bm({},_,{id:g,points:e,connectNulls:h,type:l,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),c!=="none"&&j.createElement(aw,bm({},b,{className:"recharts-area-curve",layout:s,type:l,connectNulls:h,fill:"none",points:e})),c!=="none"&&p&&j.createElement(aw,bm({},b,{className:"recharts-area-curve",layout:s,type:l,connectNulls:h,fill:"none",points:t}))),j.createElement(I1e,{points:e,props:v,clipPathId:r}))}function O1e(n){var e,t,{alpha:i,baseLine:r,points:a,strokeWidth:s}=n,l=(e=a[0])===null||e===void 0?void 0:e.y,c=(t=a[a.length-1])===null||t===void 0?void 0:t.y;if(!Xn(l)||!Xn(c))return null;var h=i*Math.abs(l-c),p=Math.max(...a.map(g=>g.x||0));return Wt(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(g=>g.x||0),p)),Wt(p)?j.createElement("rect",{x:0,y:l<c?l:l-h,width:p+(s?parseInt("".concat(s),10):1),height:Math.floor(h)}):null}function D1e(n){var e,t,{alpha:i,baseLine:r,points:a,strokeWidth:s}=n,l=(e=a[0])===null||e===void 0?void 0:e.x,c=(t=a[a.length-1])===null||t===void 0?void 0:t.x;if(!Xn(l)||!Xn(c))return null;var h=i*Math.abs(l-c),p=Math.max(...a.map(g=>g.y||0));return Wt(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(g=>g.y||0),p)),Wt(p)?j.createElement("rect",{x:l<c?l:l-h,y:0,width:h,height:Math.floor(p+(s?parseInt("".concat(s),10):1))}):null}function L1e(n){var{alpha:e,layout:t,points:i,baseLine:r,strokeWidth:a}=n;return t==="vertical"?j.createElement(O1e,{alpha:e,points:i,baseLine:r,strokeWidth:a}):j.createElement(D1e,{alpha:e,points:i,baseLine:r,strokeWidth:a})}function U1e(n){var{needClip:e,clipPathId:t,props:i,previousPointsRef:r,previousBaselineRef:a}=n,{points:s,baseLine:l,isAnimationActive:c,animationBegin:h,animationDuration:p,animationEasing:g,onAnimationStart:v,onAnimationEnd:b}=i,_=j.useMemo(()=>({points:s,baseLine:l}),[s,l]),M=mH(_,"recharts-area-"),S=xD(),[w,R]=j.useState(!1),P=!w,O=j.useCallback(()=>{typeof b=="function"&&b(),R(!1)},[b]),k=j.useCallback(()=>{typeof v=="function"&&v(),R(!0)},[v]);if(S==null)return null;var B=r.current,D=a.current;return j.createElement(N1e,{showLabels:P,points:s},i.children,j.createElement(pH,{animationId:M,begin:h,duration:p,isActive:c,easing:g,onAnimationEnd:O,onAnimationStart:k,key:M},F=>{if(B){var I=B.length/s.length,L=F===1?s:s.map((q,W)=>{var oe=Math.floor(W*I);if(B[oe]){var fe=B[oe];return Tv(Tv({},q),{},{x:bc(fe.x,q.x,F),y:bc(fe.y,q.y,F)})}return q}),H;return Wt(l)?H=bc(D,l,F):_s(l)||Bc(l)?H=bc(D,0,F):H=l.map((q,W)=>{var oe=Math.floor(W*I);if(Array.isArray(D)&&D[oe]){var fe=D[oe];return Tv(Tv({},q),{},{x:bc(fe.x,q.x,F),y:bc(fe.y,q.y,F)})}return q}),F>0&&(r.current=L,a.current=H),j.createElement(QV,{points:L,baseLine:H,needClip:e,clipPathId:t,props:i})}return F>0&&(r.current=s,a.current=l),j.createElement(Fc,null,c&&j.createElement("defs",null,j.createElement("clipPath",{id:"animationClipPath-".concat(t)},j.createElement(L1e,{alpha:F,points:s,baseLine:l,layout:S,strokeWidth:i.strokeWidth}))),j.createElement(Fc,{clipPath:"url(#animationClipPath-".concat(t,")")},j.createElement(QV,{points:s,baseLine:l,needClip:e,clipPathId:t,props:i})))}),j.createElement(u_e,{label:i.label}))}function k1e(n){var{needClip:e,clipPathId:t,props:i}=n,r=j.useRef(null),a=j.useRef();return j.createElement(U1e,{needClip:e,clipPathId:t,props:i,previousPointsRef:r,previousBaselineRef:a})}class z1e extends j.PureComponent{render(){var{hide:e,dot:t,points:i,className:r,top:a,left:s,needClip:l,xAxisId:c,yAxisId:h,width:p,height:g,id:v,baseLine:b,zIndex:_}=this.props;if(e)return null;var M=Yi("recharts-area",r),S=v,{r:w,strokeWidth:R}=QSe(t),P=W7(t),O=w*2+R,k=l?"url(#clipPath-".concat(P?"":"dots-").concat(S,")"):void 0;return j.createElement(oh,{zIndex:_},j.createElement(Fc,{className:M},l&&j.createElement("defs",null,j.createElement(ZSe,{clipPathId:S,xAxisId:c,yAxisId:h}),!P&&j.createElement("clipPath",{id:"clipPath-dots-".concat(S)},j.createElement("rect",{x:s-O/2,y:a-O/2,width:p+O,height:g+O}))),j.createElement(k1e,{needClip:l,clipPathId:S,props:this.props})),j.createElement(jV,{points:i,mainColor:fM(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:k}),this.props.isRange&&Array.isArray(b)&&j.createElement(jV,{points:b,mainColor:fM(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:k}))}}var cq={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Gs.area};function F1e(n){var e,t=tl(n,cq),{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,connectNulls:l,dot:c,fill:h,fillOpacity:p,hide:g,isAnimationActive:v,legendType:b,stroke:_,xAxisId:M,yAxisId:S}=t,w=uq(t,E1e),R=b0(),P=E7(),{needClip:O}=nq(M,S),k=Ro(),{points:B,isRange:D,baseLine:F}=(e=sn(oe=>S1e(oe,n.id,k)))!==null&&e!==void 0?e:{},I=w3();if(R!=="horizontal"&&R!=="vertical"||I==null||P!=="AreaChart"&&P!=="ComposedChart")return null;var{height:L,width:H,x:q,y:W}=I;return!B||!B.length?null:j.createElement(z1e,bm({},w,{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,baseLine:F,connectNulls:l,dot:c,fill:h,fillOpacity:p,height:L,hide:g,layout:R,isAnimationActive:v==="auto"?!Qx.isSsr:v,isRange:D,legendType:b,needClip:O,points:B,stroke:_,width:H,left:q,top:W,xAxisId:M,yAxisId:S}))}var B1e=(n,e,t,i,r)=>{var a=t??e;if(Wt(a))return a;var s=n==="horizontal"?r:i,l=s.scale.domain();if(s.type==="number"){var c=Math.max(l[0],l[1]),h=Math.min(l[0],l[1]);return a==="dataMin"?h:a==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return a==="dataMin"?l[0]:a==="dataMax"?l[1]:l[0]};function V1e(n){var{areaSettings:{connectNulls:e,baseValue:t,dataKey:i},stackedData:r,layout:a,chartBaseValue:s,xAxis:l,yAxis:c,displayedData:h,dataStartIndex:p,xAxisTicks:g,yAxisTicks:v,bandSize:b}=n,_=r&&r.length,M=B1e(a,s,t,l,c),S=a==="horizontal",w=!1,R=h.map((O,k)=>{var B,D,F,I;if(_)I=r[p+k];else{var L=Ya(O,i);Array.isArray(L)?(I=L,w=!0):I=[M,L]}var H=(B=(D=I)===null||D===void 0?void 0:D[1])!==null&&B!==void 0?B:null,q=H==null||_&&!e&&Ya(O,i)==null;if(S){var W;return{x:rF({axis:l,ticks:g,bandSize:b,entry:O,index:k}),y:q?null:(W=c.scale.map(H))!==null&&W!==void 0?W:null,value:I,payload:O}}return{x:q?null:(F=l.scale.map(H))!==null&&F!==void 0?F:null,y:rF({axis:c,ticks:v,bandSize:b,entry:O,index:k}),value:I,payload:O}}),P;return _||w?P=R.map(O=>{var k,B=Array.isArray(O.value)?O.value[0]:null;if(S){var D;return{x:O.x,y:B!=null&&O.y!=null&&(D=c.scale.map(B))!==null&&D!==void 0?D:null,payload:O.payload}}return{x:B!=null&&(k=l.scale.map(B))!==null&&k!==void 0?k:null,y:O.y,payload:O.payload}}):P=S?c.scale.map(M):l.scale.map(M),{points:R,baseLine:P??0,isRange:w}}function j1e(n){var e=tl(n,cq),t=Ro();return j.createElement(b_e,{id:e.id,type:"area"},i=>j.createElement(j.Fragment,null,j.createElement(p_e,{legendPayload:R1e(e)}),j.createElement(P1e,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),j.createElement(A_e,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:_he(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:t,connectNulls:e.connectNulls}),j.createElement(F1e,bm({},e,{id:i}))))}var fq=j.memo(j1e,A3);fq.displayName="Area";var H1e=["domain","range"],G1e=["domain","range"];function JV(n,e){if(n==null)return{};var t,i,r=q1e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function q1e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function e5(n,e){return n===e?!0:Array.isArray(n)&&n.length===2&&Array.isArray(e)&&e.length===2?n[0]===e[0]&&n[1]===e[1]:!1}function hq(n,e){if(n===e)return!0;var{domain:t,range:i}=n,r=JV(n,H1e),{domain:a,range:s}=e,l=JV(e,G1e);return!e5(t,a)||!e5(i,s)?!1:A3(r,l)}var W1e=["type"],$1e=["dangerouslySetInnerHTML","ticks","scale"],X1e=["id","scale"];function pN(){return pN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pN.apply(null,arguments)}function t5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function n5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?t5(Object(t),!0).forEach(function(i){Y1e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):t5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Y1e(n,e,t){return(e=K1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K1e(n){var e=Z1e(n,"string");return typeof e=="symbol"?e:e+""}function Z1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mN(n,e){if(n==null)return{};var t,i,r=Q1e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Q1e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function J1e(n){var e=Sa(),t=j.useRef(null),i=xD(),{type:r}=n,a=mN(n,W1e),s=XA(i,"xAxis",r),l=j.useMemo(()=>{if(s!=null)return n5(n5({},a),{},{type:s})},[a,s]);return j.useLayoutEffect(()=>{l!=null&&(t.current===null?e(B_e(l)):t.current!==l&&e(V_e({prev:t.current,next:l})),t.current=l)},[l,e]),j.useLayoutEffect(()=>()=>{t.current&&(e(j_e(t.current)),t.current=null)},[e]),null}var ewe=n=>{var{xAxisId:e,className:t}=n,i=sn(Y9),r=Ro(),a="xAxis",s=sn(w=>e7(w,a,e,r)),l=sn(w=>A0e(w,e)),c=sn(w=>N0e(w,e)),h=sn(w=>bG(w,e));if(l==null||c==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:v}=n,b=mN(n,$1e),{id:_,scale:M}=h,S=mN(h,X1e);return j.createElement(M3,pN({},b,S,{x:c.x,y:c.y,width:l.width,height:l.height,className:Yi("recharts-".concat(a," ").concat(a),t),viewBox:i,ticks:s,axisType:a}))},twe={allowDataOverflow:va.allowDataOverflow,allowDecimals:va.allowDecimals,allowDuplicatedCategory:va.allowDuplicatedCategory,angle:va.angle,axisLine:jf.axisLine,height:va.height,hide:!1,includeHidden:va.includeHidden,interval:va.interval,label:!1,minTickGap:va.minTickGap,mirror:va.mirror,orientation:va.orientation,padding:va.padding,reversed:va.reversed,scale:va.scale,tick:va.tick,tickCount:va.tickCount,tickLine:jf.tickLine,tickSize:jf.tickSize,type:va.type,xAxisId:0},nwe=n=>{var e=tl(n,twe);return j.createElement(j.Fragment,null,j.createElement(J1e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),j.createElement(ewe,e))},dq=j.memo(nwe,hq);dq.displayName="XAxis";var iwe=["type"],rwe=["dangerouslySetInnerHTML","ticks","scale"],awe=["id","scale"];function gN(){return gN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gN.apply(null,arguments)}function i5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function r5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i5(Object(t),!0).forEach(function(i){swe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function swe(n,e,t){return(e=owe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function owe(n){var e=lwe(n,"string");return typeof e=="symbol"?e:e+""}function lwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vN(n,e){if(n==null)return{};var t,i,r=uwe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function uwe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function cwe(n){var e=Sa(),t=j.useRef(null),i=xD(),{type:r}=n,a=vN(n,iwe),s=XA(i,"yAxis",r),l=j.useMemo(()=>{if(s!=null)return r5(r5({},a),{},{type:s})},[s,a]);return j.useLayoutEffect(()=>{l!=null&&(t.current===null?e(H_e(l)):t.current!==l&&e(G_e({prev:t.current,next:l})),t.current=l)},[l,e]),j.useLayoutEffect(()=>()=>{t.current&&(e(q_e(t.current)),t.current=null)},[e]),null}function fwe(n){var{yAxisId:e,className:t,width:i,label:r}=n,a=j.useRef(null),s=j.useRef(null),l=sn(Y9),c=Ro(),h=Sa(),p="yAxis",g=sn(B=>L0e(B,e)),v=sn(B=>D0e(B,e)),b=sn(B=>e7(B,p,e,c)),_=sn(B=>xG(B,e));if(j.useLayoutEffect(()=>{if(!(i!=="auto"||!g||S3(r)||j.isValidElement(r)||_==null)){var B=a.current;if(B){var D=B.getCalculatedWidth();Math.round(g.width)!==Math.round(D)&&h(W_e({id:e,width:D}))}}},[b,g,h,r,e,i,_]),g==null||v==null||_==null)return null;var{dangerouslySetInnerHTML:M,ticks:S,scale:w}=n,R=vN(n,rwe),{id:P,scale:O}=_,k=vN(_,awe);return j.createElement(M3,gN({},R,k,{ref:a,labelRef:s,x:v.x,y:v.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:g.width,height:g.height,className:Yi("recharts-".concat(p," ").concat(p),t),viewBox:l,ticks:b,axisType:p}))}var hwe={allowDataOverflow:ya.allowDataOverflow,allowDecimals:ya.allowDecimals,allowDuplicatedCategory:ya.allowDuplicatedCategory,angle:ya.angle,axisLine:jf.axisLine,hide:!1,includeHidden:ya.includeHidden,interval:ya.interval,label:!1,minTickGap:ya.minTickGap,mirror:ya.mirror,orientation:ya.orientation,padding:ya.padding,reversed:ya.reversed,scale:ya.scale,tick:ya.tick,tickCount:ya.tickCount,tickLine:jf.tickLine,tickSize:jf.tickSize,type:ya.type,width:ya.width,yAxisId:0},dwe=n=>{var e=tl(n,hwe);return j.createElement(j.Fragment,null,j.createElement(cwe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),j.createElement(fwe,e))},pq=j.memo(dwe,hq);pq.displayName="YAxis";var pwe=(n,e)=>e,R3=qe([pwe,rr,vG,Ma,y7,sh,Yye,Za],nbe),P3=n=>{var e=n.currentTarget.getBoundingClientRect(),t=e.width/n.currentTarget.offsetWidth,i=e.height/n.currentTarget.offsetHeight;return{chartX:Math.round((n.clientX-e.left)/t),chartY:Math.round((n.clientY-e.top)/i)}},mq=jl("mouseClick"),gq=Xx();gq.startListening({actionCreator:mq,effect:(n,e)=>{var t=n.payload,i=R3(e.getState(),P3(t));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(X0e({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var yN=jl("mouseMove"),vq=Xx(),H1=null;vq.startListening({actionCreator:yN,effect:(n,e)=>{var t=n.payload;H1!==null&&cancelAnimationFrame(H1);var i=P3(t);H1=requestAnimationFrame(()=>{var r=e.getState(),a=f3(r,r.tooltip.settings.shared);if(a==="axis"){var s=R3(r,i);(s==null?void 0:s.activeIndex)!=null?e.dispatch(u7({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(l7())}H1=null})}});function mwe(n,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":n==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var a5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},yq=Co({name:"rootProps",initialState:a5,reducers:{updateOptions:(n,e)=>{var t;n.accessibilityLayer=e.payload.accessibilityLayer,n.barCategoryGap=e.payload.barCategoryGap,n.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:a5.barGap,n.barSize=e.payload.barSize,n.maxBarSize=e.payload.maxBarSize,n.stackOffset=e.payload.stackOffset,n.syncId=e.payload.syncId,n.syncMethod=e.payload.syncMethod,n.className=e.payload.className,n.baseValue=e.payload.baseValue,n.reverseStackOrder=e.payload.reverseStackOrder}}}),gwe=yq.reducer,{updateOptions:vwe}=yq.actions,ywe=null,bwe={updatePolarOptions:(n,e)=>e.payload},bq=Co({name:"polarOptions",initialState:ywe,reducers:bwe}),{updatePolarOptions:AAe}=bq.actions,xwe=bq.reducer,xq=jl("keyDown"),_q=jl("focus"),I3=Xx();I3.startListening({actionCreator:xq,effect:(n,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=t.tooltip,a=n.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=h3(r,C0(t),a_(t),o_(t)),l=s==null?-1:Number(s);if(!(!Number.isFinite(l)||l<0)){var c=sh(t);if(a==="Enter"){var h=oM(t,"axis","hover",String(r.index));e.dispatch(uN({active:!r.active,activeIndex:r.index,activeCoordinate:h}));return}var p=F0e(t),g=p==="left-to-right"?1:-1,v=a==="ArrowRight"?1:-1,b=l+v*g;if(!(c==null||b>=c.length||b<0)){var _=oM(t,"axis","hover",String(b));e.dispatch(uN({active:!0,activeIndex:b.toString(),activeCoordinate:_}))}}}}}});I3.startListening({actionCreator:_q,effect:(n,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=t.tooltip;if(!r.active&&r.index==null){var a="0",s=oM(t,"axis","hover",String(a));e.dispatch(uN({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Dl=jl("externalEvent"),Sq=Xx(),CP=new Map;Sq.startListening({actionCreator:Dl,effect:(n,e)=>{var{handler:t,reactEvent:i}=n.payload;if(t!=null){i.persist();var r=i.type,a=CP.get(r);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:Dye(l),activeDataKey:Nye(l),activeIndex:Tx(l),activeLabel:_7(l),activeTooltipIndex:Tx(l),isTooltipActive:Lye(l)};t(c,i)}finally{CP.delete(r)}});CP.set(r,s)}}});var _we=qe([A0],n=>n.tooltipItemPayloads),Swe=qe([_we,(n,e)=>e,(n,e,t)=>t],(n,e,t)=>{if(e!=null){var i=n.find(a=>a.settings.graphicalItemId===t);if(i!=null){var{getPosition:r}=i;if(r!=null)return r(e)}}}),wq=jl("touchMove"),Eq=Xx();Eq.startListening({actionCreator:wq,effect:(n,e)=>{var t=n.payload;if(!(t.touches==null||t.touches.length===0)){var i=e.getState(),r=f3(i,i.tooltip.settings.shared);if(r==="axis"){var a=t.touches[0];if(a==null)return;var s=R3(i,P3({clientX:a.clientX,clientY:a.clientY,currentTarget:t.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(u7({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(r==="item"){var l,c=t.touches[0];if(document.elementFromPoint==null||c==null)return;var h=document.elementFromPoint(c.clientX,c.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(Che),g=(l=h.getAttribute(Rhe))!==null&&l!==void 0?l:void 0,v=T0(i).find(M=>M.id===g);if(p==null||v==null||g==null)return;var{dataKey:b}=v,_=Swe(i,p,g);e.dispatch($0e({activeDataKey:b,activeIndex:p,activeCoordinate:_,activeGraphicalItemId:g}))}}}});var wwe=g9({brush:nSe,cartesianAxis:$_e,chartData:Dbe,errorBars:KSe,graphicalItems:E_e,layout:hhe,legend:_de,options:Rbe,polarAxis:f_e,polarOptions:xwe,referenceElements:sSe,rootProps:gwe,tooltip:Y0e,zIndex:gbe}),Ewe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return kfe({reducer:wwe,preloadedState:e,middleware:i=>{var r;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([gq.middleware,vq.middleware,I3.middleware,Sq.middleware,Eq.middleware])},enhancers:i=>{var r=i;return typeof i=="function"&&(r=i()),r.concat(I9({type:"raf"}))},devTools:{serialize:{replacer:mwe},name:"recharts-".concat(t)}})};function Mwe(n){var{preloadedState:e,children:t,reduxStoreName:i}=n,r=Ro(),a=j.useRef(null);if(r)return t;a.current==null&&(a.current=Ewe(e,i));var s=fD;return j.createElement(p1e,{context:s,store:a.current},t)}function Awe(n){var{layout:e,margin:t}=n,i=Sa(),r=Ro();return j.useEffect(()=>{r||(i(uhe(e)),i(lhe(t)))},[i,r,e,t]),null}var Twe=j.memo(Awe,A3);function Cwe(n){var e=Sa();return j.useEffect(()=>{e(vwe(n))},[e,n]),null}function s5(n){var{zIndex:e,isPanorama:t}=n,i=j.useRef(null),r=Sa();return j.useLayoutEffect(()=>(i.current&&r(pbe({zIndex:e,element:i.current,isPanorama:t})),()=>{r(mbe({zIndex:e,isPanorama:t}))}),[r,e,t]),j.createElement("g",{tabIndex:-1,ref:i})}function o5(n){var{children:e,isPanorama:t}=n,i=sn(rbe);if(!i||i.length===0)return e;var r=i.filter(s=>s<0),a=i.filter(s=>s>0);return j.createElement(j.Fragment,null,r.map(s=>j.createElement(s5,{key:s,zIndex:s,isPanorama:t})),e,a.map(s=>j.createElement(s5,{key:s,zIndex:s,isPanorama:t})))}var Rwe=["children"];function Pwe(n,e){if(n==null)return{};var t,i,r=Iwe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Iwe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function hM(){return hM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hM.apply(null,arguments)}var Nwe={width:"100%",height:"100%",display:"block"},Owe=j.forwardRef((n,e)=>{var t=eH(),i=tH(),r=cH();if(!jc(t)||!jc(i))return null;var{children:a,otherAttributes:s,title:l,desc:c}=n,h,p;return s!=null&&(typeof s.tabIndex=="number"?h=s.tabIndex:h=r?0:void 0,typeof s.role=="string"?p=s.role:p=r?"application":void 0),j.createElement(z8,hM({},s,{title:l,desc:c,role:p,tabIndex:h,width:t,height:i,style:Nwe,ref:e}),a)}),Dwe=n=>{var{children:e}=n,t=sn(LA);if(!t)return null;var{width:i,height:r,y:a,x:s}=t;return j.createElement(z8,{width:i,height:r,x:s,y:a},e)},l5=j.forwardRef((n,e)=>{var{children:t}=n,i=Pwe(n,Rwe),r=Ro();return r?j.createElement(Dwe,null,j.createElement(o5,{isPanorama:!0},t)):j.createElement(Owe,hM({ref:e},i),j.createElement(o5,{isPanorama:!1},t))});function Lwe(){var n=Sa(),[e,t]=j.useState(null),i=sn(The);return j.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),a=r.width/e.offsetWidth;Xn(a)&&a!==i&&n(fhe(a))}},[e,n,i]),t}function u5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Uwe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u5(Object(t),!0).forEach(function(i){kwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function kwe(n,e,t){return(e=zwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zwe(n){var e=Fwe(n,"string");return typeof e=="symbol"?e:e+""}function Fwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ad(){return Ad=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ad.apply(null,arguments)}var Bwe=()=>(Hbe(),null);function dM(n){if(typeof n=="number")return n;if(typeof n=="string"){var e=parseFloat(n);if(!Number.isNaN(e))return e}return 0}var Vwe=j.forwardRef((n,e)=>{var t,i,r=j.useRef(null),[a,s]=j.useState({containerWidth:dM((t=n.style)===null||t===void 0?void 0:t.width),containerHeight:dM((i=n.style)===null||i===void 0?void 0:i.height)}),l=j.useCallback((h,p)=>{s(g=>{var v=Math.round(h),b=Math.round(p);return g.containerWidth===v&&g.containerHeight===b?g:{containerWidth:v,containerHeight:b}})},[]),c=j.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();l(p,g);var v=_=>{var M=_[0];if(M!=null){var{width:S,height:w}=M.contentRect;l(S,w)}},b=new ResizeObserver(v);b.observe(h),r.current=b}},[e,l]);return j.useEffect(()=>()=>{var h=r.current;h!=null&&h.disconnect()},[l]),j.createElement(j.Fragment,null,j.createElement(Kx,{width:a.containerWidth,height:a.containerHeight}),j.createElement("div",Ad({ref:c},n)))}),jwe=j.forwardRef((n,e)=>{var{width:t,height:i}=n,[r,a]=j.useState({containerWidth:dM(t),containerHeight:dM(i)}),s=j.useCallback((c,h)=>{a(p=>{var g=Math.round(c),v=Math.round(h);return p.containerWidth===g&&p.containerHeight===v?p:{containerWidth:g,containerHeight:v}})},[]),l=j.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:h,height:p}=c.getBoundingClientRect();s(h,p)}},[e,s]);return j.createElement(j.Fragment,null,j.createElement(Kx,{width:r.containerWidth,height:r.containerHeight}),j.createElement("div",Ad({ref:l},n)))}),Hwe=j.forwardRef((n,e)=>{var{width:t,height:i}=n;return j.createElement(j.Fragment,null,j.createElement(Kx,{width:t,height:i}),j.createElement("div",Ad({ref:e},n)))}),Gwe=j.forwardRef((n,e)=>{var{width:t,height:i}=n;return typeof t=="string"||typeof i=="string"?j.createElement(jwe,Ad({},n,{ref:e})):typeof t=="number"&&typeof i=="number"?j.createElement(Hwe,Ad({},n,{width:t,height:i,ref:e})):j.createElement(j.Fragment,null,j.createElement(Kx,{width:t,height:i}),j.createElement("div",Ad({ref:e},n)))});function qwe(n){return n?Vwe:Gwe}var Wwe=j.forwardRef((n,e)=>{var{children:t,className:i,height:r,onClick:a,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:v,onTouchEnd:b,onTouchMove:_,onTouchStart:M,style:S,width:w,responsive:R,dispatchTouchEvents:P=!0}=n,O=j.useRef(null),k=Sa(),[B,D]=j.useState(null),[F,I]=j.useState(null),L=Lwe(),H=yD(),q=(H==null?void 0:H.width)>0?H.width:w,W=(H==null?void 0:H.height)>0?H.height:r,oe=j.useCallback(ve=>{L(ve),typeof e=="function"&&e(ve),D(ve),I(ve),ve!=null&&(O.current=ve)},[L,e,D,I]),fe=j.useCallback(ve=>{k(mq(ve)),k(Dl({handler:a,reactEvent:ve}))},[k,a]),te=j.useCallback(ve=>{k(yN(ve)),k(Dl({handler:h,reactEvent:ve}))},[k,h]),re=j.useCallback(ve=>{k(l7()),k(Dl({handler:p,reactEvent:ve}))},[k,p]),he=j.useCallback(ve=>{k(yN(ve)),k(Dl({handler:g,reactEvent:ve}))},[k,g]),Me=j.useCallback(()=>{k(_q())},[k]),Ne=j.useCallback(ve=>{k(xq(ve.key))},[k]),Q=j.useCallback(ve=>{k(Dl({handler:s,reactEvent:ve}))},[k,s]),de=j.useCallback(ve=>{k(Dl({handler:l,reactEvent:ve}))},[k,l]),Ae=j.useCallback(ve=>{k(Dl({handler:c,reactEvent:ve}))},[k,c]),We=j.useCallback(ve=>{k(Dl({handler:v,reactEvent:ve}))},[k,v]),bt=j.useCallback(ve=>{k(Dl({handler:M,reactEvent:ve}))},[k,M]),_e=j.useCallback(ve=>{P&&k(wq(ve)),k(Dl({handler:_,reactEvent:ve}))},[k,P,_]),Te=j.useCallback(ve=>{k(Dl({handler:b,reactEvent:ve}))},[k,b]),ut=qwe(R);return j.createElement(R7.Provider,{value:B},j.createElement(Hue.Provider,{value:F},j.createElement(ut,{width:q??(S==null?void 0:S.width),height:W??(S==null?void 0:S.height),className:Yi("recharts-wrapper",i),style:Uwe({position:"relative",cursor:"default",width:q,height:W},S),onClick:fe,onContextMenu:Q,onDoubleClick:de,onFocus:Me,onKeyDown:Ne,onMouseDown:Ae,onMouseEnter:te,onMouseLeave:re,onMouseMove:he,onMouseUp:We,onTouchEnd:Te,onTouchMove:_e,onTouchStart:bt,ref:oe},j.createElement(Bwe,null),t)))}),$we=["width","height","responsive","children","className","style","compact","title","desc"];function Xwe(n,e){if(n==null)return{};var t,i,r=Ywe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Ywe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var Kwe=j.forwardRef((n,e)=>{var{width:t,height:i,responsive:r,children:a,className:s,style:l,compact:c,title:h,desc:p}=n,g=Xwe(n,$we),v=Cu(g);return c?j.createElement(j.Fragment,null,j.createElement(Kx,{width:t,height:i}),j.createElement(l5,{otherAttributes:v,title:h,desc:p},a)):j.createElement(Wwe,{className:s,style:l,width:t,height:i,responsive:r??!1,onClick:n.onClick,onMouseLeave:n.onMouseLeave,onMouseEnter:n.onMouseEnter,onMouseMove:n.onMouseMove,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onContextMenu:n.onContextMenu,onDoubleClick:n.onDoubleClick,onTouchStart:n.onTouchStart,onTouchMove:n.onTouchMove,onTouchEnd:n.onTouchEnd},j.createElement(l5,{otherAttributes:v,title:h,desc:p,ref:e},j.createElement(lSe,null,a)))});function bN(){return bN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bN.apply(null,arguments)}var Zwe={top:5,right:5,bottom:5,left:5},Qwe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Zwe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Jwe=j.forwardRef(function(e,t){var i,r=tl(e.categoricalChartProps,Qwe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:h}=e,p={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return j.createElement(Mwe,{preloadedState:{options:p},reduxStoreName:(i=h.id)!==null&&i!==void 0?i:a},j.createElement(tSe,{chartData:h.data}),j.createElement(Twe,{layout:r.layout,margin:r.margin}),j.createElement(Cwe,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),j.createElement(Kwe,bN({},r,{ref:t})))}),eEe=["axis"],tEe=j.forwardRef((n,e)=>j.createElement(Jwe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:eEe,tooltipPayloadSearcher:Tbe,categoricalChartProps:n,ref:e}));const Mq=6048e5,nEe=864e5,c5=Symbol.for("constructDateFrom");function zd(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&c5 in n?n[c5](e):n instanceof Date?new n.constructor(e):new Date(e)}function Nu(n,e){return zd(e||n,n)}let iEe={};function iT(){return iEe}function Px(n,e){var l,c,h,p;const t=iT(),i=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((p=(h=t.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,r=Nu(n,e==null?void 0:e.in),a=r.getDay(),s=(a<i?7:0)+a-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function pM(n,e){return Px(n,{...e,weekStartsOn:1})}function Aq(n,e){const t=Nu(n,e==null?void 0:e.in),i=t.getFullYear(),r=zd(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const a=pM(r),s=zd(t,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);const l=pM(s);return t.getTime()>=a.getTime()?i+1:t.getTime()>=l.getTime()?i:i-1}function f5(n){const e=Nu(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function rEe(n,...e){const t=zd.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function h5(n,e){const t=Nu(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function aEe(n,e,t){const[i,r]=rEe(t==null?void 0:t.in,n,e),a=h5(i),s=h5(r),l=+a-f5(a),c=+s-f5(s);return Math.round((l-c)/nEe)}function sEe(n,e){const t=Aq(n,e),i=zd(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),pM(i)}function oEe(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function lEe(n){return!(!oEe(n)&&typeof n!="number"||isNaN(+Nu(n)))}function uEe(n,e){const t=Nu(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const cEe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fEe=(n,e,t)=>{let i;const r=cEe[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Uv(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const hEe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dEe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pEe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mEe={date:Uv({formats:hEe,defaultWidth:"full"}),time:Uv({formats:dEe,defaultWidth:"full"}),dateTime:Uv({formats:pEe,defaultWidth:"full"})},gEe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vEe=(n,e,t,i)=>gEe[n];function Sc(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,l=t!=null&&t.width?String(t.width):s;r=n.formattingValues[l]||n.formattingValues[s]}else{const s=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[l]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return r[a]}}const yEe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bEe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xEe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_Ee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SEe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wEe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},EEe=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},MEe={ordinalNumber:EEe,era:Sc({values:yEe,defaultWidth:"wide"}),quarter:Sc({values:bEe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Sc({values:xEe,defaultWidth:"wide"}),day:Sc({values:_Ee,defaultWidth:"wide"}),dayPeriod:Sc({values:SEe,defaultWidth:"wide",formattingValues:wEe,defaultFormattingWidth:"wide"})};function wc(n){return(e,t={})=>{const i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],a=e.match(r);if(!a)return null;const s=a[0],l=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?TEe(l,g=>g.test(s)):AEe(l,g=>g.test(s));let h;h=n.valueCallback?n.valueCallback(c):c,h=t.valueCallback?t.valueCallback(h):h;const p=e.slice(s.length);return{value:h,rest:p}}}function AEe(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function TEe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Tq(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const r=i[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const l=e.slice(r.length);return{value:s,rest:l}}}const CEe=/^(\d+)(th|st|nd|rd)?/i,REe=/\d+/i,PEe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},IEe={any:[/^b/i,/^(a|c)/i]},NEe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OEe={any:[/1/i,/2/i,/3/i,/4/i]},DEe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},LEe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},UEe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kEe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zEe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},FEe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BEe={ordinalNumber:Tq({matchPattern:CEe,parsePattern:REe,valueCallback:n=>parseInt(n,10)}),era:wc({matchPatterns:PEe,defaultMatchWidth:"wide",parsePatterns:IEe,defaultParseWidth:"any"}),quarter:wc({matchPatterns:NEe,defaultMatchWidth:"wide",parsePatterns:OEe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:wc({matchPatterns:DEe,defaultMatchWidth:"wide",parsePatterns:LEe,defaultParseWidth:"any"}),day:wc({matchPatterns:UEe,defaultMatchWidth:"wide",parsePatterns:kEe,defaultParseWidth:"any"}),dayPeriod:wc({matchPatterns:zEe,defaultMatchWidth:"any",parsePatterns:FEe,defaultParseWidth:"any"})},VEe={code:"en-US",formatDistance:fEe,formatLong:mEe,formatRelative:vEe,localize:MEe,match:BEe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jEe(n,e){const t=Nu(n,e==null?void 0:e.in);return aEe(t,uEe(t))+1}function HEe(n,e){const t=Nu(n,e==null?void 0:e.in),i=+pM(t)-+sEe(t);return Math.round(i/Mq)+1}function Cq(n,e){var p,g,v,b;const t=Nu(n,e==null?void 0:e.in),i=t.getFullYear(),r=iT(),a=(e==null?void 0:e.firstWeekContainsDate)??((g=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((b=(v=r.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??1,s=zd((e==null?void 0:e.in)||n,0);s.setFullYear(i+1,0,a),s.setHours(0,0,0,0);const l=Px(s,e),c=zd((e==null?void 0:e.in)||n,0);c.setFullYear(i,0,a),c.setHours(0,0,0,0);const h=Px(c,e);return+t>=+l?i+1:+t>=+h?i:i-1}function GEe(n,e){var l,c,h,p;const t=iT(),i=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((p=(h=t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,r=Cq(n,e),a=zd((e==null?void 0:e.in)||n,0);return a.setFullYear(r,0,i),a.setHours(0,0,0,0),Px(a,e)}function qEe(n,e){const t=Nu(n,e==null?void 0:e.in),i=+Px(t,e)-+GEe(t,e);return Math.round(i/Mq)+1}function yi(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const od={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return yi(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):yi(t+1,2)},d(n,e){return yi(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return yi(n.getHours()%12||12,e.length)},H(n,e){return yi(n.getHours(),e.length)},m(n,e){return yi(n.getMinutes(),e.length)},s(n,e){return yi(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return yi(r,e.length)}},pv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},d5={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return od.y(n,e)},Y:function(n,e,t,i){const r=Cq(n,i),a=r>0?r:1-r;if(e==="YY"){const s=a%100;return yi(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):yi(a,e.length)},R:function(n,e){const t=Aq(n);return yi(t,e.length)},u:function(n,e){const t=n.getFullYear();return yi(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return yi(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return yi(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return od.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return yi(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const r=qEe(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):yi(r,e.length)},I:function(n,e,t){const i=HEe(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):yi(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):od.d(n,e)},D:function(n,e,t){const i=jEe(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):yi(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return yi(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return yi(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return yi(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let r;switch(i===12?r=pv.noon:i===0?r=pv.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let r;switch(i>=17?r=pv.evening:i>=12?r=pv.afternoon:i>=4?r=pv.morning:r=pv.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return od.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):od.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):yi(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):yi(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):od.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):od.s(n,e)},S:function(n,e){return od.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return m5(i);case"XXXX":case"XX":return Jp(i);case"XXXXX":case"XXX":default:return Jp(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return m5(i);case"xxxx":case"xx":return Jp(i);case"xxxxx":case"xxx":default:return Jp(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+p5(i,":");case"OOOO":default:return"GMT"+Jp(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+p5(i,":");case"zzzz":default:return"GMT"+Jp(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return yi(i,e.length)},T:function(n,e,t){return yi(+n,e.length)}};function p5(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),a=i%60;return a===0?t+String(r):t+String(r)+e+yi(a,2)}function m5(n,e){return n%60===0?(n>0?"-":"+")+yi(Math.abs(n)/60,2):Jp(n,e)}function Jp(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=yi(Math.trunc(i/60),2),a=yi(i%60,2);return t+r+e+a}const g5=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Rq=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},WEe=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return g5(n,e);let a;switch(i){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",g5(i,e)).replace("{{time}}",Rq(r,e))},$Ee={p:Rq,P:WEe},XEe=/^D+$/,YEe=/^Y+$/,KEe=["D","DD","YY","YYYY"];function ZEe(n){return XEe.test(n)}function QEe(n){return YEe.test(n)}function JEe(n,e,t){const i=eMe(n,e,t);if(console.warn(i),KEe.includes(n))throw new RangeError(i)}function eMe(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const tMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nMe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,iMe=/^'([^]*?)'?$/,rMe=/''/g,aMe=/[a-zA-Z]/;function sMe(n,e,t){var p,g,v,b,_,M,S,w;const i=iT(),r=(t==null?void 0:t.locale)??i.locale??VEe,a=(t==null?void 0:t.firstWeekContainsDate)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((b=(v=i.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((M=(_=t==null?void 0:t.locale)==null?void 0:_.options)==null?void 0:M.weekStartsOn)??i.weekStartsOn??((w=(S=i.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,l=Nu(n,t==null?void 0:t.in);if(!lEe(l))throw new RangeError("Invalid time value");let c=e.match(nMe).map(R=>{const P=R[0];if(P==="p"||P==="P"){const O=$Ee[P];return O(R,r.formatLong)}return R}).join("").match(tMe).map(R=>{if(R==="''")return{isToken:!1,value:"'"};const P=R[0];if(P==="'")return{isToken:!1,value:oMe(R)};if(d5[P])return{isToken:!0,value:R};if(P.match(aMe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return{isToken:!1,value:R}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const h={firstWeekContainsDate:a,weekStartsOn:s,locale:r};return c.map(R=>{if(!R.isToken)return R.value;const P=R.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&QEe(P)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&ZEe(P))&&JEe(P,e,String(n));const O=d5[P[0]];return O(l,P,r.localize,h)}).join("")}function oMe(n){const e=n.match(iMe);return e?e[1].replace(rMe,"'"):n}const lMe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},uMe=(n,e,t)=>{let i;const r=lMe[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},cMe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},fMe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},hMe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dMe={date:Uv({formats:cMe,defaultWidth:"full"}),time:Uv({formats:fMe,defaultWidth:"full"}),dateTime:Uv({formats:hMe,defaultWidth:"full"})},pMe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},mMe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},gMe=(n,e,t,i)=>e.getHours()!==1?mMe[n]:pMe[n],vMe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},yMe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},bMe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},xMe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},_Me={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},SMe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},wMe=(n,e)=>Number(n)+"",EMe={ordinalNumber:wMe,era:Sc({values:vMe,defaultWidth:"wide"}),quarter:Sc({values:yMe,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Sc({values:bMe,defaultWidth:"wide"}),day:Sc({values:xMe,defaultWidth:"wide"}),dayPeriod:Sc({values:_Me,defaultWidth:"wide",formattingValues:SMe,defaultFormattingWidth:"wide"})},MMe=/^(\d+)()?/i,AMe=/\d+/i,TMe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},CMe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},RMe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},PMe={any:[/1/i,/2/i,/3/i,/4/i]},IMe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},NMe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},OMe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},DMe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},LMe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},UMe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},kMe={ordinalNumber:Tq({matchPattern:MMe,parsePattern:AMe,valueCallback:function(n){return parseInt(n,10)}}),era:wc({matchPatterns:TMe,defaultMatchWidth:"wide",parsePatterns:CMe,defaultParseWidth:"any"}),quarter:wc({matchPatterns:RMe,defaultMatchWidth:"wide",parsePatterns:PMe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:wc({matchPatterns:IMe,defaultMatchWidth:"wide",parsePatterns:NMe,defaultParseWidth:"any"}),day:wc({matchPatterns:OMe,defaultMatchWidth:"wide",parsePatterns:DMe,defaultParseWidth:"any"}),dayPeriod:wc({matchPatterns:LMe,defaultMatchWidth:"any",parsePatterns:UMe,defaultParseWidth:"any"})},zMe={code:"es",formatDistance:uMe,formatLong:dMe,formatRelative:gMe,localize:EMe,match:kMe,options:{weekStartsOn:1,firstWeekContainsDate:1}},FMe=({orders:n})=>{const e=n.reduce((i,r)=>{try{const[a,s,l]=r.date.split("/"),c=`${l}-${s}-${a}`;i[c]||(i[c]=0),i[c]+=parseFloat(r.total)}catch{}return i},{}),t=Object.keys(e).sort().map(i=>({date:i,total:e[i],displayDate:sMe(new Date(i),"dd MMM",{locale:zMe})}));return U.jsxs("div",{className:"h-[300px] w-full bg-slate-800 p-4 rounded-xl border border-slate-700",children:[U.jsx("h3",{className:"text-slate-400 text-sm font-bold mb-4 uppercase",children:"Ventas (Histrico)"}),U.jsx(ide,{width:"100%",height:"100%",children:U.jsxs(tEe,{data:t,children:[U.jsx("defs",{children:U.jsxs("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[U.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),U.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:0})]})}),U.jsx(eq,{strokeDasharray:"3 3",stroke:"#374151"}),U.jsx(dq,{dataKey:"displayDate",stroke:"#9CA3AF",fontSize:12}),U.jsx(pq,{stroke:"#9CA3AF",fontSize:12,unit:"$"}),U.jsx(Zbe,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F3F4F6"},formatter:i=>[`$${i}`,"Ventas"]}),U.jsx(fq,{type:"monotone",dataKey:"total",stroke:"#F59E0B",fillOpacity:1,fill:"url(#colorTotal)"})]})})]})},BMe=()=>{var Ye,Le,Tt;const{clients:n,orders:e,leads:t,addClient:i,updateClient:r,addOrder:a,updateOrderStatus:s,updateOrder:l,deleteOrder:c,addLead:h,updateLeadStatus:p,importDatabase:g}=vA(),[v,b]=j.useState("dashboard"),[_,M]=j.useState(null),[S,w]=j.useState(!1),[R,P]=j.useState(!1),[O,k]=j.useState(!1),[B,D]=j.useState(!0),[F,I]=j.useState(null),[L,H]=j.useState(null),[q,W]=j.useState(null),[oe,fe]=j.useState([{desc:"",qty:1,price:0}]),[te,re]=j.useState(0),[he,Me]=j.useState(null);j.useMemo(()=>{const le=oe.reduce((Ee,st)=>Ee+parseFloat(st.price||0)*parseFloat(st.qty||1),0);re(le)},[oe]);const Ne=()=>fe([...oe,{desc:"",qty:1,price:0}]),Q=le=>fe(oe.filter((Ee,st)=>st!==le)),de=(le,Ee,st)=>{const Ge=[...oe];Ge[le][Ee]=st,fe(Ge)},[Ae,We]=j.useState({status:"all",clientId:""}),[bt,_e]=j.useState(0),Te=30,[ut,ve]=j.useState({status:"all",search:""}),et=e.filter(le=>{const Ee=ut.search.toLowerCase(),st=n.find(ye=>ye.id===le.clientId),Ge=st?st.name.toLowerCase():(le.client||"").toLowerCase(),Xe=st?st.email.toLowerCase():"",ft=Ee===""||le.id.toLowerCase().includes(Ee)||Ge.includes(Ee)||Xe.includes(Ee),ae=ut.status==="all"||le.status===ut.status;return ft&&ae}),At=le=>{const Ee=le.target.files[0];if(!Ee)return;const st=new FileReader;st.onload=Ge=>{try{g(JSON.parse(Ge.target.result)),alert("Base de datos importada.")}catch{alert("Error JSON")}},st.readAsText(Ee)},He=le=>{le.preventDefault();const Ee=new FormData(le.target),st=Ee.get("street"),Ge=Ee.get("colony"),Xe=Ee.get("zip"),ft=Ee.get("state"),ae=`${st}, Col. ${Ge}, ${Xe}, ${ft}`;i({name:Ee.get("name"),type:Ee.get("type"),email:Ee.get("email"),phone:Ee.get("phone"),facebook:Ee.get("facebook"),instagram:Ee.get("instagram"),address:ae,street:st,colony:Ge,zip:Xe,state:ft}),P(!1)},Ct=le=>{le.preventDefault();const Ee=new FormData(le.target),st=Ee.get("street"),Ge=Ee.get("colony"),Xe=Ee.get("zip"),ft=Ee.get("state"),ae=`${st}, Col. ${Ge}, ${Xe}, ${ft}`;r(q.id,{name:Ee.get("name"),email:Ee.get("email"),phone:Ee.get("phone"),facebook:Ee.get("facebook"),instagram:Ee.get("instagram"),type:Ee.get("type"),address:ae,street:st,colony:Ge,zip:Xe,state:ft}),W(null)},Oe=le=>{le.preventDefault();const Ee=new FormData(le.target),st=Ee.get("clientId");let Ge=Ee.get("manualName"),Xe=Ee.get("manualEmail"),ft=Ee.get("manualPhone");if(st&&st!=="manual"){const ye=n.find(dt=>dt.id===st);ye&&(Ge=ye.name,Xe=ye.email,ft=ye.phone)}const ae={clientId:st!=="manual"?st:null,name:Ge,email:Xe,phone:ft,details:Ee.get("details"),quantity:Ee.get("quantity")};try{h(ae),k(!1),alert("Cotizacin creada correctamente")}catch(ye){console.error("Error adding lead:",ye),alert("Error al crear la cotizacin")}},Ze=le=>{le.preventDefault();const Ee=new FormData(le.target),st=_.leadId,Ge=Ee.get("name"),Xe=Ee.get("email"),ft=Ee.get("phone"),ae=Ee.get("street"),ye=Ee.get("colony"),dt=Ee.get("zip"),se=Ee.get("state"),rt=`${ae}, Col. ${ye}, ${dt}, ${se}`,nt=Ee.get("itemDesc"),ot=parseFloat(Ee.get("itemQty")),it=parseFloat(Ee.get("itemPrice")),$e=parseFloat(Ee.get("total")),lt=Ee.get("deadline"),Ht=parseFloat(Ee.get("advance")||0);let cn=null;const Jt=n.find(si=>Xe&&si.email===Xe||ft&&si.phone===ft);Jt?(cn=Jt.id,r(Jt.id,{name:Ge,email:Xe,phone:ft,type:Jt.type,address:rt,street:ae,colony:ye,zip:dt,state:se})):cn=i({name:Ge,email:Xe,phone:ft,type:"normal",address:rt,street:ae,colony:ye,zip:dt,state:se}).id,a({clientId:cn,items:[{desc:nt,qty:ot,price:it.toFixed(2)}],total:$e.toFixed(2),advance:Ht.toFixed(2),deliveryLocation:rt,status:"pedido",date:new Date().toLocaleDateString("es-MX"),deadline:lt}),p(st,"Aceptada"),M(null)},je=async le=>{const Ee=le.target.files[0];if(!Ee)return;const st={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/webp"};try{const Ge=await imageCompression(Ee,st),Xe=new FileReader;Xe.onload=ft=>{window.updateOrderContext&&window.updateOrderContext(F.orderId,{progressImage:ft.target.result}),I(null)},Xe.readAsDataURL(Ge)}catch(Ge){if(console.error("Compression failed, trying raw upload for small files...",Ge),Ee.size<2*1024*1024){const Xe=new FileReader;Xe.onload=ft=>{window.updateOrderContext&&window.updateOrderContext(F.orderId,{progressImage:ft.target.result}),I(null)},Xe.readAsDataURL(Ee)}else alert("Error: La imagen es muy grande y no se pudo comprimir. Intenta con una ms pequea.")}},ht=le=>{var ae;le.preventDefault();const Ee=new FormData(le.target),st=Ee.get("clientId");let Ge=st;if(st==="new"){const ye=Ee.get("newClientName"),dt=Ee.get("newClientContact"),se="normal",rt=Ee.get("newClientStreet"),nt=Ee.get("newClientColony"),ot=Ee.get("newClientZip"),it=Ee.get("newClientState"),$e=Ee.get("newClientPhone"),lt=`${rt}, Col. ${nt}, ${ot}, ${it}`;Ge=i({name:ye,email:dt,phone:$e,type:se,address:lt,street:rt,colony:nt,zip:ot,state:it}).id}const Xe=parseFloat(Ee.get("advance")||0);if(Xe>te){alert("El anticipo no puede ser mayor al total del pedido.");return}const ft={clientId:Ge,items:oe.map(ye=>({...ye,price:parseFloat(ye.price).toFixed(2)})),total:te.toFixed(2),advance:Xe.toFixed(2),deliveryLocation:Ee.get("delivery"),status:"pedido",date:new Date().toLocaleDateString("es-MX")};he?(l(he,{...ft,status:(ae=e.find(ye=>ye.id===he))==null?void 0:ae.status}),alert("Pedido actualizado")):a(ft),w(!1),Me(null),fe([{desc:"",qty:1,price:0}])},ie=le=>{Me(le.id),fe(le.items||[]),w(!0)},Mt=le=>{confirm("Ests seguro de eliminar este pedido?")&&c(le)},gt=e.reduce((le,Ee)=>le+parseFloat(Ee.total||0),0),Ut=e.reduce((le,Ee)=>le+parseFloat(Ee.advance||0),0),vt=e.reduce((le,Ee)=>le+parseFloat(Ee.remaining||Ee.total-(Ee.advance||0)||0),0),J=t.filter(le=>le.status==="Nuevo"||le.status==="Pendiente").length,X=t.filter(le=>le.status==="Rechazada").length,ke=t.filter(le=>!(Ae.status!=="all"&&le.status!==Ae.status||Ae.clientId&&!le.id.includes(Ae.clientId))).slice(bt*Te,(bt+1)*Te);return U.jsxs("div",{className:"flex h-screen bg-slate-900 text-slate-100 font-sans overflow-hidden",children:[U.jsxs("aside",{className:"w-64 bg-slate-800 border-r border-slate-700 hidden md:flex flex-col p-6",children:[U.jsxs("h1",{className:"font-display font-bold text-2xl text-white mb-8",children:["Tuna's ",U.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),U.jsxs("nav",{className:"space-y-2 flex-1",children:[U.jsx(G1,{id:"dashboard",icon:U.jsx(iI,{}),label:"Dashboard",active:v,set:b}),U.jsx(G1,{id:"orders",icon:U.jsx(oE,{}),label:"Pedidos",active:v,set:b}),U.jsx(G1,{id:"leads",icon:U.jsx(tre,{}),label:"Cotizaciones",active:v,set:b}),U.jsx(G1,{id:"clients",icon:U.jsx(bre,{}),label:"Clientes",active:v,set:b})]}),U.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-700",children:[U.jsxs(xc,{to:"/",className:"flex items-center gap-2 text-slate-400 hover:text-white mb-4",children:[U.jsx(xO,{size:16})," Ir al Sitio"]}),U.jsxs("label",{className:"w-full bg-slate-700 hover:bg-slate-600 p-2 rounded text-center items-center justify-center flex cursor-pointer gap-2",children:[U.jsx(rI,{size:16})," Importar DB",U.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:At})]})]})]}),U.jsxs("main",{className:"flex-1 overflow-y-auto p-8 relative",children:[v==="dashboard"&&U.jsxs("div",{className:"space-y-6",children:[U.jsx("h2",{className:"text-3xl font-display font-bold",children:"Resumen"}),U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[U.jsx(mv,{title:"Ventas Totales",value:`$${gt.toFixed(2)}`,icon:U.jsx(Yie,{className:"text-brand-blue"})}),U.jsx(mv,{title:"Cobrado",value:`$${Ut.toFixed(2)}`,color:"text-green-500"}),U.jsx(mv,{title:"Por Cobrar",value:`$${vt.toFixed(2)}`,color:"text-brand-orange"}),U.jsx(mv,{title:"Pedidos Activos",value:e.filter(le=>le.status!=="entregado").length}),U.jsx(mv,{title:"Cotizaciones Activas",value:J,color:"text-blue-400"}),U.jsx(mv,{title:"Cot. Rechazadas",value:X,color:"text-red-400"})]}),U.jsx(FMe,{orders:e})]}),v==="orders"&&U.jsxs("div",{children:[U.jsxs("div",{className:"flex justify-between items-center mb-6",children:[U.jsx("h2",{className:"text-3xl font-display font-bold",children:"Pedidos"}),U.jsxs("div",{className:"flex gap-3",children:[U.jsxs(xc,{to:"/venta-tienda",className:"bg-brand-orange hover:bg-orange-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:[U.jsx(Y6,{size:18})," Venta Mostrador"]}),U.jsxs("div",{className:"relative",children:[U.jsx("input",{placeholder:"Buscar (ID, Cliente, Correo)...",className:"bg-slate-800 border border-slate-600 rounded-lg pl-3 pr-10 py-2 w-64 text-sm focus:outline-none focus:border-brand-blue",value:ut.search,onChange:le=>ve({...ut,search:le.target.value})}),ut.search&&U.jsx("button",{onClick:()=>ve({...ut,search:""}),className:"absolute right-3 top-2.5 text-slate-400 hover:text-white",children:""})]}),U.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm focus:outline-none focus:border-brand-blue",value:ut.status,onChange:le=>ve({...ut,status:le.target.value}),children:[U.jsx("option",{value:"all",children:"Todos los Estatus"}),U.jsx("option",{value:"pedido",children:"Pedido"}),U.jsx("option",{value:"proceso",children:"En Proceso"}),U.jsx("option",{value:"terminado",children:"Terminado"}),U.jsx("option",{value:"entregado",children:"Entregado"})]}),U.jsxs("button",{onClick:()=>w(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[U.jsx(mb,{size:18})," Nuevo Pedido"]})]})]}),U.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700",children:U.jsxs("table",{className:"w-full text-left",children:[U.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:U.jsxs("tr",{children:[U.jsx("th",{className:"p-4",children:"ID"}),U.jsx("th",{className:"p-4",children:"Cliente"}),U.jsx("th",{className:"p-4",children:"Entrega"}),U.jsx("th",{className:"p-4",children:"Restante"}),U.jsx("th",{className:"p-4",children:"Estatus"}),U.jsx("th",{className:"p-4",children:"Total"}),U.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),U.jsx("tbody",{className:"divide-y divide-slate-700",children:et.map(le=>{var Ee;return U.jsxs("tr",{className:"hover:bg-slate-700/30",children:[U.jsxs("td",{className:"p-4 text-xs text-slate-500",children:["#",le.id.slice(-4)]}),U.jsxs("td",{className:"p-4 font-medium",children:[le.client||((Ee=n.find(st=>st.id===le.clientId))==null?void 0:Ee.name)||"Unknown",U.jsx("div",{className:"text-xs text-slate-500 max-w-[150px] truncate",children:le.deliveryLocation||"Sin ubicacin"})]}),U.jsx("td",{className:"p-4 text-sm font-bold text-center",children:le.items?le.items.length:1}),U.jsxs("td",{className:"p-4 text-brand-orange font-bold",children:["$",le.remaining]}),U.jsx("td",{className:"p-4",children:U.jsx("div",{className:"flex flex-col gap-2",children:U.jsxs("select",{value:le.status,onChange:st=>s(le.id,st.target.value),className:"bg-slate-900 border border-slate-600 rounded text-xs p-1 w-full",children:[U.jsx("option",{value:"pedido",children:"Pedido"}),U.jsx("option",{value:"proceso",children:"En Proceso"}),U.jsx("option",{value:"terminado",children:"Terminado"}),U.jsx("option",{value:"entregado",children:"Entregado"})]})})}),U.jsxs("td",{className:"p-4 font-bold",children:["$",le.total]}),U.jsx("td",{className:"p-4",children:U.jsxs("div",{className:"flex justify-center items-center gap-2",children:[U.jsx("button",{onClick:()=>H({type:"order",data:le}),className:"p-2 text-brand-orange hover:bg-brand-orange/20 rounded-full transition-colors",title:"Ver Detalles",children:U.jsx(Zie,{size:18})}),U.jsx("button",{onClick:()=>ie(le),className:"p-2 text-blue-400 hover:bg-blue-400/20 rounded-full transition-colors",title:"Editar",children:U.jsx(Nk,{size:18})}),U.jsx("button",{onClick:()=>I({orderId:le.id}),className:"p-2 text-purple-400 hover:bg-purple-400/20 rounded-full transition-colors",title:"Subir Foto",children:U.jsx(rI,{size:18})}),U.jsx("button",{onClick:()=>Mt(le.id),className:"p-2 text-red-400 hover:bg-red-400/20 rounded-full transition-colors",title:"Eliminar",children:U.jsx(Y1,{size:18})})]})})]},le.id)})})]})})]}),v==="clients"&&U.jsxs("div",{children:[U.jsxs("div",{className:"flex justify-between items-center mb-6",children:[U.jsx("h2",{className:"text-3xl font-display font-bold",children:"Clientes"}),U.jsxs("button",{onClick:()=>P(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[U.jsx(mb,{size:18})," Nuevo Cliente"]})]}),U.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(le=>U.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700",children:[U.jsxs("div",{className:"flex justify-between items-start",children:[U.jsx("h3",{className:"font-bold text-lg",children:le.name}),U.jsx("span",{className:`text-xs px-2 py-1 rounded uppercase font-bold 
                                            ${le.type==="distribuidor"?"bg-purple-500/20 text-purple-400":le.type==="mayorista"?"bg-blue-500/20 text-blue-400":"bg-slate-600/20 text-slate-400"}`,children:le.type})]}),U.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["ID: ",le.id?le.id.slice(-6):"N/A"]}),U.jsx("p",{className:"text-sm text-slate-400",children:le.email}),U.jsx("p",{className:"text-sm text-slate-400",children:le.phone}),(le.facebook||le.instagram)&&U.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 mt-1",children:[le.facebook&&U.jsxs("span",{children:["FB: ",le.facebook]}),le.instagram&&U.jsxs("span",{children:["IG: ",le.instagram]})]}),U.jsxs("p",{className:"text-xs text-slate-500 mt-2 truncate",children:[U.jsx("span",{className:"font-bold",children:"Direccin:"})," ",le.address||"Sin direccin"]}),U.jsxs("button",{onClick:()=>W(le),className:"mt-4 w-full py-2 bg-slate-700 hover:bg-slate-600 rounded text-xs font-bold flex justify-center items-center gap-2",children:[U.jsx(Nk,{size:14})," Editar"]})]},le.id))})]}),v==="leads"&&U.jsxs("div",{children:[U.jsxs("div",{className:"flex justify-between items-center mb-6",children:[U.jsx("h2",{className:"text-3xl font-display font-bold",children:"Cotizaciones"}),U.jsxs("div",{className:"flex gap-2",children:[U.jsxs("button",{onClick:()=>k(!0),className:"bg-brand-blue hover:bg-blue-600 px-3 py-2 rounded-lg font-bold flex items-center gap-2 text-sm",children:[U.jsx(mb,{size:16})," Nueva"]}),U.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded p-2 text-sm",onChange:le=>We({...Ae,status:le.target.value}),children:[U.jsx("option",{value:"all",children:"Ver Todos"}),U.jsx("option",{value:"Nuevo",children:"Nuevos"}),U.jsx("option",{value:"Aceptada",children:"Aceptadas"})]})]})]}),U.jsx("div",{className:"grid gap-4",children:ke.map(le=>U.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 flex justify-between items-center",children:[U.jsxs("div",{children:[U.jsx("h3",{className:"font-bold",children:le.name}),U.jsx("p",{className:"text-sm text-slate-400",children:le.details})]}),U.jsxs("div",{className:"flex items-center gap-4",children:[U.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${le.status==="Aceptada"?"bg-green-500/20 text-green-400":"bg-brand-orange/20 text-brand-orange"}`,children:le.status}),le.status!=="Aceptada"&&U.jsx("button",{onClick:()=>M({leadId:le.id,name:le.name,email:le.email,phone:le.phone,itemDesc:le.details,itemQty:le.quantity||1,price:0,deadline:""}),className:"bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded",children:"Aprobar"})]})]},le.id))}),U.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[U.jsx("button",{disabled:bt===0,onClick:()=>_e(le=>le-1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Anterior"}),U.jsxs("span",{className:"px-3 py-1",children:["Pg ",bt+1]}),U.jsx("button",{disabled:ke.length<Te,onClick:()=>_e(le=>le+1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Siguiente"})]})]})]}),S&&U.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:U.jsxs("form",{onSubmit:ht,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[U.jsx("h3",{className:"text-xl font-bold mb-4",children:he?"Editar Pedido":"Nuevo Pedido"}),U.jsxs("div",{className:"space-y-4",children:[U.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[U.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),U.jsxs("select",{name:"clientId",defaultValue:he?(Ye=e.find(le=>le.id===he))==null?void 0:Ye.clientId:"",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:le=>{if(le.target.value==="new")document.getElementById("newClientFields").style.display="block";else{document.getElementById("newClientFields").style.display="none";const Ee=n.find(st=>st.id===le.target.value);Ee&&Ee.address&&(document.getElementById("deliveryInput").value=Ee.address)}},children:[U.jsx("option",{value:"",children:"-- Seleccionar Cliente --"}),U.jsx("option",{value:"new",children:"+ Crear Nuevo Cliente"}),n.map(le=>U.jsxs("option",{value:le.id,children:[le.name," (",le.type,")"]},le.id))]}),U.jsxs("div",{id:"newClientFields",style:{display:"none"},className:"space-y-2 mt-2 border-t border-slate-600 pt-2",children:[U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"newClientName",placeholder:"Nombre Completo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"newClientContact",placeholder:"Email",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),U.jsx("input",{name:"newClientPhone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-1",children:"Direccin"}),U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"newClientStreet",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"newClientColony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"newClientZip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"newClientState",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]})]}),U.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[U.jsxs("div",{className:"flex justify-between items-center mb-2",children:[U.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase",children:"Productos"}),U.jsxs("button",{type:"button",onClick:Ne,className:"text-xs text-brand-blue hover:underline flex items-center gap-1",children:[U.jsx(mb,{size:12})," Agregar"]})]}),U.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2",children:oe.map((le,Ee)=>U.jsxs("div",{className:"flex gap-2 items-center",children:[U.jsx("input",{placeholder:"Descripcin",value:le.desc,onChange:st=>de(Ee,"desc",st.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),U.jsx("input",{type:"number",placeholder:"Cant",value:le.qty,onChange:st=>de(Ee,"qty",st.target.value),className:"w-16 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0,min:"1"}),U.jsx("input",{type:"number",placeholder:"$ Unit",value:le.price,onChange:st=>de(Ee,"price",st.target.value),className:"w-24 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),oe.length>1&&U.jsx("button",{type:"button",onClick:()=>Q(Ee),className:"text-red-400 hover:text-red-300",children:U.jsx(Y1,{size:16})})]},Ee))})]}),U.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Totales"}),U.jsxs("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-600",children:[U.jsxs("div",{className:"flex justify-between mb-1 text-sm",children:[U.jsx("span",{children:"Subtotal:"}),U.jsxs("span",{className:"font-bold",children:["$",te.toFixed(2)]})]}),U.jsxs("div",{className:"flex justify-between items-center",children:[U.jsx("span",{className:"text-xs text-gray-400",children:"Anticipo:"}),U.jsx("input",{name:"advance",type:"number",defaultValue:"0",className:"w-24 bg-black/50 border border-slate-700 rounded p-1 text-right text-sm"})]})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Entrega"}),U.jsx("textarea",{id:"deliveryInput",name:"delivery",placeholder:"Direccin de entrega...",className:"w-full h-full bg-slate-900 border border-slate-600 rounded p-2 text-sm resize-none",required:!0})]})]})]}),U.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[U.jsx("button",{type:"button",onClick:()=>w(!1),className:"text-slate-400",children:"Cancelar"}),U.jsxs("button",{type:"submit",className:"bg-brand-blue px-6 py-2 rounded font-bold hover:bg-blue-600",children:[he?"Actualizar Pedido":"Crear Pedido"," ($",te.toFixed(2),")"]})]})]})}),R&&U.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:U.jsxs("form",{onSubmit:He,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[U.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo Cliente"}),U.jsxs("div",{className:"space-y-3",children:[U.jsx("input",{name:"name",placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),U.jsx("input",{name:"email",placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"phone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"facebook",placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"instagram",placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),U.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-2",children:"Direccin"}),U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"street",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),U.jsxs("select",{name:"type",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[U.jsx("option",{value:"normal",children:"Normal"}),U.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),U.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),U.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[U.jsx("button",{type:"button",onClick:()=>P(!1),className:"text-slate-400",children:"Cancelar"}),U.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar"})]})]})}),_&&U.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:U.jsxs("form",{onSubmit:Ze,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[U.jsx("h3",{className:"text-xl font-bold mb-4",children:"Aprobar Cotizacin & Crear Pedido"}),U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[U.jsxs("div",{className:"space-y-3",children:[U.jsx("h4",{className:"text-xs text-brand-blue font-bold uppercase border-b border-brand-blue/30 pb-1",children:"Datos del Cliente"}),U.jsx("input",{name:"name",defaultValue:_.name,placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),U.jsx("input",{name:"email",defaultValue:_.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"phone",defaultValue:_.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),U.jsxs("div",{className:"bg-black/20 p-2 rounded",children:[U.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Direccin (Opcional)"}),U.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[U.jsx("input",{name:"street",placeholder:"Calle y Nm",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),U.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]}),U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),U.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]})]})]}),U.jsxs("div",{className:"space-y-3",children:[U.jsx("h4",{className:"text-xs text-brand-orange font-bold uppercase border-b border-brand-orange/30 pb-1",children:"Datos del Pedido"}),U.jsxs("div",{children:[U.jsx("label",{className:"text-xs text-gray-400",children:"Producto / Descripcin"}),U.jsx("textarea",{name:"itemDesc",defaultValue:_.itemDesc,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm h-20 resize-none",required:!0})]}),U.jsxs("div",{className:"flex gap-2",children:[U.jsxs("div",{className:"flex-1",children:[U.jsx("label",{className:"text-xs text-gray-400",children:"Cantidad"}),U.jsx("input",{name:"itemQty",type:"number",defaultValue:_.itemQty,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),U.jsxs("div",{className:"flex-1",children:[U.jsx("label",{className:"text-xs text-gray-400",children:"Precio Unit."}),U.jsx("input",{name:"itemPrice",type:"number",step:"0.01",placeholder:"$0.00",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",onChange:le=>{const Ee=parseFloat(le.target.value)||0,st=parseFloat(document.querySelector('input[name="itemQty"]').value)||1;document.getElementById("approvalTotal").value=(Ee*st).toFixed(2)},required:!0})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"text-xs text-gray-400",children:"Total del Pedido"}),U.jsx("input",{id:"approvalTotal",name:"total",readOnly:!0,className:"w-full bg-black/40 border border-slate-600 rounded p-2 font-bold text-white"})]}),U.jsxs("div",{className:"flex gap-2",children:[U.jsxs("div",{className:"flex-1",children:[U.jsx("label",{className:"text-xs text-gray-400",children:"Anticipo"}),U.jsx("input",{name:"advance",type:"number",defaultValue:"0",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),U.jsxs("div",{className:"flex-1",children:[U.jsx("label",{className:"text-xs text-gray-400",children:"Fecha Entrega"}),U.jsx("input",{name:"deadline",type:"date",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]})]})]})]}),U.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[U.jsx("button",{type:"button",onClick:()=>M(null),className:"text-slate-400 hover:text-white",children:"Cancelar"}),U.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded font-bold",children:"Generar Pedido"})]})]})}),F&&U.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:U.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl w-full max-w-sm border border-slate-700 text-center",children:[U.jsx("h3",{className:"text-xl font-bold mb-4",children:"Evidencia del Pedido"}),U.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Sube una foto de cmo va el pedido o cmo qued (Max 1MB)."}),U.jsx("input",{type:"file",accept:"image/*",onChange:je,className:`block w-full text-sm text-slate-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-full file:border-0
                            file:text-sm file:font-semibold
                            file:bg-brand-blue file:text-white
                            hover:file:bg-blue-600 mb-6`}),U.jsx("button",{onClick:()=>I(null),className:"text-slate-400 text-sm",children:"Cancelar"})]})}),L&&U.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:U.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl w-full max-w-2xl border border-slate-700 shadow-2xl relative max-h-[90vh] overflow-y-auto",children:[U.jsx("button",{onClick:()=>H(null),className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:U.jsx(Y1,{size:20,className:"rotate-45"})}),U.jsxs("h3",{className:"text-2xl font-bold mb-6 text-white flex items-center gap-2",children:[L.type==="order"?U.jsx(iI,{className:"text-brand-blue"}):U.jsx(Tag,{className:"text-brand-orange"}),"Detalle de ",L.type==="order"?"Pedido":"Cotizacin"]}),U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[U.jsxs("div",{className:"space-y-4",children:[U.jsxs("div",{children:[U.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Cliente"}),U.jsx("p",{className:"text-white text-lg font-bold",children:L.type==="order"?(Le=n.find(le=>le.id===L.data.clientId))==null?void 0:Le.name:L.data.name}),U.jsx("p",{className:"text-sm text-gray-400",children:L.type==="order"?(Tt=n.find(le=>le.id===L.data.clientId))==null?void 0:Tt.email:L.data.email})]}),L.data.items&&L.data.items.length>0&&U.jsxs("div",{children:[U.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Desglose de Artculos"}),U.jsx("div",{className:"bg-black/30 rounded-lg p-3 space-y-2",children:L.data.items.map((le,Ee)=>U.jsxs("div",{className:"flex justify-between text-sm",children:[U.jsxs("span",{className:"text-slate-200",children:[le.qty,"x ",le.desc]}),le.price&&U.jsxs("span",{className:"text-slate-500",children:["$",le.price]})]},Ee))})]}),!L.data.items&&U.jsxs("div",{children:[U.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Descripcin"}),U.jsx("p",{className:"text-slate-300",children:L.data.desc||L.data.details}),U.jsxs("p",{className:"text-slate-300 text-sm mt-1",children:["Cantidad: ",L.data.quantity||1]})]}),L.type==="order"&&U.jsxs("div",{className:"bg-brand-blue/10 p-4 rounded-xl border border-brand-blue/30",children:[U.jsxs("div",{className:"flex justify-between mb-1",children:[U.jsx("span",{className:"text-gray-400",children:"Total"}),U.jsxs("span",{className:"text-white font-bold",children:["$",L.data.total]})]}),U.jsxs("div",{className:"flex justify-between mb-1",children:[U.jsx("span",{className:"text-gray-400",children:"Anticipo"}),U.jsxs("span",{className:"text-green-400 font-bold",children:["-$",L.data.advance]})]}),U.jsxs("div",{className:"border-t border-white/10 pt-2 flex justify-between",children:[U.jsx("span",{className:"text-brand-orange font-bold",children:"Restante"}),U.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",L.data.remaining]})]})]})]}),U.jsxs("div",{className:"space-y-4",children:[L.data.progressImage&&U.jsxs("div",{children:[U.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Evidencia / Progreso"}),U.jsx("img",{src:L.data.progressImage,className:"w-full rounded-xl border border-slate-600"})]}),L.data.refType==="link"&&L.data.refLink&&U.jsxs("div",{children:[U.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Referencia"}),U.jsx("a",{href:L.data.refLink,target:"_blank",className:"text-brand-blue underline break-all text-sm",children:L.data.refLink})]})]})]}),U.jsx("div",{className:"mt-8 pt-6 border-t border-slate-700 flex justify-end",children:U.jsx("button",{onClick:()=>H(null),className:"px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white",children:"Cerrar"})})]})}),q&&U.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:U.jsxs("form",{onSubmit:Ct,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[U.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),U.jsxs("div",{className:"space-y-3",children:[U.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[U.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Nombre"}),U.jsx("input",{name:"name",defaultValue:q.name,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),U.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[U.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Contacto"}),U.jsx("input",{name:"email",defaultValue:q.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2"}),U.jsx("input",{name:"phone",defaultValue:q.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),U.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[U.jsx("input",{name:"facebook",defaultValue:q.facebook,placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"instagram",defaultValue:q.instagram,placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),U.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[U.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Direccin"}),U.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[U.jsx("input",{name:"street",defaultValue:q.street,placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"colony",defaultValue:q.colony,placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"zip",defaultValue:q.zip,placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"state",defaultValue:q.state,placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),U.jsxs("select",{name:"type",defaultValue:q.type,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[U.jsx("option",{value:"normal",children:"Normal"}),U.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),U.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),U.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[U.jsx("button",{type:"button",onClick:()=>W(null),className:"text-slate-400",children:"Cancelar"}),U.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar Cambios"})]})]})}),O&&U.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:U.jsxs("form",{onSubmit:Oe,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-lg border border-slate-700",children:[U.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nueva Cotizacin"}),U.jsxs("div",{className:"space-y-4",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),U.jsxs("select",{name:"clientId",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:le=>D(le.target.value==="manual"),children:[U.jsx("option",{value:"manual",children:"-- Cliente Manual / Nuevo --"}),n.map(le=>U.jsx("option",{value:le.id,children:le.name},le.id))]}),B&&U.jsxs("div",{className:"space-y-2 border-t border-slate-600 pt-2",children:[U.jsx("input",{name:"manualName",placeholder:"Nombre Cliente",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),U.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.jsx("input",{name:"manualEmail",placeholder:"Correo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),U.jsx("input",{name:"manualPhone",placeholder:"Telfono",className:"bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Detalles"}),U.jsx("textarea",{name:"details",placeholder:"Describe lo que el cliente quiere cotizar...",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 h-24 resize-none",required:!0})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cantidad"}),U.jsx("input",{name:"quantity",type:"number",defaultValue:"1",className:"w-24 bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]}),U.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[U.jsx("button",{type:"button",onClick:()=>k(!1),className:"text-slate-400",children:"Cancelar"}),U.jsx("button",{type:"submit",className:"bg-brand-blue px-6 py-2 rounded font-bold hover:bg-blue-600",children:"Crear Cotizacin"})]})]})})]})},G1=({id:n,icon:e,label:t,active:i,set:r})=>U.jsxs("button",{onClick:()=>r(n),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-colors ${i===n?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[e," ",U.jsx("span",{children:t})]}),mv=({title:n,value:e,icon:t,color:i="text-white"})=>U.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 flex flex-col justify-between",children:[U.jsxs("div",{className:"flex justify-between items-start mb-2",children:[U.jsx("h3",{className:"text-slate-400 text-xs font-bold uppercase",children:n}),t]}),U.jsx("p",{className:`text-3xl font-bold ${i}`,children:e})]}),VMe=()=>{const{addLead:n}=vA(),[e,t]=j.useState({name:"",email:"",phone:"",quantity:1,details:"",refType:"link",refLink:""}),[i,r]=j.useState(!1),[a,s]=j.useState(!1),l=p=>{const{id:g,value:v}=p.target;t(b=>({...b,[g]:v}))},c=p=>{t(g=>({...g,refType:p.target.value}))},h=p=>{if(p.preventDefault(),i)return;r(!0);const g=n(e);let v=` *Nueva Solicitud de Cotizacin*

`;v+=` *Nombre:* ${e.name}
`,v+=` *Correo:* ${e.email}
`,e.phone&&(v+=` *Telfono:* ${e.phone}
`),v+=` *Piezas:* ${e.quantity}
`,e.refType==="link"&&e.refLink?v+=` *Referencia:* ${e.refLink}
`:v+=` *Referencia:* (Envo imagen a continuacin)
`,e.details&&(v+=` *Detalles:* ${e.details}
`),g&&g.id&&(v+=`
ID: ${g.id}`),window.open(`https://wa.me/525619956812?text=${encodeURIComponent(v)}`,"_blank"),s(!0),r(!1),t({name:"",email:"",phone:"",quantity:1,details:"",refType:"link",refLink:""})};return U.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans py-20 px-4 relative overflow-hidden",children:[U.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[U.jsx("div",{className:"absolute top-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse"}),U.jsx("div",{className:"absolute bottom-1/4 -left-20 w-96 h-96 bg-brand-blue/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),U.jsxs("div",{className:"max-w-2xl mx-auto",children:[U.jsxs(xc,{to:"/",className:"inline-flex items-center text-gray-400 hover:text-white mb-8 transition-colors",children:[U.jsx(xO,{className:"mr-2",size:20})," Volver al Inicio"]}),U.jsxs("div",{className:"glass p-8 md:p-10 rounded-3xl shadow-2xl",children:[U.jsxs("div",{className:"text-center mb-8",children:[U.jsxs("h1",{className:"font-display text-4xl font-bold mb-4",children:["Cotiza tu ",U.jsx("span",{className:"text-brand-blue",children:"Proyecto"})]}),U.jsx("p",{className:"text-gray-400",children:"Cuntanos tu idea para imprimirla en 3D."})]}),a&&U.jsxs("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 p-4 rounded-xl mb-6 text-center animate-fade-in",children:[U.jsx("p",{className:"font-bold",children:"Cotizacin creada con xito!"}),U.jsx("p",{className:"text-sm",children:"Te hemos redirigido a WhatsApp para continuar."})]}),U.jsxs("form",{onSubmit:h,className:"space-y-6",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre Completo"}),U.jsx("input",{type:"text",id:"name",required:!0,value:e.name,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Correo Electrnico"}),U.jsx("input",{type:"email",id:"email",required:!0,value:e.email,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Telfono / WhatsApp"}),U.jsx("input",{type:"tel",id:"phone",value:e.phone,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nmero de piezas"}),U.jsx("input",{type:"number",id:"quantity",min:"1",required:!0,value:e.quantity,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Tienes una referencia?"}),U.jsxs("div",{className:"flex gap-4 mb-4",children:[U.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[U.jsx("input",{type:"radio",name:"ref-type",value:"link",checked:e.refType==="link",onChange:c,className:"text-brand-blue"}),U.jsx("span",{children:"Enlace (Link)"})]}),U.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[U.jsx("input",{type:"radio",name:"ref-type",value:"image",checked:e.refType==="image",onChange:c,className:"text-brand-blue"}),U.jsx("span",{children:"Imagen"})]})]}),e.refType==="link"?U.jsx("input",{type:"url",id:"refLink",value:e.refLink,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all",placeholder:"https://..."}):U.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-xl p-6 text-center text-gray-400",children:[U.jsx(rI,{className:"mx-auto mb-2"}),U.jsx("span",{className:"text-sm",children:"La imagen se enviar en el chat de WhatsApp"})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Detalles Adicionales"}),U.jsx("textarea",{id:"details",rows:"3",value:e.details,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),U.jsx("button",{type:"submit",disabled:i,className:`w-full bg-brand-blue hover:bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.01] ${i?"opacity-50 cursor-not-allowed":""}`,children:i?"Procesando...":"Continuar en WhatsApp"})]})]})]})]})},v5=()=>{const{addOrder:n,addClient:e,clients:t}=vA(),i=R5(),[r,a]=j.useState(""),[s,l]=j.useState(""),[c,h]=j.useState([{desc:"",qty:1,price:""}]),p=j.useMemo(()=>c.reduce((M,S)=>M+parseFloat(S.price||0)*parseFloat(S.qty||1),0),[c]),g=()=>{h([...c,{desc:"",qty:1,price:""}])},v=M=>{h(c.filter((S,w)=>w!==M))},b=(M,S,w)=>{const R=[...c];R[M][S]=w,h(R)},_=async M=>{M.preventDefault();let S=null;const w=s.trim().toLowerCase(),R=t.find(P=>P.email&&P.email.toLowerCase()===w||P.phone&&P.phone===w);R?S=R.id:S=(await e({name:r||"Cliente Mostrador",email:s.includes("@")?s:"",phone:s.includes("@")?"":s,type:"normal",address:"En Tienda",street:"En Tienda",colony:"",zip:"",state:""})).id,await n({clientId:S,items:c.map(P=>({...P,price:parseFloat(P.price).toFixed(2)})),total:p.toFixed(2),advance:p.toFixed(2),deliveryLocation:"Entregado en Tienda",status:"entregado",date:new Date().toLocaleDateString("es-MX")}),alert("Venta registrada con xito!"),i("/admin")};return U.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 font-sans p-6 md:p-12",children:U.jsxs("div",{className:"max-w-3xl mx-auto",children:[U.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[U.jsx(xc,{to:"/admin",className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700 transition-colors",children:U.jsx(xO,{size:24})}),U.jsxs("h1",{className:"text-3xl font-display font-bold flex items-center gap-3",children:[U.jsx(Y6,{className:"text-brand-orange"}),"Registro de Venta ",U.jsx("span",{className:"text-slate-500 font-normal text-xl",children:"| Mostrador"})]})]}),U.jsxs("form",{onSubmit:_,className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-2xl",children:[U.jsxs("div",{className:"mb-8",children:[U.jsx("h2",{className:"text-xs font-bold text-brand-blue uppercase tracking-wider mb-4 border-b border-brand-blue/20 pb-2",children:"Datos del Cliente"}),U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Nombre Cliente"}),U.jsx("input",{type:"text",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Ej. Juan Prez",value:r,onChange:M=>a(M.target.value)})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Contacto (Email / Tel)"}),U.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Opcional",value:s,onChange:M=>l(M.target.value)})]})]})]}),U.jsxs("div",{className:"mb-8",children:[U.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-white/10 pb-2",children:[U.jsx("h2",{className:"text-xs font-bold text-brand-orange uppercase tracking-wider",children:"Productos"}),U.jsxs("button",{type:"button",onClick:g,className:"text-xs bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded-full flex items-center gap-1 transition-colors",children:[U.jsx(mb,{size:14})," Agregar Producto"]})]}),U.jsx("div",{className:"space-y-3",children:c.map((M,S)=>U.jsxs("div",{className:"flex gap-3 items-start animate-fade-in-up",children:[U.jsx("div",{className:"flex-1",children:U.jsx("input",{type:"text",placeholder:"Descripcin del producto...",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm focus:border-brand-orange focus:outline-none transition-colors",value:M.desc,onChange:w=>b(S,"desc",w.target.value)})}),U.jsx("div",{className:"w-20",children:U.jsx("input",{type:"number",placeholder:"Cant.",required:!0,min:"1",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm text-center focus:border-brand-orange focus:outline-none transition-colors",value:M.qty,onChange:w=>b(S,"qty",w.target.value)})}),U.jsxs("div",{className:"w-32 relative",children:[U.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"$"}),U.jsx("input",{type:"number",placeholder:"0.00",required:!0,step:"0.50",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 pl-6 text-sm text-right focus:border-brand-orange focus:outline-none transition-colors",value:M.price,onChange:w=>b(S,"price",w.target.value)})]}),c.length>1&&U.jsx("button",{type:"button",onClick:()=>v(S),className:"p-3 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",children:U.jsx(Y1,{size:18})})]},S))})]}),U.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl flex flex-col md:flex-row justify-between items-center gap-6",children:[U.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[U.jsx(oE,{size:16}),U.jsxs("span",{children:["La venta se registrar como ",U.jsx("strong",{children:"ENTREGADA"})," y pagada al 100%."]})]}),U.jsxs("div",{className:"flex items-center gap-6",children:[U.jsxs("div",{className:"text-right",children:[U.jsx("span",{className:"block text-xs text-slate-400 uppercase font-bold",children:"Total a Pagar"}),U.jsxs("span",{className:"text-3xl font-display font-bold text-white",children:["$",p.toFixed(2)]})]}),U.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-500 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg shadow-blue-500/20 hover:scale-[1.02] transition-all flex items-center gap-2",children:[U.jsx(oE,{size:24})," Registrar Venta"]})]})]})]})]})})},jMe=()=>{const{clients:n,orders:e}=vA(),[t,i]=j.useState(""),[r,a]=j.useState(null),[s,l]=j.useState(""),c=h=>{h.preventDefault(),l(""),a(null);const p=t.trim().toLowerCase();if(!p)return;let g=[];const v=e.find(b=>b.id.toString()===p||b.id.toString().endsWith(p));if(v)g.push(v);else{const b=n.find(_=>_.id===p||_.email&&_.email.toLowerCase()===p||_.phone&&_.phone.replace(/\D/g,"")===p.replace(/\D/g,""));b&&(g=e.filter(_=>String(_.clientId)===String(b.id)))}g.length>0?a(g.reverse()):l("No se encontraron pedidos con esa informacin.")};return U.jsxs("div",{className:"min-h-screen bg-brand-dark text-slate-100 font-sans flex flex-col items-center justify-center p-4",children:[U.jsx("div",{className:"absolute top-8 left-8",children:U.jsx(xc,{to:"/",className:"text-gray-400 hover:text-white",children:" Volver"})}),U.jsxs("div",{className:"w-full max-w-2xl",children:[U.jsxs("h1",{className:"text-3xl font-display font-bold text-center mb-2",children:["Revisa estatus de tu ",U.jsx("span",{className:"text-brand-orange",children:"Pedido"})]}),U.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Ingresa tu ID de pedido, correo o telfono."}),U.jsxs("div",{className:"glass p-8 rounded-2xl shadow-xl border border-white/10 mb-8",children:[U.jsxs("form",{onSubmit:c,className:"flex gap-4",children:[U.jsx("input",{type:"text",required:!0,value:t,onChange:h=>i(h.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",placeholder:"ID, Correo o Telfono..."}),U.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-600 text-white font-bold px-6 py-3 rounded-lg transition-all flex items-center gap-2",children:[U.jsx(dre,{size:18})," Buscar"]})]}),s&&U.jsxs("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg text-sm text-center flex items-center justify-center gap-2",children:[U.jsx(Gie,{size:16})," ",s]})]}),r&&r.length>0&&U.jsx("div",{className:"space-y-6",children:r.map(h=>U.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-6 shadow-2xl animate-float",children:[U.jsxs("div",{className:"flex justify-between items-start mb-6",children:[U.jsxs("div",{children:[U.jsxs("h3",{className:"font-bold text-xl text-white",children:["Pedido #",h.id.slice(-4)]}),U.jsx("p",{className:"text-xs text-gray-500",children:h.id}),U.jsxs("p",{className:"text-gray-400 text-sm",children:["Fecha: ",h.date]})]}),U.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase
                                        ${h.status==="entregado"?"bg-green-500/20 text-green-400":h.status==="terminado"?"bg-blue-500/20 text-blue-400":"bg-brand-orange/20 text-brand-orange"}`,children:h.status})]}),U.jsxs("div",{className:"space-y-4 mb-6",children:[U.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[U.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Productos"}),h.items&&h.items.map((p,g)=>U.jsxs("div",{className:"flex justify-between text-sm text-slate-200 mb-1 border-b border-slate-700/50 pb-1 last:border-0 last:pb-0",children:[U.jsxs("span",{children:[p.qty,"x ",p.desc]}),p.price&&U.jsxs("span",{className:"text-gray-500",children:["$",p.price," c/u"]})]},g))]}),U.jsx("div",{className:"flex items-center gap-3 text-slate-300",children:h.status==="entregado"?U.jsxs(U.Fragment,{children:[U.jsx(oE,{className:"text-green-400"}),U.jsx("span",{className:"text-green-400 font-bold",children:"Entregado!"})]}):U.jsxs(U.Fragment,{children:[U.jsx($ie,{className:"text-brand-orange"}),U.jsxs("span",{children:["Entrega estimada: ",h.deadline||"Pendiente"]})]})}),h.progressImage&&U.jsxs("div",{className:"mt-4",children:[U.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Avance del Pedido"}),U.jsx("img",{src:h.progressImage,alt:"Avance",className:"w-full rounded-lg border border-slate-600 shadow-lg"})]})]}),U.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[U.jsxs("div",{className:"flex justify-between mb-2",children:[U.jsx("span",{className:"text-gray-400",children:"Total"}),U.jsxs("span",{className:"text-white font-bold",children:["$",h.total]})]}),U.jsxs("div",{className:"flex justify-between mb-2",children:[U.jsx("span",{className:"text-gray-400",children:"Pagado (Anticipo)"}),U.jsxs("span",{className:"text-green-400 font-bold",children:["-$",h.advance||0]})]}),U.jsx("div",{className:"border-t border-slate-700 my-2"}),U.jsxs("div",{className:"flex justify-between",children:[U.jsx("span",{className:"text-brand-orange font-bold",children:"Por Pagar"}),U.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",h.remaining||h.total]})]})]})]},h.id))})]})]})};function HMe(){return U.jsx(x$,{children:U.jsxs(d$,{children:[U.jsx(qp,{path:"/",element:U.jsx(_re,{})}),U.jsx(qp,{path:"/admin",element:U.jsx(BMe,{})}),U.jsx(qp,{path:"/quote",element:U.jsx(VMe,{})}),U.jsx(qp,{path:"/status",element:U.jsx(jMe,{})}),U.jsx(qp,{path:"/venta-tienda",element:U.jsx(v5,{})}),U.jsx(qp,{path:"/venta-fisica",element:U.jsx(v5,{})})]})})}class GMe extends Dm.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?U.jsxs("div",{style:{color:"red",padding:"20px",background:"white"},children:[U.jsx("h1",{children:"Something went wrong."}),U.jsx("pre",{children:this.state.error&&this.state.error.toString()}),U.jsx("pre",{children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}):this.props.children}}_W.createRoot(document.getElementById("root")).render(U.jsx(Dm.StrictMode,{children:U.jsx(GMe,{children:U.jsx(Nue,{children:U.jsx(HMe,{})})})}));
